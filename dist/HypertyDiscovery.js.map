{"version":3,"sources":["HypertyDiscovery.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","HypertyDiscovery","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","default","__esModule","core-js/library/fn/json/stringify","2","core-js/library/fn/object/define-property","3","core-js/library/fn/object/keys","4","core-js/library/fn/promise","5","instance","Constructor","TypeError","6","_interopRequireDefault","obj","_defineProperty","_defineProperty2","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","../core-js/object/define-property","7","core","it","JSON","stringify","apply","arguments","../../modules/$.core","8","$","desc","setDesc","../../modules/$","9","Object","keys","../../modules/es6.object.keys","10","Promise","../modules/$.core","../modules/es6.object.to-string","../modules/es6.promise","../modules/es6.string.iterator","../modules/web.dom.iterable","11","12","13","isObject","./$.is-object","14","cof","TAG","ARG","O","T","B","undefined","callee","./$.cof","./$.wks","15","toString","slice","16","version","__e","17","aFunction","fn","that","b","c","./$.a-function","18","19","defineProperty","get","./$.fails","20","document","is","createElement","./$.global","21","ctx","PROTOTYPE","$export","type","name","source","own","out","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","S","IS_PROTO","P","IS_BIND","IS_WRAP","W","C","param","Function","./$.core","./$.ctx","22","exec","23","isArrayIter","anObject","toLength","getIterFn","iterable","entries","step","iterator","iterFn","index","next","done","value","./$.an-object","./$.is-array-iter","./$.iter-call","./$.to-length","./core.get-iterator-method","24","Math","__g","25","hasOwnProperty","26","createDesc","object","./$","./$.descriptors","./$.property-desc","27","documentElement","28","args","un","29","propertyIsEnumerable","split","30","Iterators","ITERATOR","ArrayProto","Array","./$.iterators","31","32","ret","33","setToStringTag","IteratorPrototype","NAME","create","./$.hide","./$.set-to-string-tag","34","LIBRARY","redefine","hide","has","$iterCreate","getProto","BUGGY","FF_ITERATOR","KEYS","VALUES","returnThis","Base","DEFAULT","IS_SET","FORCED","methods","getMethod","kind","proto","DEF_VALUES","VALUES_BUG","$native","$default","values","./$.export","./$.has","./$.iter-create","./$.library","./$.redefine","35","SAFE_CLOSING","riter","from","skipClosing","safe","arr","iter","36","37","38","$Object","getPrototypeOf","isEnum","getDesc","getOwnPropertyDescriptor","setDescs","getKeys","getNames","getOwnPropertyNames","getSymbols","getOwnPropertySymbols","each","forEach","39","40","head","last","notify","macrotask","set","Observer","MutationObserver","WebKitMutationObserver","process","isNode","flush","parent","domain","exit","enter","nextTick","toggle","node","createTextNode","observe","characterData","data","resolve","then","task","./$.task","41","fails","KEY","exp","42","bitmap","43","src","44","45","x","y","46","check","setPrototypeOf","test","buggy","__proto__","47","DESCRIPTORS","SPECIES","48","def","tag","stat","49","SHARED","store","50","D","constructor","51","52","toInteger","defined","TO_STRING","pos","String","charCodeAt","charAt","./$.defined","./$.to-integer","53","defer","channel","port","invoke","html","cel","setTask","setImmediate","clearTask","clearImmediate","MessageChannel","counter","queue","ONREADYSTATECHANGE","run","id","listner","event","push","port2","port1","onmessage","postMessage","addEventListener","importScripts","appendChild","removeChild","setTimeout","clear","./$.dom-create","./$.html","./$.invoke","54","ceil","floor","isNaN","55","IObject","./$.iobject","56","min","57","58","px","random","concat","59","uid","Symbol","./$.shared","./$.uid","60","classof","getIteratorMethod","./$.classof","61","addToUnscopables","toIObject","iterated","_t","_i","_k","Arguments","./$.add-to-unscopables","./$.iter-define","./$.iter-step","./$.to-iobject","62","toObject","$keys","./$.object-sap","./$.to-object","63","64","Wrapper","strictNew","forOf","setProto","same","speciesConstructor","asap","PROMISE","testResolve","sub","USE_NATIVE","P2","works","thenableThenGotten","sameConstructor","getConstructor","isThenable","PromiseCapability","reject","promise","$$resolve","$$reject","perform","error","record","isReject","chain","v","ok","reaction","result","handler","fail","h","console","p","isUnhandled","emit","onunhandledrejection","reason","_d","$reject","d","$resolve","wrapper","executor","err","onFulfilled","onRejected","catch","capability","all","abrupt","remaining","results","alreadyCalled","race","./$.for-of","./$.iter-detect","./$.microtask","./$.redefine-all","./$.same-value","./$.set-proto","./$.set-species","./$.species-constructor","./$.strict-new","65","$at","point","./$.string-at","66","NodeList","HTMLCollection","./es6.array.iterator","67","_HypertyDiscovery","_HypertyDiscovery2","./hyperty-discovery/HypertyDiscovery","68","_promise","_promise2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_utils","hypertyURL","msgBus","_this","messageBus","divideURL","discoveryURL","activeDomain","msg","to","body","resource","reply","dataObjectUrl","url","email","identityURL","substring","indexOf","message","log","hyperty","mostRecent","lastHyperty","lastModified","Date","hypertyDate","getTime","idPackage","../utils/utils","babel-runtime/core-js/promise","babel-runtime/helpers/classCallCheck","babel-runtime/helpers/createClass","69","re","subst","parts","replace","identity","divideEmail","indexOfAt","username","emptyObject","_keys2","deepClone","parse","_stringify2","getUserURLFromEmail","userEmail","getUserEmailFromURL","userURL","convertToUserURL","identifier","dividedURL","_stringify","_keys","babel-runtime/core-js/json/stringify","babel-runtime/core-js/object/keys"],"mappings":"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","file":"HypertyDiscovery.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.HypertyDiscovery = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n},{\"core-js/library/fn/json/stringify\":7}],2:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n},{\"core-js/library/fn/object/define-property\":8}],3:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };\n},{\"core-js/library/fn/object/keys\":9}],4:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/promise\"), __esModule: true };\n},{\"core-js/library/fn/promise\":10}],5:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n},{}],6:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n},{\"../core-js/object/define-property\":2}],7:[function(require,module,exports){\nvar core = require('../../modules/$.core');\nmodule.exports = function stringify(it){ // eslint-disable-line no-unused-vars\n  return (core.JSON && core.JSON.stringify || JSON.stringify).apply(JSON, arguments);\n};\n},{\"../../modules/$.core\":16}],8:[function(require,module,exports){\nvar $ = require('../../modules/$');\nmodule.exports = function defineProperty(it, key, desc){\n  return $.setDesc(it, key, desc);\n};\n},{\"../../modules/$\":38}],9:[function(require,module,exports){\nrequire('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/$.core').Object.keys;\n},{\"../../modules/$.core\":16,\"../../modules/es6.object.keys\":62}],10:[function(require,module,exports){\nrequire('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.promise');\nmodule.exports = require('../modules/$.core').Promise;\n},{\"../modules/$.core\":16,\"../modules/es6.object.to-string\":63,\"../modules/es6.promise\":64,\"../modules/es6.string.iterator\":65,\"../modules/web.dom.iterable\":66}],11:[function(require,module,exports){\nmodule.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n},{}],12:[function(require,module,exports){\nmodule.exports = function(){ /* empty */ };\n},{}],13:[function(require,module,exports){\nvar isObject = require('./$.is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n},{\"./$.is-object\":31}],14:[function(require,module,exports){\n// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./$.cof')\n  , TAG = require('./$.wks')('toStringTag')\n  // ES3 wrong here\n  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\nmodule.exports = function(it){\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = (O = Object(it))[TAG]) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n},{\"./$.cof\":15,\"./$.wks\":59}],15:[function(require,module,exports){\nvar toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};\n},{}],16:[function(require,module,exports){\nvar core = module.exports = {version: '1.2.6'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n},{}],17:[function(require,module,exports){\n// optional / simple context binding\nvar aFunction = require('./$.a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n},{\"./$.a-function\":11}],18:[function(require,module,exports){\n// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n},{}],19:[function(require,module,exports){\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./$.fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n},{\"./$.fails\":22}],20:[function(require,module,exports){\nvar isObject = require('./$.is-object')\n  , document = require('./$.global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};\n},{\"./$.global\":24,\"./$.is-object\":31}],21:[function(require,module,exports){\nvar global    = require('./$.global')\n  , core      = require('./$.core')\n  , ctx       = require('./$.ctx')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && key in target;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(param){\n        return this instanceof C ? new C(param) : C(param);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    if(IS_PROTO)(exports[PROTOTYPE] || (exports[PROTOTYPE] = {}))[key] = out;\n  }\n};\n// type bitmap\n$export.F = 1;  // forced\n$export.G = 2;  // global\n$export.S = 4;  // static\n$export.P = 8;  // proto\n$export.B = 16; // bind\n$export.W = 32; // wrap\nmodule.exports = $export;\n},{\"./$.core\":16,\"./$.ctx\":17,\"./$.global\":24}],22:[function(require,module,exports){\nmodule.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n},{}],23:[function(require,module,exports){\nvar ctx         = require('./$.ctx')\n  , call        = require('./$.iter-call')\n  , isArrayIter = require('./$.is-array-iter')\n  , anObject    = require('./$.an-object')\n  , toLength    = require('./$.to-length')\n  , getIterFn   = require('./core.get-iterator-method');\nmodule.exports = function(iterable, entries, fn, that){\n  var iterFn = getIterFn(iterable)\n    , f      = ctx(fn, that, entries ? 2 : 1)\n    , index  = 0\n    , length, step, iterator;\n  if(typeof iterFn != 'function')throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if(isArrayIter(iterFn))for(length = toLength(iterable.length); length > index; index++){\n    entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n  } else for(iterator = iterFn.call(iterable); !(step = iterator.next()).done; ){\n    call(iterator, f, step.value, entries);\n  }\n};\n},{\"./$.an-object\":13,\"./$.ctx\":17,\"./$.is-array-iter\":30,\"./$.iter-call\":32,\"./$.to-length\":56,\"./core.get-iterator-method\":60}],24:[function(require,module,exports){\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n},{}],25:[function(require,module,exports){\nvar hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};\n},{}],26:[function(require,module,exports){\nvar $          = require('./$')\n  , createDesc = require('./$.property-desc');\nmodule.exports = require('./$.descriptors') ? function(object, key, value){\n  return $.setDesc(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n},{\"./$\":38,\"./$.descriptors\":19,\"./$.property-desc\":42}],27:[function(require,module,exports){\nmodule.exports = require('./$.global').document && document.documentElement;\n},{\"./$.global\":24}],28:[function(require,module,exports){\n// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function(fn, args, that){\n  var un = that === undefined;\n  switch(args.length){\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return              fn.apply(that, args);\n};\n},{}],29:[function(require,module,exports){\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./$.cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n},{\"./$.cof\":15}],30:[function(require,module,exports){\n// check on default Array iterator\nvar Iterators  = require('./$.iterators')\n  , ITERATOR   = require('./$.wks')('iterator')\n  , ArrayProto = Array.prototype;\n\nmodule.exports = function(it){\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n},{\"./$.iterators\":37,\"./$.wks\":59}],31:[function(require,module,exports){\nmodule.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n},{}],32:[function(require,module,exports){\n// call something on iterator step with safe closing on error\nvar anObject = require('./$.an-object');\nmodule.exports = function(iterator, fn, value, entries){\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch(e){\n    var ret = iterator['return'];\n    if(ret !== undefined)anObject(ret.call(iterator));\n    throw e;\n  }\n};\n},{\"./$.an-object\":13}],33:[function(require,module,exports){\n'use strict';\nvar $              = require('./$')\n  , descriptor     = require('./$.property-desc')\n  , setToStringTag = require('./$.set-to-string-tag')\n  , IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./$.hide')(IteratorPrototype, require('./$.wks')('iterator'), function(){ return this; });\n\nmodule.exports = function(Constructor, NAME, next){\n  Constructor.prototype = $.create(IteratorPrototype, {next: descriptor(1, next)});\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n},{\"./$\":38,\"./$.hide\":26,\"./$.property-desc\":42,\"./$.set-to-string-tag\":48,\"./$.wks\":59}],34:[function(require,module,exports){\n'use strict';\nvar LIBRARY        = require('./$.library')\n  , $export        = require('./$.export')\n  , redefine       = require('./$.redefine')\n  , hide           = require('./$.hide')\n  , has            = require('./$.has')\n  , Iterators      = require('./$.iterators')\n  , $iterCreate    = require('./$.iter-create')\n  , setToStringTag = require('./$.set-to-string-tag')\n  , getProto       = require('./$').getProto\n  , ITERATOR       = require('./$.wks')('iterator')\n  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n  , FF_ITERATOR    = '@@iterator'\n  , KEYS           = 'keys'\n  , VALUES         = 'values';\n\nvar returnThis = function(){ return this; };\n\nmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function(kind){\n    if(!BUGGY && kind in proto)return proto[kind];\n    switch(kind){\n      case KEYS: return function keys(){ return new Constructor(this, kind); };\n      case VALUES: return function values(){ return new Constructor(this, kind); };\n    } return function entries(){ return new Constructor(this, kind); };\n  };\n  var TAG        = NAME + ' Iterator'\n    , DEF_VALUES = DEFAULT == VALUES\n    , VALUES_BUG = false\n    , proto      = Base.prototype\n    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n    , $default   = $native || getMethod(DEFAULT)\n    , methods, key;\n  // Fix native\n  if($native){\n    var IteratorPrototype = getProto($default.call(new Base));\n    // Set @@toStringTag to native iterators\n    setToStringTag(IteratorPrototype, TAG, true);\n    // FF fix\n    if(!LIBRARY && has(proto, FF_ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n    // fix Array#{values, @@iterator}.name in V8 / FF\n    if(DEF_VALUES && $native.name !== VALUES){\n      VALUES_BUG = true;\n      $default = function values(){ return $native.call(this); };\n    }\n  }\n  // Define iterator\n  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG]  = returnThis;\n  if(DEFAULT){\n    methods = {\n      values:  DEF_VALUES  ? $default : getMethod(VALUES),\n      keys:    IS_SET      ? $default : getMethod(KEYS),\n      entries: !DEF_VALUES ? $default : getMethod('entries')\n    };\n    if(FORCED)for(key in methods){\n      if(!(key in proto))redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n},{\"./$\":38,\"./$.export\":21,\"./$.has\":25,\"./$.hide\":26,\"./$.iter-create\":33,\"./$.iterators\":37,\"./$.library\":39,\"./$.redefine\":44,\"./$.set-to-string-tag\":48,\"./$.wks\":59}],35:[function(require,module,exports){\nvar ITERATOR     = require('./$.wks')('iterator')\n  , SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function(){ SAFE_CLOSING = true; };\n  Array.from(riter, function(){ throw 2; });\n} catch(e){ /* empty */ }\n\nmodule.exports = function(exec, skipClosing){\n  if(!skipClosing && !SAFE_CLOSING)return false;\n  var safe = false;\n  try {\n    var arr  = [7]\n      , iter = arr[ITERATOR]();\n    iter.next = function(){ safe = true; };\n    arr[ITERATOR] = function(){ return iter; };\n    exec(arr);\n  } catch(e){ /* empty */ }\n  return safe;\n};\n},{\"./$.wks\":59}],36:[function(require,module,exports){\nmodule.exports = function(done, value){\n  return {value: value, done: !!done};\n};\n},{}],37:[function(require,module,exports){\nmodule.exports = {};\n},{}],38:[function(require,module,exports){\nvar $Object = Object;\nmodule.exports = {\n  create:     $Object.create,\n  getProto:   $Object.getPrototypeOf,\n  isEnum:     {}.propertyIsEnumerable,\n  getDesc:    $Object.getOwnPropertyDescriptor,\n  setDesc:    $Object.defineProperty,\n  setDescs:   $Object.defineProperties,\n  getKeys:    $Object.keys,\n  getNames:   $Object.getOwnPropertyNames,\n  getSymbols: $Object.getOwnPropertySymbols,\n  each:       [].forEach\n};\n},{}],39:[function(require,module,exports){\nmodule.exports = true;\n},{}],40:[function(require,module,exports){\nvar global    = require('./$.global')\n  , macrotask = require('./$.task').set\n  , Observer  = global.MutationObserver || global.WebKitMutationObserver\n  , process   = global.process\n  , Promise   = global.Promise\n  , isNode    = require('./$.cof')(process) == 'process'\n  , head, last, notify;\n\nvar flush = function(){\n  var parent, domain, fn;\n  if(isNode && (parent = process.domain)){\n    process.domain = null;\n    parent.exit();\n  }\n  while(head){\n    domain = head.domain;\n    fn     = head.fn;\n    if(domain)domain.enter();\n    fn(); // <- currently we use it only for Promise - try / catch not required\n    if(domain)domain.exit();\n    head = head.next;\n  } last = undefined;\n  if(parent)parent.enter();\n};\n\n// Node.js\nif(isNode){\n  notify = function(){\n    process.nextTick(flush);\n  };\n// browsers with MutationObserver\n} else if(Observer){\n  var toggle = 1\n    , node   = document.createTextNode('');\n  new Observer(flush).observe(node, {characterData: true}); // eslint-disable-line no-new\n  notify = function(){\n    node.data = toggle = -toggle;\n  };\n// environments with maybe non-completely correct, but existent Promise\n} else if(Promise && Promise.resolve){\n  notify = function(){\n    Promise.resolve().then(flush);\n  };\n// for other environments - macrotask based on:\n// - setImmediate\n// - MessageChannel\n// - window.postMessag\n// - onreadystatechange\n// - setTimeout\n} else {\n  notify = function(){\n    // strange IE + webpack dev server bug - use .call(global)\n    macrotask.call(global, flush);\n  };\n}\n\nmodule.exports = function asap(fn){\n  var task = {fn: fn, next: undefined, domain: isNode && process.domain};\n  if(last)last.next = task;\n  if(!head){\n    head = task;\n    notify();\n  } last = task;\n};\n},{\"./$.cof\":15,\"./$.global\":24,\"./$.task\":53}],41:[function(require,module,exports){\n// most Object methods by ES6 should accept primitives\nvar $export = require('./$.export')\n  , core    = require('./$.core')\n  , fails   = require('./$.fails');\nmodule.exports = function(KEY, exec){\n  var fn  = (core.Object || {})[KEY] || Object[KEY]\n    , exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);\n};\n},{\"./$.core\":16,\"./$.export\":21,\"./$.fails\":22}],42:[function(require,module,exports){\nmodule.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n},{}],43:[function(require,module,exports){\nvar redefine = require('./$.redefine');\nmodule.exports = function(target, src){\n  for(var key in src)redefine(target, key, src[key]);\n  return target;\n};\n},{\"./$.redefine\":44}],44:[function(require,module,exports){\nmodule.exports = require('./$.hide');\n},{\"./$.hide\":26}],45:[function(require,module,exports){\n// 7.2.9 SameValue(x, y)\nmodule.exports = Object.is || function is(x, y){\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n},{}],46:[function(require,module,exports){\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar getDesc  = require('./$').getDesc\n  , isObject = require('./$.is-object')\n  , anObject = require('./$.an-object');\nvar check = function(O, proto){\n  anObject(O);\n  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function(test, buggy, set){\n      try {\n        set = require('./$.ctx')(Function.call, getDesc(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch(e){ buggy = true; }\n      return function setPrototypeOf(O, proto){\n        check(O, proto);\n        if(buggy)O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n},{\"./$\":38,\"./$.an-object\":13,\"./$.ctx\":17,\"./$.is-object\":31}],47:[function(require,module,exports){\n'use strict';\nvar core        = require('./$.core')\n  , $           = require('./$')\n  , DESCRIPTORS = require('./$.descriptors')\n  , SPECIES     = require('./$.wks')('species');\n\nmodule.exports = function(KEY){\n  var C = core[KEY];\n  if(DESCRIPTORS && C && !C[SPECIES])$.setDesc(C, SPECIES, {\n    configurable: true,\n    get: function(){ return this; }\n  });\n};\n},{\"./$\":38,\"./$.core\":16,\"./$.descriptors\":19,\"./$.wks\":59}],48:[function(require,module,exports){\nvar def = require('./$').setDesc\n  , has = require('./$.has')\n  , TAG = require('./$.wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};\n},{\"./$\":38,\"./$.has\":25,\"./$.wks\":59}],49:[function(require,module,exports){\nvar global = require('./$.global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};\n},{\"./$.global\":24}],50:[function(require,module,exports){\n// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject  = require('./$.an-object')\n  , aFunction = require('./$.a-function')\n  , SPECIES   = require('./$.wks')('species');\nmodule.exports = function(O, D){\n  var C = anObject(O).constructor, S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n},{\"./$.a-function\":11,\"./$.an-object\":13,\"./$.wks\":59}],51:[function(require,module,exports){\nmodule.exports = function(it, Constructor, name){\n  if(!(it instanceof Constructor))throw TypeError(name + \": use the 'new' operator!\");\n  return it;\n};\n},{}],52:[function(require,module,exports){\nvar toInteger = require('./$.to-integer')\n  , defined   = require('./$.defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function(TO_STRING){\n  return function(that, pos){\n    var s = String(defined(that))\n      , i = toInteger(pos)\n      , l = s.length\n      , a, b;\n    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n},{\"./$.defined\":18,\"./$.to-integer\":54}],53:[function(require,module,exports){\nvar ctx                = require('./$.ctx')\n  , invoke             = require('./$.invoke')\n  , html               = require('./$.html')\n  , cel                = require('./$.dom-create')\n  , global             = require('./$.global')\n  , process            = global.process\n  , setTask            = global.setImmediate\n  , clearTask          = global.clearImmediate\n  , MessageChannel     = global.MessageChannel\n  , counter            = 0\n  , queue              = {}\n  , ONREADYSTATECHANGE = 'onreadystatechange'\n  , defer, channel, port;\nvar run = function(){\n  var id = +this;\n  if(queue.hasOwnProperty(id)){\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listner = function(event){\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif(!setTask || !clearTask){\n  setTask = function setImmediate(fn){\n    var args = [], i = 1;\n    while(arguments.length > i)args.push(arguments[i++]);\n    queue[++counter] = function(){\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id){\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if(require('./$.cof')(process) == 'process'){\n    defer = function(id){\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if(MessageChannel){\n    channel = new MessageChannel;\n    port    = channel.port2;\n    channel.port1.onmessage = listner;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){\n    defer = function(id){\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listner, false);\n  // IE8-\n  } else if(ONREADYSTATECHANGE in cel('script')){\n    defer = function(id){\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function(id){\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set:   setTask,\n  clear: clearTask\n};\n},{\"./$.cof\":15,\"./$.ctx\":17,\"./$.dom-create\":20,\"./$.global\":24,\"./$.html\":27,\"./$.invoke\":28}],54:[function(require,module,exports){\n// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n},{}],55:[function(require,module,exports){\n// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./$.iobject')\n  , defined = require('./$.defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};\n},{\"./$.defined\":18,\"./$.iobject\":29}],56:[function(require,module,exports){\n// 7.1.15 ToLength\nvar toInteger = require('./$.to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n},{\"./$.to-integer\":54}],57:[function(require,module,exports){\n// 7.1.13 ToObject(argument)\nvar defined = require('./$.defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};\n},{\"./$.defined\":18}],58:[function(require,module,exports){\nvar id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n},{}],59:[function(require,module,exports){\nvar store  = require('./$.shared')('wks')\n  , uid    = require('./$.uid')\n  , Symbol = require('./$.global').Symbol;\nmodule.exports = function(name){\n  return store[name] || (store[name] =\n    Symbol && Symbol[name] || (Symbol || uid)('Symbol.' + name));\n};\n},{\"./$.global\":24,\"./$.shared\":49,\"./$.uid\":58}],60:[function(require,module,exports){\nvar classof   = require('./$.classof')\n  , ITERATOR  = require('./$.wks')('iterator')\n  , Iterators = require('./$.iterators');\nmodule.exports = require('./$.core').getIteratorMethod = function(it){\n  if(it != undefined)return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n},{\"./$.classof\":14,\"./$.core\":16,\"./$.iterators\":37,\"./$.wks\":59}],61:[function(require,module,exports){\n'use strict';\nvar addToUnscopables = require('./$.add-to-unscopables')\n  , step             = require('./$.iter-step')\n  , Iterators        = require('./$.iterators')\n  , toIObject        = require('./$.to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./$.iter-define')(Array, 'Array', function(iterated, kind){\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , kind  = this._k\n    , index = this._i++;\n  if(!O || index >= O.length){\n    this._t = undefined;\n    return step(1);\n  }\n  if(kind == 'keys'  )return step(0, index);\n  if(kind == 'values')return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n},{\"./$.add-to-unscopables\":12,\"./$.iter-define\":34,\"./$.iter-step\":36,\"./$.iterators\":37,\"./$.to-iobject\":55}],62:[function(require,module,exports){\n// 19.1.2.14 Object.keys(O)\nvar toObject = require('./$.to-object');\n\nrequire('./$.object-sap')('keys', function($keys){\n  return function keys(it){\n    return $keys(toObject(it));\n  };\n});\n},{\"./$.object-sap\":41,\"./$.to-object\":57}],63:[function(require,module,exports){\n\n},{}],64:[function(require,module,exports){\n'use strict';\nvar $          = require('./$')\n  , LIBRARY    = require('./$.library')\n  , global     = require('./$.global')\n  , ctx        = require('./$.ctx')\n  , classof    = require('./$.classof')\n  , $export    = require('./$.export')\n  , isObject   = require('./$.is-object')\n  , anObject   = require('./$.an-object')\n  , aFunction  = require('./$.a-function')\n  , strictNew  = require('./$.strict-new')\n  , forOf      = require('./$.for-of')\n  , setProto   = require('./$.set-proto').set\n  , same       = require('./$.same-value')\n  , SPECIES    = require('./$.wks')('species')\n  , speciesConstructor = require('./$.species-constructor')\n  , asap       = require('./$.microtask')\n  , PROMISE    = 'Promise'\n  , process    = global.process\n  , isNode     = classof(process) == 'process'\n  , P          = global[PROMISE]\n  , Wrapper;\n\nvar testResolve = function(sub){\n  var test = new P(function(){});\n  if(sub)test.constructor = Object;\n  return P.resolve(test) === test;\n};\n\nvar USE_NATIVE = function(){\n  var works = false;\n  function P2(x){\n    var self = new P(x);\n    setProto(self, P2.prototype);\n    return self;\n  }\n  try {\n    works = P && P.resolve && testResolve();\n    setProto(P2, P);\n    P2.prototype = $.create(P.prototype, {constructor: {value: P2}});\n    // actual Firefox has broken subclass support, test that\n    if(!(P2.resolve(5).then(function(){}) instanceof P2)){\n      works = false;\n    }\n    // actual V8 bug, https://code.google.com/p/v8/issues/detail?id=4162\n    if(works && require('./$.descriptors')){\n      var thenableThenGotten = false;\n      P.resolve($.setDesc({}, 'then', {\n        get: function(){ thenableThenGotten = true; }\n      }));\n      works = thenableThenGotten;\n    }\n  } catch(e){ works = false; }\n  return works;\n}();\n\n// helpers\nvar sameConstructor = function(a, b){\n  // library wrapper special case\n  if(LIBRARY && a === P && b === Wrapper)return true;\n  return same(a, b);\n};\nvar getConstructor = function(C){\n  var S = anObject(C)[SPECIES];\n  return S != undefined ? S : C;\n};\nvar isThenable = function(it){\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar PromiseCapability = function(C){\n  var resolve, reject;\n  this.promise = new C(function($$resolve, $$reject){\n    if(resolve !== undefined || reject !== undefined)throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject  = $$reject;\n  });\n  this.resolve = aFunction(resolve),\n  this.reject  = aFunction(reject)\n};\nvar perform = function(exec){\n  try {\n    exec();\n  } catch(e){\n    return {error: e};\n  }\n};\nvar notify = function(record, isReject){\n  if(record.n)return;\n  record.n = true;\n  var chain = record.c;\n  asap(function(){\n    var value = record.v\n      , ok    = record.s == 1\n      , i     = 0;\n    var run = function(reaction){\n      var handler = ok ? reaction.ok : reaction.fail\n        , resolve = reaction.resolve\n        , reject  = reaction.reject\n        , result, then;\n      try {\n        if(handler){\n          if(!ok)record.h = true;\n          result = handler === true ? value : handler(value);\n          if(result === reaction.promise){\n            reject(TypeError('Promise-chain cycle'));\n          } else if(then = isThenable(result)){\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch(e){\n        reject(e);\n      }\n    };\n    while(chain.length > i)run(chain[i++]); // variable length - can't use forEach\n    chain.length = 0;\n    record.n = false;\n    if(isReject)setTimeout(function(){\n      var promise = record.p\n        , handler, console;\n      if(isUnhandled(promise)){\n        if(isNode){\n          process.emit('unhandledRejection', value, promise);\n        } else if(handler = global.onunhandledrejection){\n          handler({promise: promise, reason: value});\n        } else if((console = global.console) && console.error){\n          console.error('Unhandled promise rejection', value);\n        }\n      } record.a = undefined;\n    }, 1);\n  });\n};\nvar isUnhandled = function(promise){\n  var record = promise._d\n    , chain  = record.a || record.c\n    , i      = 0\n    , reaction;\n  if(record.h)return false;\n  while(chain.length > i){\n    reaction = chain[i++];\n    if(reaction.fail || !isUnhandled(reaction.promise))return false;\n  } return true;\n};\nvar $reject = function(value){\n  var record = this;\n  if(record.d)return;\n  record.d = true;\n  record = record.r || record; // unwrap\n  record.v = value;\n  record.s = 2;\n  record.a = record.c.slice();\n  notify(record, true);\n};\nvar $resolve = function(value){\n  var record = this\n    , then;\n  if(record.d)return;\n  record.d = true;\n  record = record.r || record; // unwrap\n  try {\n    if(record.p === value)throw TypeError(\"Promise can't be resolved itself\");\n    if(then = isThenable(value)){\n      asap(function(){\n        var wrapper = {r: record, d: false}; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch(e){\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      record.v = value;\n      record.s = 1;\n      notify(record, false);\n    }\n  } catch(e){\n    $reject.call({r: record, d: false}, e); // wrap\n  }\n};\n\n// constructor polyfill\nif(!USE_NATIVE){\n  // 25.4.3.1 Promise(executor)\n  P = function Promise(executor){\n    aFunction(executor);\n    var record = this._d = {\n      p: strictNew(this, P, PROMISE),         // <- promise\n      c: [],                                  // <- awaiting reactions\n      a: undefined,                           // <- checked in isUnhandled reactions\n      s: 0,                                   // <- state\n      d: false,                               // <- done\n      v: undefined,                           // <- value\n      h: false,                               // <- handled rejection\n      n: false                                // <- notify\n    };\n    try {\n      executor(ctx($resolve, record, 1), ctx($reject, record, 1));\n    } catch(err){\n      $reject.call(record, err);\n    }\n  };\n  require('./$.redefine-all')(P.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected){\n      var reaction = new PromiseCapability(speciesConstructor(this, P))\n        , promise  = reaction.promise\n        , record   = this._d;\n      reaction.ok   = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      record.c.push(reaction);\n      if(record.a)record.a.push(reaction);\n      if(record.s)notify(record, false);\n      return promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function(onRejected){\n      return this.then(undefined, onRejected);\n    }\n  });\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Promise: P});\nrequire('./$.set-to-string-tag')(P, PROMISE);\nrequire('./$.set-species')(PROMISE);\nWrapper = require('./$.core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r){\n    var capability = new PromiseCapability(this)\n      , $$reject   = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (!USE_NATIVE || testResolve(true)), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x){\n    // instanceof instead of internal slot check because we should fix it without replacement native Promise core\n    if(x instanceof P && sameConstructor(x.constructor, this))return x;\n    var capability = new PromiseCapability(this)\n      , $$resolve  = capability.resolve;\n    $$resolve(x);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./$.iter-detect')(function(iter){\n  P.all(iter)['catch'](function(){});\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable){\n    var C          = getConstructor(this)\n      , capability = new PromiseCapability(C)\n      , resolve    = capability.resolve\n      , reject     = capability.reject\n      , values     = [];\n    var abrupt = perform(function(){\n      forOf(iterable, false, values.push, values);\n      var remaining = values.length\n        , results   = Array(remaining);\n      if(remaining)$.each.call(values, function(promise, index){\n        var alreadyCalled = false;\n        C.resolve(promise).then(function(value){\n          if(alreadyCalled)return;\n          alreadyCalled = true;\n          results[index] = value;\n          --remaining || resolve(results);\n        }, reject);\n      });\n      else resolve(results);\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable){\n    var C          = getConstructor(this)\n      , capability = new PromiseCapability(C)\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      forOf(iterable, false, function(promise){\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  }\n});\n},{\"./$\":38,\"./$.a-function\":11,\"./$.an-object\":13,\"./$.classof\":14,\"./$.core\":16,\"./$.ctx\":17,\"./$.descriptors\":19,\"./$.export\":21,\"./$.for-of\":23,\"./$.global\":24,\"./$.is-object\":31,\"./$.iter-detect\":35,\"./$.library\":39,\"./$.microtask\":40,\"./$.redefine-all\":43,\"./$.same-value\":45,\"./$.set-proto\":46,\"./$.set-species\":47,\"./$.set-to-string-tag\":48,\"./$.species-constructor\":50,\"./$.strict-new\":51,\"./$.wks\":59}],65:[function(require,module,exports){\n'use strict';\nvar $at  = require('./$.string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./$.iter-define')(String, 'String', function(iterated){\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , index = this._i\n    , point;\n  if(index >= O.length)return {value: undefined, done: true};\n  point = $at(O, index);\n  this._i += point.length;\n  return {value: point, done: false};\n});\n},{\"./$.iter-define\":34,\"./$.string-at\":52}],66:[function(require,module,exports){\nrequire('./es6.array.iterator');\nvar Iterators = require('./$.iterators');\nIterators.NodeList = Iterators.HTMLCollection = Iterators.Array;\n},{\"./$.iterators\":37,\"./es6.array.iterator\":61}],67:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,\"__esModule\",{value:true});var _HypertyDiscovery=require('./hyperty-discovery/HypertyDiscovery');var _HypertyDiscovery2=_interopRequireDefault(_HypertyDiscovery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default=_HypertyDiscovery2.default;module.exports=exports['default'];\n\n},{\"./hyperty-discovery/HypertyDiscovery\":68}],68:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,\"__esModule\",{value:true});var _promise=require('babel-runtime/core-js/promise');var _promise2=_interopRequireDefault(_promise);var _classCallCheck2=require('babel-runtime/helpers/classCallCheck');var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require('babel-runtime/helpers/createClass');var _createClass3=_interopRequireDefault(_createClass2);var _utils=require('../utils/utils');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};} /**\n* Core HypertyDiscovery interface\n* Class to allow applications to search for hyperties using the message bus\n*/var HypertyDiscovery=function(){ /**\n  * To initialise the HypertyDiscover, which will provide the support for hyperties to\n  * query users registered in outside the internal core.\n  * @param  {MessageBus}          msgbus                msgbus\n  * @param  {RuntimeURL}          runtimeURL            runtimeURL\n  */function HypertyDiscovery(hypertyURL,msgBus){(0,_classCallCheck3.default)(this,HypertyDiscovery);var _this=this;_this.messageBus=msgBus;_this.domain=(0,_utils.divideURL)(hypertyURL).domain;_this.discoveryURL=hypertyURL;} /**\n  * function to request about dataObject registered in domain registry, and\n  * return the dataObject instance  url, if found.\n  * @param  {String}              name  dataObject Name\n  * @param  {String}            domain (Optional)\n  * @return {Promise}          Promise\n  */(0,_createClass3.default)(HypertyDiscovery,[{key:'discoverDataObjectPerName',value:function discoverDataObjectPerName(name,domain){var _this=this;var activeDomain=void 0;if(!domain){activeDomain=_this.domain;}else {activeDomain=domain;}var msg={type:'read',from:_this.discoveryURL,to:'domain://registry.'+activeDomain+'/',body:{resource:'dataObject://'+name}};return new _promise2.default(function(resolve,reject){_this.messageBus.postMessage(msg,function(reply){var dataObjectUrl=reply.body.value.url;if(dataObjectUrl){resolve(dataObjectUrl);}else {reject('DataObject name does not exist');}});});} /**\n  * function to request about users registered in domain registry, and\n  * return the last hyperty instance registered by the user.\n  * @param  {email}              email\n  * @param  {domain}            domain (Optional)\n  * @return {Promise}          Promise\n  */},{key:'discoverHypertyPerUser',value:function discoverHypertyPerUser(email,domain){var _this=this;var activeDomain=void 0;if(!domain){activeDomain=_this.domain;}else {activeDomain=domain;}var identityURL='user://'+email.substring(email.indexOf('@')+1,email.length)+'/'+email.substring(0,email.indexOf('@')); // message to query domain registry, asking for a user hyperty.\nvar message={type:'read',from:_this.discoveryURL,to:'domain://registry.'+activeDomain+'/',body:{resource:identityURL}};console.log('Message: ',message,activeDomain,identityURL); //console.log('message READ', message);\nreturn new _promise2.default(function(resolve,reject){_this.messageBus.postMessage(message,function(reply){console.log('message reply',reply);var hyperty=void 0;var mostRecent=void 0;var lastHyperty=void 0;var value=reply.body.value;for(hyperty in value){if(value[hyperty].lastModified!==undefined){if(mostRecent===undefined){mostRecent=new Date(value[hyperty].lastModified);lastHyperty=hyperty;}else {var hypertyDate=new Date(value[hyperty].lastModified);if(mostRecent.getTime()<hypertyDate.getTime()){mostRecent=hypertyDate;lastHyperty=hyperty;}}}}console.log('Last Hyperty: ',lastHyperty,mostRecent);var hypertyURL=lastHyperty;if(hypertyURL===undefined){return reject('User Hyperty not found');}var idPackage={id:email,descriptor:value[hypertyURL].descriptor,hypertyURL:hypertyURL};console.log('===> hypertyDiscovery messageBundle: ',idPackage);resolve(idPackage);});});} /**\n  * function to request about users registered in domain registry, and\n  * return the all the hyperties registered by the user\n  * @param  {email}              email\n  * @param  {domain}            domain (Optional)\n  * @return {Promise}          Promise\n  */},{key:'discoverHypertiesPerUser',value:function discoverHypertiesPerUser(email,domain){var _this=this;var activeDomain=void 0;if(!domain){activeDomain=_this.domain;}else {activeDomain=domain;}var identityURL='user://'+email.substring(email.indexOf('@')+1,email.length)+'/'+email.substring(0,email.indexOf('@')); // message to query domain registry, asking for a user hyperty.\nvar message={type:'read',from:_this.discoveryURL,to:'domain://registry.'+activeDomain+'/',body:{resource:identityURL}};console.log('Message discoverHypertiesPerUser: ',message,activeDomain,identityURL); //console.log('message READ', message);\nreturn new _promise2.default(function(resolve,reject){_this.messageBus.postMessage(message,function(reply){console.log('discoverHypertiesPerUser reply',reply);var value=reply.body.value;if(!value){return reject('User Hyperty not found');}resolve(value);});});}}]);return HypertyDiscovery;}(); /**\n* Copyright 2016 PT Inovao e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/exports.default=HypertyDiscovery;module.exports=exports['default'];\n\n},{\"../utils/utils\":69,\"babel-runtime/core-js/promise\":4,\"babel-runtime/helpers/classCallCheck\":5,\"babel-runtime/helpers/createClass\":6}],69:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,\"__esModule\",{value:true});var _stringify=require('babel-runtime/core-js/json/stringify');var _stringify2=_interopRequireDefault(_stringify);var _keys=require('babel-runtime/core-js/object/keys');var _keys2=_interopRequireDefault(_keys);exports.divideURL=divideURL;exports.divideEmail=divideEmail;exports.emptyObject=emptyObject;exports.deepClone=deepClone;exports.getUserURLFromEmail=getUserURLFromEmail;exports.getUserEmailFromURL=getUserEmailFromURL;exports.convertToUserURL=convertToUserURL;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};} /**\n* Copyright 2016 PT Inovao e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/ /**\n * Support module with some functions will be useful\n * @module utils\n */ /**\n * @typedef divideURL\n * @type Object\n * @property {string} type The type of URL\n * @property {string} domain The domain of URL\n * @property {string} identity The identity of URL\n */ /**\n * Divide an url in type, domain and identity\n * @param  {URL.URL} url - url address\n * @return {divideURL} the result of divideURL\n */function divideURL(url){if(!url)throw Error('URL is needed to split'); // let re = /([a-zA-Z-]*)?:\\/\\/(?:\\.)?([-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b)*(\\/[\\/\\d\\w\\.-]*)*(?:[\\?])*(.+)*/gi;\nvar re=/([a-zA-Z-]*):\\/\\/(?:\\.)?([-a-zA-Z0-9@:%._\\+~#=]{2,256})([-a-zA-Z0-9@:%._\\+~#=\\/]*)/gi;var subst='$1,$2,$3';var parts=url.replace(re,subst).split(','); // If the url has no protocol, the default protocol set is https\nif(parts[0]===url){parts[0]='https';parts[1]=url;}var result={type:parts[0],domain:parts[1],identity:parts[2]};return result;}function divideEmail(email){var indexOfAt=email.indexOf('@');var result={username:email.substring(0,indexOfAt),domain:email.substring(indexOfAt+1,email.length)};return result;} /**\n * Check if an Object is empty\n * @param  {Object} object Object to be checked\n * @return {Boolean}       status of Object, empty or not (true|false);\n */function emptyObject(object){return (0,_keys2.default)(object).length>0?false:true;} /**\n * Make a COPY of the original data\n * @param  {Object}  obj - object to be cloned\n * @return {Object}\n */function deepClone(obj){ //TODO: simple but inefficient JSON deep clone...\nif(obj)return JSON.parse((0,_stringify2.default)(obj));} /**\n * Obtains the user URL that corresponds to a given email\n * @param  {string} userEmail The user email\n * @return {URL.URL} userURL The user URL\n */function getUserURLFromEmail(userEmail){var indexOfAt=userEmail.indexOf('@');return 'user://'+userEmail.substring(indexOfAt+1,userEmail.length)+'/'+userEmail.substring(0,indexOfAt);} /**\n * Obtains the user email that corresponds to a given URL\n * @param  {URL.URL} userURL The user URL\n * @return {string} userEmail The user email\n */function getUserEmailFromURL(userURL){var url=divideURL(userURL);return url.identity.replace('/','')+'@'+url.domain; // identity field has '/exampleID' instead of 'exampleID'\n} /**\n * Check if the user identifier is already in the URL format, if not, convert to URL format\n * @param  {string}   identifier  user identifier\n * @return {string}   userURL    the user URL\n */function convertToUserURL(identifier){ // check if the identifier is already in the url format\nif(identifier.substring(0,7)==='user://'){var dividedURL=divideURL(identifier); //check if the url is well formated\nif(dividedURL.domain&&dividedURL.identity){return identifier;}else {throw 'userURL with wrong format';} //if not, convert the user email to URL format\n}else {return getUserURLFromEmail(identifier);}}\n\n},{\"babel-runtime/core-js/json/stringify\":1,\"babel-runtime/core-js/object/keys\":3}]},{},[67])(67)\n});"],"sourceRoot":"/source/"}