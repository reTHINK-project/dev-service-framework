{"version":3,"sources":["Syncher.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","Syncher","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","default","__esModule","core-js/library/fn/json/stringify","2","core-js/library/fn/object/create","3","core-js/library/fn/object/define-property","4","core-js/library/fn/object/get-own-property-descriptor","5","core-js/library/fn/object/get-prototype-of","6","core-js/library/fn/object/keys","7","core-js/library/fn/object/set-prototype-of","8","core-js/library/fn/promise","9","core-js/library/fn/symbol","10","core-js/library/fn/symbol/iterator","11","instance","Constructor","TypeError","12","_interopRequireDefault","obj","_defineProperty","_defineProperty2","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","../core-js/object/define-property","13","_getPrototypeOf","_getPrototypeOf2","_getOwnPropertyDescriptor","_getOwnPropertyDescriptor2","get","object","property","receiver","Function","desc","undefined","parent","value","getter","../core-js/object/get-own-property-descriptor","../core-js/object/get-prototype-of","14","_setPrototypeOf","_setPrototypeOf2","_create","_create2","_typeof2","_typeof3","subClass","superClass","constructor","__proto__","../core-js/object/create","../core-js/object/set-prototype-of","../helpers/typeof","15","ReferenceError","16","_iterator","_iterator2","_symbol","_symbol2","_typeof","../core-js/symbol","../core-js/symbol/iterator","17","core","$JSON","JSON","stringify","it","apply","arguments","../../modules/_core","18","$Object","Object","P","D","create","../../modules/es6.object.create","19","defineProperty","../../modules/es6.object.define-property","20","getOwnPropertyDescriptor","../../modules/es6.object.get-own-property-descriptor","21","getPrototypeOf","../../modules/es6.object.get-prototype-of","22","keys","../../modules/es6.object.keys","23","setPrototypeOf","../../modules/es6.object.set-prototype-of","24","Promise","../modules/_core","../modules/es6.object.to-string","../modules/es6.promise","../modules/es6.string.iterator","../modules/web.dom.iterable","25","Symbol","../../modules/es6.object.to-string","../../modules/es6.symbol","../../modules/es7.symbol.async-iterator","../../modules/es7.symbol.observable","26","../../modules/_wks-ext","../../modules/es6.string.iterator","../../modules/web.dom.iterable","27","28","29","name","forbiddenField","30","isObject","./_is-object","31","toIObject","toLength","toIndex","IS_INCLUDES","$this","el","fromIndex","O","index","./_to-index","./_to-iobject","./_to-length","32","cof","TAG","ARG","tryGet","T","B","callee","./_cof","./_wks","33","toString","slice","34","version","__e","35","aFunction","fn","that","b","c","./_a-function","36","37","./_fails","38","document","is","createElement","./_global","39","split","40","getKeys","gOPS","pIE","result","getSymbols","symbols","isEnum","push","./_object-gops","./_object-keys","./_object-pie","41","ctx","hide","PROTOTYPE","$export","type","source","own","out","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","S","IS_PROTO","IS_BIND","IS_WRAP","W","expProto","C","virtual","R","U","./_core","./_ctx","./_hide","42","exec","43","isArrayIter","anObject","getIterFn","BREAK","RETURN","iterable","entries","ITERATOR","step","iterator","iterFn","next","done","./_an-object","./_is-array-iter","./_iter-call","./core.get-iterator-method","44","Math","__g","45","hasOwnProperty","46","dP","createDesc","./_descriptors","./_object-dp","./_property-desc","47","documentElement","48","./_dom-create","49","args","un","50","propertyIsEnumerable","51","Iterators","ArrayProto","Array","./_iterators","52","isArray","arg","53","54","ret","55","setToStringTag","IteratorPrototype","NAME","./_object-create","./_set-to-string-tag","56","LIBRARY","redefine","has","$iterCreate","BUGGY","FF_ITERATOR","KEYS","VALUES","returnThis","Base","DEFAULT","IS_SET","FORCED","methods","getMethod","kind","proto","DEF_VALUES","VALUES_BUG","$native","$default","$entries","$anyNative","values","./_export","./_has","./_iter-create","./_library","./_object-gpo","./_redefine","57","SAFE_CLOSING","riter","from","skipClosing","safe","arr","iter","58","59","60","61","62","META","setDesc","id","isExtensible","FREEZE","preventExtensions","setMeta","w","fastKey","getWeak","onFreeze","meta","NEED","KEY","./_uid","63","macrotask","set","Observer","MutationObserver","WebKitMutationObserver","process","isNode","head","last","notify","flush","domain","exit","enter","nextTick","toggle","node","createTextNode","observe","characterData","data","resolve","promise","then","task","./_task","64","dPs","enumBugKeys","IE_PROTO","Empty","createDict","iframeDocument","iframe","lt","gt","style","display","appendChild","src","contentWindow","open","write","close","Properties","./_enum-bug-keys","./_html","./_object-dps","./_shared-key","65","IE8_DOM_DEFINE","toPrimitive","Attributes","./_ie8-dom-define","./_to-primitive","66","67","gOPD","68","gOPN","windowNames","getOwnPropertyNames","getWindowNames","./_object-gopn","69","$keys","hiddenKeys","concat","./_object-keys-internal","70","getOwnPropertySymbols","71","toObject","ObjectProto","./_to-object","72","arrayIndexOf","names","./_array-includes","73","74","75","fails","exp","76","bitmap","77","78","79","check","test","buggy","./_object-gopd","80","DESCRIPTORS","SPECIES","81","def","tag","stat","82","shared","uid","./_shared","83","SHARED","store","84","85","toInteger","defined","TO_STRING","pos","String","charCodeAt","charAt","./_defined","./_to-integer","86","defer","channel","port","invoke","html","cel","setTask","setImmediate","clearTask","clearImmediate","MessageChannel","counter","queue","ONREADYSTATECHANGE","run","listener","event","port2","port1","onmessage","postMessage","addEventListener","importScripts","removeChild","setTimeout","clear","./_invoke","87","max","min","88","ceil","floor","isNaN","89","IObject","./_iobject","90","91","92","val","valueOf","93","px","random","94","wksExt","$Symbol","./_wks-ext","95","96","USE_SYMBOL","$exports","97","classof","getIteratorMethod","./_classof","98","addToUnscopables","iterated","_t","_i","_k","Arguments","./_add-to-unscopables","./_iter-define","./_iter-step","99","100","101","$getOwnPropertyDescriptor","./_object-sap","102","$getPrototypeOf","103","104","./_set-proto","105","106","Internal","GenericPromiseCapability","Wrapper","anInstance","forOf","speciesConstructor","microtask","PROMISE","$Promise","empty","USE_NATIVE","FakePromise","PromiseRejectionEvent","sameConstructor","isThenable","newPromiseCapability","PromiseCapability","reject","$$resolve","$$reject","perform","error","isReject","_n","chain","_c","_v","ok","_s","reaction","handler","fail","_h","onHandleUnhandled","onUnhandled","abrupt","console","isUnhandled","emit","onunhandledrejection","reason","_a","onrejectionhandled","$reject","_d","_w","$resolve","wrapper","executor","err","onFulfilled","onRejected","catch","capability","x","all","remaining","$index","alreadyCalled","race","./_an-instance","./_for-of","./_iter-detect","./_microtask","./_redefine-all","./_set-species","./_species-constructor","107","$at","point","./_string-at","108","$fails","wks","wksDefine","keyOf","enumKeys","gOPNExt","$GOPD","$DP","_stringify","HIDDEN","TO_PRIMITIVE","SymbolRegistry","AllSymbols","OPSymbols","QObject","setter","findChild","setSymbolDesc","protoDesc","wrap","sym","isSymbol","$defineProperty","$defineProperties","$create","$propertyIsEnumerable","E","$getOwnPropertyNames","$getOwnPropertySymbols","IS_OP","$set","for","keyFor","useSetter","useSimple","replacer","$replacer","./_enum-keys","./_is-array","./_keyof","./_meta","./_object-gopn-ext","./_wks-define","109","110","111","TO_STRING_TAG","collections","Collection","./es6.array.iterator","112","callback","acceptlist","pausable","pause","delay","deliver","ignorePrevious","me","changeset","changes","filter","change","indexOf","proxy","unobserve","__observerCallbacks__","__observers__","Proxy","oldvalue","start","oldValue","deleteProperty","splice","forEach","observercallback","arrayproxy","end","removed","addedCount","__observer__","item","deepObserve","parts","newparts","observed","recurse","rootObject","oldObject","newObject","path","newkeys","keypath","newValue","oldkeys","join","113","DataObjectObserver","DataObjectReporter","_Syncher","_Syncher2","_DataObjectReporter","_DataObjectReporter2","_DataObjectObserver","_DataObjectObserver2","./syncher/DataObjectObserver","./syncher/DataObjectReporter","./syncher/Syncher","114","_promise","_promise2","_keys","_keys2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_ProxyObject","_ProxyObject2","_DataObjectChild","_DataObjectChild2","_utils","DataObject","syncher","url","schema","initialStatus","initialData","childrens","_this","_syncher","_url","_schema","_status","_syncObj","_childrens","_version","_childId","_childrenObjects","_childrenListeners","_owner","_bus","_this2","childBaseURL","log","child","childURL","addListener","msg","_onChildCreate","_changeChildren","remove","_releaseListeners","children","msgChildId","msgChildPath","requestMsg","to","body","resource","msgId","newChild","onChange","_onChange","childId","_onAddChildrenHandler","identity","childInfo","changeMsg","attribute","field","oType","ObjectType","OBJECT","cType","ChangeType","REMOVE","attributeType","UPDATE","operation","syncObj","deepClone","findResult","findBefore","ARRAY","ADD","_arr","_index","_changeObject","../utils/utils.js","./DataObjectChild","./ProxyObject","babel-runtime/core-js/object/keys","babel-runtime/core-js/promise","babel-runtime/helpers/classCallCheck","babel-runtime/helpers/createClass","115","DataObjectChild","owner","_parent","_msgId","_allocateListeners","_listener","_onResponse","_children","_onResponseHandler","116","_possibleConstructorReturn2","_possibleConstructorReturn3","_get2","_get3","_inherits2","_inherits3","_DataObject2","_DataObject3","FilterType","ANY","START","EXACT","_DataObject","initialVersion","_filters","_onFilter","childData","_changeListener","_observers","unSubscribeMsg","_subURL","reply","filterObj","idx","substr","./DataObject","babel-runtime/core-js/object/get-prototype-of","babel-runtime/helpers/get","babel-runtime/helpers/inherits","babel-runtime/helpers/possibleConstructorReturn","117","_subscriptions","_objectListener","_onRead","observers","inviteMsg","authorise","deleteMsg","_reporters","_onSubscriptionHandler","_onReadHandler","_onSubscribe","_onUnSubscribe","hypertyUrl","accept","sub","status","childrenValues","118","DataProvisional","bus","_changes","observer","119","SyncObject","_data","_internalObserve","list","_findWithSplit","pop","_o","every","_onChanges","objType","fieldString","_fireEvent","proxy-observe","120","_DataProvisional","_DataProvisional2","config","runtimeURL","_provisionals","_onForward","_onRemoteCreate","_onRemoteDelete","reporter","objURL","newObj","childrenResources","subscribeMsg","newProvisional","readMsg","_onNotificationHandler","ack","lType","./DataObjectObserver","./DataObjectReporter","./DataProvisional","121","divideURL","re","subst","replace","divideEmail","email","indexOfAt","username","substring","emptyObject","parse","_stringify2","getUserURLFromEmail","userEmail","getUserEmailFromURL","userURL","convertToUserURL","identifier","dividedURL","babel-runtime/core-js/json/stringify"],"mappings":"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","file":"Syncher.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.Syncher = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n},{\"core-js/library/fn/json/stringify\":17}],2:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };\n},{\"core-js/library/fn/object/create\":18}],3:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n},{\"core-js/library/fn/object/define-property\":19}],4:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/get-own-property-descriptor\"), __esModule: true };\n},{\"core-js/library/fn/object/get-own-property-descriptor\":20}],5:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/get-prototype-of\"), __esModule: true };\n},{\"core-js/library/fn/object/get-prototype-of\":21}],6:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };\n},{\"core-js/library/fn/object/keys\":22}],7:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };\n},{\"core-js/library/fn/object/set-prototype-of\":23}],8:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/promise\"), __esModule: true };\n},{\"core-js/library/fn/promise\":24}],9:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };\n},{\"core-js/library/fn/symbol\":25}],10:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/symbol/iterator\"), __esModule: true };\n},{\"core-js/library/fn/symbol/iterator\":26}],11:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n},{}],12:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n},{\"../core-js/object/define-property\":3}],13:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nvar _getPrototypeOf = require(\"../core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _getOwnPropertyDescriptor = require(\"../core-js/object/get-own-property-descriptor\");\n\nvar _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = (0, _getOwnPropertyDescriptor2.default)(object, property);\n\n  if (desc === undefined) {\n    var parent = (0, _getPrototypeOf2.default)(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n},{\"../core-js/object/get-own-property-descriptor\":4,\"../core-js/object/get-prototype-of\":5}],14:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = require(\"../core-js/object/set-prototype-of\");\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = require(\"../core-js/object/create\");\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};\n},{\"../core-js/object/create\":2,\"../core-js/object/set-prototype-of\":7,\"../helpers/typeof\":16}],15:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};\n},{\"../helpers/typeof\":16}],16:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nvar _iterator = require(\"../core-js/symbol/iterator\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = require(\"../core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};\n},{\"../core-js/symbol\":9,\"../core-js/symbol/iterator\":10}],17:[function(require,module,exports){\nvar core  = require('../../modules/_core')\n  , $JSON = core.JSON || (core.JSON = {stringify: JSON.stringify});\nmodule.exports = function stringify(it){ // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n},{\"../../modules/_core\":34}],18:[function(require,module,exports){\nrequire('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D){\n  return $Object.create(P, D);\n};\n},{\"../../modules/_core\":34,\"../../modules/es6.object.create\":99}],19:[function(require,module,exports){\nrequire('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc){\n  return $Object.defineProperty(it, key, desc);\n};\n},{\"../../modules/_core\":34,\"../../modules/es6.object.define-property\":100}],20:[function(require,module,exports){\nrequire('../../modules/es6.object.get-own-property-descriptor');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function getOwnPropertyDescriptor(it, key){\n  return $Object.getOwnPropertyDescriptor(it, key);\n};\n},{\"../../modules/_core\":34,\"../../modules/es6.object.get-own-property-descriptor\":101}],21:[function(require,module,exports){\nrequire('../../modules/es6.object.get-prototype-of');\nmodule.exports = require('../../modules/_core').Object.getPrototypeOf;\n},{\"../../modules/_core\":34,\"../../modules/es6.object.get-prototype-of\":102}],22:[function(require,module,exports){\nrequire('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/_core').Object.keys;\n},{\"../../modules/_core\":34,\"../../modules/es6.object.keys\":103}],23:[function(require,module,exports){\nrequire('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/_core').Object.setPrototypeOf;\n},{\"../../modules/_core\":34,\"../../modules/es6.object.set-prototype-of\":104}],24:[function(require,module,exports){\nrequire('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.promise');\nmodule.exports = require('../modules/_core').Promise;\n},{\"../modules/_core\":34,\"../modules/es6.object.to-string\":105,\"../modules/es6.promise\":106,\"../modules/es6.string.iterator\":107,\"../modules/web.dom.iterable\":111}],25:[function(require,module,exports){\nrequire('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.symbol.async-iterator');\nrequire('../../modules/es7.symbol.observable');\nmodule.exports = require('../../modules/_core').Symbol;\n},{\"../../modules/_core\":34,\"../../modules/es6.object.to-string\":105,\"../../modules/es6.symbol\":108,\"../../modules/es7.symbol.async-iterator\":109,\"../../modules/es7.symbol.observable\":110}],26:[function(require,module,exports){\nrequire('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks-ext').f('iterator');\n},{\"../../modules/_wks-ext\":95,\"../../modules/es6.string.iterator\":107,\"../../modules/web.dom.iterable\":111}],27:[function(require,module,exports){\nmodule.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n},{}],28:[function(require,module,exports){\nmodule.exports = function(){ /* empty */ };\n},{}],29:[function(require,module,exports){\nmodule.exports = function(it, Constructor, name, forbiddenField){\n  if(!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)){\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n},{}],30:[function(require,module,exports){\nvar isObject = require('./_is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n},{\"./_is-object\":53}],31:[function(require,module,exports){\n// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject')\n  , toLength  = require('./_to-length')\n  , toIndex   = require('./_to-index');\nmodule.exports = function(IS_INCLUDES){\n  return function($this, el, fromIndex){\n    var O      = toIObject($this)\n      , length = toLength(O.length)\n      , index  = toIndex(fromIndex, length)\n      , value;\n    // Array#includes uses SameValueZero equality algorithm\n    if(IS_INCLUDES && el != el)while(length > index){\n      value = O[index++];\n      if(value != value)return true;\n    // Array#toIndex ignores holes, Array#includes - not\n    } else for(;length > index; index++)if(IS_INCLUDES || index in O){\n      if(O[index] === el)return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n},{\"./_to-index\":87,\"./_to-iobject\":89,\"./_to-length\":90}],32:[function(require,module,exports){\n// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof')\n  , TAG = require('./_wks')('toStringTag')\n  // ES3 wrong here\n  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function(it, key){\n  try {\n    return it[key];\n  } catch(e){ /* empty */ }\n};\n\nmodule.exports = function(it){\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n},{\"./_cof\":33,\"./_wks\":96}],33:[function(require,module,exports){\nvar toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};\n},{}],34:[function(require,module,exports){\nvar core = module.exports = {version: '2.4.0'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n},{}],35:[function(require,module,exports){\n// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n},{\"./_a-function\":27}],36:[function(require,module,exports){\n// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n},{}],37:[function(require,module,exports){\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n},{\"./_fails\":42}],38:[function(require,module,exports){\nvar isObject = require('./_is-object')\n  , document = require('./_global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};\n},{\"./_global\":44,\"./_is-object\":53}],39:[function(require,module,exports){\n// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n},{}],40:[function(require,module,exports){\n// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys')\n  , gOPS    = require('./_object-gops')\n  , pIE     = require('./_object-pie');\nmodule.exports = function(it){\n  var result     = getKeys(it)\n    , getSymbols = gOPS.f;\n  if(getSymbols){\n    var symbols = getSymbols(it)\n      , isEnum  = pIE.f\n      , i       = 0\n      , key;\n    while(symbols.length > i)if(isEnum.call(it, key = symbols[i++]))result.push(key);\n  } return result;\n};\n},{\"./_object-gops\":70,\"./_object-keys\":73,\"./_object-pie\":74}],41:[function(require,module,exports){\nvar global    = require('./_global')\n  , core      = require('./_core')\n  , ctx       = require('./_ctx')\n  , hide      = require('./_hide')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , expProto  = exports[PROTOTYPE]\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(a, b, c){\n        if(this instanceof C){\n          switch(arguments.length){\n            case 0: return new C;\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if(IS_PROTO){\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if(type & $export.R && expProto && !expProto[key])hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library` \nmodule.exports = $export;\n},{\"./_core\":34,\"./_ctx\":35,\"./_global\":44,\"./_hide\":46}],42:[function(require,module,exports){\nmodule.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n},{}],43:[function(require,module,exports){\nvar ctx         = require('./_ctx')\n  , call        = require('./_iter-call')\n  , isArrayIter = require('./_is-array-iter')\n  , anObject    = require('./_an-object')\n  , toLength    = require('./_to-length')\n  , getIterFn   = require('./core.get-iterator-method')\n  , BREAK       = {}\n  , RETURN      = {};\nvar exports = module.exports = function(iterable, entries, fn, that, ITERATOR){\n  var iterFn = ITERATOR ? function(){ return iterable; } : getIterFn(iterable)\n    , f      = ctx(fn, that, entries ? 2 : 1)\n    , index  = 0\n    , length, step, iterator, result;\n  if(typeof iterFn != 'function')throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if(isArrayIter(iterFn))for(length = toLength(iterable.length); length > index; index++){\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if(result === BREAK || result === RETURN)return result;\n  } else for(iterator = iterFn.call(iterable); !(step = iterator.next()).done; ){\n    result = call(iterator, f, step.value, entries);\n    if(result === BREAK || result === RETURN)return result;\n  }\n};\nexports.BREAK  = BREAK;\nexports.RETURN = RETURN;\n},{\"./_an-object\":30,\"./_ctx\":35,\"./_is-array-iter\":51,\"./_iter-call\":54,\"./_to-length\":90,\"./core.get-iterator-method\":97}],44:[function(require,module,exports){\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n},{}],45:[function(require,module,exports){\nvar hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};\n},{}],46:[function(require,module,exports){\nvar dP         = require('./_object-dp')\n  , createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function(object, key, value){\n  return dP.f(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n},{\"./_descriptors\":37,\"./_object-dp\":65,\"./_property-desc\":76}],47:[function(require,module,exports){\nmodule.exports = require('./_global').document && document.documentElement;\n},{\"./_global\":44}],48:[function(require,module,exports){\nmodule.exports = !require('./_descriptors') && !require('./_fails')(function(){\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', {get: function(){ return 7; }}).a != 7;\n});\n},{\"./_descriptors\":37,\"./_dom-create\":38,\"./_fails\":42}],49:[function(require,module,exports){\n// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function(fn, args, that){\n  var un = that === undefined;\n  switch(args.length){\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return              fn.apply(that, args);\n};\n},{}],50:[function(require,module,exports){\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n},{\"./_cof\":33}],51:[function(require,module,exports){\n// check on default Array iterator\nvar Iterators  = require('./_iterators')\n  , ITERATOR   = require('./_wks')('iterator')\n  , ArrayProto = Array.prototype;\n\nmodule.exports = function(it){\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n},{\"./_iterators\":59,\"./_wks\":96}],52:[function(require,module,exports){\n// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg){\n  return cof(arg) == 'Array';\n};\n},{\"./_cof\":33}],53:[function(require,module,exports){\nmodule.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n},{}],54:[function(require,module,exports){\n// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function(iterator, fn, value, entries){\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch(e){\n    var ret = iterator['return'];\n    if(ret !== undefined)anObject(ret.call(iterator));\n    throw e;\n  }\n};\n},{\"./_an-object\":30}],55:[function(require,module,exports){\n'use strict';\nvar create         = require('./_object-create')\n  , descriptor     = require('./_property-desc')\n  , setToStringTag = require('./_set-to-string-tag')\n  , IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function(){ return this; });\n\nmodule.exports = function(Constructor, NAME, next){\n  Constructor.prototype = create(IteratorPrototype, {next: descriptor(1, next)});\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n},{\"./_hide\":46,\"./_object-create\":64,\"./_property-desc\":76,\"./_set-to-string-tag\":81,\"./_wks\":96}],56:[function(require,module,exports){\n'use strict';\nvar LIBRARY        = require('./_library')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , hide           = require('./_hide')\n  , has            = require('./_has')\n  , Iterators      = require('./_iterators')\n  , $iterCreate    = require('./_iter-create')\n  , setToStringTag = require('./_set-to-string-tag')\n  , getPrototypeOf = require('./_object-gpo')\n  , ITERATOR       = require('./_wks')('iterator')\n  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n  , FF_ITERATOR    = '@@iterator'\n  , KEYS           = 'keys'\n  , VALUES         = 'values';\n\nvar returnThis = function(){ return this; };\n\nmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function(kind){\n    if(!BUGGY && kind in proto)return proto[kind];\n    switch(kind){\n      case KEYS: return function keys(){ return new Constructor(this, kind); };\n      case VALUES: return function values(){ return new Constructor(this, kind); };\n    } return function entries(){ return new Constructor(this, kind); };\n  };\n  var TAG        = NAME + ' Iterator'\n    , DEF_VALUES = DEFAULT == VALUES\n    , VALUES_BUG = false\n    , proto      = Base.prototype\n    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n    , $default   = $native || getMethod(DEFAULT)\n    , $entries   = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined\n    , $anyNative = NAME == 'Array' ? proto.entries || $native : $native\n    , methods, key, IteratorPrototype;\n  // Fix native\n  if($anyNative){\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base));\n    if(IteratorPrototype !== Object.prototype){\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if(!LIBRARY && !has(IteratorPrototype, ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if(DEF_VALUES && $native && $native.name !== VALUES){\n    VALUES_BUG = true;\n    $default = function values(){ return $native.call(this); };\n  }\n  // Define iterator\n  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG]  = returnThis;\n  if(DEFAULT){\n    methods = {\n      values:  DEF_VALUES ? $default : getMethod(VALUES),\n      keys:    IS_SET     ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if(FORCED)for(key in methods){\n      if(!(key in proto))redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n},{\"./_export\":41,\"./_has\":45,\"./_hide\":46,\"./_iter-create\":55,\"./_iterators\":59,\"./_library\":61,\"./_object-gpo\":71,\"./_redefine\":78,\"./_set-to-string-tag\":81,\"./_wks\":96}],57:[function(require,module,exports){\nvar ITERATOR     = require('./_wks')('iterator')\n  , SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function(){ SAFE_CLOSING = true; };\n  Array.from(riter, function(){ throw 2; });\n} catch(e){ /* empty */ }\n\nmodule.exports = function(exec, skipClosing){\n  if(!skipClosing && !SAFE_CLOSING)return false;\n  var safe = false;\n  try {\n    var arr  = [7]\n      , iter = arr[ITERATOR]();\n    iter.next = function(){ return {done: safe = true}; };\n    arr[ITERATOR] = function(){ return iter; };\n    exec(arr);\n  } catch(e){ /* empty */ }\n  return safe;\n};\n},{\"./_wks\":96}],58:[function(require,module,exports){\nmodule.exports = function(done, value){\n  return {value: value, done: !!done};\n};\n},{}],59:[function(require,module,exports){\nmodule.exports = {};\n},{}],60:[function(require,module,exports){\nvar getKeys   = require('./_object-keys')\n  , toIObject = require('./_to-iobject');\nmodule.exports = function(object, el){\n  var O      = toIObject(object)\n    , keys   = getKeys(O)\n    , length = keys.length\n    , index  = 0\n    , key;\n  while(length > index)if(O[key = keys[index++]] === el)return key;\n};\n},{\"./_object-keys\":73,\"./_to-iobject\":89}],61:[function(require,module,exports){\nmodule.exports = true;\n},{}],62:[function(require,module,exports){\nvar META     = require('./_uid')('meta')\n  , isObject = require('./_is-object')\n  , has      = require('./_has')\n  , setDesc  = require('./_object-dp').f\n  , id       = 0;\nvar isExtensible = Object.isExtensible || function(){\n  return true;\n};\nvar FREEZE = !require('./_fails')(function(){\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function(it){\n  setDesc(it, META, {value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  }});\n};\nvar fastKey = function(it, create){\n  // return primitive with prefix\n  if(!isObject(it))return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return 'F';\n    // not necessary to add metadata\n    if(!create)return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function(it, create){\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return true;\n    // not necessary to add metadata\n    if(!create)return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function(it){\n  if(FREEZE && meta.NEED && isExtensible(it) && !has(it, META))setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY:      META,\n  NEED:     false,\n  fastKey:  fastKey,\n  getWeak:  getWeak,\n  onFreeze: onFreeze\n};\n},{\"./_fails\":42,\"./_has\":45,\"./_is-object\":53,\"./_object-dp\":65,\"./_uid\":93}],63:[function(require,module,exports){\nvar global    = require('./_global')\n  , macrotask = require('./_task').set\n  , Observer  = global.MutationObserver || global.WebKitMutationObserver\n  , process   = global.process\n  , Promise   = global.Promise\n  , isNode    = require('./_cof')(process) == 'process';\n\nmodule.exports = function(){\n  var head, last, notify;\n\n  var flush = function(){\n    var parent, fn;\n    if(isNode && (parent = process.domain))parent.exit();\n    while(head){\n      fn   = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch(e){\n        if(head)notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if(parent)parent.enter();\n  };\n\n  // Node.js\n  if(isNode){\n    notify = function(){\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver\n  } else if(Observer){\n    var toggle = true\n      , node   = document.createTextNode('');\n    new Observer(flush).observe(node, {characterData: true}); // eslint-disable-line no-new\n    notify = function(){\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if(Promise && Promise.resolve){\n    var promise = Promise.resolve();\n    notify = function(){\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function(){\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function(fn){\n    var task = {fn: fn, next: undefined};\n    if(last)last.next = task;\n    if(!head){\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n},{\"./_cof\":33,\"./_global\":44,\"./_task\":86}],64:[function(require,module,exports){\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject    = require('./_an-object')\n  , dPs         = require('./_object-dps')\n  , enumBugKeys = require('./_enum-bug-keys')\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\n  , Empty       = function(){ /* empty */ }\n  , PROTOTYPE   = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function(){\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe')\n    , i      = enumBugKeys.length\n    , lt     = '<'\n    , gt     = '>'\n    , iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties){\n  var result;\n  if(O !== null){\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty;\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n},{\"./_an-object\":30,\"./_dom-create\":38,\"./_enum-bug-keys\":39,\"./_html\":47,\"./_object-dps\":66,\"./_shared-key\":82}],65:[function(require,module,exports){\nvar anObject       = require('./_an-object')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , toPrimitive    = require('./_to-primitive')\n  , dP             = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes){\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if(IE8_DOM_DEFINE)try {\n    return dP(O, P, Attributes);\n  } catch(e){ /* empty */ }\n  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n  if('value' in Attributes)O[P] = Attributes.value;\n  return O;\n};\n},{\"./_an-object\":30,\"./_descriptors\":37,\"./_ie8-dom-define\":48,\"./_to-primitive\":92}],66:[function(require,module,exports){\nvar dP       = require('./_object-dp')\n  , anObject = require('./_an-object')\n  , getKeys  = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties){\n  anObject(O);\n  var keys   = getKeys(Properties)\n    , length = keys.length\n    , i = 0\n    , P;\n  while(length > i)dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n},{\"./_an-object\":30,\"./_descriptors\":37,\"./_object-dp\":65,\"./_object-keys\":73}],67:[function(require,module,exports){\nvar pIE            = require('./_object-pie')\n  , createDesc     = require('./_property-desc')\n  , toIObject      = require('./_to-iobject')\n  , toPrimitive    = require('./_to-primitive')\n  , has            = require('./_has')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , gOPD           = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P){\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if(IE8_DOM_DEFINE)try {\n    return gOPD(O, P);\n  } catch(e){ /* empty */ }\n  if(has(O, P))return createDesc(!pIE.f.call(O, P), O[P]);\n};\n},{\"./_descriptors\":37,\"./_has\":45,\"./_ie8-dom-define\":48,\"./_object-pie\":74,\"./_property-desc\":76,\"./_to-iobject\":89,\"./_to-primitive\":92}],68:[function(require,module,exports){\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject')\n  , gOPN      = require('./_object-gopn').f\n  , toString  = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function(it){\n  try {\n    return gOPN(it);\n  } catch(e){\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it){\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n\n},{\"./_object-gopn\":69,\"./_to-iobject\":89}],69:[function(require,module,exports){\n// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys      = require('./_object-keys-internal')\n  , hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O){\n  return $keys(O, hiddenKeys);\n};\n},{\"./_enum-bug-keys\":39,\"./_object-keys-internal\":72}],70:[function(require,module,exports){\nexports.f = Object.getOwnPropertySymbols;\n},{}],71:[function(require,module,exports){\n// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has         = require('./_has')\n  , toObject    = require('./_to-object')\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\n  , ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function(O){\n  O = toObject(O);\n  if(has(O, IE_PROTO))return O[IE_PROTO];\n  if(typeof O.constructor == 'function' && O instanceof O.constructor){\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n},{\"./_has\":45,\"./_shared-key\":82,\"./_to-object\":91}],72:[function(require,module,exports){\nvar has          = require('./_has')\n  , toIObject    = require('./_to-iobject')\n  , arrayIndexOf = require('./_array-includes')(false)\n  , IE_PROTO     = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function(object, names){\n  var O      = toIObject(object)\n    , i      = 0\n    , result = []\n    , key;\n  for(key in O)if(key != IE_PROTO)has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while(names.length > i)if(has(O, key = names[i++])){\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n},{\"./_array-includes\":31,\"./_has\":45,\"./_shared-key\":82,\"./_to-iobject\":89}],73:[function(require,module,exports){\n// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys       = require('./_object-keys-internal')\n  , enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O){\n  return $keys(O, enumBugKeys);\n};\n},{\"./_enum-bug-keys\":39,\"./_object-keys-internal\":72}],74:[function(require,module,exports){\nexports.f = {}.propertyIsEnumerable;\n},{}],75:[function(require,module,exports){\n// most Object methods by ES6 should accept primitives\nvar $export = require('./_export')\n  , core    = require('./_core')\n  , fails   = require('./_fails');\nmodule.exports = function(KEY, exec){\n  var fn  = (core.Object || {})[KEY] || Object[KEY]\n    , exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);\n};\n},{\"./_core\":34,\"./_export\":41,\"./_fails\":42}],76:[function(require,module,exports){\nmodule.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n},{}],77:[function(require,module,exports){\nvar hide = require('./_hide');\nmodule.exports = function(target, src, safe){\n  for(var key in src){\n    if(safe && target[key])target[key] = src[key];\n    else hide(target, key, src[key]);\n  } return target;\n};\n},{\"./_hide\":46}],78:[function(require,module,exports){\nmodule.exports = require('./_hide');\n},{\"./_hide\":46}],79:[function(require,module,exports){\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object')\n  , anObject = require('./_an-object');\nvar check = function(O, proto){\n  anObject(O);\n  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function(test, buggy, set){\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch(e){ buggy = true; }\n      return function setPrototypeOf(O, proto){\n        check(O, proto);\n        if(buggy)O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n},{\"./_an-object\":30,\"./_ctx\":35,\"./_is-object\":53,\"./_object-gopd\":67}],80:[function(require,module,exports){\n'use strict';\nvar global      = require('./_global')\n  , core        = require('./_core')\n  , dP          = require('./_object-dp')\n  , DESCRIPTORS = require('./_descriptors')\n  , SPECIES     = require('./_wks')('species');\n\nmodule.exports = function(KEY){\n  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];\n  if(DESCRIPTORS && C && !C[SPECIES])dP.f(C, SPECIES, {\n    configurable: true,\n    get: function(){ return this; }\n  });\n};\n},{\"./_core\":34,\"./_descriptors\":37,\"./_global\":44,\"./_object-dp\":65,\"./_wks\":96}],81:[function(require,module,exports){\nvar def = require('./_object-dp').f\n  , has = require('./_has')\n  , TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};\n},{\"./_has\":45,\"./_object-dp\":65,\"./_wks\":96}],82:[function(require,module,exports){\nvar shared = require('./_shared')('keys')\n  , uid    = require('./_uid');\nmodule.exports = function(key){\n  return shared[key] || (shared[key] = uid(key));\n};\n},{\"./_shared\":83,\"./_uid\":93}],83:[function(require,module,exports){\nvar global = require('./_global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};\n},{\"./_global\":44}],84:[function(require,module,exports){\n// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject  = require('./_an-object')\n  , aFunction = require('./_a-function')\n  , SPECIES   = require('./_wks')('species');\nmodule.exports = function(O, D){\n  var C = anObject(O).constructor, S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n},{\"./_a-function\":27,\"./_an-object\":30,\"./_wks\":96}],85:[function(require,module,exports){\nvar toInteger = require('./_to-integer')\n  , defined   = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function(TO_STRING){\n  return function(that, pos){\n    var s = String(defined(that))\n      , i = toInteger(pos)\n      , l = s.length\n      , a, b;\n    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n},{\"./_defined\":36,\"./_to-integer\":88}],86:[function(require,module,exports){\nvar ctx                = require('./_ctx')\n  , invoke             = require('./_invoke')\n  , html               = require('./_html')\n  , cel                = require('./_dom-create')\n  , global             = require('./_global')\n  , process            = global.process\n  , setTask            = global.setImmediate\n  , clearTask          = global.clearImmediate\n  , MessageChannel     = global.MessageChannel\n  , counter            = 0\n  , queue              = {}\n  , ONREADYSTATECHANGE = 'onreadystatechange'\n  , defer, channel, port;\nvar run = function(){\n  var id = +this;\n  if(queue.hasOwnProperty(id)){\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function(event){\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif(!setTask || !clearTask){\n  setTask = function setImmediate(fn){\n    var args = [], i = 1;\n    while(arguments.length > i)args.push(arguments[i++]);\n    queue[++counter] = function(){\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id){\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if(require('./_cof')(process) == 'process'){\n    defer = function(id){\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if(MessageChannel){\n    channel = new MessageChannel;\n    port    = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){\n    defer = function(id){\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if(ONREADYSTATECHANGE in cel('script')){\n    defer = function(id){\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function(id){\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set:   setTask,\n  clear: clearTask\n};\n},{\"./_cof\":33,\"./_ctx\":35,\"./_dom-create\":38,\"./_global\":44,\"./_html\":47,\"./_invoke\":49}],87:[function(require,module,exports){\nvar toInteger = require('./_to-integer')\n  , max       = Math.max\n  , min       = Math.min;\nmodule.exports = function(index, length){\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n},{\"./_to-integer\":88}],88:[function(require,module,exports){\n// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n},{}],89:[function(require,module,exports){\n// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject')\n  , defined = require('./_defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};\n},{\"./_defined\":36,\"./_iobject\":50}],90:[function(require,module,exports){\n// 7.1.15 ToLength\nvar toInteger = require('./_to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n},{\"./_to-integer\":88}],91:[function(require,module,exports){\n// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};\n},{\"./_defined\":36}],92:[function(require,module,exports){\n// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function(it, S){\n  if(!isObject(it))return it;\n  var fn, val;\n  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n},{\"./_is-object\":53}],93:[function(require,module,exports){\nvar id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n},{}],94:[function(require,module,exports){\nvar global         = require('./_global')\n  , core           = require('./_core')\n  , LIBRARY        = require('./_library')\n  , wksExt         = require('./_wks-ext')\n  , defineProperty = require('./_object-dp').f;\nmodule.exports = function(name){\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if(name.charAt(0) != '_' && !(name in $Symbol))defineProperty($Symbol, name, {value: wksExt.f(name)});\n};\n},{\"./_core\":34,\"./_global\":44,\"./_library\":61,\"./_object-dp\":65,\"./_wks-ext\":95}],95:[function(require,module,exports){\nexports.f = require('./_wks');\n},{\"./_wks\":96}],96:[function(require,module,exports){\nvar store      = require('./_shared')('wks')\n  , uid        = require('./_uid')\n  , Symbol     = require('./_global').Symbol\n  , USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function(name){\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n},{\"./_global\":44,\"./_shared\":83,\"./_uid\":93}],97:[function(require,module,exports){\nvar classof   = require('./_classof')\n  , ITERATOR  = require('./_wks')('iterator')\n  , Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function(it){\n  if(it != undefined)return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n},{\"./_classof\":32,\"./_core\":34,\"./_iterators\":59,\"./_wks\":96}],98:[function(require,module,exports){\n'use strict';\nvar addToUnscopables = require('./_add-to-unscopables')\n  , step             = require('./_iter-step')\n  , Iterators        = require('./_iterators')\n  , toIObject        = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function(iterated, kind){\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , kind  = this._k\n    , index = this._i++;\n  if(!O || index >= O.length){\n    this._t = undefined;\n    return step(1);\n  }\n  if(kind == 'keys'  )return step(0, index);\n  if(kind == 'values')return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n},{\"./_add-to-unscopables\":28,\"./_iter-define\":56,\"./_iter-step\":58,\"./_iterators\":59,\"./_to-iobject\":89}],99:[function(require,module,exports){\nvar $export = require('./_export')\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', {create: require('./_object-create')});\n},{\"./_export\":41,\"./_object-create\":64}],100:[function(require,module,exports){\nvar $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', {defineProperty: require('./_object-dp').f});\n},{\"./_descriptors\":37,\"./_export\":41,\"./_object-dp\":65}],101:[function(require,module,exports){\n// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\nvar toIObject                 = require('./_to-iobject')\n  , $getOwnPropertyDescriptor = require('./_object-gopd').f;\n\nrequire('./_object-sap')('getOwnPropertyDescriptor', function(){\n  return function getOwnPropertyDescriptor(it, key){\n    return $getOwnPropertyDescriptor(toIObject(it), key);\n  };\n});\n},{\"./_object-gopd\":67,\"./_object-sap\":75,\"./_to-iobject\":89}],102:[function(require,module,exports){\n// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject        = require('./_to-object')\n  , $getPrototypeOf = require('./_object-gpo');\n\nrequire('./_object-sap')('getPrototypeOf', function(){\n  return function getPrototypeOf(it){\n    return $getPrototypeOf(toObject(it));\n  };\n});\n},{\"./_object-gpo\":71,\"./_object-sap\":75,\"./_to-object\":91}],103:[function(require,module,exports){\n// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object')\n  , $keys    = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function(){\n  return function keys(it){\n    return $keys(toObject(it));\n  };\n});\n},{\"./_object-keys\":73,\"./_object-sap\":75,\"./_to-object\":91}],104:[function(require,module,exports){\n// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', {setPrototypeOf: require('./_set-proto').set});\n},{\"./_export\":41,\"./_set-proto\":79}],105:[function(require,module,exports){\n\n},{}],106:[function(require,module,exports){\n'use strict';\nvar LIBRARY            = require('./_library')\n  , global             = require('./_global')\n  , ctx                = require('./_ctx')\n  , classof            = require('./_classof')\n  , $export            = require('./_export')\n  , isObject           = require('./_is-object')\n  , aFunction          = require('./_a-function')\n  , anInstance         = require('./_an-instance')\n  , forOf              = require('./_for-of')\n  , speciesConstructor = require('./_species-constructor')\n  , task               = require('./_task').set\n  , microtask          = require('./_microtask')()\n  , PROMISE            = 'Promise'\n  , TypeError          = global.TypeError\n  , process            = global.process\n  , $Promise           = global[PROMISE]\n  , process            = global.process\n  , isNode             = classof(process) == 'process'\n  , empty              = function(){ /* empty */ }\n  , Internal, GenericPromiseCapability, Wrapper;\n\nvar USE_NATIVE = !!function(){\n  try {\n    // correct subclassing with @@species support\n    var promise     = $Promise.resolve(1)\n      , FakePromise = (promise.constructor = {})[require('./_wks')('species')] = function(exec){ exec(empty, empty); };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function') && promise.then(empty) instanceof FakePromise;\n  } catch(e){ /* empty */ }\n}();\n\n// helpers\nvar sameConstructor = function(a, b){\n  // with library wrapper special case\n  return a === b || a === $Promise && b === Wrapper;\n};\nvar isThenable = function(it){\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar newPromiseCapability = function(C){\n  return sameConstructor($Promise, C)\n    ? new PromiseCapability(C)\n    : new GenericPromiseCapability(C);\n};\nvar PromiseCapability = GenericPromiseCapability = function(C){\n  var resolve, reject;\n  this.promise = new C(function($$resolve, $$reject){\n    if(resolve !== undefined || reject !== undefined)throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject  = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject  = aFunction(reject);\n};\nvar perform = function(exec){\n  try {\n    exec();\n  } catch(e){\n    return {error: e};\n  }\n};\nvar notify = function(promise, isReject){\n  if(promise._n)return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function(){\n    var value = promise._v\n      , ok    = promise._s == 1\n      , i     = 0;\n    var run = function(reaction){\n      var handler = ok ? reaction.ok : reaction.fail\n        , resolve = reaction.resolve\n        , reject  = reaction.reject\n        , domain  = reaction.domain\n        , result, then;\n      try {\n        if(handler){\n          if(!ok){\n            if(promise._h == 2)onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if(handler === true)result = value;\n          else {\n            if(domain)domain.enter();\n            result = handler(value);\n            if(domain)domain.exit();\n          }\n          if(result === reaction.promise){\n            reject(TypeError('Promise-chain cycle'));\n          } else if(then = isThenable(result)){\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch(e){\n        reject(e);\n      }\n    };\n    while(chain.length > i)run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if(isReject && !promise._h)onUnhandled(promise);\n  });\n};\nvar onUnhandled = function(promise){\n  task.call(global, function(){\n    var value = promise._v\n      , abrupt, handler, console;\n    if(isUnhandled(promise)){\n      abrupt = perform(function(){\n        if(isNode){\n          process.emit('unhandledRejection', value, promise);\n        } else if(handler = global.onunhandledrejection){\n          handler({promise: promise, reason: value});\n        } else if((console = global.console) && console.error){\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if(abrupt)throw abrupt.error;\n  });\n};\nvar isUnhandled = function(promise){\n  if(promise._h == 1)return false;\n  var chain = promise._a || promise._c\n    , i     = 0\n    , reaction;\n  while(chain.length > i){\n    reaction = chain[i++];\n    if(reaction.fail || !isUnhandled(reaction.promise))return false;\n  } return true;\n};\nvar onHandleUnhandled = function(promise){\n  task.call(global, function(){\n    var handler;\n    if(isNode){\n      process.emit('rejectionHandled', promise);\n    } else if(handler = global.onrejectionhandled){\n      handler({promise: promise, reason: promise._v});\n    }\n  });\n};\nvar $reject = function(value){\n  var promise = this;\n  if(promise._d)return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if(!promise._a)promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function(value){\n  var promise = this\n    , then;\n  if(promise._d)return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if(promise === value)throw TypeError(\"Promise can't be resolved itself\");\n    if(then = isThenable(value)){\n      microtask(function(){\n        var wrapper = {_w: promise, _d: false}; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch(e){\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch(e){\n    $reject.call({_w: promise, _d: false}, e); // wrap\n  }\n};\n\n// constructor polyfill\nif(!USE_NATIVE){\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor){\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch(err){\n      $reject.call(this, err);\n    }\n  };\n  Internal = function Promise(executor){\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = require('./_redefine-all')($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected){\n      var reaction    = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok     = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail   = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if(this._a)this._a.push(reaction);\n      if(this._s)notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function(onRejected){\n      return this.then(undefined, onRejected);\n    }\n  });\n  PromiseCapability = function(){\n    var promise  = new Internal;\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject  = ctx($reject, promise, 1);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Promise: $Promise});\nrequire('./_set-to-string-tag')($Promise, PROMISE);\nrequire('./_set-species')(PROMISE);\nWrapper = require('./_core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r){\n    var capability = newPromiseCapability(this)\n      , $$reject   = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x){\n    // instanceof instead of internal slot check because we should fix it without replacement native Promise core\n    if(x instanceof $Promise && sameConstructor(x.constructor, this))return x;\n    var capability = newPromiseCapability(this)\n      , $$resolve  = capability.resolve;\n    $$resolve(x);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./_iter-detect')(function(iter){\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable){\n    var C          = this\n      , capability = newPromiseCapability(C)\n      , resolve    = capability.resolve\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      var values    = []\n        , index     = 0\n        , remaining = 1;\n      forOf(iterable, false, function(promise){\n        var $index        = index++\n          , alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function(value){\n          if(alreadyCalled)return;\n          alreadyCalled  = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable){\n    var C          = this\n      , capability = newPromiseCapability(C)\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      forOf(iterable, false, function(promise){\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  }\n});\n},{\"./_a-function\":27,\"./_an-instance\":29,\"./_classof\":32,\"./_core\":34,\"./_ctx\":35,\"./_export\":41,\"./_for-of\":43,\"./_global\":44,\"./_is-object\":53,\"./_iter-detect\":57,\"./_library\":61,\"./_microtask\":63,\"./_redefine-all\":77,\"./_set-species\":80,\"./_set-to-string-tag\":81,\"./_species-constructor\":84,\"./_task\":86,\"./_wks\":96}],107:[function(require,module,exports){\n'use strict';\nvar $at  = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function(iterated){\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , index = this._i\n    , point;\n  if(index >= O.length)return {value: undefined, done: true};\n  point = $at(O, index);\n  this._i += point.length;\n  return {value: point, done: false};\n});\n},{\"./_iter-define\":56,\"./_string-at\":85}],108:[function(require,module,exports){\n'use strict';\n// ECMAScript 6 symbols shim\nvar global         = require('./_global')\n  , has            = require('./_has')\n  , DESCRIPTORS    = require('./_descriptors')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , META           = require('./_meta').KEY\n  , $fails         = require('./_fails')\n  , shared         = require('./_shared')\n  , setToStringTag = require('./_set-to-string-tag')\n  , uid            = require('./_uid')\n  , wks            = require('./_wks')\n  , wksExt         = require('./_wks-ext')\n  , wksDefine      = require('./_wks-define')\n  , keyOf          = require('./_keyof')\n  , enumKeys       = require('./_enum-keys')\n  , isArray        = require('./_is-array')\n  , anObject       = require('./_an-object')\n  , toIObject      = require('./_to-iobject')\n  , toPrimitive    = require('./_to-primitive')\n  , createDesc     = require('./_property-desc')\n  , _create        = require('./_object-create')\n  , gOPNExt        = require('./_object-gopn-ext')\n  , $GOPD          = require('./_object-gopd')\n  , $DP            = require('./_object-dp')\n  , $keys          = require('./_object-keys')\n  , gOPD           = $GOPD.f\n  , dP             = $DP.f\n  , gOPN           = gOPNExt.f\n  , $Symbol        = global.Symbol\n  , $JSON          = global.JSON\n  , _stringify     = $JSON && $JSON.stringify\n  , PROTOTYPE      = 'prototype'\n  , HIDDEN         = wks('_hidden')\n  , TO_PRIMITIVE   = wks('toPrimitive')\n  , isEnum         = {}.propertyIsEnumerable\n  , SymbolRegistry = shared('symbol-registry')\n  , AllSymbols     = shared('symbols')\n  , OPSymbols      = shared('op-symbols')\n  , ObjectProto    = Object[PROTOTYPE]\n  , USE_NATIVE     = typeof $Symbol == 'function'\n  , QObject        = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function(){\n  return _create(dP({}, 'a', {\n    get: function(){ return dP(this, 'a', {value: 7}).a; }\n  })).a != 7;\n}) ? function(it, key, D){\n  var protoDesc = gOPD(ObjectProto, key);\n  if(protoDesc)delete ObjectProto[key];\n  dP(it, key, D);\n  if(protoDesc && it !== ObjectProto)dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function(tag){\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function(it){\n  return typeof it == 'symbol';\n} : function(it){\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D){\n  if(it === ObjectProto)$defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if(has(AllSymbols, key)){\n    if(!D.enumerable){\n      if(!has(it, HIDDEN))dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if(has(it, HIDDEN) && it[HIDDEN][key])it[HIDDEN][key] = false;\n      D = _create(D, {enumerable: createDesc(0, false)});\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P){\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P))\n    , i    = 0\n    , l = keys.length\n    , key;\n  while(l > i)$defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P){\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key){\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if(this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key){\n  it  = toIObject(it);\n  key = toPrimitive(key, true);\n  if(it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return;\n  var D = gOPD(it, key);\n  if(D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key]))D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it){\n  var names  = gOPN(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i){\n    if(!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META)result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it){\n  var IS_OP  = it === ObjectProto\n    , names  = gOPN(IS_OP ? OPSymbols : toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i){\n    if(has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true))result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif(!USE_NATIVE){\n  $Symbol = function Symbol(){\n    if(this instanceof $Symbol)throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function(value){\n      if(this === ObjectProto)$set.call(OPSymbols, value);\n      if(has(this, HIDDEN) && has(this[HIDDEN], tag))this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if(DESCRIPTORS && setter)setSymbolDesc(ObjectProto, tag, {configurable: true, set: $set});\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString(){\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f   = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f  = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if(DESCRIPTORS && !require('./_library')){\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function(name){\n    return wrap(wks(name));\n  }\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Symbol: $Symbol});\n\nfor(var symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), i = 0; symbols.length > i; )wks(symbols[i++]);\n\nfor(var symbols = $keys(wks.store), i = 0; symbols.length > i; )wksDefine(symbols[i++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function(key){\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(key){\n    if(isSymbol(key))return keyOf(SymbolRegistry, key);\n    throw TypeError(key + ' is not a symbol!');\n  },\n  useSetter: function(){ setter = true; },\n  useSimple: function(){ setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function(){\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({a: S}) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it){\n    if(it === undefined || isSymbol(it))return; // IE8 returns string on undefined\n    var args = [it]\n      , i    = 1\n      , replacer, $replacer;\n    while(arguments.length > i)args.push(arguments[i++]);\n    replacer = args[1];\n    if(typeof replacer == 'function')$replacer = replacer;\n    if($replacer || !isArray(replacer))replacer = function(key, value){\n      if($replacer)value = $replacer.call(this, key, value);\n      if(!isSymbol(value))return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n},{\"./_an-object\":30,\"./_descriptors\":37,\"./_enum-keys\":40,\"./_export\":41,\"./_fails\":42,\"./_global\":44,\"./_has\":45,\"./_hide\":46,\"./_is-array\":52,\"./_keyof\":60,\"./_library\":61,\"./_meta\":62,\"./_object-create\":64,\"./_object-dp\":65,\"./_object-gopd\":67,\"./_object-gopn\":69,\"./_object-gopn-ext\":68,\"./_object-gops\":70,\"./_object-keys\":73,\"./_object-pie\":74,\"./_property-desc\":76,\"./_redefine\":78,\"./_set-to-string-tag\":81,\"./_shared\":83,\"./_to-iobject\":89,\"./_to-primitive\":92,\"./_uid\":93,\"./_wks\":96,\"./_wks-define\":94,\"./_wks-ext\":95}],109:[function(require,module,exports){\nrequire('./_wks-define')('asyncIterator');\n},{\"./_wks-define\":94}],110:[function(require,module,exports){\nrequire('./_wks-define')('observable');\n},{\"./_wks-define\":94}],111:[function(require,module,exports){\nrequire('./es6.array.iterator');\nvar global        = require('./_global')\n  , hide          = require('./_hide')\n  , Iterators     = require('./_iterators')\n  , TO_STRING_TAG = require('./_wks')('toStringTag');\n\nfor(var collections = ['NodeList', 'DOMTokenList', 'MediaList', 'StyleSheetList', 'CSSRuleList'], i = 0; i < 5; i++){\n  var NAME       = collections[i]\n    , Collection = global[NAME]\n    , proto      = Collection && Collection.prototype;\n  if(proto && !proto[TO_STRING_TAG])hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n},{\"./_global\":44,\"./_hide\":46,\"./_iterators\":59,\"./_wks\":96,\"./es6.array.iterator\":98}],112:[function(require,module,exports){\n//     proxy-observe v0.0.18\n//     Copyright (c) 2015, 2016 Simon Y. Blackwell, AnyWhichWay\n//     MIT License - http://opensource.org/licenses/mit-license.php\n(function() {\n\t\"use strict\";\n\t// Creates and returns a Proxy wrapping a target so that all changes can be trapped and forwarded to\n\t// a callback. The callback takes an array of changes just like the traditional original Chrome Object.observe\n\t// {object:<object changed>,name:<field changed>,type:add|update|delete|reconfigure|preventExtensions|setPrototype,oldValue:<old value if update | delete>}\n\t// The acceptlist can be add|update|delete|reconfigure|preventExtensions|setPrototype.\n\t// v 0.0.10 to support pausing and restarting observation two additional constructor arguments are available to Object.observe:\n\t// pausable - create the Observer so it can be paused\n\t// pause - create observer in paused state\n\t// if pausable is true then an additional method deliver(ignorePrevious) is available to start delivery\n\t// to pause delivery set a property called pause on the function deliver to true\n\t// pausable is optional to reduce the chance of shadowing a property or method on any existing code called deliver\n\tif(!Object.observe && typeof(Proxy)===\"function\") {\n\t\tfunction Observer(target,callback,acceptlist,pausable,pause,delay) {\n\t    \tvar me = this, proxy;\n\t    \tfunction deliver(ignorePrevious,delay) {\n\t    \t\tdeliver.delay = delay;\n\t    \t\tif(!deliver.pause) {\n\t        \t\tif(me.changeset.length>0) {\n\t        \t\t\tif(!ignorePrevious) {\n\t\t    \t    \t\tvar changes = me.changeset.filter(function(change) { return !acceptlist || acceptlist.indexOf(change.type)>=0; });\n\t\t        \t\t\tif(changes.length>0) {\n\t\t        \t\t\t\tcallback(changes);\n\t\t        \t\t\t}\n\t        \t\t\t}\n\t        \t\t\tme.changeset = [];\n\t        \t\t}\n\t    \t\t}\n\t    \t}\n\t    \tdeliver.pause = pause;\n\t    \tdeliver.delay = delay;\n\t\t    me.get = function(target, property) {\n\t\t    \tif(property===\"__observer__\") {\n\t\t    \t\treturn me;\n\t\t    \t}\n\t\t    \tif(property===\"unobserve\") {\n\t\t    \t\treturn function() {\n\t\t    \t\t\tObject.unobserve(target);\n\t\t    \t\t\treturn target;\n\t\t    \t\t};\n\t\t    \t}\n\t\t    \tif(property===\"deliver\") {\n\t\t    \t\treturn deliver;\n\t\t    \t}\n\t\t    \treturn target[property];\n\t\t    }\n\t    \tme.target = target;\n\t    \tme.changeset = [];\n\t    \tif(!me.target.__observerCallbacks__) {\n\t    \t\t// __observerCallbacks__ is used as an index to get at the proxy which is the observer, so we can unobserve\n\t    \t\tObject.defineProperty(target,\"__observerCallbacks__\",{enumerable:false,configurable:true,writable:false,value:[]});\n\t    \t\tObject.defineProperty(target,\"__observers__\",{enumerable:false,configurable:true,writable:false,value:[]});\n\t    \t}\n\t    \tme.target.__observerCallbacks__.push(callback);\n\t    \tme.target.__observers__.push(this);\n\t    \tproxy = new Proxy(target,me);\n\t    \tdeliver(false,delay);\n\t    \treturn proxy;\n\t    }\n\t\tObserver.prototype.deliver = function() {\n\t\t\treturn this.get(null,\"deliver\");\n\t\t}\n\t    Observer.prototype.set = function(target, property, value) { // , receiver\n\t    \tvar oldvalue = target[property];\n\t    \tvar type = (oldvalue===undefined ? \"add\" : \"update\");\n\t    \ttarget[property] = value;\n\t    \tif(target.__observers__.indexOf(this)>=0 && (!this.acceptlist || this.acceptlist.indexOf(type)>=0)) {\n\t        \tvar change = {object:target,name:property,type:type},\n\t        \t\tstart = this.changeset.length === 0,\n\t        \t\tdeliver = this.deliver();\n\t        \tif(type===\"update\") {\n\t        \t\tchange.oldValue = oldvalue;\n\t        \t}\n\t        \tthis.changeset.push(change);\n\t        \tif(start) {\n\t        \t\tdeliver(false,(typeof(deliver.delay)===\"number\" ? deliver.delay : 10));\n\t        \t}\n\t    \t}\n\t    \treturn true;\n\t    };\n\t    Observer.prototype.deleteProperty = function(target, property) {\n\t    \tvar oldvalue = target[property];\n\t    \t//if(typeof(oldvalue)!==\"undefined\") {\n\t\t    \tdelete target[property];\n\t\t    \tif(target.__observers__.indexOf(this)>=0 && !this.acceptlist || this.acceptlist.indexOf(\"delete\")>=0) {\n\t\t        \tvar change = {object:target,name:property,type:\"delete\",oldValue:oldvalue},\n\t\t        \t\tstart = this.changeset.length === 0,\n\t\t        \t\tdeliver = this.deliver();\n\t\t        \tthis.changeset.push(change);\n\t\t        \tif(start) {\n\t\t        \t\tdeliver(false,(typeof(deliver.delay)===\"number\" ? deliver.delay : 10));\n\t\t        \t}\n\t\t    \t}\n\t    \t//}\n\t    \treturn true;\n\t    };\n\t    Observer.prototype.defineProperty = function(target, property, descriptor) {\n\t    \tObject.defineProperty(target, property, descriptor);\n\t    \tif(target.__observers__.indexOf(this)>=0 && !this.acceptlist || this.acceptlist.indexOf(\"reconfigure\")>=0) {\n\t        \tvar change = {object:target,name:property,type:\"reconfigure\"},\n        \t\t\tstart = this.changeset.length === 0,\n        \t\t\tdeliver = this.deliver();\n\t        \tthis.changeset.push(change);\n\t        \tif(start) {\n\t        \t\tdeliver(false,(typeof(deliver.delay)===\"number\" ? deliver.delay : 10));\n\t        \t}\n\t    \t}\n\t    \treturn true;\n\t    };\n\t    Observer.prototype.setPrototypeOf = function(target, prototype) {\n\t    \tvar oldvalue = Object.getPrototypeOf(target);\n\t    \tObject.setPrototypeOf(target, prototype);\n\t    \tif(target.__observers__.indexOf(this)>=0 && !this.acceptlist || this.acceptlist.indexOf(\"setPrototype\")>=0) {\n\t        \tvar change = {object:target,name:\"__proto__\",type:\"setPrototype\",oldValue:oldvalue},\n    \t\t\t\tstart = this.changeset.length === 0,\n    \t\t\t\tdeliver = this.deliver();\n\t        \tthis.changeset.push(change);\n\t        \tif(start) {\n\t        \t\tdeliver(false,(typeof(deliver.delay)===\"number\" ? deliver.delay : 10));\n\t        \t}\n\t    \t}\n\t    \treturn true;\n\t    };\n\t    Observer.prototype.preventExtensions = function(target) {\n\t        Object.preventExtensions(target);\n\t    \tif(target.__observers__.indexOf(this)>=0 && !this.acceptlist || this.acceptlist.indexOf(\"preventExtensions\")>=0) {\n\t        \tvar change = {object:target,type:\"preventExtensions\"},\n\t\t\t\t\tstart = this.changeset.length === 0,\n\t\t\t\t\tdeliver = this.deliver();\n\t        \tthis.changeset.push(change);\n\t        \tif(start) {\n\t        \t\tdeliver(false,(typeof(deliver.delay)===\"number\" ? deliver.delay : 10));\n\t        \t}\n\t    \t}\n\t    \treturn true;\n\t    };\n\t    Object.observe = function(object,callback,acceptlist,pausable,pause,delay) {\n\t    \treturn new Observer(object,callback,acceptlist,pausable,pause,delay);\n\t    };\n\t    Object.unobserve = function(object,callback) {\n\t    \tif(object.__observerCallbacks__) {\n\t    \t\tif(!callback) {\n\t    \t\t\tobject.__observerCallbacks__.splice(0,object.__observerCallbacks__.length);\n\t    \t\t\tobject.__observers__.splice(0,object.__observers__.length);\n\t    \t\t\treturn;\n\t    \t\t}\n\t    \t\tobject.__observerCallbacks__.forEach(function(observercallback,i) {\n\t    \t\t\tif(callback===observercallback) {\n\t    \t\t\t\tobject.__observerCallbacks__.splice(i,1);\n\t    \t\t\t\tdelete object.__observers__[i].callback;\n\t    \t\t\t\tobject.__observers__.splice(i,1);\n\t    \t\t\t}\n\t    \t\t});\n\t    \t}\n\t    };\n\t    Array.observe = function(object,callback,acceptlist,pausable,pause,delay) {\n\t    \tif(!(object instanceof Array) && !Array.isArray(object)) {\n\t    \t\tthrow new TypeError(\"First argument to Array.observer is not an Array\");\n\t    \t}\n\t    \tvar arrayproxy = new Proxy(object,{get: function(target,property) {\n\t    \t\tif(property===\"unobserve\") {\n\t\t    \t\treturn function(callback) {\n\t\t    \t\t\tif(callback) {\n\t\t    \t\t\t\treturn Object.unobserve(target,callback);\n\t\t    \t\t\t}\n\t\t    \t\t\treturn target.unobserve();\n\t\t    \t\t};\n\t\t    \t}\n\t    \t\tif(property===\"splice\") {\n\t    \t\t\treturn function(start,end) {\n\t    \t\t\t\tif(typeof(start)!==\"number\" || typeof(end)!==\"number\") {\n\t    \t\t\t\t\tthrow new TypeError(\"First two arguments to Array splice are not number, number\");\n\t    \t\t\t\t}\n\t    \t    \t\tvar removed = this.slice(start,start+end),\n\t    \t    \t\t\taddedCount = (arguments.length > 1 ? arguments.length-2 : 0),\n\t    \t    \t\t\tchange =  {object:object,type:\"splice\",index:start,removed:removed,addedCount:addedCount};\n\t    \t    \t\ttarget.splice.apply(target,arguments);\n\t    \t    \t\tif(acceptlist.indexOf(\"splice\")>=0) {\n\t    \t    \t\t\tvar start = proxy.__observer__.changeset.length === 0,\n\t    \t        \t\t\tdeliver = proxy.__observer__.deliver();\n\t    \t    \t\t\tproxy.__observer__.changeset.push(change);\n\t    \t    \t\t\tif(start) {\n\t    \t\t        \t\tdeliver(false,(typeof(deliver.delay)===\"number\" ? deliver.delay : 10));\n\t    \t\t        \t}\n\t    \t    \t\t}\n\t    \t    \t}\n\t    \t\t}\n\t    \t\tif(property===\"push\") {\n\t    \t\t\t return function(item) {\n\t    \t\t    \treturn this.splice(this.length,0,item);\n\t    \t\t    }\n\t    \t\t}\n\t    \t\tif(property===\"pop\") {\n\t    \t\t\t return function() {\n\t    \t\t    \treturn this.splice(this.length-1,1);\n\t    \t\t    }\n\t    \t\t}\n\t    \t\tif(property===\"unshift\") {\n\t    \t\t\t return function(item) {\n    \t\t    \t\treturn this.splice(0,0,item);\n    \t\t    \t}\n\t    \t\t}\n\t    \t\tif(property===\"shift\") {\n\t    \t\t\treturn function() {\n\t    \t    \t\treturn this.splice(0,1);\n\t    \t    \t}\n\t    \t\t}\n\t    \t\treturn target[property];\n\t    \t}});\n\t    \tvar proxy = Object.observe(arrayproxy,function(changeset) { \n\t    \t\tvar changes = changeset.filter(function(change) { return change.name!==\"length\" && change.name!==\"add\" && (!acceptlist || acceptlist.indexOf(change.type)>=0); });\n\t    \t\tif(changes.length>0) {\n\t    \t\t\tcallback(changes);\n\t    \t\t}\n\t    \t},acceptlist,pausable,pause,delay);\n\t    \treturn proxy;\n\t    };\n\t    Array.unobserve = function(object,callback) {\n\t\t  return object.unobserve(callback);\n\t    }\n\t}\n\tObject.deepObserve = function(object,callback,parts) {\n\t\tparts = (parts ? parts : []);\n\t\tvar keys = Object.keys(object);\n\t\tkeys.forEach(function(key) {\n\t\t\tif(object[key] instanceof Object) {\n\t\t\t\tvar newparts = parts.slice(0);\n\t\t\t\tnewparts.push(key);\n\t\t\t\tobject[key] = Object.deepObserve(object[key],callback,newparts);\n\t\t\t}\n\t\t});\n\t\tvar observed = Object.observe(object,function(changeset) {\n\t\t\tvar changes = [];\n\t\t\tfunction recurse(name,rootObject,oldObject,newObject,path) {\n\t\t\t\tif(newObject instanceof Object) {\n\t\t\t\t\tvar newkeys = Object.keys(newObject);\n\t\t\t\t\tnewkeys.forEach(function(key) {\n\t\t\t\t\t\tif(!oldObject || (oldObject[key]!==newObject[key])) {\n\t\t\t\t\t\t\tvar oldvalue = (oldObject && oldObject[key]!==undefined ? oldObject[key] : undefined),\n\t\t\t\t\t\t\t\tchange = (oldvalue===undefined ? \"add\" : \"update\"),\n\t\t\t\t\t\t\t\tkeypath = path + \".\" + key;\n\t\t\t\t\t\t\tchanges.push({name:name,object:rootObject,type:change,oldValue:oldvalue,newValue:newObject[key],keypath:keypath});\n\t\t\t\t\t\t\trecurse(name,rootObject,oldvalue,newObject[key],keypath);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else if(oldObject instanceof Object) {\n\t\t\t\t\tvar oldkeys = Object.keys(oldObject);\n\t\t\t\t\toldkeys.forEach(function(key) {\n\t\t\t\t\t\tvar change = (newObject===null ? \"update\" : \"delete\"),\n\t\t\t\t\t\t\tkeypath = path + \".\" + key;\n\t\t\t\t\t\tchanges.push({name:name,object:rootObject,type:change,oldValue:oldObject[key],newValue:newObject,keypath:keypath});\n\t\t\t\t\t\trecurse(name,rootObject,oldObject[key],undefined,keypath);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tchangeset.forEach(function(change) {\n\t\t\t\tvar keypath = (parts.length>0 ? parts.join(\".\") + \".\" : \"\") + change.name;\n\t\t\t\tchanges.push({name:change.name,object:change.object,type:change.type,oldValue:change.oldValue,newValue:change.object[change.name],keypath:keypath});\n\t\t\t\trecurse(change.name,change.object,change.oldValue,change.object[change.name],keypath);\n\t\t\t});\n\t\t\tcallback(changes);\n\t\t});\n\t\treturn observed;\n\t};\n})();\n},{}],113:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DataObjectObserver = exports.DataObjectReporter = exports.Syncher = undefined;\n\nvar _Syncher = require('./syncher/Syncher');\n\nvar _Syncher2 = _interopRequireDefault(_Syncher);\n\nvar _DataObjectReporter = require('./syncher/DataObjectReporter');\n\nvar _DataObjectReporter2 = _interopRequireDefault(_DataObjectReporter);\n\nvar _DataObjectObserver = require('./syncher/DataObjectObserver');\n\nvar _DataObjectObserver2 = _interopRequireDefault(_DataObjectObserver);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.Syncher = _Syncher2.default;\nexports.DataObjectReporter = _DataObjectReporter2.default;\nexports.DataObjectObserver = _DataObjectObserver2.default;\n\n},{\"./syncher/DataObjectObserver\":116,\"./syncher/DataObjectReporter\":117,\"./syncher/Syncher\":120}],114:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _keys = require('babel-runtime/core-js/object/keys');\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _ProxyObject = require('./ProxyObject');\n\nvar _ProxyObject2 = _interopRequireDefault(_ProxyObject);\n\nvar _DataObjectChild = require('./DataObjectChild');\n\nvar _DataObjectChild2 = _interopRequireDefault(_DataObjectChild);\n\nvar _utils = require('../utils/utils.js');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Main extension class for observers and reporters, with common properties and methods.\n * Children management is common for observers and reporters.\n */\nvar DataObject = function () {\n  /* private\n  _version: number\n   _owner: HypertyURL\n  _url: ObjectURL\n  _schema: Schema\n  _bus: MiniBus\n  _status: on | paused\n  _syncObj: SyncData\n   _children: { id: DataObjectChild }\n  _childrenListeners: [MsgListener]\n   ----event handlers----\n  _onAddChildHandler: (event) => void\n  */\n\n  /**\n   * @ignore\n   * Should not be used directly by Hyperties. It's called by the Syncher create or subscribe method's\n   */\n  function DataObject(syncher, url, schema, initialStatus, initialData, childrens) {\n    (0, _classCallCheck3.default)(this, DataObject);\n\n    var _this = this;\n\n    _this._syncher = syncher;\n    _this._url = url;\n    _this._schema = schema;\n    _this._status = initialStatus;\n    _this._syncObj = new _ProxyObject2.default(initialData);\n    _this._childrens = childrens;\n\n    _this._version = 0;\n    _this._childId = 0;\n    _this._childrenObjects = {};\n    _this._childrenListeners = [];\n\n    _this._owner = syncher._owner;\n    _this._bus = syncher._bus;\n  }\n\n  (0, _createClass3.default)(DataObject, [{\n    key: '_allocateListeners',\n    value: function _allocateListeners() {\n      var _this2 = this;\n\n      var _this = this;\n\n      var childBaseURL = _this._url + '/children/';\n      console.log('[Data Object - AllocateListeners] - ', _this._childrens);\n      if (_this._childrens) {\n        _this._childrens.forEach(function (child) {\n          var childURL = childBaseURL + child;\n          var listener = _this._bus.addListener(childURL, function (msg) {\n            //ignore msg sent by himself\n            if (msg.from !== _this2._owner) {\n              console.log('DataObject-Children-RCV: ', msg);\n              switch (msg.type) {\n                case 'create':\n                  _this._onChildCreate(msg);break;\n                case 'delete':\n                  console.log(msg);break;\n                default:\n                  _this._changeChildren(msg);break;\n              }\n            }\n          });\n\n          _this._childrenListeners.push(listener);\n        });\n      }\n    }\n  }, {\n    key: '_releaseListeners',\n    value: function _releaseListeners() {\n      var _this = this;\n\n      _this._childrenListeners.forEach(function (listener) {\n        listener.remove();\n      });\n\n      (0, _keys2.default)(_this._childrenObjects).forEach(function (key) {\n        _this._childrenObjects[key]._releaseListeners();\n      });\n    }\n\n    /**\n     * Object URL of reporter or observer\n     * @type {ObjectURL}\n     */\n\n  }, {\n    key: 'pause',\n\n\n    /**\n     * @ignore\n     */\n    value: function pause() {\n      //TODO: this feature needs more analise\n      throw 'Not implemented';\n    }\n\n    /**\n     * @ignore\n     */\n\n  }, {\n    key: 'resume',\n    value: function resume() {\n      //TODO: this feature needs more analise\n      throw 'Not implemented';\n    }\n\n    /**\n     * @ignore\n     */\n\n  }, {\n    key: 'stop',\n    value: function stop() {\n      //TODO: should remove the subscription and send message unsubscribe?\n      throw 'Not implemented';\n    }\n\n    /**\n     * Create and add a DataObjectChild to a children collection.\n     * @param {String} children - Children name where the child is added.\n     * @param {JSON} initialData - Initial data of the child\n     * @return {Promise<DataObjectChild>} - Return Promise to a new DataObjectChild.\n     */\n\n  }, {\n    key: 'addChild',\n    value: function addChild(children, initialData) {\n      var _this = this;\n\n      //create new child unique ID, based on hypertyURL\n      _this._childId++;\n      var msgChildId = _this._owner + '#' + _this._childId;\n      var msgChildPath = _this._url + '/children/' + children;\n\n      //FLOW-OUT: this message will be sent directly to a resource child address: MessageBus\n      var requestMsg = {\n        type: 'create', from: _this._owner, to: msgChildPath,\n        body: { resource: msgChildId, value: initialData }\n      };\n\n      //returns promise, in the future, the API may change to asynchronous call\n      return new _promise2.default(function (resolve) {\n        var msgId = _this._bus.postMessage(requestMsg);\n\n        console.log('create-reporter-child( ' + _this._owner + ' ): ', requestMsg);\n        var newChild = new _DataObjectChild2.default(_this, msgChildId, initialData, _this._owner, msgId);\n        newChild.onChange(function (event) {\n          _this._onChange(event, { path: msgChildPath, childId: msgChildId });\n        });\n\n        _this._childrenObjects[msgChildId] = newChild;\n\n        resolve(newChild);\n      });\n    }\n\n    /**\n     * Setup the callback to process create and delete of childrens.\n     * @param {function(event: MsgEvent)} callback\n     */\n\n  }, {\n    key: 'onAddChild',\n    value: function onAddChild(callback) {\n      this._onAddChildrenHandler = callback;\n    }\n\n    //FLOW-IN: message received from a remote DataObject -> addChild\n\n  }, {\n    key: '_onChildCreate',\n    value: function _onChildCreate(msg) {\n      var _this = this;\n      var msgChildId = msg.body.resource;\n\n      console.log('create-observer-child( ' + _this._owner + ' ): ', msg);\n      var newChild = new _DataObjectChild2.default(_this, msgChildId, msg.body.value);\n      _this._childrenObjects[msgChildId] = newChild;\n\n      setTimeout(function () {\n        //FLOW-OUT: will flow to DataObjectChild -> _onResponse\n        _this._bus.postMessage({\n          id: msg.id, type: 'response', from: msg.to, to: msg.from,\n          body: { code: 200, source: _this._owner }\n        });\n      });\n\n      var event = {\n        type: msg.type,\n        from: msg.from,\n        url: msg.to,\n        value: msg.body.value,\n        childId: msgChildId,\n        identity: msg.body.identity\n      };\n\n      if (_this._onAddChildrenHandler) {\n        console.log('ADD-CHILDREN-EVENT: ', event);\n        _this._onAddChildrenHandler(event);\n      }\n    }\n\n    //send delta messages to subscriptions\n\n  }, {\n    key: '_onChange',\n    value: function _onChange(event, childInfo) {\n      var _this = this;\n\n      _this._version++;\n\n      if (_this._status === 'on') {\n        //FLOW-OUT: this message will be sent directly to a resource changes address: MessageBus\n        var changeMsg = {\n          type: 'update', from: _this._url, to: _this._url + '/changes',\n          body: { version: _this._version, source: _this._owner, attribute: event.field }\n        };\n\n        console.log('[DataObject - _onChange] - ', event, childInfo, changeMsg);\n\n        if (event.oType === _ProxyObject.ObjectType.OBJECT) {\n          if (event.cType !== _ProxyObject.ChangeType.REMOVE) {\n            changeMsg.body.value = event.data;\n          }\n        } else {\n          changeMsg.body.attributeType = event.oType;\n          changeMsg.body.value = event.data;\n          if (event.cType !== _ProxyObject.ChangeType.UPDATE) {\n            changeMsg.body.operation = event.cType;\n          }\n        }\n\n        //childInfo must have (path, childId)\n        if (childInfo) {\n          changeMsg.to = childInfo.path;\n          changeMsg.body.resource = childInfo.childId;\n        }\n\n        _this._bus.postMessage(changeMsg);\n      }\n    }\n\n    //FLOW-IN: delta message received from a remote DataObjectReporter or DataObjectChild when changing data\n\n  }, {\n    key: '_changeObject',\n    value: function _changeObject(syncObj, msg) {\n      var _this = this;\n\n      //TODO: update version ?\n      //how to handle an incorrect version ? Example: receive a version 3 when the observer is in version 1, where is the version 2 ?\n      //will we need to confirm the reception ?\n      if (_this._version + 1 === msg.body.version) {\n        _this._version++;\n        var path = msg.body.attribute;\n        var value = (0, _utils.deepClone)(msg.body.value);\n        var findResult = syncObj.findBefore(path);\n\n        if (msg.body.attributeType === _ProxyObject.ObjectType.ARRAY) {\n          if (msg.body.operation === _ProxyObject.ChangeType.ADD) {\n            var arr = findResult.obj;\n            var index = findResult.last;\n            Array.prototype.splice.apply(arr, [index, 0].concat(value));\n          } else if (msg.body.operation === _ProxyObject.ChangeType.REMOVE) {\n            var _arr = findResult.obj;\n            var _index = findResult.last;\n            _arr.splice(_index, value);\n          } else {\n            findResult.obj[findResult.last] = value; // UPDATE\n          }\n        } else {\n          if (msg.body.value) {\n            findResult.obj[findResult.last] = value; // UPDATE or ADD\n          } else {\n            delete findResult.obj[findResult.last]; // REMOVE\n          }\n        }\n      } else {\n        //TODO: how to handle unsynchronized versions?\n        console.log('UNSYNCHRONIZED VERSION: (data => ' + _this._version + ', msg => ' + msg.body.version + ')');\n      }\n    }\n\n    //FLOW-IN: message received from a remote DataObjectChild when changing data\n\n  }, {\n    key: '_changeChildren',\n    value: function _changeChildren(msg) {\n      var _this = this;\n      console.log('Change children: ', _this._owner, msg);\n\n      var childId = msg.body.resource;\n      var children = _this._childrenObjects[childId];\n\n      if (children) {\n        _this._changeObject(children._syncObj, msg);\n      } else {\n        console.log('No children found for: ', childId);\n      }\n    }\n  }, {\n    key: 'url',\n    get: function get() {\n      return this._url;\n    }\n\n    /**\n     * Object schema URL (this field is not yet stable, and is subsject to change)\n     * @type {SchemaURL}\n     */\n\n  }, {\n    key: 'schema',\n    get: function get() {\n      return this._schema;\n    }\n\n    /**\n     * Status of the reporter or observer connection (this field is not yet stable, and is subsject to change)\n     * @type {Status} - Enum of: on | paused\n     */\n\n  }, {\n    key: 'status',\n    get: function get() {\n      return this._status;\n    }\n\n    /**\n     * Data structure to be synchronized.\n     * @type {JSON} - JSON structure that should follow the defined schema, if any.\n     */\n\n  }, {\n    key: 'data',\n    get: function get() {\n      return this._syncObj.data;\n    }\n\n    /**\n     * All created children's since the subscription, doesn't contain all children's since reporter creation.\n     * @type {Object<ChildId, DataObjectChild>}\n     */\n\n  }, {\n    key: 'childrens',\n    get: function get() {\n      return this._childrenObjects;\n    }\n  }]);\n  return DataObject;\n}(); /**\n     * Copyright 2016 PT Inovação e Sistemas SA\n     * Copyright 2016 INESC-ID\n     * Copyright 2016 QUOBIS NETWORKS SL\n     * Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n     * Copyright 2016 ORANGE SA\n     * Copyright 2016 Deutsche Telekom AG\n     * Copyright 2016 Apizee\n     * Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n     *\n     * Licensed under the Apache License, Version 2.0 (the \"License\");\n     * you may not use this file except in compliance with the License.\n     * You may obtain a copy of the License at\n     *\n     *   http://www.apache.org/licenses/LICENSE-2.0\n     *\n     * Unless required by applicable law or agreed to in writing, software\n     * distributed under the License is distributed on an \"AS IS\" BASIS,\n     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n     * See the License for the specific language governing permissions and\n     * limitations under the License.\n     **/\n\nexports.default = DataObject;\nmodule.exports = exports['default'];\n\n},{\"../utils/utils.js\":121,\"./DataObjectChild\":115,\"./ProxyObject\":119,\"babel-runtime/core-js/object/keys\":6,\"babel-runtime/core-js/promise\":8,\"babel-runtime/helpers/classCallCheck\":11,\"babel-runtime/helpers/createClass\":12}],115:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _ProxyObject = require('./ProxyObject');\n\nvar _ProxyObject2 = _interopRequireDefault(_ProxyObject);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * The class returned from the DataObject addChildren call or from onAddChildren if remotely created.\n * Children object synchronization is a a fast forward mechanism, no need for direct subscriptions, it uses the already authorized subscription from the parent DataObject.\n */\nvar DataObjectChild /* implements SyncStatus */ = function () {\n  /* private\n   ----event handlers----\n  _onResponseHandler: (event) => void\n  */\n\n  /**\n   * @ignore\n   * Should not be used directly by Hyperties. It's called by the DataObject.addChildren\n   */\n  function DataObjectChild(parent, childId, initialData, owner, msgId) {\n    (0, _classCallCheck3.default)(this, DataObjectChild);\n\n    var _this = this;\n\n    _this._parent = parent;\n    _this._childId = childId;\n    _this._owner = owner;\n    _this._msgId = msgId;\n\n    _this._syncObj = new _ProxyObject2.default(initialData);\n\n    _this._bus = parent._bus;\n    _this._allocateListeners();\n  }\n\n  (0, _createClass3.default)(DataObjectChild, [{\n    key: '_allocateListeners',\n    value: function _allocateListeners() {\n      var _this = this;\n\n      //this is only needed for children reporters\n      if (_this._owner) {\n        _this._listener = _this._bus.addListener(_this._owner, function (msg) {\n          if (msg.type === 'response' && msg.id === _this._msgId) {\n            console.log('DataObjectChild.onResponse:', msg);\n            _this._onResponse(msg);\n          }\n        });\n      }\n    }\n  }, {\n    key: '_releaseListeners',\n    value: function _releaseListeners() {\n      var _this = this;\n\n      if (_this._listener) {\n        _this._listener.remove();\n      }\n    }\n\n    /**\n     * Release and delete object data\n     */\n\n  }, {\n    key: 'delete',\n    value: function _delete() {\n      var _this = this;\n\n      delete _this._parent._children[_this._childId];\n\n      _this._releaseListeners();\n\n      //TODO: send delete message ?\n    }\n\n    /**\n     * Children ID generated on addChildren. Unique identifier\n     * @type {URL} - URL of the format <HypertyURL>#<numeric-sequence>\n     */\n\n  }, {\n    key: 'onChange',\n\n\n    /**\n     * Register the change listeners sent by the reporter child\n     * @param {function(event: MsgEvent)} callback\n     */\n    value: function onChange(callback) {\n      this._syncObj.observe(function (event) {\n        callback(event);\n      });\n    }\n\n    /**\n     * Setup the callback to process response notifications of the creates\n     * @param {function(event: MsgEvent)} callback\n     */\n\n  }, {\n    key: 'onResponse',\n    value: function onResponse(callback) {\n      this._onResponseHandler = callback;\n    }\n\n    //FLOW-IN: message received from a remote DataObject -> _onChildCreate\n\n  }, {\n    key: '_onResponse',\n    value: function _onResponse(msg) {\n      var _this = this;\n\n      var event = {\n        type: msg.type,\n        url: msg.body.source,\n        code: msg.body.code\n      };\n\n      if (_this._onResponseHandler) {\n        _this._onResponseHandler(event);\n      }\n    }\n  }, {\n    key: 'childId',\n    get: function get() {\n      return this._childId;\n    }\n\n    /**\n     * Data Structure to be synchronized.\n     * @type {JSON} - JSON structure that should follow the defined schema, if any.\n     */\n\n  }, {\n    key: 'data',\n    get: function get() {\n      return this._syncObj.data;\n    }\n  }]);\n  return DataObjectChild;\n}(); /**\n     * Copyright 2016 PT Inovação e Sistemas SA\n     * Copyright 2016 INESC-ID\n     * Copyright 2016 QUOBIS NETWORKS SL\n     * Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n     * Copyright 2016 ORANGE SA\n     * Copyright 2016 Deutsche Telekom AG\n     * Copyright 2016 Apizee\n     * Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n     *\n     * Licensed under the Apache License, Version 2.0 (the \"License\");\n     * you may not use this file except in compliance with the License.\n     * You may obtain a copy of the License at\n     *\n     *   http://www.apache.org/licenses/LICENSE-2.0\n     *\n     * Unless required by applicable law or agreed to in writing, software\n     * distributed under the License is distributed on an \"AS IS\" BASIS,\n     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n     * See the License for the specific language governing permissions and\n     * limitations under the License.\n     **/\n\nexports.default = DataObjectChild;\nmodule.exports = exports['default'];\n\n},{\"./ProxyObject\":119,\"babel-runtime/helpers/classCallCheck\":11,\"babel-runtime/helpers/createClass\":12}],116:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _keys = require('babel-runtime/core-js/object/keys');\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _get2 = require('babel-runtime/helpers/get');\n\nvar _get3 = _interopRequireDefault(_get2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _DataObject2 = require('./DataObject');\n\nvar _DataObject3 = _interopRequireDefault(_DataObject2);\n\nvar _DataObjectChild = require('./DataObjectChild');\n\nvar _DataObjectChild2 = _interopRequireDefault(_DataObjectChild);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\n\nvar FilterType = { ANY: 'any', START: 'start', EXACT: 'exact' };\n\n/**\n * The class returned from the Syncher subscribe call.\n * To be used as an observation point from a DataObjectReporter change.\n */\n\nvar DataObjectObserver = function (_DataObject) {\n  (0, _inherits3.default)(DataObjectObserver, _DataObject);\n\n  /* private\n  _changeListener: MsgListener\n   ----event handlers----\n  _filters: {<filter>: {type: <start, exact>, callback: <function>} }\n  */\n\n  /**\n   * @ignore\n   * Should not be used directly by Hyperties. It's called by the Syncher.subscribe method\n   */\n  function DataObjectObserver(syncher, url, schema, initialStatus, initialData, childrens, initialVersion) {\n    (0, _classCallCheck3.default)(this, DataObjectObserver);\n\n    var _this2 = (0, _possibleConstructorReturn3.default)(this, (DataObjectObserver.__proto__ || (0, _getPrototypeOf2.default)(DataObjectObserver)).call(this, syncher, url, schema, initialStatus, initialData.data, childrens));\n\n    var _this = _this2;\n\n    _this._version = initialVersion;\n    _this._filters = {};\n\n    _this._syncObj.observe(function (event) {\n      _this._onFilter(event);\n    });\n\n    //setup childrens data from subscription\n    (0, _keys2.default)(initialData.childrens).forEach(function (childId) {\n      var childData = initialData.childrens[childId];\n      _this._childrenObjects[childId] = new _DataObjectChild2.default(_this, childId, childData);\n    });\n\n    _this._allocateListeners();\n    return _this2;\n  }\n\n  (0, _createClass3.default)(DataObjectObserver, [{\n    key: '_allocateListeners',\n    value: function _allocateListeners() {\n      (0, _get3.default)(DataObjectObserver.prototype.__proto__ || (0, _getPrototypeOf2.default)(DataObjectObserver.prototype), '_allocateListeners', this).call(this);\n      var _this = this;\n\n      _this._changeListener = _this._bus.addListener(_this._url + '/changes', function (msg) {\n        if (msg.type === 'update') {\n          console.log('DataObjectObserver-' + _this._url + '-RCV: ', msg);\n          _this._changeObject(_this._syncObj, msg);\n        }\n      });\n    }\n  }, {\n    key: '_releaseListeners',\n    value: function _releaseListeners() {\n      (0, _get3.default)(DataObjectObserver.prototype.__proto__ || (0, _getPrototypeOf2.default)(DataObjectObserver.prototype), '_releaseListeners', this).call(this);\n      var _this = this;\n\n      _this._changeListener.remove();\n    }\n\n    /**\n     * Release and delete object data\n     */\n\n  }, {\n    key: 'delete',\n    value: function _delete() {\n      var _this = this;\n\n      _this._releaseListeners();\n      delete _this._syncher._observers[_this._url];\n    }\n\n    /**\n     * Release and delete object data\n     */\n\n  }, {\n    key: 'unsubscribe',\n    value: function unsubscribe() {\n      var _this = this;\n\n      //FLOW-OUT: this message will be sent to the runtime instance of SyncherManager -> _onLocalUnSubscribe\n      var unSubscribeMsg = {\n        type: 'unsubscribe', from: _this._owner, to: _this._syncher._subURL,\n        body: { resource: _this._url }\n      };\n\n      _this._bus.postMessage(unSubscribeMsg, function (reply) {\n        console.log('DataObjectObserver-UNSUBSCRIBE: ', reply);\n        if (reply.body.code === 200) {\n          _this._releaseListeners();\n          delete _this._syncher._observers[_this._url];\n        }\n      });\n    }\n\n    /**\n     * Register the change listeners sent by the reporter\n     * @param {string} filter - Filter that identifies the field (separated dot path). Accepts * at the end for a more unrestricted filtering.\n     * @param {function(event: MsgEvent)} callback\n     */\n\n  }, {\n    key: 'onChange',\n    value: function onChange(filter, callback) {\n      var key = filter;\n      var filterObj = {\n        type: FilterType.EXACT,\n        callback: callback\n      };\n\n      var idx = filter.indexOf('*');\n      if (idx === filter.length - 1) {\n        if (idx === 0) {\n          filterObj.type = FilterType.ANY;\n        } else {\n          filterObj.type = FilterType.START;\n          key = filter.substr(0, filter.length - 1);\n        }\n      }\n\n      this._filters[key] = filterObj;\n    }\n  }, {\n    key: '_onFilter',\n    value: function _onFilter(event) {\n      var _this = this;\n\n      (0, _keys2.default)(_this._filters).forEach(function (key) {\n        var filter = _this._filters[key];\n        if (filter.type === FilterType.ANY) {\n          //match anything\n          filter.callback(event);\n        } else if (filter.type === FilterType.START) {\n          //if starts with filter...\n          if (event.field.indexOf(key) === 0) {\n            filter.callback(event);\n          }\n        } else if (filter.type === FilterType.EXACT) {\n          //exact match\n          if (event.field === key) {\n            filter.callback(event);\n          }\n        }\n      });\n    }\n  }]);\n  return DataObjectObserver;\n}(_DataObject3.default /* implements SyncStatus */);\n\nexports.default = DataObjectObserver;\nmodule.exports = exports['default'];\n\n},{\"./DataObject\":114,\"./DataObjectChild\":115,\"babel-runtime/core-js/object/get-prototype-of\":5,\"babel-runtime/core-js/object/keys\":6,\"babel-runtime/helpers/classCallCheck\":11,\"babel-runtime/helpers/createClass\":12,\"babel-runtime/helpers/get\":13,\"babel-runtime/helpers/inherits\":14,\"babel-runtime/helpers/possibleConstructorReturn\":15}],117:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _keys = require('babel-runtime/core-js/object/keys');\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _get2 = require('babel-runtime/helpers/get');\n\nvar _get3 = _interopRequireDefault(_get2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _DataObject2 = require('./DataObject');\n\nvar _DataObject3 = _interopRequireDefault(_DataObject2);\n\nvar _utils = require('../utils/utils.js');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * The class returned from the Syncher create call.\n * To be used as a reporter point, changes will be submited to DataObjectObserver instances.\n */\n/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\n\nvar DataObjectReporter = function (_DataObject) {\n  (0, _inherits3.default)(DataObjectReporter, _DataObject);\n\n  /* private\n  _subscriptions: <hypertyUrl: { status: string } }>\n   ----event handlers----\n  _onSubscriptionHandler: (event) => void\n  _onResponseHandler: (event) => void\n  _onReadHandler: (event) => void\n  */\n\n  /**\n   * @ignore\n   * Should not be used directly by Hyperties. It's called by the Syncher.create method\n   */\n  function DataObjectReporter(syncher, url, schema, initialStatus, initialData, childrens) {\n    (0, _classCallCheck3.default)(this, DataObjectReporter);\n\n    var _this2 = (0, _possibleConstructorReturn3.default)(this, (DataObjectReporter.__proto__ || (0, _getPrototypeOf2.default)(DataObjectReporter)).call(this, syncher, url, schema, initialStatus, initialData, childrens));\n\n    var _this = _this2;\n\n    _this._subscriptions = {};\n\n    _this._syncObj.observe(function (event) {\n      console.log('DataObjectReporter-' + url + '-SEND: ', event);\n      _this._onChange(event);\n    });\n\n    _this._allocateListeners();\n    return _this2;\n  }\n\n  (0, _createClass3.default)(DataObjectReporter, [{\n    key: '_allocateListeners',\n    value: function _allocateListeners() {\n      (0, _get3.default)(DataObjectReporter.prototype.__proto__ || (0, _getPrototypeOf2.default)(DataObjectReporter.prototype), '_allocateListeners', this).call(this);\n      var _this = this;\n\n      _this._objectListener = _this._bus.addListener(_this._url, function (msg) {\n        console.log('DataObject-' + _this._url + '-RCV: ', msg);\n        switch (msg.type) {\n          case 'response':\n            _this._onResponse(msg);break;\n          case 'read':\n            _this._onRead(msg);break;\n        }\n      });\n    }\n  }, {\n    key: '_releaseListeners',\n    value: function _releaseListeners() {\n      (0, _get3.default)(DataObjectReporter.prototype.__proto__ || (0, _getPrototypeOf2.default)(DataObjectReporter.prototype), '_releaseListeners', this).call(this);\n      var _this = this;\n\n      _this._objectListener.remove();\n    }\n\n    /**\n     * Send invitations (create messages) to hyperties, observers list.\n     * @param  {HypertyURL[]} observers List of Hyperty URL's\n     */\n\n  }, {\n    key: 'inviteObservers',\n    value: function inviteObservers(observers) {\n      var _this = this;\n\n      //FLOW-OUT: this message will be sent to the runtime instance of SyncherManager -> _onCreate\n      var inviteMsg = {\n        type: 'create', from: _this._syncher._owner, to: _this._syncher._subURL,\n        body: { resource: _this._url, schema: _this._schema, value: _this._syncObj.data, authorise: observers }\n      };\n\n      _this._bus.postMessage(inviteMsg);\n    }\n\n    /**\n     * Release and delete object data\n     */\n\n  }, {\n    key: 'delete',\n    value: function _delete() {\n      var _this = this;\n\n      //FLOW-OUT: this message will be sent to the runtime instance of SyncherManager -> _onDelete\n      var deleteMsg = {\n        type: 'delete', from: _this._owner, to: _this._syncher._subURL,\n        body: { resource: _this._url }\n      };\n\n      _this._bus.postMessage(deleteMsg, function (reply) {\n        console.log('DataObjectReporter-DELETE: ', reply);\n        if (reply.body.code === 200) {\n          _this._releaseListeners();\n          delete _this._syncher._reporters[_this._url];\n        }\n      });\n    }\n\n    /**\n     * Subscriptions requested and accepted to this reporter\n     * @type {Object<HypertyURL, SyncSubscription>}\n     */\n\n  }, {\n    key: 'onSubscription',\n\n\n    /**\n     * Setup the callback to process subscribe and unsubscribe notifications\n     * @param {function(event: MsgEvent)} callback function to receive events\n     */\n    value: function onSubscription(callback) {\n      this._onSubscriptionHandler = callback;\n    }\n\n    /**\n     * Setup the callback to process response notifications of the create's\n     * @param {function(event: MsgEvent)} callback function to receive events\n     */\n\n  }, {\n    key: 'onResponse',\n    value: function onResponse(callback) {\n      this._onResponseHandler = callback;\n    }\n\n    /**\n     * Setup the callback to process read notifications\n     * @param {function(event: MsgEvent)} callback\n     */\n\n  }, {\n    key: 'onRead',\n    value: function onRead(callback) {\n      this._onReadHandler = callback;\n    }\n\n    //FLOW-IN: message received from parent Syncher -> _onForward\n\n  }, {\n    key: '_onForward',\n    value: function _onForward(msg) {\n      var _this = this;\n\n      console.log('DataObjectReporter-RCV: ', msg);\n      switch (msg.body.type) {\n        case 'subscribe':\n          _this._onSubscribe(msg);break;\n        case 'unsubscribe':\n          _this._onUnSubscribe(msg);break;\n      }\n    }\n\n    //FLOW-IN: message received from this -> _onForward: emitted by a remote Syncher -> subscribe\n\n  }, {\n    key: '_onSubscribe',\n    value: function _onSubscribe(msg) {\n      var _this = this;\n      var hypertyUrl = msg.body.from;\n\n      var event = {\n        type: msg.body.type,\n        url: hypertyUrl,\n\n        identity: msg.body.identity,\n\n        accept: function accept() {\n          //create new subscription\n          var sub = { url: hypertyUrl, status: 'on' };\n          _this._subscriptions[hypertyUrl] = sub;\n\n          //process and send childrens data\n          var childrenValues = {};\n          (0, _keys2.default)(_this._childrenObjects).forEach(function (childId) {\n            var childData = _this._childrenObjects[childId].data;\n            childrenValues[childId] = (0, _utils.deepClone)(childData);\n          });\n\n          //send ok response message\n          _this._bus.postMessage({\n            id: msg.id, type: 'response', from: msg.to, to: msg.from,\n            body: { code: 200, schema: _this._schema, version: _this._version, value: { data: (0, _utils.deepClone)(_this.data), childrens: childrenValues } }\n          });\n\n          return sub;\n        },\n\n        reject: function reject(reason) {\n          //send reject response message\n          _this._bus.postMessage({\n            id: msg.id, type: 'response', from: msg.to, to: msg.from,\n            body: { code: 403, desc: reason }\n          });\n        }\n      };\n\n      if (_this._onSubscriptionHandler) {\n        console.log('SUBSCRIPTION-EVENT: ', event);\n        _this._onSubscriptionHandler(event);\n      }\n    }\n\n    //FLOW-IN: message received from this -> _onForward: emitted by a remote DataObjectObserver -> unsubscribe\n\n  }, {\n    key: '_onUnSubscribe',\n    value: function _onUnSubscribe(msg) {\n      var _this = this;\n      var hypertyUrl = msg.body.from;\n\n      var sub = _this._subscriptions[hypertyUrl];\n      delete _this._subscriptions[hypertyUrl];\n\n      var event = {\n        type: msg.body.type,\n        url: hypertyUrl,\n        object: sub\n      };\n\n      if (_this._onSubscriptionHandler) {\n        console.log('UN-SUBSCRIPTION-EVENT: ', event);\n        _this._onSubscriptionHandler(event);\n      }\n    }\n\n    //FLOW-IN: message received from ReporterURL address: emited by a remote Syncher -> _onRemoteCreate -> event.ack\n\n  }, {\n    key: '_onResponse',\n    value: function _onResponse(msg) {\n      var _this = this;\n\n      var event = {\n        type: msg.type,\n        url: msg.from,\n        code: msg.body.code\n      };\n\n      if (_this._onResponseHandler) {\n        console.log('RESPONSE-EVENT: ', event);\n        _this._onResponseHandler(event);\n      }\n    }\n\n    //FLOW-IN: message received from ReporterURL address: emited by a remote Syncher -> read\n\n  }, {\n    key: '_onRead',\n    value: function _onRead(msg) {\n      var _this = this;\n\n      var event = {\n        type: msg.type,\n        url: msg.from,\n\n        accept: function accept() {\n          _this._bus.postMessage({\n            id: msg.id, type: 'response', from: msg.to, to: msg.from,\n            body: { code: 200, value: (0, _utils.deepClone)(_this.data) }\n          });\n        },\n\n        reject: function reject(reason) {\n          _this._bus.postMessage({\n            id: msg.id, type: 'response', from: msg.to, to: msg.from,\n            body: { code: 401, desc: reason }\n          });\n        }\n      };\n\n      if (_this._onReadHandler) {\n        console.log('READ-EVENT: ', event);\n        _this._onReadHandler(event);\n      }\n    }\n  }, {\n    key: 'subscriptions',\n    get: function get() {\n      return this._subscriptions;\n    }\n  }]);\n  return DataObjectReporter;\n}(_DataObject3.default /* implements SyncStatus */);\n\nexports.default = DataObjectReporter;\nmodule.exports = exports['default'];\n\n},{\"../utils/utils.js\":121,\"./DataObject\":114,\"babel-runtime/core-js/object/get-prototype-of\":5,\"babel-runtime/core-js/object/keys\":6,\"babel-runtime/helpers/classCallCheck\":11,\"babel-runtime/helpers/createClass\":12,\"babel-runtime/helpers/get\":13,\"babel-runtime/helpers/inherits\":14,\"babel-runtime/helpers/possibleConstructorReturn\":15}],118:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\n\n/**\n * @access private\n * This class is responsible for collecting delta changes in remote objects, before the response of subscription reach the observer.\n * It's used in Syncher -> subscribe. The flow is defined as:\n * 1. (observer) --subscribe--> (reporter)\n * 2. (observer) <--delta updates-- (reporter)\n * 3. (observer) <--subscribe response-- (reporter)\n * This means that there could be delta updates transferred before the subscription confirmation.\n * Since there is no DataObjectObserver before the ubscription confirmation, there should be some other object collecting the updates.\n * Provisional data is applied to the DataObjectObserver after confirmation. Or discarded if there is no confirmation.\n */\nvar DataProvisional = function () {\n  /* private\n  _childrenListeners: [MsgListener]\n  _listener: MsgListener\n   _changes: []\n  */\n\n  function DataProvisional(owner, url, bus, children) {\n    (0, _classCallCheck3.default)(this, DataProvisional);\n\n    var _this = this;\n\n    _this._owner = owner;\n    _this._url = url;\n    _this._bus = bus;\n    _this._children = children;\n\n    _this._changes = [];\n    _this._allocateListeners();\n  }\n\n  (0, _createClass3.default)(DataProvisional, [{\n    key: '_allocateListeners',\n    value: function _allocateListeners() {\n      var _this = this;\n\n      _this._listener = _this._bus.addListener(_this._url, function (msg) {\n        console.log('DataProvisional-' + _this._url + '-RCV: ', msg);\n        _this._changes.push(msg);\n      });\n\n      /*\n      _this._childrenListeners = [];\n      if (_this._children) {\n        let childBaseURL = url + '/children/';\n        _this._children.forEach((child) => {\n          let childURL = childBaseURL + child;\n          let listener = _this._bus.addListener(childURL, (msg) => {\n            //ignore msg sent by himself\n            if (msg.from !== owner) {\n              console.log(msg);\n            }\n          });\n           _this._childrenListeners.push(listener);\n        });\n      }*/\n    }\n  }, {\n    key: '_releaseListeners',\n    value: function _releaseListeners() {\n      var _this = this;\n\n      _this._listener.remove();\n\n      /*_this._childrenListeners.forEach((listener) => {\n        listener.remove();\n      });*/\n    }\n  }, {\n    key: 'apply',\n    value: function apply(observer) {\n      var _this = this;\n      _this._changes.forEach(function (change) {\n        observer._changeObject(observer._syncObj, change);\n      });\n    }\n  }, {\n    key: 'children',\n    get: function get() {\n      return this._children;\n    }\n  }]);\n  return DataProvisional;\n}();\n\nexports.default = DataProvisional;\nmodule.exports = exports['default'];\n\n},{\"babel-runtime/helpers/classCallCheck\":11,\"babel-runtime/helpers/createClass\":12}],119:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ObjectType = exports.ChangeType = undefined;\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nrequire('proxy-observe');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @access private\n * Main class that maintains a JSON object, and observes changes in this object, recursively.\n * Internal objects and arrays are also observed.\n */\nvar SyncObject = function () {\n  function SyncObject(initialData) {\n    (0, _classCallCheck3.default)(this, SyncObject);\n\n    var _this = this;\n\n    _this._observers = [];\n    _this._filters = {};\n\n    this._data = initialData || {};\n\n    this._internalObserve(this._data);\n  }\n\n  (0, _createClass3.default)(SyncObject, [{\n    key: 'observe',\n    value: function observe(callback) {\n      this._observers.push(callback);\n    }\n  }, {\n    key: 'find',\n    value: function find(path) {\n      var list = path.split('.');\n\n      return this._findWithSplit(list);\n    }\n  }, {\n    key: 'findBefore',\n    value: function findBefore(path) {\n      var result = {};\n      var list = path.split('.');\n      result.last = list.pop();\n      result.obj = this._findWithSplit(list);\n\n      return result;\n    }\n  }, {\n    key: '_findWithSplit',\n    value: function _findWithSplit(list) {\n      var obj = this._data;\n      list.forEach(function (value) {\n        obj = obj[value];\n      });\n\n      return obj;\n    }\n  }, {\n    key: '_isObservable',\n    value: function _isObservable(obj) {\n      if (obj.constructor === Object || obj.constructor === Array) {\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: '_internalObserve',\n    value: function _internalObserve(object) {\n      var _this2 = this;\n\n      var handler = function handler(changeset) {\n\n        changeset.forEach(function (change) {\n          if (change.newValue && change.newValue instanceof Object) {\n            if (change.newValue instanceof Object) {\n              var o = Object.deepObserve(change.newValue, handler);\n              object[change.keypath] = o;\n            }\n\n            if (change.newValue instanceof Array) {\n              var _o = Array.observe(change.newValue, handler);\n              object[change.keypath] = _o;\n            }\n          }\n        });\n\n        changeset.every(function (change) {\n          _this2._onChanges(change);\n        });\n      };\n\n      this._data = Object.deepObserve(object, handler);\n    }\n  }, {\n    key: '_fireEvent',\n    value: function _fireEvent(event) {\n      this._observers.forEach(function (callback) {\n        callback(event);\n      });\n    }\n  }, {\n    key: '_onChanges',\n    value: function _onChanges(change) {\n\n      var obj = change.object;\n      var objType = void 0;\n\n      if (obj.constructor === Object) {\n        objType = ObjectType.OBJECT;\n      }\n\n      if (obj.constructor === Array) {\n        objType = ObjectType.ARRAY;\n      }\n\n      var fieldString = change.keypath;\n\n      // console.log('Field:', fieldString);\n      // console.log('type:', change.type);\n\n      //let oldValue = change.oldValue;\n      var newValue = obj[change.name];\n\n      // console.info(change.type + ' | Field: ' + fieldString + ' | New Value:', JSON.stringify(newValue));\n\n      if (change.type === 'update') {\n        this._fireEvent({\n          cType: ChangeType.UPDATE,\n          oType: objType,\n          field: fieldString,\n          data: newValue\n        });\n      }\n\n      if (change.type === 'add') {\n        this._fireEvent({\n          cType: ChangeType.ADD,\n          oType: objType,\n          field: fieldString,\n          data: newValue\n        });\n      }\n\n      if (change.type === 'delete') {\n        this._fireEvent({\n          cType: ChangeType.REMOVE,\n          oType: objType,\n          field: fieldString\n        });\n      }\n    }\n  }, {\n    key: 'data',\n    get: function get() {\n      return this._data;\n    }\n  }]);\n  return SyncObject;\n}();\n\nvar ChangeType = exports.ChangeType = { UPDATE: 'update', ADD: 'add', REMOVE: 'remove' };\nvar ObjectType = exports.ObjectType = { OBJECT: 'object', ARRAY: 'array' };\nexports.default = SyncObject;\n\n},{\"babel-runtime/helpers/classCallCheck\":11,\"babel-runtime/helpers/createClass\":12,\"proxy-observe\":112}],120:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _DataObjectReporter = require('./DataObjectReporter');\n\nvar _DataObjectReporter2 = _interopRequireDefault(_DataObjectReporter);\n\nvar _DataObjectObserver = require('./DataObjectObserver');\n\nvar _DataObjectObserver2 = _interopRequireDefault(_DataObjectObserver);\n\nvar _DataProvisional = require('./DataProvisional');\n\nvar _DataProvisional2 = _interopRequireDefault(_DataProvisional);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * The main class for the syncher package.\n * The Syncher is a singleton class per Hyperty/URL and it is the owner of all created Data Sync Objects according to the Reporter - Observer pattern.\n * Main functionality is to create reporters and to subscribe to existing ones.\n */\nvar Syncher = function () {\n  /* private\n  _owner: URL\n  _bus: MiniBus\n   _subURL: URL\n   _reporters: <url: DataObjectReporter>\n  _observers: <url: DataObjectObserver>\n  _provisionals: <url: DataProvisional>\n   ----event handlers----\n  _onNotificationHandler: (event) => void\n  */\n\n  /**\n   * Constructor that should be used by the Hyperty owner\n   * @param {HypertyURL} owner - Hyperty URL owner. An URL allocated by the runtime that uniquely identifies the Hyperty.\n   * @param {MiniBus} bus - An instance of the MiniBus provided in the sandbox. When an object (Reporter or Observed) is created, the SyncherManager will add a listener in the MiniBus to receive/send Messages of that object.\n   * @param {JSON} config - Configuration data. The only required field for now is the runtimeURL.\n   */\n  function Syncher(owner, bus, config) {\n    (0, _classCallCheck3.default)(this, Syncher);\n\n    var _this = this;\n\n    _this._owner = owner;\n    _this._bus = bus;\n\n    _this._subURL = config.runtimeURL + '/sm';\n\n    _this._reporters = {};\n    _this._observers = {};\n    _this._provisionals = {};\n\n    bus.addListener(owner, function (msg) {\n      //ignore msg sent by himself\n      if (msg.from !== owner) {\n        console.log('Syncher-RCV: ', msg);\n        switch (msg.type) {\n          case 'forward':\n            _this._onForward(msg);break;\n          case 'create':\n            _this._onRemoteCreate(msg);break;\n          case 'delete':\n            _this._onRemoteDelete(msg);break;\n        }\n      }\n    });\n  }\n\n  /**\n   * The owner of the Syncher and all created reporters.\n   * @type {HypertyURL}\n   */\n\n\n  (0, _createClass3.default)(Syncher, [{\n    key: 'create',\n\n\n    /**\n     * Request a DataObjectReporter creation. The URL will be be requested by the allocation mechanism.\n     * @param  {SchemaURL} schema - Hyperty Catalogue URL address that can be used to retrieve the JSON-Schema describing the Data Object schema\n     * @param  {HypertyURL[]} observers - List of hyperties that are pre-authorized for subscription\n     * @param  {JSON} initialData - Initial data of the reporter\n     * @return {Promise<DataObjectReporter>} Return Promise to a new Reporter. The reporter can be accepted or rejected by the PEP\n     */\n    value: function create(schema, observers, initialData) {\n      var _this = this;\n\n      initialData.reporter = _this._owner;\n      initialData.schema = schema;\n\n      //FLOW-OUT: this message will be sent to the runtime instance of SyncherManager -> _onCreate\n      var requestMsg = {\n        type: 'create', from: _this._owner, to: _this._subURL,\n        body: { schema: schema, value: initialData, authorise: observers }\n      };\n\n      return new _promise2.default(function (resolve, reject) {\n        //request create to the allocation system. Can be rejected by the PolicyEngine.\n        _this._bus.postMessage(requestMsg, function (reply) {\n          console.log('create-response: ', reply);\n          if (reply.body.code === 200) {\n            //reporter creation accepted\n            var objURL = reply.body.resource;\n            var newObj = new _DataObjectReporter2.default(_this, objURL, schema, 'on', initialData, reply.body.childrenResources);\n            _this._reporters[objURL] = newObj;\n\n            resolve(newObj);\n          } else {\n            //reporter creation rejected\n            reject(reply.body.desc);\n          }\n        });\n      });\n    }\n\n    /**\n     * Request a subscription to an existent reporter object.\n     * @param {SchemaURL} schema - Hyperty Catalogue URL address that can be used to retrieve the JSON-Schema describing the Data Object schema\n     * @param {ObjectURL} objURL - Address of the existent reporter object to be observed\n     * @return {Promise<DataObjectObserver>} Return Promise to a new observer. It's associated with the reporter.\n     */\n\n  }, {\n    key: 'subscribe',\n    value: function subscribe(schema, objURL) {\n      var _this = this;\n\n      //FLOW-OUT: this message will be sent to the runtime instance of SyncherManager -> _onLocalSubscribe\n      var subscribeMsg = {\n        type: 'subscribe', from: _this._owner, to: _this._subURL,\n        body: { schema: schema, resource: objURL }\n      };\n\n      return new _promise2.default(function (resolve, reject) {\n        //request subscription\n        //Provisional data is applied to the DataObjectObserver after confirmation. Or discarded if there is no confirmation.\n        //for more info see the DataProvisional class documentation.\n        _this._bus.postMessage(subscribeMsg, function (reply) {\n          console.log('subscribe-response: ', reply);\n          var newProvisional = _this._provisionals[objURL];\n          delete _this._provisionals[objURL];\n          if (newProvisional) newProvisional._releaseListeners();\n\n          if (reply.body.code < 200) {\n            newProvisional = new _DataProvisional2.default(_this._owner, objURL, _this._bus, reply.body.childrenResources);\n            _this._provisionals[objURL] = newProvisional;\n          } else if (reply.body.code === 200) {\n            var newObj = new _DataObjectObserver2.default(_this, objURL, schema, 'on', reply.body.value, newProvisional.children, reply.body.version);\n            _this._observers[objURL] = newObj;\n\n            resolve(newObj);\n            newProvisional.apply(newObj);\n          } else {\n            reject(reply.body.desc);\n          }\n        });\n      });\n    }\n\n    /**\n     * Request a read action on the reporter object\n     * @param {ObjectURL} objURL - URL of the reporter object to be read\n     * @return {Promise<Object>} Return Promise to last available data of the reporter\n     */\n\n  }, {\n    key: 'read',\n    value: function read(objURL) {\n      var _this = this;\n\n      //FLOW-OUT: this message will be sent directly to reporter object (maybe there is no listener available, so it will be resolved with MessageBus -> resolve)\n      //will reach the remote object in DataObjectReporter -> _onRead\n      var readMsg = {\n        type: 'read', from: _this._owner, to: objURL\n      };\n\n      return new _promise2.default(function (resolve, reject) {\n        _this._bus.postMessage(readMsg, function (reply) {\n          console.log('read-response: ', reply);\n          if (reply.body.code === 200) {\n            resolve(reply.body.value);\n          } else {\n            reject(reply.body.desc);\n          }\n        });\n      });\n    }\n\n    /**\n     * Setup the callback to process create and delete events of remove Reporter objects.\n     * This is releated to the messagens sent by create to the observers Hyperty array.\n     * @param {function(event: MsgEvent)} callback\n     */\n\n  }, {\n    key: 'onNotification',\n    value: function onNotification(callback) {\n      this._onNotificationHandler = callback;\n    }\n\n    //FLOW-IN: message received from a local runtime ReporterObject -> _onRemoteSubscribe\n\n  }, {\n    key: '_onForward',\n    value: function _onForward(msg) {\n      var _this = this;\n\n      var reporter = _this._reporters[msg.body.to];\n      reporter._onForward(msg);\n    }\n\n    //FLOW-IN: message received from a remote Syncher -> create (this is actually an invitation to subscribe)\n\n  }, {\n    key: '_onRemoteCreate',\n    value: function _onRemoteCreate(msg) {\n      var _this = this;\n\n      //remove \"/subscription\" from the URL\n      var resource = msg.from.slice(0, -13);\n\n      var event = {\n        type: msg.type,\n        from: msg.body.source,\n        url: resource,\n        schema: msg.body.schema,\n        value: msg.body.value,\n        identity: msg.body.identity,\n\n        ack: function ack(type) {\n          var lType = 200;\n          if (type) {\n            lType = type;\n          }\n\n          //send ack response message\n          _this._bus.postMessage({\n            id: msg.id, type: 'response', from: msg.to, to: msg.from,\n            body: { code: lType }\n          });\n        }\n      };\n\n      if (_this._onNotificationHandler) {\n        console.log('NOTIFICATION-EVENT: ', event);\n        _this._onNotificationHandler(event);\n      }\n    }\n\n    //FLOW-IN: message received from a remote DataObjectReporter -> delete\n\n  }, {\n    key: '_onRemoteDelete',\n    value: function _onRemoteDelete(msg) {\n      var _this = this;\n\n      //remove \"/subscription\" from the URL\n      var resource = msg.body.resource;\n\n      var object = _this._observers[resource];\n      if (object) {\n        var event = {\n          type: msg.type,\n          url: resource,\n          identity: msg.body.identity,\n\n          ack: function ack(type) {\n            var lType = 200;\n            if (type) {\n              lType = type;\n            }\n\n            //TODO: any other different options for the release process, like accept but nor release local?\n            if (lType === 200) {\n              object.delete();\n            }\n\n            //send ack response message\n            _this._bus.postMessage({\n              id: msg.id, type: 'response', from: msg.to, to: msg.from,\n              body: { code: lType, source: _this._owner }\n            });\n          }\n        };\n\n        if (_this._onNotificationHandler) {\n          console.log('NOTIFICATION-EVENT: ', event);\n          _this._onNotificationHandler(event);\n        }\n      } else {\n        _this._bus.postMessage({\n          id: msg.id, type: 'response', from: msg.to, to: msg.from,\n          body: { code: 404, source: _this._owner }\n        });\n      }\n    }\n  }, {\n    key: 'owner',\n    get: function get() {\n      return this._owner;\n    }\n\n    /**\n     * All owned reporters, the ones that were created by a create\n     * @type {Object<URL, DataObjectReporter>}\n     */\n\n  }, {\n    key: 'reporters',\n    get: function get() {\n      return this._reporters;\n    }\n\n    /**\n     * All owned observers, the ones that were created by a local subscription\n     * @type {Object<URL, DataObjectObserver>}\n     */\n\n  }, {\n    key: 'observers',\n    get: function get() {\n      return this._observers;\n    }\n  }]);\n  return Syncher;\n}(); /**\n     * Copyright 2016 PT Inovação e Sistemas SA\n     * Copyright 2016 INESC-ID\n     * Copyright 2016 QUOBIS NETWORKS SL\n     * Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n     * Copyright 2016 ORANGE SA\n     * Copyright 2016 Deutsche Telekom AG\n     * Copyright 2016 Apizee\n     * Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n     *\n     * Licensed under the Apache License, Version 2.0 (the \"License\");\n     * you may not use this file except in compliance with the License.\n     * You may obtain a copy of the License at\n     *\n     *   http://www.apache.org/licenses/LICENSE-2.0\n     *\n     * Unless required by applicable law or agreed to in writing, software\n     * distributed under the License is distributed on an \"AS IS\" BASIS,\n     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n     * See the License for the specific language governing permissions and\n     * limitations under the License.\n     **/\n\nexports.default = Syncher;\nmodule.exports = exports['default'];\n\n},{\"./DataObjectObserver\":116,\"./DataObjectReporter\":117,\"./DataProvisional\":118,\"babel-runtime/core-js/promise\":8,\"babel-runtime/helpers/classCallCheck\":11,\"babel-runtime/helpers/createClass\":12}],121:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _stringify = require('babel-runtime/core-js/json/stringify');\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _keys = require('babel-runtime/core-js/object/keys');\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nexports.divideURL = divideURL;\nexports.divideEmail = divideEmail;\nexports.emptyObject = emptyObject;\nexports.deepClone = deepClone;\nexports.getUserURLFromEmail = getUserURLFromEmail;\nexports.getUserEmailFromURL = getUserEmailFromURL;\nexports.convertToUserURL = convertToUserURL;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\n/**\n * Support module with some functions will be useful\n * @module utils\n */\n\n/**\n * @typedef divideURL\n * @type Object\n * @property {string} type The type of URL\n * @property {string} domain The domain of URL\n * @property {string} identity The identity of URL\n */\n\n/**\n * Divide an url in type, domain and identity\n * @param  {URL.URL} url - url address\n * @return {divideURL} the result of divideURL\n */\nfunction divideURL(url) {\n\n  if (!url) throw Error('URL is needed to split');\n\n  // let re = /([a-zA-Z-]*)?:\\/\\/(?:\\.)?([-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b)*(\\/[\\/\\d\\w\\.-]*)*(?:[\\?])*(.+)*/gi;\n  var re = /([a-zA-Z-]*):\\/\\/(?:\\.)?([-a-zA-Z0-9@:%._\\+~#=]{2,256})([-a-zA-Z0-9@:%._\\+~#=\\/]*)/gi;\n  var subst = '$1,$2,$3';\n  var parts = url.replace(re, subst).split(',');\n\n  // If the url has no protocol, the default protocol set is https\n  if (parts[0] === url) {\n    parts[0] = 'https';\n    parts[1] = url;\n  }\n\n  var result = {\n    type: parts[0],\n    domain: parts[1],\n    identity: parts[2]\n  };\n\n  return result;\n}\n\nfunction divideEmail(email) {\n  var indexOfAt = email.indexOf('@');\n\n  var result = {\n    username: email.substring(0, indexOfAt),\n    domain: email.substring(indexOfAt + 1, email.length)\n  };\n\n  return result;\n}\n\n/**\n * Check if an Object is empty\n * @param  {Object} object Object to be checked\n * @return {Boolean}       status of Object, empty or not (true|false);\n */\nfunction emptyObject(object) {\n  return (0, _keys2.default)(object).length > 0 ? false : true;\n}\n\n/**\n * Make a COPY of the original data\n * @param  {Object}  obj - object to be cloned\n * @return {Object}\n */\nfunction deepClone(obj) {\n  //TODO: simple but inefficient JSON deep clone...\n  if (obj) return JSON.parse((0, _stringify2.default)(obj));\n}\n\n/**\n * Obtains the user URL that corresponds to a given email\n * @param  {string} userEmail The user email\n * @return {URL.URL} userURL The user URL\n */\nfunction getUserURLFromEmail(userEmail) {\n  var indexOfAt = userEmail.indexOf('@');\n  return 'user://' + userEmail.substring(indexOfAt + 1, userEmail.length) + '/' + userEmail.substring(0, indexOfAt);\n}\n\n/**\n * Obtains the user email that corresponds to a given URL\n * @param  {URL.URL} userURL The user URL\n * @return {string} userEmail The user email\n */\nfunction getUserEmailFromURL(userURL) {\n  var url = divideURL(userURL);\n  return url.identity.replace('/', '') + '@' + url.domain; // identity field has '/exampleID' instead of 'exampleID'\n}\n\n/**\n * Check if the user identifier is already in the URL format, if not, convert to URL format\n * @param  {string}   identifier  user identifier\n * @return {string}   userURL    the user URL\n */\nfunction convertToUserURL(identifier) {\n\n  // check if the identifier is already in the url format\n  if (identifier.substring(0, 7) === 'user://') {\n    var dividedURL = divideURL(identifier);\n\n    //check if the url is well formated\n    if (dividedURL.domain && dividedURL.identity) {\n      return identifier;\n    } else {\n      throw 'userURL with wrong format';\n    }\n\n    //if not, convert the user email to URL format\n  } else {\n    return getUserURLFromEmail(identifier);\n  }\n}\n\n},{\"babel-runtime/core-js/json/stringify\":1,\"babel-runtime/core-js/object/keys\":6}]},{},[113])(113)\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5LmpzIiwibm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvY3JlYXRlLmpzIiwibm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5LmpzIiwibm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIiwibm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZi5qcyIsIm5vZGVfbW9kdWxlcy9iYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMuanMiLCJub2RlX21vZHVsZXMvYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9zZXQtcHJvdG90eXBlLW9mLmpzIiwibm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlLmpzIiwibm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9zeW1ib2wuanMiLCJub2RlX21vZHVsZXMvYmFiZWwtcnVudGltZS9jb3JlLWpzL3N5bWJvbC9pdGVyYXRvci5qcyIsIm5vZGVfbW9kdWxlcy9iYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2suanMiLCJub2RlX21vZHVsZXMvYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzLmpzIiwibm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQuanMiLCJub2RlX21vZHVsZXMvYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzLmpzIiwibm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuLmpzIiwibm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvaGVscGVycy90eXBlb2YuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvY3JlYXRlLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZi5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2tleXMuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9zZXQtcHJvdG90eXBlLW9mLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9mbi9zeW1ib2wvaW5kZXguanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbC9pdGVyYXRvci5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fYS1mdW5jdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fYWRkLXRvLXVuc2NvcGFibGVzLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19hbi1pbnN0YW5jZS5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fYW4tb2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19hcnJheS1pbmNsdWRlcy5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fY2xhc3NvZi5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fY29mLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19jb3JlLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19jdHguanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2RlZmluZWQuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2Rlc2NyaXB0b3JzLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19kb20tY3JlYXRlLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19lbnVtLWJ1Zy1rZXlzLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19lbnVtLWtleXMuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2V4cG9ydC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fZmFpbHMuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2Zvci1vZi5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fZ2xvYmFsLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19oYXMuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2hpZGUuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2h0bWwuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2llOC1kb20tZGVmaW5lLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19pbnZva2UuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2lvYmplY3QuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2lzLWFycmF5LWl0ZXIuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2lzLWFycmF5LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19pcy1vYmplY3QuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2l0ZXItY2FsbC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9faXRlci1jcmVhdGUuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2l0ZXItZGVmaW5lLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19pdGVyLWRldGVjdC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9faXRlci1zdGVwLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19pdGVyYXRvcnMuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2tleW9mLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19saWJyYXJ5LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19tZXRhLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19taWNyb3Rhc2suanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX29iamVjdC1jcmVhdGUuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX29iamVjdC1kcC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fb2JqZWN0LWRwcy5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fb2JqZWN0LWdvcGQuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX29iamVjdC1nb3BuLWV4dC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fb2JqZWN0LWdvcG4uanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX29iamVjdC1nb3BzLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19vYmplY3QtZ3BvLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19vYmplY3Qta2V5cy1pbnRlcm5hbC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fb2JqZWN0LWtleXMuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX29iamVjdC1waWUuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX29iamVjdC1zYXAuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX3Byb3BlcnR5LWRlc2MuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX3JlZGVmaW5lLWFsbC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fcmVkZWZpbmUuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX3NldC1wcm90by5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fc2V0LXNwZWNpZXMuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX3NldC10by1zdHJpbmctdGFnLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19zaGFyZWQta2V5LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19zaGFyZWQuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX3NwZWNpZXMtY29uc3RydWN0b3IuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX3N0cmluZy1hdC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fdGFzay5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fdG8taW5kZXguanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX3RvLWludGVnZXIuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX3RvLWlvYmplY3QuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX3RvLWxlbmd0aC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fdG8tb2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL190by1wcmltaXRpdmUuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX3VpZC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fd2tzLWRlZmluZS5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fd2tzLWV4dC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fd2tzLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9lczYuYXJyYXkuaXRlcmF0b3IuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2Lm9iamVjdC5jcmVhdGUuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2Lm9iamVjdC5kZWZpbmUtcHJvcGVydHkuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtcHJvdG90eXBlLW9mLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cy5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9lczYub2JqZWN0LnNldC1wcm90b3R5cGUtb2YuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmcuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2LnByb21pc2UuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvci5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9lczYuc3ltYm9sLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNy5zeW1ib2wuYXN5bmMtaXRlcmF0b3IuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM3LnN5bWJvbC5vYnNlcnZhYmxlLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUuanMiLCJub2RlX21vZHVsZXMvcHJveHktb2JzZXJ2ZS9pbmRleC5qcyIsInNyYy9TeW5jaGVyLmpzIiwic3JjL3N5bmNoZXIvRGF0YU9iamVjdC5qcyIsInNyYy9zeW5jaGVyL0RhdGFPYmplY3RDaGlsZC5qcyIsInNyYy9zeW5jaGVyL0RhdGFPYmplY3RPYnNlcnZlci5qcyIsInNyYy9zeW5jaGVyL0RhdGFPYmplY3RSZXBvcnRlci5qcyIsInNyYy9zeW5jaGVyL0RhdGFQcm92aXNpb25hbC5qcyIsInNyYy9zeW5jaGVyL1Byb3h5T2JqZWN0LmpzIiwic3JjL3N5bmNoZXIvU3luY2hlci5qcyIsInNyYy91dGlscy91dGlscy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7O0FDREE7QUFDQTs7QUNEQTtBQUNBOztBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBOztBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4QkE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTs7QUNBQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBOztBQ0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BCQTtBQUNBO0FBQ0E7O0FDRkE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ05BOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakNBO0FBQ0E7QUFDQTs7QUNGQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBOztBQ0ZBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFPQTs7QUNBQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUVIO0FBQ0MsR0FYRCxNQVdPO0FBQ0wsV0FBTyxvQkFBb0IsVUFBcEIsQ0FBUDtBQUNEO0FBQ0YiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwibW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5XCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07IiwibW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9jcmVhdGVcIiksIF9fZXNNb2R1bGU6IHRydWUgfTsiLCJtb2R1bGUuZXhwb3J0cyA9IHsgXCJkZWZhdWx0XCI6IHJlcXVpcmUoXCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eVwiKSwgX19lc01vZHVsZTogdHJ1ZSB9OyIsIm1vZHVsZS5leHBvcnRzID0geyBcImRlZmF1bHRcIjogcmVxdWlyZShcImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yXCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07IiwibW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9nZXQtcHJvdG90eXBlLW9mXCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07IiwibW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzXCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07IiwibW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9zZXQtcHJvdG90eXBlLW9mXCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07IiwibW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL3Byb21pc2VcIiksIF9fZXNNb2R1bGU6IHRydWUgfTsiLCJtb2R1bGUuZXhwb3J0cyA9IHsgXCJkZWZhdWx0XCI6IHJlcXVpcmUoXCJjb3JlLWpzL2xpYnJhcnkvZm4vc3ltYm9sXCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07IiwibW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbC9pdGVyYXRvclwiKSwgX19lc01vZHVsZTogdHJ1ZSB9OyIsIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgfVxufTsiLCJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF9kZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoXCIuLi9jb3JlLWpzL29iamVjdC9kZWZpbmUtcHJvcGVydHlcIik7XG5cbnZhciBfZGVmaW5lUHJvcGVydHkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVmaW5lUHJvcGVydHkpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICAgIGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgfTtcbn0oKTsiLCJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF9nZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoXCIuLi9jb3JlLWpzL29iamVjdC9nZXQtcHJvdG90eXBlLW9mXCIpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTtcblxudmFyIF9nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSByZXF1aXJlKFwiLi4vY29yZS1qcy9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yXCIpO1xuXG52YXIgX2dldE93blByb3BlcnR5RGVzY3JpcHRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiBnZXQob2JqZWN0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHtcbiAgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlO1xuICB2YXIgZGVzYyA9ICgwLCBfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yMi5kZWZhdWx0KShvYmplY3QsIHByb3BlcnR5KTtcblxuICBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIHBhcmVudCA9ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKG9iamVjdCk7XG5cbiAgICBpZiAocGFyZW50ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZ2V0KHBhcmVudCwgcHJvcGVydHksIHJlY2VpdmVyKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoXCJ2YWx1ZVwiIGluIGRlc2MpIHtcbiAgICByZXR1cm4gZGVzYy52YWx1ZTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7XG5cbiAgICBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTtcbiAgfVxufTsiLCJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF9zZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoXCIuLi9jb3JlLWpzL29iamVjdC9zZXQtcHJvdG90eXBlLW9mXCIpO1xuXG52YXIgX3NldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NldFByb3RvdHlwZU9mKTtcblxudmFyIF9jcmVhdGUgPSByZXF1aXJlKFwiLi4vY29yZS1qcy9vYmplY3QvY3JlYXRlXCIpO1xuXG52YXIgX2NyZWF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGUpO1xuXG52YXIgX3R5cGVvZjIgPSByZXF1aXJlKFwiLi4vaGVscGVycy90eXBlb2ZcIik7XG5cbnZhciBfdHlwZW9mMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3R5cGVvZjIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgKHR5cGVvZiBzdXBlckNsYXNzID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6ICgwLCBfdHlwZW9mMy5kZWZhdWx0KShzdXBlckNsYXNzKSkpO1xuICB9XG5cbiAgc3ViQ2xhc3MucHJvdG90eXBlID0gKDAsIF9jcmVhdGUyLmRlZmF1bHQpKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgdmFsdWU6IHN1YkNsYXNzLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH1cbiAgfSk7XG4gIGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2YyLmRlZmF1bHQgPyAoMCwgX3NldFByb3RvdHlwZU9mMi5kZWZhdWx0KShzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xufTsiLCJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF90eXBlb2YyID0gcmVxdWlyZShcIi4uL2hlbHBlcnMvdHlwZW9mXCIpO1xuXG52YXIgX3R5cGVvZjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90eXBlb2YyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKHNlbGYsIGNhbGwpIHtcbiAgaWYgKCFzZWxmKSB7XG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuICB9XG5cbiAgcmV0dXJuIGNhbGwgJiYgKCh0eXBlb2YgY2FsbCA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiAoMCwgX3R5cGVvZjMuZGVmYXVsdCkoY2FsbCkpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX2l0ZXJhdG9yID0gcmVxdWlyZShcIi4uL2NvcmUtanMvc3ltYm9sL2l0ZXJhdG9yXCIpO1xuXG52YXIgX2l0ZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2l0ZXJhdG9yKTtcblxudmFyIF9zeW1ib2wgPSByZXF1aXJlKFwiLi4vY29yZS1qcy9zeW1ib2xcIik7XG5cbnZhciBfc3ltYm9sMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N5bWJvbCk7XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIF9zeW1ib2wyLmRlZmF1bHQgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgX2l0ZXJhdG9yMi5kZWZhdWx0ID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgX3N5bWJvbDIuZGVmYXVsdCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gX3N5bWJvbDIuZGVmYXVsdCAmJiBvYmogIT09IF9zeW1ib2wyLmRlZmF1bHQucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmV4cG9ydHMuZGVmYXVsdCA9IHR5cGVvZiBfc3ltYm9sMi5kZWZhdWx0ID09PSBcImZ1bmN0aW9uXCIgJiYgX3R5cGVvZihfaXRlcmF0b3IyLmRlZmF1bHQpID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKG9iaik7XG59IDogZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gb2JqICYmIHR5cGVvZiBfc3ltYm9sMi5kZWZhdWx0ID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBfc3ltYm9sMi5kZWZhdWx0ICYmIG9iaiAhPT0gX3N5bWJvbDIuZGVmYXVsdC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iaiA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKG9iaik7XG59OyIsInZhciBjb3JlICA9IHJlcXVpcmUoJy4uLy4uL21vZHVsZXMvX2NvcmUnKVxuICAsICRKU09OID0gY29yZS5KU09OIHx8IChjb3JlLkpTT04gPSB7c3RyaW5naWZ5OiBKU09OLnN0cmluZ2lmeX0pO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzdHJpbmdpZnkoaXQpeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gIHJldHVybiAkSlNPTi5zdHJpbmdpZnkuYXBwbHkoJEpTT04sIGFyZ3VtZW50cyk7XG59OyIsInJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5jcmVhdGUnKTtcbnZhciAkT2JqZWN0ID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9fY29yZScpLk9iamVjdDtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY3JlYXRlKFAsIEQpe1xuICByZXR1cm4gJE9iamVjdC5jcmVhdGUoUCwgRCk7XG59OyIsInJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5kZWZpbmUtcHJvcGVydHknKTtcbnZhciAkT2JqZWN0ID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9fY29yZScpLk9iamVjdDtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoaXQsIGtleSwgZGVzYyl7XG4gIHJldHVybiAkT2JqZWN0LmRlZmluZVByb3BlcnR5KGl0LCBrZXksIGRlc2MpO1xufTsiLCJyZXF1aXJlKCcuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yJyk7XG52YXIgJE9iamVjdCA9IHJlcXVpcmUoJy4uLy4uL21vZHVsZXMvX2NvcmUnKS5PYmplY3Q7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihpdCwga2V5KXtcbiAgcmV0dXJuICRPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGl0LCBrZXkpO1xufTsiLCJyZXF1aXJlKCcuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LXByb3RvdHlwZS1vZicpO1xubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuLi8uLi9tb2R1bGVzL19jb3JlJykuT2JqZWN0LmdldFByb3RvdHlwZU9mOyIsInJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4uLy4uL21vZHVsZXMvX2NvcmUnKS5PYmplY3Qua2V5czsiLCJyZXF1aXJlKCcuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Quc2V0LXByb3RvdHlwZS1vZicpO1xubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuLi8uLi9tb2R1bGVzL19jb3JlJykuT2JqZWN0LnNldFByb3RvdHlwZU9mOyIsInJlcXVpcmUoJy4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmcnKTtcbnJlcXVpcmUoJy4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvcicpO1xucmVxdWlyZSgnLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlJyk7XG5yZXF1aXJlKCcuLi9tb2R1bGVzL2VzNi5wcm9taXNlJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4uL21vZHVsZXMvX2NvcmUnKS5Qcm9taXNlOyIsInJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM2LnN5bWJvbCcpO1xucmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZycpO1xucmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9lczcuc3ltYm9sLmFzeW5jLWl0ZXJhdG9yJyk7XG5yZXF1aXJlKCcuLi8uLi9tb2R1bGVzL2VzNy5zeW1ib2wub2JzZXJ2YWJsZScpO1xubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuLi8uLi9tb2R1bGVzL19jb3JlJykuU3ltYm9sOyIsInJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvcicpO1xucmVxdWlyZSgnLi4vLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4uLy4uL21vZHVsZXMvX3drcy1leHQnKS5mKCdpdGVyYXRvcicpOyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICBpZih0eXBlb2YgaXQgIT0gJ2Z1bmN0aW9uJyl0aHJvdyBUeXBlRXJyb3IoaXQgKyAnIGlzIG5vdCBhIGZ1bmN0aW9uIScpO1xuICByZXR1cm4gaXQ7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKXsgLyogZW1wdHkgKi8gfTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCBDb25zdHJ1Y3RvciwgbmFtZSwgZm9yYmlkZGVuRmllbGQpe1xuICBpZighKGl0IGluc3RhbmNlb2YgQ29uc3RydWN0b3IpIHx8IChmb3JiaWRkZW5GaWVsZCAhPT0gdW5kZWZpbmVkICYmIGZvcmJpZGRlbkZpZWxkIGluIGl0KSl7XG4gICAgdGhyb3cgVHlwZUVycm9yKG5hbWUgKyAnOiBpbmNvcnJlY3QgaW52b2NhdGlvbiEnKTtcbiAgfSByZXR1cm4gaXQ7XG59OyIsInZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIGlmKCFpc09iamVjdChpdCkpdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgYW4gb2JqZWN0IScpO1xuICByZXR1cm4gaXQ7XG59OyIsIi8vIGZhbHNlIC0+IEFycmF5I2luZGV4T2Zcbi8vIHRydWUgIC0+IEFycmF5I2luY2x1ZGVzXG52YXIgdG9JT2JqZWN0ID0gcmVxdWlyZSgnLi9fdG8taW9iamVjdCcpXG4gICwgdG9MZW5ndGggID0gcmVxdWlyZSgnLi9fdG8tbGVuZ3RoJylcbiAgLCB0b0luZGV4ICAgPSByZXF1aXJlKCcuL190by1pbmRleCcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihJU19JTkNMVURFUyl7XG4gIHJldHVybiBmdW5jdGlvbigkdGhpcywgZWwsIGZyb21JbmRleCl7XG4gICAgdmFyIE8gICAgICA9IHRvSU9iamVjdCgkdGhpcylcbiAgICAgICwgbGVuZ3RoID0gdG9MZW5ndGgoTy5sZW5ndGgpXG4gICAgICAsIGluZGV4ICA9IHRvSW5kZXgoZnJvbUluZGV4LCBsZW5ndGgpXG4gICAgICAsIHZhbHVlO1xuICAgIC8vIEFycmF5I2luY2x1ZGVzIHVzZXMgU2FtZVZhbHVlWmVybyBlcXVhbGl0eSBhbGdvcml0aG1cbiAgICBpZihJU19JTkNMVURFUyAmJiBlbCAhPSBlbCl3aGlsZShsZW5ndGggPiBpbmRleCl7XG4gICAgICB2YWx1ZSA9IE9baW5kZXgrK107XG4gICAgICBpZih2YWx1ZSAhPSB2YWx1ZSlyZXR1cm4gdHJ1ZTtcbiAgICAvLyBBcnJheSN0b0luZGV4IGlnbm9yZXMgaG9sZXMsIEFycmF5I2luY2x1ZGVzIC0gbm90XG4gICAgfSBlbHNlIGZvcig7bGVuZ3RoID4gaW5kZXg7IGluZGV4KyspaWYoSVNfSU5DTFVERVMgfHwgaW5kZXggaW4gTyl7XG4gICAgICBpZihPW2luZGV4XSA9PT0gZWwpcmV0dXJuIElTX0lOQ0xVREVTIHx8IGluZGV4IHx8IDA7XG4gICAgfSByZXR1cm4gIUlTX0lOQ0xVREVTICYmIC0xO1xuICB9O1xufTsiLCIvLyBnZXR0aW5nIHRhZyBmcm9tIDE5LjEuMy42IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcoKVxudmFyIGNvZiA9IHJlcXVpcmUoJy4vX2NvZicpXG4gICwgVEFHID0gcmVxdWlyZSgnLi9fd2tzJykoJ3RvU3RyaW5nVGFnJylcbiAgLy8gRVMzIHdyb25nIGhlcmVcbiAgLCBBUkcgPSBjb2YoZnVuY3Rpb24oKXsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKSA9PSAnQXJndW1lbnRzJztcblxuLy8gZmFsbGJhY2sgZm9yIElFMTEgU2NyaXB0IEFjY2VzcyBEZW5pZWQgZXJyb3JcbnZhciB0cnlHZXQgPSBmdW5jdGlvbihpdCwga2V5KXtcbiAgdHJ5IHtcbiAgICByZXR1cm4gaXRba2V5XTtcbiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIHZhciBPLCBULCBCO1xuICByZXR1cm4gaXQgPT09IHVuZGVmaW5lZCA/ICdVbmRlZmluZWQnIDogaXQgPT09IG51bGwgPyAnTnVsbCdcbiAgICAvLyBAQHRvU3RyaW5nVGFnIGNhc2VcbiAgICA6IHR5cGVvZiAoVCA9IHRyeUdldChPID0gT2JqZWN0KGl0KSwgVEFHKSkgPT0gJ3N0cmluZycgPyBUXG4gICAgLy8gYnVpbHRpblRhZyBjYXNlXG4gICAgOiBBUkcgPyBjb2YoTylcbiAgICAvLyBFUzMgYXJndW1lbnRzIGZhbGxiYWNrXG4gICAgOiAoQiA9IGNvZihPKSkgPT0gJ09iamVjdCcgJiYgdHlwZW9mIE8uY2FsbGVlID09ICdmdW5jdGlvbicgPyAnQXJndW1lbnRzJyA6IEI7XG59OyIsInZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoaXQpLnNsaWNlKDgsIC0xKTtcbn07IiwidmFyIGNvcmUgPSBtb2R1bGUuZXhwb3J0cyA9IHt2ZXJzaW9uOiAnMi40LjAnfTtcbmlmKHR5cGVvZiBfX2UgPT0gJ251bWJlcicpX19lID0gY29yZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZiIsIi8vIG9wdGlvbmFsIC8gc2ltcGxlIGNvbnRleHQgYmluZGluZ1xudmFyIGFGdW5jdGlvbiA9IHJlcXVpcmUoJy4vX2EtZnVuY3Rpb24nKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZm4sIHRoYXQsIGxlbmd0aCl7XG4gIGFGdW5jdGlvbihmbik7XG4gIGlmKHRoYXQgPT09IHVuZGVmaW5lZClyZXR1cm4gZm47XG4gIHN3aXRjaChsZW5ndGgpe1xuICAgIGNhc2UgMTogcmV0dXJuIGZ1bmN0aW9uKGEpe1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSk7XG4gICAgfTtcbiAgICBjYXNlIDI6IHJldHVybiBmdW5jdGlvbihhLCBiKXtcbiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEsIGIpO1xuICAgIH07XG4gICAgY2FzZSAzOiByZXR1cm4gZnVuY3Rpb24oYSwgYiwgYyl7XG4gICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiLCBjKTtcbiAgICB9O1xuICB9XG4gIHJldHVybiBmdW5jdGlvbigvKiAuLi5hcmdzICovKXtcbiAgICByZXR1cm4gZm4uYXBwbHkodGhhdCwgYXJndW1lbnRzKTtcbiAgfTtcbn07IiwiLy8gNy4yLjEgUmVxdWlyZU9iamVjdENvZXJjaWJsZShhcmd1bWVudClcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICBpZihpdCA9PSB1bmRlZmluZWQpdGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gIFwiICsgaXQpO1xuICByZXR1cm4gaXQ7XG59OyIsIi8vIFRoYW5rJ3MgSUU4IGZvciBoaXMgZnVubnkgZGVmaW5lUHJvcGVydHlcbm1vZHVsZS5leHBvcnRzID0gIXJlcXVpcmUoJy4vX2ZhaWxzJykoZnVuY3Rpb24oKXtcbiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ2EnLCB7Z2V0OiBmdW5jdGlvbigpeyByZXR1cm4gNzsgfX0pLmEgIT0gNztcbn0pOyIsInZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpXG4gICwgZG9jdW1lbnQgPSByZXF1aXJlKCcuL19nbG9iYWwnKS5kb2N1bWVudFxuICAvLyBpbiBvbGQgSUUgdHlwZW9mIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgaXMgJ29iamVjdCdcbiAgLCBpcyA9IGlzT2JqZWN0KGRvY3VtZW50KSAmJiBpc09iamVjdChkb2N1bWVudC5jcmVhdGVFbGVtZW50KTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gaXMgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGl0KSA6IHt9O1xufTsiLCIvLyBJRSA4LSBkb24ndCBlbnVtIGJ1ZyBrZXlzXG5tb2R1bGUuZXhwb3J0cyA9IChcbiAgJ2NvbnN0cnVjdG9yLGhhc093blByb3BlcnR5LGlzUHJvdG90eXBlT2YscHJvcGVydHlJc0VudW1lcmFibGUsdG9Mb2NhbGVTdHJpbmcsdG9TdHJpbmcsdmFsdWVPZidcbikuc3BsaXQoJywnKTsiLCIvLyBhbGwgZW51bWVyYWJsZSBvYmplY3Qga2V5cywgaW5jbHVkZXMgc3ltYm9sc1xudmFyIGdldEtleXMgPSByZXF1aXJlKCcuL19vYmplY3Qta2V5cycpXG4gICwgZ09QUyAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1nb3BzJylcbiAgLCBwSUUgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LXBpZScpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIHZhciByZXN1bHQgICAgID0gZ2V0S2V5cyhpdClcbiAgICAsIGdldFN5bWJvbHMgPSBnT1BTLmY7XG4gIGlmKGdldFN5bWJvbHMpe1xuICAgIHZhciBzeW1ib2xzID0gZ2V0U3ltYm9scyhpdClcbiAgICAgICwgaXNFbnVtICA9IHBJRS5mXG4gICAgICAsIGkgICAgICAgPSAwXG4gICAgICAsIGtleTtcbiAgICB3aGlsZShzeW1ib2xzLmxlbmd0aCA+IGkpaWYoaXNFbnVtLmNhbGwoaXQsIGtleSA9IHN5bWJvbHNbaSsrXSkpcmVzdWx0LnB1c2goa2V5KTtcbiAgfSByZXR1cm4gcmVzdWx0O1xufTsiLCJ2YXIgZ2xvYmFsICAgID0gcmVxdWlyZSgnLi9fZ2xvYmFsJylcbiAgLCBjb3JlICAgICAgPSByZXF1aXJlKCcuL19jb3JlJylcbiAgLCBjdHggICAgICAgPSByZXF1aXJlKCcuL19jdHgnKVxuICAsIGhpZGUgICAgICA9IHJlcXVpcmUoJy4vX2hpZGUnKVxuICAsIFBST1RPVFlQRSA9ICdwcm90b3R5cGUnO1xuXG52YXIgJGV4cG9ydCA9IGZ1bmN0aW9uKHR5cGUsIG5hbWUsIHNvdXJjZSl7XG4gIHZhciBJU19GT1JDRUQgPSB0eXBlICYgJGV4cG9ydC5GXG4gICAgLCBJU19HTE9CQUwgPSB0eXBlICYgJGV4cG9ydC5HXG4gICAgLCBJU19TVEFUSUMgPSB0eXBlICYgJGV4cG9ydC5TXG4gICAgLCBJU19QUk9UTyAgPSB0eXBlICYgJGV4cG9ydC5QXG4gICAgLCBJU19CSU5EICAgPSB0eXBlICYgJGV4cG9ydC5CXG4gICAgLCBJU19XUkFQICAgPSB0eXBlICYgJGV4cG9ydC5XXG4gICAgLCBleHBvcnRzICAgPSBJU19HTE9CQUwgPyBjb3JlIDogY29yZVtuYW1lXSB8fCAoY29yZVtuYW1lXSA9IHt9KVxuICAgICwgZXhwUHJvdG8gID0gZXhwb3J0c1tQUk9UT1RZUEVdXG4gICAgLCB0YXJnZXQgICAgPSBJU19HTE9CQUwgPyBnbG9iYWwgOiBJU19TVEFUSUMgPyBnbG9iYWxbbmFtZV0gOiAoZ2xvYmFsW25hbWVdIHx8IHt9KVtQUk9UT1RZUEVdXG4gICAgLCBrZXksIG93biwgb3V0O1xuICBpZihJU19HTE9CQUwpc291cmNlID0gbmFtZTtcbiAgZm9yKGtleSBpbiBzb3VyY2Upe1xuICAgIC8vIGNvbnRhaW5zIGluIG5hdGl2ZVxuICAgIG93biA9ICFJU19GT1JDRUQgJiYgdGFyZ2V0ICYmIHRhcmdldFtrZXldICE9PSB1bmRlZmluZWQ7XG4gICAgaWYob3duICYmIGtleSBpbiBleHBvcnRzKWNvbnRpbnVlO1xuICAgIC8vIGV4cG9ydCBuYXRpdmUgb3IgcGFzc2VkXG4gICAgb3V0ID0gb3duID8gdGFyZ2V0W2tleV0gOiBzb3VyY2Vba2V5XTtcbiAgICAvLyBwcmV2ZW50IGdsb2JhbCBwb2xsdXRpb24gZm9yIG5hbWVzcGFjZXNcbiAgICBleHBvcnRzW2tleV0gPSBJU19HTE9CQUwgJiYgdHlwZW9mIHRhcmdldFtrZXldICE9ICdmdW5jdGlvbicgPyBzb3VyY2Vba2V5XVxuICAgIC8vIGJpbmQgdGltZXJzIHRvIGdsb2JhbCBmb3IgY2FsbCBmcm9tIGV4cG9ydCBjb250ZXh0XG4gICAgOiBJU19CSU5EICYmIG93biA/IGN0eChvdXQsIGdsb2JhbClcbiAgICAvLyB3cmFwIGdsb2JhbCBjb25zdHJ1Y3RvcnMgZm9yIHByZXZlbnQgY2hhbmdlIHRoZW0gaW4gbGlicmFyeVxuICAgIDogSVNfV1JBUCAmJiB0YXJnZXRba2V5XSA9PSBvdXQgPyAoZnVuY3Rpb24oQyl7XG4gICAgICB2YXIgRiA9IGZ1bmN0aW9uKGEsIGIsIGMpe1xuICAgICAgICBpZih0aGlzIGluc3RhbmNlb2YgQyl7XG4gICAgICAgICAgc3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe1xuICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gbmV3IEM7XG4gICAgICAgICAgICBjYXNlIDE6IHJldHVybiBuZXcgQyhhKTtcbiAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIG5ldyBDKGEsIGIpO1xuICAgICAgICAgIH0gcmV0dXJuIG5ldyBDKGEsIGIsIGMpO1xuICAgICAgICB9IHJldHVybiBDLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgICAgRltQUk9UT1RZUEVdID0gQ1tQUk9UT1RZUEVdO1xuICAgICAgcmV0dXJuIEY7XG4gICAgLy8gbWFrZSBzdGF0aWMgdmVyc2lvbnMgZm9yIHByb3RvdHlwZSBtZXRob2RzXG4gICAgfSkob3V0KSA6IElTX1BST1RPICYmIHR5cGVvZiBvdXQgPT0gJ2Z1bmN0aW9uJyA/IGN0eChGdW5jdGlvbi5jYWxsLCBvdXQpIDogb3V0O1xuICAgIC8vIGV4cG9ydCBwcm90byBtZXRob2RzIHRvIGNvcmUuJUNPTlNUUlVDVE9SJS5tZXRob2RzLiVOQU1FJVxuICAgIGlmKElTX1BST1RPKXtcbiAgICAgIChleHBvcnRzLnZpcnR1YWwgfHwgKGV4cG9ydHMudmlydHVhbCA9IHt9KSlba2V5XSA9IG91dDtcbiAgICAgIC8vIGV4cG9ydCBwcm90byBtZXRob2RzIHRvIGNvcmUuJUNPTlNUUlVDVE9SJS5wcm90b3R5cGUuJU5BTUUlXG4gICAgICBpZih0eXBlICYgJGV4cG9ydC5SICYmIGV4cFByb3RvICYmICFleHBQcm90b1trZXldKWhpZGUoZXhwUHJvdG8sIGtleSwgb3V0KTtcbiAgICB9XG4gIH1cbn07XG4vLyB0eXBlIGJpdG1hcFxuJGV4cG9ydC5GID0gMTsgICAvLyBmb3JjZWRcbiRleHBvcnQuRyA9IDI7ICAgLy8gZ2xvYmFsXG4kZXhwb3J0LlMgPSA0OyAgIC8vIHN0YXRpY1xuJGV4cG9ydC5QID0gODsgICAvLyBwcm90b1xuJGV4cG9ydC5CID0gMTY7ICAvLyBiaW5kXG4kZXhwb3J0LlcgPSAzMjsgIC8vIHdyYXBcbiRleHBvcnQuVSA9IDY0OyAgLy8gc2FmZVxuJGV4cG9ydC5SID0gMTI4OyAvLyByZWFsIHByb3RvIG1ldGhvZCBmb3IgYGxpYnJhcnlgIFxubW9kdWxlLmV4cG9ydHMgPSAkZXhwb3J0OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZXhlYyl7XG4gIHRyeSB7XG4gICAgcmV0dXJuICEhZXhlYygpO1xuICB9IGNhdGNoKGUpe1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59OyIsInZhciBjdHggICAgICAgICA9IHJlcXVpcmUoJy4vX2N0eCcpXG4gICwgY2FsbCAgICAgICAgPSByZXF1aXJlKCcuL19pdGVyLWNhbGwnKVxuICAsIGlzQXJyYXlJdGVyID0gcmVxdWlyZSgnLi9faXMtYXJyYXktaXRlcicpXG4gICwgYW5PYmplY3QgICAgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKVxuICAsIHRvTGVuZ3RoICAgID0gcmVxdWlyZSgnLi9fdG8tbGVuZ3RoJylcbiAgLCBnZXRJdGVyRm4gICA9IHJlcXVpcmUoJy4vY29yZS5nZXQtaXRlcmF0b3ItbWV0aG9kJylcbiAgLCBCUkVBSyAgICAgICA9IHt9XG4gICwgUkVUVVJOICAgICAgPSB7fTtcbnZhciBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdGVyYWJsZSwgZW50cmllcywgZm4sIHRoYXQsIElURVJBVE9SKXtcbiAgdmFyIGl0ZXJGbiA9IElURVJBVE9SID8gZnVuY3Rpb24oKXsgcmV0dXJuIGl0ZXJhYmxlOyB9IDogZ2V0SXRlckZuKGl0ZXJhYmxlKVxuICAgICwgZiAgICAgID0gY3R4KGZuLCB0aGF0LCBlbnRyaWVzID8gMiA6IDEpXG4gICAgLCBpbmRleCAgPSAwXG4gICAgLCBsZW5ndGgsIHN0ZXAsIGl0ZXJhdG9yLCByZXN1bHQ7XG4gIGlmKHR5cGVvZiBpdGVyRm4gIT0gJ2Z1bmN0aW9uJyl0aHJvdyBUeXBlRXJyb3IoaXRlcmFibGUgKyAnIGlzIG5vdCBpdGVyYWJsZSEnKTtcbiAgLy8gZmFzdCBjYXNlIGZvciBhcnJheXMgd2l0aCBkZWZhdWx0IGl0ZXJhdG9yXG4gIGlmKGlzQXJyYXlJdGVyKGl0ZXJGbikpZm9yKGxlbmd0aCA9IHRvTGVuZ3RoKGl0ZXJhYmxlLmxlbmd0aCk7IGxlbmd0aCA+IGluZGV4OyBpbmRleCsrKXtcbiAgICByZXN1bHQgPSBlbnRyaWVzID8gZihhbk9iamVjdChzdGVwID0gaXRlcmFibGVbaW5kZXhdKVswXSwgc3RlcFsxXSkgOiBmKGl0ZXJhYmxlW2luZGV4XSk7XG4gICAgaWYocmVzdWx0ID09PSBCUkVBSyB8fCByZXN1bHQgPT09IFJFVFVSTilyZXR1cm4gcmVzdWx0O1xuICB9IGVsc2UgZm9yKGl0ZXJhdG9yID0gaXRlckZuLmNhbGwoaXRlcmFibGUpOyAhKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmU7ICl7XG4gICAgcmVzdWx0ID0gY2FsbChpdGVyYXRvciwgZiwgc3RlcC52YWx1ZSwgZW50cmllcyk7XG4gICAgaWYocmVzdWx0ID09PSBCUkVBSyB8fCByZXN1bHQgPT09IFJFVFVSTilyZXR1cm4gcmVzdWx0O1xuICB9XG59O1xuZXhwb3J0cy5CUkVBSyAgPSBCUkVBSztcbmV4cG9ydHMuUkVUVVJOID0gUkVUVVJOOyIsIi8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy84NiNpc3N1ZWNvbW1lbnQtMTE1NzU5MDI4XG52YXIgZ2xvYmFsID0gbW9kdWxlLmV4cG9ydHMgPSB0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnICYmIHdpbmRvdy5NYXRoID09IE1hdGhcbiAgPyB3aW5kb3cgOiB0eXBlb2Ygc2VsZiAhPSAndW5kZWZpbmVkJyAmJiBzZWxmLk1hdGggPT0gTWF0aCA/IHNlbGYgOiBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuaWYodHlwZW9mIF9fZyA9PSAnbnVtYmVyJylfX2cgPSBnbG9iYWw7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWYiLCJ2YXIgaGFzT3duUHJvcGVydHkgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQsIGtleSl7XG4gIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGl0LCBrZXkpO1xufTsiLCJ2YXIgZFAgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpXG4gICwgY3JlYXRlRGVzYyA9IHJlcXVpcmUoJy4vX3Byb3BlcnR5LWRlc2MnKTtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9fZGVzY3JpcHRvcnMnKSA/IGZ1bmN0aW9uKG9iamVjdCwga2V5LCB2YWx1ZSl7XG4gIHJldHVybiBkUC5mKG9iamVjdCwga2V5LCBjcmVhdGVEZXNjKDEsIHZhbHVlKSk7XG59IDogZnVuY3Rpb24ob2JqZWN0LCBrZXksIHZhbHVlKXtcbiAgb2JqZWN0W2tleV0gPSB2YWx1ZTtcbiAgcmV0dXJuIG9iamVjdDtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL19nbG9iYWwnKS5kb2N1bWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7IiwibW9kdWxlLmV4cG9ydHMgPSAhcmVxdWlyZSgnLi9fZGVzY3JpcHRvcnMnKSAmJiAhcmVxdWlyZSgnLi9fZmFpbHMnKShmdW5jdGlvbigpe1xuICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlcXVpcmUoJy4vX2RvbS1jcmVhdGUnKSgnZGl2JyksICdhJywge2dldDogZnVuY3Rpb24oKXsgcmV0dXJuIDc7IH19KS5hICE9IDc7XG59KTsiLCIvLyBmYXN0IGFwcGx5LCBodHRwOi8vanNwZXJmLmxua2l0LmNvbS9mYXN0LWFwcGx5LzVcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZm4sIGFyZ3MsIHRoYXQpe1xuICB2YXIgdW4gPSB0aGF0ID09PSB1bmRlZmluZWQ7XG4gIHN3aXRjaChhcmdzLmxlbmd0aCl7XG4gICAgY2FzZSAwOiByZXR1cm4gdW4gPyBmbigpXG4gICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQpO1xuICAgIGNhc2UgMTogcmV0dXJuIHVuID8gZm4oYXJnc1swXSlcbiAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSk7XG4gICAgY2FzZSAyOiByZXR1cm4gdW4gPyBmbihhcmdzWzBdLCBhcmdzWzFdKVxuICAgICAgICAgICAgICAgICAgICAgIDogZm4uY2FsbCh0aGF0LCBhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICBjYXNlIDM6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pXG4gICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICAgIGNhc2UgNDogcmV0dXJuIHVuID8gZm4oYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSlcbiAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSk7XG4gIH0gcmV0dXJuICAgICAgICAgICAgICBmbi5hcHBseSh0aGF0LCBhcmdzKTtcbn07IiwiLy8gZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBhbmQgbm9uLWVudW1lcmFibGUgb2xkIFY4IHN0cmluZ3NcbnZhciBjb2YgPSByZXF1aXJlKCcuL19jb2YnKTtcbm1vZHVsZS5leHBvcnRzID0gT2JqZWN0KCd6JykucHJvcGVydHlJc0VudW1lcmFibGUoMCkgPyBPYmplY3QgOiBmdW5jdGlvbihpdCl7XG4gIHJldHVybiBjb2YoaXQpID09ICdTdHJpbmcnID8gaXQuc3BsaXQoJycpIDogT2JqZWN0KGl0KTtcbn07IiwiLy8gY2hlY2sgb24gZGVmYXVsdCBBcnJheSBpdGVyYXRvclxudmFyIEl0ZXJhdG9ycyAgPSByZXF1aXJlKCcuL19pdGVyYXRvcnMnKVxuICAsIElURVJBVE9SICAgPSByZXF1aXJlKCcuL193a3MnKSgnaXRlcmF0b3InKVxuICAsIEFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGU7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gaXQgIT09IHVuZGVmaW5lZCAmJiAoSXRlcmF0b3JzLkFycmF5ID09PSBpdCB8fCBBcnJheVByb3RvW0lURVJBVE9SXSA9PT0gaXQpO1xufTsiLCIvLyA3LjIuMiBJc0FycmF5KGFyZ3VtZW50KVxudmFyIGNvZiA9IHJlcXVpcmUoJy4vX2NvZicpO1xubW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIGlzQXJyYXkoYXJnKXtcbiAgcmV0dXJuIGNvZihhcmcpID09ICdBcnJheSc7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gdHlwZW9mIGl0ID09PSAnb2JqZWN0JyA/IGl0ICE9PSBudWxsIDogdHlwZW9mIGl0ID09PSAnZnVuY3Rpb24nO1xufTsiLCIvLyBjYWxsIHNvbWV0aGluZyBvbiBpdGVyYXRvciBzdGVwIHdpdGggc2FmZSBjbG9zaW5nIG9uIGVycm9yXG52YXIgYW5PYmplY3QgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXRlcmF0b3IsIGZuLCB2YWx1ZSwgZW50cmllcyl7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGVudHJpZXMgPyBmbihhbk9iamVjdCh2YWx1ZSlbMF0sIHZhbHVlWzFdKSA6IGZuKHZhbHVlKTtcbiAgLy8gNy40LjYgSXRlcmF0b3JDbG9zZShpdGVyYXRvciwgY29tcGxldGlvbilcbiAgfSBjYXRjaChlKXtcbiAgICB2YXIgcmV0ID0gaXRlcmF0b3JbJ3JldHVybiddO1xuICAgIGlmKHJldCAhPT0gdW5kZWZpbmVkKWFuT2JqZWN0KHJldC5jYWxsKGl0ZXJhdG9yKSk7XG4gICAgdGhyb3cgZTtcbiAgfVxufTsiLCIndXNlIHN0cmljdCc7XG52YXIgY3JlYXRlICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtY3JlYXRlJylcbiAgLCBkZXNjcmlwdG9yICAgICA9IHJlcXVpcmUoJy4vX3Byb3BlcnR5LWRlc2MnKVxuICAsIHNldFRvU3RyaW5nVGFnID0gcmVxdWlyZSgnLi9fc2V0LXRvLXN0cmluZy10YWcnKVxuICAsIEl0ZXJhdG9yUHJvdG90eXBlID0ge307XG5cbi8vIDI1LjEuMi4xLjEgJUl0ZXJhdG9yUHJvdG90eXBlJVtAQGl0ZXJhdG9yXSgpXG5yZXF1aXJlKCcuL19oaWRlJykoSXRlcmF0b3JQcm90b3R5cGUsIHJlcXVpcmUoJy4vX3drcycpKCdpdGVyYXRvcicpLCBmdW5jdGlvbigpeyByZXR1cm4gdGhpczsgfSk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oQ29uc3RydWN0b3IsIE5BTUUsIG5leHQpe1xuICBDb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSBjcmVhdGUoSXRlcmF0b3JQcm90b3R5cGUsIHtuZXh0OiBkZXNjcmlwdG9yKDEsIG5leHQpfSk7XG4gIHNldFRvU3RyaW5nVGFnKENvbnN0cnVjdG9yLCBOQU1FICsgJyBJdGVyYXRvcicpO1xufTsiLCIndXNlIHN0cmljdCc7XG52YXIgTElCUkFSWSAgICAgICAgPSByZXF1aXJlKCcuL19saWJyYXJ5JylcbiAgLCAkZXhwb3J0ICAgICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgcmVkZWZpbmUgICAgICAgPSByZXF1aXJlKCcuL19yZWRlZmluZScpXG4gICwgaGlkZSAgICAgICAgICAgPSByZXF1aXJlKCcuL19oaWRlJylcbiAgLCBoYXMgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2hhcycpXG4gICwgSXRlcmF0b3JzICAgICAgPSByZXF1aXJlKCcuL19pdGVyYXRvcnMnKVxuICAsICRpdGVyQ3JlYXRlICAgID0gcmVxdWlyZSgnLi9faXRlci1jcmVhdGUnKVxuICAsIHNldFRvU3RyaW5nVGFnID0gcmVxdWlyZSgnLi9fc2V0LXRvLXN0cmluZy10YWcnKVxuICAsIGdldFByb3RvdHlwZU9mID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdwbycpXG4gICwgSVRFUkFUT1IgICAgICAgPSByZXF1aXJlKCcuL193a3MnKSgnaXRlcmF0b3InKVxuICAsIEJVR0dZICAgICAgICAgID0gIShbXS5rZXlzICYmICduZXh0JyBpbiBbXS5rZXlzKCkpIC8vIFNhZmFyaSBoYXMgYnVnZ3kgaXRlcmF0b3JzIHcvbyBgbmV4dGBcbiAgLCBGRl9JVEVSQVRPUiAgICA9ICdAQGl0ZXJhdG9yJ1xuICAsIEtFWVMgICAgICAgICAgID0gJ2tleXMnXG4gICwgVkFMVUVTICAgICAgICAgPSAndmFsdWVzJztcblxudmFyIHJldHVyblRoaXMgPSBmdW5jdGlvbigpeyByZXR1cm4gdGhpczsgfTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihCYXNlLCBOQU1FLCBDb25zdHJ1Y3RvciwgbmV4dCwgREVGQVVMVCwgSVNfU0VULCBGT1JDRUQpe1xuICAkaXRlckNyZWF0ZShDb25zdHJ1Y3RvciwgTkFNRSwgbmV4dCk7XG4gIHZhciBnZXRNZXRob2QgPSBmdW5jdGlvbihraW5kKXtcbiAgICBpZighQlVHR1kgJiYga2luZCBpbiBwcm90bylyZXR1cm4gcHJvdG9ba2luZF07XG4gICAgc3dpdGNoKGtpbmQpe1xuICAgICAgY2FzZSBLRVlTOiByZXR1cm4gZnVuY3Rpb24ga2V5cygpeyByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsIGtpbmQpOyB9O1xuICAgICAgY2FzZSBWQUxVRVM6IHJldHVybiBmdW5jdGlvbiB2YWx1ZXMoKXsgcmV0dXJuIG5ldyBDb25zdHJ1Y3Rvcih0aGlzLCBraW5kKTsgfTtcbiAgICB9IHJldHVybiBmdW5jdGlvbiBlbnRyaWVzKCl7IHJldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcywga2luZCk7IH07XG4gIH07XG4gIHZhciBUQUcgICAgICAgID0gTkFNRSArICcgSXRlcmF0b3InXG4gICAgLCBERUZfVkFMVUVTID0gREVGQVVMVCA9PSBWQUxVRVNcbiAgICAsIFZBTFVFU19CVUcgPSBmYWxzZVxuICAgICwgcHJvdG8gICAgICA9IEJhc2UucHJvdG90eXBlXG4gICAgLCAkbmF0aXZlICAgID0gcHJvdG9bSVRFUkFUT1JdIHx8IHByb3RvW0ZGX0lURVJBVE9SXSB8fCBERUZBVUxUICYmIHByb3RvW0RFRkFVTFRdXG4gICAgLCAkZGVmYXVsdCAgID0gJG5hdGl2ZSB8fCBnZXRNZXRob2QoREVGQVVMVClcbiAgICAsICRlbnRyaWVzICAgPSBERUZBVUxUID8gIURFRl9WQUxVRVMgPyAkZGVmYXVsdCA6IGdldE1ldGhvZCgnZW50cmllcycpIDogdW5kZWZpbmVkXG4gICAgLCAkYW55TmF0aXZlID0gTkFNRSA9PSAnQXJyYXknID8gcHJvdG8uZW50cmllcyB8fCAkbmF0aXZlIDogJG5hdGl2ZVxuICAgICwgbWV0aG9kcywga2V5LCBJdGVyYXRvclByb3RvdHlwZTtcbiAgLy8gRml4IG5hdGl2ZVxuICBpZigkYW55TmF0aXZlKXtcbiAgICBJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvdHlwZU9mKCRhbnlOYXRpdmUuY2FsbChuZXcgQmFzZSkpO1xuICAgIGlmKEl0ZXJhdG9yUHJvdG90eXBlICE9PSBPYmplY3QucHJvdG90eXBlKXtcbiAgICAgIC8vIFNldCBAQHRvU3RyaW5nVGFnIHRvIG5hdGl2ZSBpdGVyYXRvcnNcbiAgICAgIHNldFRvU3RyaW5nVGFnKEl0ZXJhdG9yUHJvdG90eXBlLCBUQUcsIHRydWUpO1xuICAgICAgLy8gZml4IGZvciBzb21lIG9sZCBlbmdpbmVzXG4gICAgICBpZighTElCUkFSWSAmJiAhaGFzKEl0ZXJhdG9yUHJvdG90eXBlLCBJVEVSQVRPUikpaGlkZShJdGVyYXRvclByb3RvdHlwZSwgSVRFUkFUT1IsIHJldHVyblRoaXMpO1xuICAgIH1cbiAgfVxuICAvLyBmaXggQXJyYXkje3ZhbHVlcywgQEBpdGVyYXRvcn0ubmFtZSBpbiBWOCAvIEZGXG4gIGlmKERFRl9WQUxVRVMgJiYgJG5hdGl2ZSAmJiAkbmF0aXZlLm5hbWUgIT09IFZBTFVFUyl7XG4gICAgVkFMVUVTX0JVRyA9IHRydWU7XG4gICAgJGRlZmF1bHQgPSBmdW5jdGlvbiB2YWx1ZXMoKXsgcmV0dXJuICRuYXRpdmUuY2FsbCh0aGlzKTsgfTtcbiAgfVxuICAvLyBEZWZpbmUgaXRlcmF0b3JcbiAgaWYoKCFMSUJSQVJZIHx8IEZPUkNFRCkgJiYgKEJVR0dZIHx8IFZBTFVFU19CVUcgfHwgIXByb3RvW0lURVJBVE9SXSkpe1xuICAgIGhpZGUocHJvdG8sIElURVJBVE9SLCAkZGVmYXVsdCk7XG4gIH1cbiAgLy8gUGx1ZyBmb3IgbGlicmFyeVxuICBJdGVyYXRvcnNbTkFNRV0gPSAkZGVmYXVsdDtcbiAgSXRlcmF0b3JzW1RBR10gID0gcmV0dXJuVGhpcztcbiAgaWYoREVGQVVMVCl7XG4gICAgbWV0aG9kcyA9IHtcbiAgICAgIHZhbHVlczogIERFRl9WQUxVRVMgPyAkZGVmYXVsdCA6IGdldE1ldGhvZChWQUxVRVMpLFxuICAgICAga2V5czogICAgSVNfU0VUICAgICA/ICRkZWZhdWx0IDogZ2V0TWV0aG9kKEtFWVMpLFxuICAgICAgZW50cmllczogJGVudHJpZXNcbiAgICB9O1xuICAgIGlmKEZPUkNFRClmb3Ioa2V5IGluIG1ldGhvZHMpe1xuICAgICAgaWYoIShrZXkgaW4gcHJvdG8pKXJlZGVmaW5lKHByb3RvLCBrZXksIG1ldGhvZHNba2V5XSk7XG4gICAgfSBlbHNlICRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogKEJVR0dZIHx8IFZBTFVFU19CVUcpLCBOQU1FLCBtZXRob2RzKTtcbiAgfVxuICByZXR1cm4gbWV0aG9kcztcbn07IiwidmFyIElURVJBVE9SICAgICA9IHJlcXVpcmUoJy4vX3drcycpKCdpdGVyYXRvcicpXG4gICwgU0FGRV9DTE9TSU5HID0gZmFsc2U7XG5cbnRyeSB7XG4gIHZhciByaXRlciA9IFs3XVtJVEVSQVRPUl0oKTtcbiAgcml0ZXJbJ3JldHVybiddID0gZnVuY3Rpb24oKXsgU0FGRV9DTE9TSU5HID0gdHJ1ZTsgfTtcbiAgQXJyYXkuZnJvbShyaXRlciwgZnVuY3Rpb24oKXsgdGhyb3cgMjsgfSk7XG59IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZXhlYywgc2tpcENsb3Npbmcpe1xuICBpZighc2tpcENsb3NpbmcgJiYgIVNBRkVfQ0xPU0lORylyZXR1cm4gZmFsc2U7XG4gIHZhciBzYWZlID0gZmFsc2U7XG4gIHRyeSB7XG4gICAgdmFyIGFyciAgPSBbN11cbiAgICAgICwgaXRlciA9IGFycltJVEVSQVRPUl0oKTtcbiAgICBpdGVyLm5leHQgPSBmdW5jdGlvbigpeyByZXR1cm4ge2RvbmU6IHNhZmUgPSB0cnVlfTsgfTtcbiAgICBhcnJbSVRFUkFUT1JdID0gZnVuY3Rpb24oKXsgcmV0dXJuIGl0ZXI7IH07XG4gICAgZXhlYyhhcnIpO1xuICB9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9XG4gIHJldHVybiBzYWZlO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGRvbmUsIHZhbHVlKXtcbiAgcmV0dXJuIHt2YWx1ZTogdmFsdWUsIGRvbmU6ICEhZG9uZX07XG59OyIsIm1vZHVsZS5leHBvcnRzID0ge307IiwidmFyIGdldEtleXMgICA9IHJlcXVpcmUoJy4vX29iamVjdC1rZXlzJylcbiAgLCB0b0lPYmplY3QgPSByZXF1aXJlKCcuL190by1pb2JqZWN0Jyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iamVjdCwgZWwpe1xuICB2YXIgTyAgICAgID0gdG9JT2JqZWN0KG9iamVjdClcbiAgICAsIGtleXMgICA9IGdldEtleXMoTylcbiAgICAsIGxlbmd0aCA9IGtleXMubGVuZ3RoXG4gICAgLCBpbmRleCAgPSAwXG4gICAgLCBrZXk7XG4gIHdoaWxlKGxlbmd0aCA+IGluZGV4KWlmKE9ba2V5ID0ga2V5c1tpbmRleCsrXV0gPT09IGVsKXJldHVybiBrZXk7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gdHJ1ZTsiLCJ2YXIgTUVUQSAgICAgPSByZXF1aXJlKCcuL191aWQnKSgnbWV0YScpXG4gICwgaXNPYmplY3QgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKVxuICAsIGhhcyAgICAgID0gcmVxdWlyZSgnLi9faGFzJylcbiAgLCBzZXREZXNjICA9IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpLmZcbiAgLCBpZCAgICAgICA9IDA7XG52YXIgaXNFeHRlbnNpYmxlID0gT2JqZWN0LmlzRXh0ZW5zaWJsZSB8fCBmdW5jdGlvbigpe1xuICByZXR1cm4gdHJ1ZTtcbn07XG52YXIgRlJFRVpFID0gIXJlcXVpcmUoJy4vX2ZhaWxzJykoZnVuY3Rpb24oKXtcbiAgcmV0dXJuIGlzRXh0ZW5zaWJsZShPYmplY3QucHJldmVudEV4dGVuc2lvbnMoe30pKTtcbn0pO1xudmFyIHNldE1ldGEgPSBmdW5jdGlvbihpdCl7XG4gIHNldERlc2MoaXQsIE1FVEEsIHt2YWx1ZToge1xuICAgIGk6ICdPJyArICsraWQsIC8vIG9iamVjdCBJRFxuICAgIHc6IHt9ICAgICAgICAgIC8vIHdlYWsgY29sbGVjdGlvbnMgSURzXG4gIH19KTtcbn07XG52YXIgZmFzdEtleSA9IGZ1bmN0aW9uKGl0LCBjcmVhdGUpe1xuICAvLyByZXR1cm4gcHJpbWl0aXZlIHdpdGggcHJlZml4XG4gIGlmKCFpc09iamVjdChpdCkpcmV0dXJuIHR5cGVvZiBpdCA9PSAnc3ltYm9sJyA/IGl0IDogKHR5cGVvZiBpdCA9PSAnc3RyaW5nJyA/ICdTJyA6ICdQJykgKyBpdDtcbiAgaWYoIWhhcyhpdCwgTUVUQSkpe1xuICAgIC8vIGNhbid0IHNldCBtZXRhZGF0YSB0byB1bmNhdWdodCBmcm96ZW4gb2JqZWN0XG4gICAgaWYoIWlzRXh0ZW5zaWJsZShpdCkpcmV0dXJuICdGJztcbiAgICAvLyBub3QgbmVjZXNzYXJ5IHRvIGFkZCBtZXRhZGF0YVxuICAgIGlmKCFjcmVhdGUpcmV0dXJuICdFJztcbiAgICAvLyBhZGQgbWlzc2luZyBtZXRhZGF0YVxuICAgIHNldE1ldGEoaXQpO1xuICAvLyByZXR1cm4gb2JqZWN0IElEXG4gIH0gcmV0dXJuIGl0W01FVEFdLmk7XG59O1xudmFyIGdldFdlYWsgPSBmdW5jdGlvbihpdCwgY3JlYXRlKXtcbiAgaWYoIWhhcyhpdCwgTUVUQSkpe1xuICAgIC8vIGNhbid0IHNldCBtZXRhZGF0YSB0byB1bmNhdWdodCBmcm96ZW4gb2JqZWN0XG4gICAgaWYoIWlzRXh0ZW5zaWJsZShpdCkpcmV0dXJuIHRydWU7XG4gICAgLy8gbm90IG5lY2Vzc2FyeSB0byBhZGQgbWV0YWRhdGFcbiAgICBpZighY3JlYXRlKXJldHVybiBmYWxzZTtcbiAgICAvLyBhZGQgbWlzc2luZyBtZXRhZGF0YVxuICAgIHNldE1ldGEoaXQpO1xuICAvLyByZXR1cm4gaGFzaCB3ZWFrIGNvbGxlY3Rpb25zIElEc1xuICB9IHJldHVybiBpdFtNRVRBXS53O1xufTtcbi8vIGFkZCBtZXRhZGF0YSBvbiBmcmVlemUtZmFtaWx5IG1ldGhvZHMgY2FsbGluZ1xudmFyIG9uRnJlZXplID0gZnVuY3Rpb24oaXQpe1xuICBpZihGUkVFWkUgJiYgbWV0YS5ORUVEICYmIGlzRXh0ZW5zaWJsZShpdCkgJiYgIWhhcyhpdCwgTUVUQSkpc2V0TWV0YShpdCk7XG4gIHJldHVybiBpdDtcbn07XG52YXIgbWV0YSA9IG1vZHVsZS5leHBvcnRzID0ge1xuICBLRVk6ICAgICAgTUVUQSxcbiAgTkVFRDogICAgIGZhbHNlLFxuICBmYXN0S2V5OiAgZmFzdEtleSxcbiAgZ2V0V2VhazogIGdldFdlYWssXG4gIG9uRnJlZXplOiBvbkZyZWV6ZVxufTsiLCJ2YXIgZ2xvYmFsICAgID0gcmVxdWlyZSgnLi9fZ2xvYmFsJylcbiAgLCBtYWNyb3Rhc2sgPSByZXF1aXJlKCcuL190YXNrJykuc2V0XG4gICwgT2JzZXJ2ZXIgID0gZ2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgZ2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXJcbiAgLCBwcm9jZXNzICAgPSBnbG9iYWwucHJvY2Vzc1xuICAsIFByb21pc2UgICA9IGdsb2JhbC5Qcm9taXNlXG4gICwgaXNOb2RlICAgID0gcmVxdWlyZSgnLi9fY29mJykocHJvY2VzcykgPT0gJ3Byb2Nlc3MnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCl7XG4gIHZhciBoZWFkLCBsYXN0LCBub3RpZnk7XG5cbiAgdmFyIGZsdXNoID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgcGFyZW50LCBmbjtcbiAgICBpZihpc05vZGUgJiYgKHBhcmVudCA9IHByb2Nlc3MuZG9tYWluKSlwYXJlbnQuZXhpdCgpO1xuICAgIHdoaWxlKGhlYWQpe1xuICAgICAgZm4gICA9IGhlYWQuZm47XG4gICAgICBoZWFkID0gaGVhZC5uZXh0O1xuICAgICAgdHJ5IHtcbiAgICAgICAgZm4oKTtcbiAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIGlmKGhlYWQpbm90aWZ5KCk7XG4gICAgICAgIGVsc2UgbGFzdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH1cbiAgICB9IGxhc3QgPSB1bmRlZmluZWQ7XG4gICAgaWYocGFyZW50KXBhcmVudC5lbnRlcigpO1xuICB9O1xuXG4gIC8vIE5vZGUuanNcbiAgaWYoaXNOb2RlKXtcbiAgICBub3RpZnkgPSBmdW5jdGlvbigpe1xuICAgICAgcHJvY2Vzcy5uZXh0VGljayhmbHVzaCk7XG4gICAgfTtcbiAgLy8gYnJvd3NlcnMgd2l0aCBNdXRhdGlvbk9ic2VydmVyXG4gIH0gZWxzZSBpZihPYnNlcnZlcil7XG4gICAgdmFyIHRvZ2dsZSA9IHRydWVcbiAgICAgICwgbm9kZSAgID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpO1xuICAgIG5ldyBPYnNlcnZlcihmbHVzaCkub2JzZXJ2ZShub2RlLCB7Y2hhcmFjdGVyRGF0YTogdHJ1ZX0pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ld1xuICAgIG5vdGlmeSA9IGZ1bmN0aW9uKCl7XG4gICAgICBub2RlLmRhdGEgPSB0b2dnbGUgPSAhdG9nZ2xlO1xuICAgIH07XG4gIC8vIGVudmlyb25tZW50cyB3aXRoIG1heWJlIG5vbi1jb21wbGV0ZWx5IGNvcnJlY3QsIGJ1dCBleGlzdGVudCBQcm9taXNlXG4gIH0gZWxzZSBpZihQcm9taXNlICYmIFByb21pc2UucmVzb2x2ZSl7XG4gICAgdmFyIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICBub3RpZnkgPSBmdW5jdGlvbigpe1xuICAgICAgcHJvbWlzZS50aGVuKGZsdXNoKTtcbiAgICB9O1xuICAvLyBmb3Igb3RoZXIgZW52aXJvbm1lbnRzIC0gbWFjcm90YXNrIGJhc2VkIG9uOlxuICAvLyAtIHNldEltbWVkaWF0ZVxuICAvLyAtIE1lc3NhZ2VDaGFubmVsXG4gIC8vIC0gd2luZG93LnBvc3RNZXNzYWdcbiAgLy8gLSBvbnJlYWR5c3RhdGVjaGFuZ2VcbiAgLy8gLSBzZXRUaW1lb3V0XG4gIH0gZWxzZSB7XG4gICAgbm90aWZ5ID0gZnVuY3Rpb24oKXtcbiAgICAgIC8vIHN0cmFuZ2UgSUUgKyB3ZWJwYWNrIGRldiBzZXJ2ZXIgYnVnIC0gdXNlIC5jYWxsKGdsb2JhbClcbiAgICAgIG1hY3JvdGFzay5jYWxsKGdsb2JhbCwgZmx1c2gpO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24oZm4pe1xuICAgIHZhciB0YXNrID0ge2ZuOiBmbiwgbmV4dDogdW5kZWZpbmVkfTtcbiAgICBpZihsYXN0KWxhc3QubmV4dCA9IHRhc2s7XG4gICAgaWYoIWhlYWQpe1xuICAgICAgaGVhZCA9IHRhc2s7XG4gICAgICBub3RpZnkoKTtcbiAgICB9IGxhc3QgPSB0YXNrO1xuICB9O1xufTsiLCIvLyAxOS4xLjIuMiAvIDE1LjIuMy41IE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSlcbnZhciBhbk9iamVjdCAgICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpXG4gICwgZFBzICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZHBzJylcbiAgLCBlbnVtQnVnS2V5cyA9IHJlcXVpcmUoJy4vX2VudW0tYnVnLWtleXMnKVxuICAsIElFX1BST1RPICAgID0gcmVxdWlyZSgnLi9fc2hhcmVkLWtleScpKCdJRV9QUk9UTycpXG4gICwgRW1wdHkgICAgICAgPSBmdW5jdGlvbigpeyAvKiBlbXB0eSAqLyB9XG4gICwgUFJPVE9UWVBFICAgPSAncHJvdG90eXBlJztcblxuLy8gQ3JlYXRlIG9iamVjdCB3aXRoIGZha2UgYG51bGxgIHByb3RvdHlwZTogdXNlIGlmcmFtZSBPYmplY3Qgd2l0aCBjbGVhcmVkIHByb3RvdHlwZVxudmFyIGNyZWF0ZURpY3QgPSBmdW5jdGlvbigpe1xuICAvLyBUaHJhc2gsIHdhc3RlIGFuZCBzb2RvbXk6IElFIEdDIGJ1Z1xuICB2YXIgaWZyYW1lID0gcmVxdWlyZSgnLi9fZG9tLWNyZWF0ZScpKCdpZnJhbWUnKVxuICAgICwgaSAgICAgID0gZW51bUJ1Z0tleXMubGVuZ3RoXG4gICAgLCBsdCAgICAgPSAnPCdcbiAgICAsIGd0ICAgICA9ICc+J1xuICAgICwgaWZyYW1lRG9jdW1lbnQ7XG4gIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICByZXF1aXJlKCcuL19odG1sJykuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcbiAgaWZyYW1lLnNyYyA9ICdqYXZhc2NyaXB0Oic7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2NyaXB0LXVybFxuICAvLyBjcmVhdGVEaWN0ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuT2JqZWN0O1xuICAvLyBodG1sLnJlbW92ZUNoaWxkKGlmcmFtZSk7XG4gIGlmcmFtZURvY3VtZW50ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7XG4gIGlmcmFtZURvY3VtZW50Lm9wZW4oKTtcbiAgaWZyYW1lRG9jdW1lbnQud3JpdGUobHQgKyAnc2NyaXB0JyArIGd0ICsgJ2RvY3VtZW50LkY9T2JqZWN0JyArIGx0ICsgJy9zY3JpcHQnICsgZ3QpO1xuICBpZnJhbWVEb2N1bWVudC5jbG9zZSgpO1xuICBjcmVhdGVEaWN0ID0gaWZyYW1lRG9jdW1lbnQuRjtcbiAgd2hpbGUoaS0tKWRlbGV0ZSBjcmVhdGVEaWN0W1BST1RPVFlQRV1bZW51bUJ1Z0tleXNbaV1dO1xuICByZXR1cm4gY3JlYXRlRGljdCgpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBPYmplY3QuY3JlYXRlIHx8IGZ1bmN0aW9uIGNyZWF0ZShPLCBQcm9wZXJ0aWVzKXtcbiAgdmFyIHJlc3VsdDtcbiAgaWYoTyAhPT0gbnVsbCl7XG4gICAgRW1wdHlbUFJPVE9UWVBFXSA9IGFuT2JqZWN0KE8pO1xuICAgIHJlc3VsdCA9IG5ldyBFbXB0eTtcbiAgICBFbXB0eVtQUk9UT1RZUEVdID0gbnVsbDtcbiAgICAvLyBhZGQgXCJfX3Byb3RvX19cIiBmb3IgT2JqZWN0LmdldFByb3RvdHlwZU9mIHBvbHlmaWxsXG4gICAgcmVzdWx0W0lFX1BST1RPXSA9IE87XG4gIH0gZWxzZSByZXN1bHQgPSBjcmVhdGVEaWN0KCk7XG4gIHJldHVybiBQcm9wZXJ0aWVzID09PSB1bmRlZmluZWQgPyByZXN1bHQgOiBkUHMocmVzdWx0LCBQcm9wZXJ0aWVzKTtcbn07XG4iLCJ2YXIgYW5PYmplY3QgICAgICAgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKVxuICAsIElFOF9ET01fREVGSU5FID0gcmVxdWlyZSgnLi9faWU4LWRvbS1kZWZpbmUnKVxuICAsIHRvUHJpbWl0aXZlICAgID0gcmVxdWlyZSgnLi9fdG8tcHJpbWl0aXZlJylcbiAgLCBkUCAgICAgICAgICAgICA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcblxuZXhwb3J0cy5mID0gcmVxdWlyZSgnLi9fZGVzY3JpcHRvcnMnKSA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSA6IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpe1xuICBhbk9iamVjdChPKTtcbiAgUCA9IHRvUHJpbWl0aXZlKFAsIHRydWUpO1xuICBhbk9iamVjdChBdHRyaWJ1dGVzKTtcbiAgaWYoSUU4X0RPTV9ERUZJTkUpdHJ5IHtcbiAgICByZXR1cm4gZFAoTywgUCwgQXR0cmlidXRlcyk7XG4gIH0gY2F0Y2goZSl7IC8qIGVtcHR5ICovIH1cbiAgaWYoJ2dldCcgaW4gQXR0cmlidXRlcyB8fCAnc2V0JyBpbiBBdHRyaWJ1dGVzKXRocm93IFR5cGVFcnJvcignQWNjZXNzb3JzIG5vdCBzdXBwb3J0ZWQhJyk7XG4gIGlmKCd2YWx1ZScgaW4gQXR0cmlidXRlcylPW1BdID0gQXR0cmlidXRlcy52YWx1ZTtcbiAgcmV0dXJuIE87XG59OyIsInZhciBkUCAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpXG4gICwgYW5PYmplY3QgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKVxuICAsIGdldEtleXMgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWtleXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL19kZXNjcmlwdG9ycycpID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMgOiBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKE8sIFByb3BlcnRpZXMpe1xuICBhbk9iamVjdChPKTtcbiAgdmFyIGtleXMgICA9IGdldEtleXMoUHJvcGVydGllcylcbiAgICAsIGxlbmd0aCA9IGtleXMubGVuZ3RoXG4gICAgLCBpID0gMFxuICAgICwgUDtcbiAgd2hpbGUobGVuZ3RoID4gaSlkUC5mKE8sIFAgPSBrZXlzW2krK10sIFByb3BlcnRpZXNbUF0pO1xuICByZXR1cm4gTztcbn07IiwidmFyIHBJRSAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LXBpZScpXG4gICwgY3JlYXRlRGVzYyAgICAgPSByZXF1aXJlKCcuL19wcm9wZXJ0eS1kZXNjJylcbiAgLCB0b0lPYmplY3QgICAgICA9IHJlcXVpcmUoJy4vX3RvLWlvYmplY3QnKVxuICAsIHRvUHJpbWl0aXZlICAgID0gcmVxdWlyZSgnLi9fdG8tcHJpbWl0aXZlJylcbiAgLCBoYXMgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2hhcycpXG4gICwgSUU4X0RPTV9ERUZJTkUgPSByZXF1aXJlKCcuL19pZTgtZG9tLWRlZmluZScpXG4gICwgZ09QRCAgICAgICAgICAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuXG5leHBvcnRzLmYgPSByZXF1aXJlKCcuL19kZXNjcmlwdG9ycycpID8gZ09QRCA6IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKXtcbiAgTyA9IHRvSU9iamVjdChPKTtcbiAgUCA9IHRvUHJpbWl0aXZlKFAsIHRydWUpO1xuICBpZihJRThfRE9NX0RFRklORSl0cnkge1xuICAgIHJldHVybiBnT1BEKE8sIFApO1xuICB9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9XG4gIGlmKGhhcyhPLCBQKSlyZXR1cm4gY3JlYXRlRGVzYyghcElFLmYuY2FsbChPLCBQKSwgT1tQXSk7XG59OyIsIi8vIGZhbGxiYWNrIGZvciBJRTExIGJ1Z2d5IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIHdpdGggaWZyYW1lIGFuZCB3aW5kb3dcbnZhciB0b0lPYmplY3QgPSByZXF1aXJlKCcuL190by1pb2JqZWN0JylcbiAgLCBnT1BOICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZ29wbicpLmZcbiAgLCB0b1N0cmluZyAgPSB7fS50b1N0cmluZztcblxudmFyIHdpbmRvd05hbWVzID0gdHlwZW9mIHdpbmRvdyA9PSAnb2JqZWN0JyAmJiB3aW5kb3cgJiYgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXNcbiAgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh3aW5kb3cpIDogW107XG5cbnZhciBnZXRXaW5kb3dOYW1lcyA9IGZ1bmN0aW9uKGl0KXtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZ09QTihpdCk7XG4gIH0gY2F0Y2goZSl7XG4gICAgcmV0dXJuIHdpbmRvd05hbWVzLnNsaWNlKCk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzLmYgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKGl0KXtcbiAgcmV0dXJuIHdpbmRvd05hbWVzICYmIHRvU3RyaW5nLmNhbGwoaXQpID09ICdbb2JqZWN0IFdpbmRvd10nID8gZ2V0V2luZG93TmFtZXMoaXQpIDogZ09QTih0b0lPYmplY3QoaXQpKTtcbn07XG4iLCIvLyAxOS4xLjIuNyAvIDE1LjIuMy40IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE8pXG52YXIgJGtleXMgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1rZXlzLWludGVybmFsJylcbiAgLCBoaWRkZW5LZXlzID0gcmVxdWlyZSgnLi9fZW51bS1idWcta2V5cycpLmNvbmNhdCgnbGVuZ3RoJywgJ3Byb3RvdHlwZScpO1xuXG5leHBvcnRzLmYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB8fCBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKE8pe1xuICByZXR1cm4gJGtleXMoTywgaGlkZGVuS2V5cyk7XG59OyIsImV4cG9ydHMuZiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7IiwiLy8gMTkuMS4yLjkgLyAxNS4yLjMuMiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTylcbnZhciBoYXMgICAgICAgICA9IHJlcXVpcmUoJy4vX2hhcycpXG4gICwgdG9PYmplY3QgICAgPSByZXF1aXJlKCcuL190by1vYmplY3QnKVxuICAsIElFX1BST1RPICAgID0gcmVxdWlyZSgnLi9fc2hhcmVkLWtleScpKCdJRV9QUk9UTycpXG4gICwgT2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbihPKXtcbiAgTyA9IHRvT2JqZWN0KE8pO1xuICBpZihoYXMoTywgSUVfUFJPVE8pKXJldHVybiBPW0lFX1BST1RPXTtcbiAgaWYodHlwZW9mIE8uY29uc3RydWN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBPIGluc3RhbmNlb2YgTy5jb25zdHJ1Y3Rvcil7XG4gICAgcmV0dXJuIE8uY29uc3RydWN0b3IucHJvdG90eXBlO1xuICB9IHJldHVybiBPIGluc3RhbmNlb2YgT2JqZWN0ID8gT2JqZWN0UHJvdG8gOiBudWxsO1xufTsiLCJ2YXIgaGFzICAgICAgICAgID0gcmVxdWlyZSgnLi9faGFzJylcbiAgLCB0b0lPYmplY3QgICAgPSByZXF1aXJlKCcuL190by1pb2JqZWN0JylcbiAgLCBhcnJheUluZGV4T2YgPSByZXF1aXJlKCcuL19hcnJheS1pbmNsdWRlcycpKGZhbHNlKVxuICAsIElFX1BST1RPICAgICA9IHJlcXVpcmUoJy4vX3NoYXJlZC1rZXknKSgnSUVfUFJPVE8nKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmplY3QsIG5hbWVzKXtcbiAgdmFyIE8gICAgICA9IHRvSU9iamVjdChvYmplY3QpXG4gICAgLCBpICAgICAgPSAwXG4gICAgLCByZXN1bHQgPSBbXVxuICAgICwga2V5O1xuICBmb3Ioa2V5IGluIE8paWYoa2V5ICE9IElFX1BST1RPKWhhcyhPLCBrZXkpICYmIHJlc3VsdC5wdXNoKGtleSk7XG4gIC8vIERvbid0IGVudW0gYnVnICYgaGlkZGVuIGtleXNcbiAgd2hpbGUobmFtZXMubGVuZ3RoID4gaSlpZihoYXMoTywga2V5ID0gbmFtZXNbaSsrXSkpe1xuICAgIH5hcnJheUluZGV4T2YocmVzdWx0LCBrZXkpIHx8IHJlc3VsdC5wdXNoKGtleSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn07IiwiLy8gMTkuMS4yLjE0IC8gMTUuMi4zLjE0IE9iamVjdC5rZXlzKE8pXG52YXIgJGtleXMgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3Qta2V5cy1pbnRlcm5hbCcpXG4gICwgZW51bUJ1Z0tleXMgPSByZXF1aXJlKCcuL19lbnVtLWJ1Zy1rZXlzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24ga2V5cyhPKXtcbiAgcmV0dXJuICRrZXlzKE8sIGVudW1CdWdLZXlzKTtcbn07IiwiZXhwb3J0cy5mID0ge30ucHJvcGVydHlJc0VudW1lcmFibGU7IiwiLy8gbW9zdCBPYmplY3QgbWV0aG9kcyBieSBFUzYgc2hvdWxkIGFjY2VwdCBwcmltaXRpdmVzXG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgY29yZSAgICA9IHJlcXVpcmUoJy4vX2NvcmUnKVxuICAsIGZhaWxzICAgPSByZXF1aXJlKCcuL19mYWlscycpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihLRVksIGV4ZWMpe1xuICB2YXIgZm4gID0gKGNvcmUuT2JqZWN0IHx8IHt9KVtLRVldIHx8IE9iamVjdFtLRVldXG4gICAgLCBleHAgPSB7fTtcbiAgZXhwW0tFWV0gPSBleGVjKGZuKTtcbiAgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiBmYWlscyhmdW5jdGlvbigpeyBmbigxKTsgfSksICdPYmplY3QnLCBleHApO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGJpdG1hcCwgdmFsdWUpe1xuICByZXR1cm4ge1xuICAgIGVudW1lcmFibGUgIDogIShiaXRtYXAgJiAxKSxcbiAgICBjb25maWd1cmFibGU6ICEoYml0bWFwICYgMiksXG4gICAgd3JpdGFibGUgICAgOiAhKGJpdG1hcCAmIDQpLFxuICAgIHZhbHVlICAgICAgIDogdmFsdWVcbiAgfTtcbn07IiwidmFyIGhpZGUgPSByZXF1aXJlKCcuL19oaWRlJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRhcmdldCwgc3JjLCBzYWZlKXtcbiAgZm9yKHZhciBrZXkgaW4gc3JjKXtcbiAgICBpZihzYWZlICYmIHRhcmdldFtrZXldKXRhcmdldFtrZXldID0gc3JjW2tleV07XG4gICAgZWxzZSBoaWRlKHRhcmdldCwga2V5LCBzcmNba2V5XSk7XG4gIH0gcmV0dXJuIHRhcmdldDtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL19oaWRlJyk7IiwiLy8gV29ya3Mgd2l0aCBfX3Byb3RvX18gb25seS4gT2xkIHY4IGNhbid0IHdvcmsgd2l0aCBudWxsIHByb3RvIG9iamVjdHMuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9faXMtb2JqZWN0JylcbiAgLCBhbk9iamVjdCA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpO1xudmFyIGNoZWNrID0gZnVuY3Rpb24oTywgcHJvdG8pe1xuICBhbk9iamVjdChPKTtcbiAgaWYoIWlzT2JqZWN0KHByb3RvKSAmJiBwcm90byAhPT0gbnVsbCl0aHJvdyBUeXBlRXJyb3IocHJvdG8gKyBcIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSFcIik7XG59O1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHNldDogT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8ICgnX19wcm90b19fJyBpbiB7fSA/IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICBmdW5jdGlvbih0ZXN0LCBidWdneSwgc2V0KXtcbiAgICAgIHRyeSB7XG4gICAgICAgIHNldCA9IHJlcXVpcmUoJy4vX2N0eCcpKEZ1bmN0aW9uLmNhbGwsIHJlcXVpcmUoJy4vX29iamVjdC1nb3BkJykuZihPYmplY3QucHJvdG90eXBlLCAnX19wcm90b19fJykuc2V0LCAyKTtcbiAgICAgICAgc2V0KHRlc3QsIFtdKTtcbiAgICAgICAgYnVnZ3kgPSAhKHRlc3QgaW5zdGFuY2VvZiBBcnJheSk7XG4gICAgICB9IGNhdGNoKGUpeyBidWdneSA9IHRydWU7IH1cbiAgICAgIHJldHVybiBmdW5jdGlvbiBzZXRQcm90b3R5cGVPZihPLCBwcm90byl7XG4gICAgICAgIGNoZWNrKE8sIHByb3RvKTtcbiAgICAgICAgaWYoYnVnZ3kpTy5fX3Byb3RvX18gPSBwcm90bztcbiAgICAgICAgZWxzZSBzZXQoTywgcHJvdG8pO1xuICAgICAgICByZXR1cm4gTztcbiAgICAgIH07XG4gICAgfSh7fSwgZmFsc2UpIDogdW5kZWZpbmVkKSxcbiAgY2hlY2s6IGNoZWNrXG59OyIsIid1c2Ugc3RyaWN0JztcbnZhciBnbG9iYWwgICAgICA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpXG4gICwgY29yZSAgICAgICAgPSByZXF1aXJlKCcuL19jb3JlJylcbiAgLCBkUCAgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpXG4gICwgREVTQ1JJUFRPUlMgPSByZXF1aXJlKCcuL19kZXNjcmlwdG9ycycpXG4gICwgU1BFQ0lFUyAgICAgPSByZXF1aXJlKCcuL193a3MnKSgnc3BlY2llcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKEtFWSl7XG4gIHZhciBDID0gdHlwZW9mIGNvcmVbS0VZXSA9PSAnZnVuY3Rpb24nID8gY29yZVtLRVldIDogZ2xvYmFsW0tFWV07XG4gIGlmKERFU0NSSVBUT1JTICYmIEMgJiYgIUNbU1BFQ0lFU10pZFAuZihDLCBTUEVDSUVTLCB7XG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXM7IH1cbiAgfSk7XG59OyIsInZhciBkZWYgPSByZXF1aXJlKCcuL19vYmplY3QtZHAnKS5mXG4gICwgaGFzID0gcmVxdWlyZSgnLi9faGFzJylcbiAgLCBUQUcgPSByZXF1aXJlKCcuL193a3MnKSgndG9TdHJpbmdUYWcnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCwgdGFnLCBzdGF0KXtcbiAgaWYoaXQgJiYgIWhhcyhpdCA9IHN0YXQgPyBpdCA6IGl0LnByb3RvdHlwZSwgVEFHKSlkZWYoaXQsIFRBRywge2NvbmZpZ3VyYWJsZTogdHJ1ZSwgdmFsdWU6IHRhZ30pO1xufTsiLCJ2YXIgc2hhcmVkID0gcmVxdWlyZSgnLi9fc2hhcmVkJykoJ2tleXMnKVxuICAsIHVpZCAgICA9IHJlcXVpcmUoJy4vX3VpZCcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihrZXkpe1xuICByZXR1cm4gc2hhcmVkW2tleV0gfHwgKHNoYXJlZFtrZXldID0gdWlkKGtleSkpO1xufTsiLCJ2YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi9fZ2xvYmFsJylcbiAgLCBTSEFSRUQgPSAnX19jb3JlLWpzX3NoYXJlZF9fJ1xuICAsIHN0b3JlICA9IGdsb2JhbFtTSEFSRURdIHx8IChnbG9iYWxbU0hBUkVEXSA9IHt9KTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oa2V5KXtcbiAgcmV0dXJuIHN0b3JlW2tleV0gfHwgKHN0b3JlW2tleV0gPSB7fSk7XG59OyIsIi8vIDcuMy4yMCBTcGVjaWVzQ29uc3RydWN0b3IoTywgZGVmYXVsdENvbnN0cnVjdG9yKVxudmFyIGFuT2JqZWN0ICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpXG4gICwgYUZ1bmN0aW9uID0gcmVxdWlyZSgnLi9fYS1mdW5jdGlvbicpXG4gICwgU1BFQ0lFUyAgID0gcmVxdWlyZSgnLi9fd2tzJykoJ3NwZWNpZXMnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oTywgRCl7XG4gIHZhciBDID0gYW5PYmplY3QoTykuY29uc3RydWN0b3IsIFM7XG4gIHJldHVybiBDID09PSB1bmRlZmluZWQgfHwgKFMgPSBhbk9iamVjdChDKVtTUEVDSUVTXSkgPT0gdW5kZWZpbmVkID8gRCA6IGFGdW5jdGlvbihTKTtcbn07IiwidmFyIHRvSW50ZWdlciA9IHJlcXVpcmUoJy4vX3RvLWludGVnZXInKVxuICAsIGRlZmluZWQgICA9IHJlcXVpcmUoJy4vX2RlZmluZWQnKTtcbi8vIHRydWUgIC0+IFN0cmluZyNhdFxuLy8gZmFsc2UgLT4gU3RyaW5nI2NvZGVQb2ludEF0XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFRPX1NUUklORyl7XG4gIHJldHVybiBmdW5jdGlvbih0aGF0LCBwb3Mpe1xuICAgIHZhciBzID0gU3RyaW5nKGRlZmluZWQodGhhdCkpXG4gICAgICAsIGkgPSB0b0ludGVnZXIocG9zKVxuICAgICAgLCBsID0gcy5sZW5ndGhcbiAgICAgICwgYSwgYjtcbiAgICBpZihpIDwgMCB8fCBpID49IGwpcmV0dXJuIFRPX1NUUklORyA/ICcnIDogdW5kZWZpbmVkO1xuICAgIGEgPSBzLmNoYXJDb2RlQXQoaSk7XG4gICAgcmV0dXJuIGEgPCAweGQ4MDAgfHwgYSA+IDB4ZGJmZiB8fCBpICsgMSA9PT0gbCB8fCAoYiA9IHMuY2hhckNvZGVBdChpICsgMSkpIDwgMHhkYzAwIHx8IGIgPiAweGRmZmZcbiAgICAgID8gVE9fU1RSSU5HID8gcy5jaGFyQXQoaSkgOiBhXG4gICAgICA6IFRPX1NUUklORyA/IHMuc2xpY2UoaSwgaSArIDIpIDogKGEgLSAweGQ4MDAgPDwgMTApICsgKGIgLSAweGRjMDApICsgMHgxMDAwMDtcbiAgfTtcbn07IiwidmFyIGN0eCAgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2N0eCcpXG4gICwgaW52b2tlICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9faW52b2tlJylcbiAgLCBodG1sICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19odG1sJylcbiAgLCBjZWwgICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19kb20tY3JlYXRlJylcbiAgLCBnbG9iYWwgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19nbG9iYWwnKVxuICAsIHByb2Nlc3MgICAgICAgICAgICA9IGdsb2JhbC5wcm9jZXNzXG4gICwgc2V0VGFzayAgICAgICAgICAgID0gZ2xvYmFsLnNldEltbWVkaWF0ZVxuICAsIGNsZWFyVGFzayAgICAgICAgICA9IGdsb2JhbC5jbGVhckltbWVkaWF0ZVxuICAsIE1lc3NhZ2VDaGFubmVsICAgICA9IGdsb2JhbC5NZXNzYWdlQ2hhbm5lbFxuICAsIGNvdW50ZXIgICAgICAgICAgICA9IDBcbiAgLCBxdWV1ZSAgICAgICAgICAgICAgPSB7fVxuICAsIE9OUkVBRFlTVEFURUNIQU5HRSA9ICdvbnJlYWR5c3RhdGVjaGFuZ2UnXG4gICwgZGVmZXIsIGNoYW5uZWwsIHBvcnQ7XG52YXIgcnVuID0gZnVuY3Rpb24oKXtcbiAgdmFyIGlkID0gK3RoaXM7XG4gIGlmKHF1ZXVlLmhhc093blByb3BlcnR5KGlkKSl7XG4gICAgdmFyIGZuID0gcXVldWVbaWRdO1xuICAgIGRlbGV0ZSBxdWV1ZVtpZF07XG4gICAgZm4oKTtcbiAgfVxufTtcbnZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAgcnVuLmNhbGwoZXZlbnQuZGF0YSk7XG59O1xuLy8gTm9kZS5qcyAwLjkrICYgSUUxMCsgaGFzIHNldEltbWVkaWF0ZSwgb3RoZXJ3aXNlOlxuaWYoIXNldFRhc2sgfHwgIWNsZWFyVGFzayl7XG4gIHNldFRhc2sgPSBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoZm4pe1xuICAgIHZhciBhcmdzID0gW10sIGkgPSAxO1xuICAgIHdoaWxlKGFyZ3VtZW50cy5sZW5ndGggPiBpKWFyZ3MucHVzaChhcmd1bWVudHNbaSsrXSk7XG4gICAgcXVldWVbKytjb3VudGVyXSA9IGZ1bmN0aW9uKCl7XG4gICAgICBpbnZva2UodHlwZW9mIGZuID09ICdmdW5jdGlvbicgPyBmbiA6IEZ1bmN0aW9uKGZuKSwgYXJncyk7XG4gICAgfTtcbiAgICBkZWZlcihjb3VudGVyKTtcbiAgICByZXR1cm4gY291bnRlcjtcbiAgfTtcbiAgY2xlYXJUYXNrID0gZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaWQpe1xuICAgIGRlbGV0ZSBxdWV1ZVtpZF07XG4gIH07XG4gIC8vIE5vZGUuanMgMC44LVxuICBpZihyZXF1aXJlKCcuL19jb2YnKShwcm9jZXNzKSA9PSAncHJvY2Vzcycpe1xuICAgIGRlZmVyID0gZnVuY3Rpb24oaWQpe1xuICAgICAgcHJvY2Vzcy5uZXh0VGljayhjdHgocnVuLCBpZCwgMSkpO1xuICAgIH07XG4gIC8vIEJyb3dzZXJzIHdpdGggTWVzc2FnZUNoYW5uZWwsIGluY2x1ZGVzIFdlYldvcmtlcnNcbiAgfSBlbHNlIGlmKE1lc3NhZ2VDaGFubmVsKXtcbiAgICBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsO1xuICAgIHBvcnQgICAgPSBjaGFubmVsLnBvcnQyO1xuICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gbGlzdGVuZXI7XG4gICAgZGVmZXIgPSBjdHgocG9ydC5wb3N0TWVzc2FnZSwgcG9ydCwgMSk7XG4gIC8vIEJyb3dzZXJzIHdpdGggcG9zdE1lc3NhZ2UsIHNraXAgV2ViV29ya2Vyc1xuICAvLyBJRTggaGFzIHBvc3RNZXNzYWdlLCBidXQgaXQncyBzeW5jICYgdHlwZW9mIGl0cyBwb3N0TWVzc2FnZSBpcyAnb2JqZWN0J1xuICB9IGVsc2UgaWYoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIgJiYgdHlwZW9mIHBvc3RNZXNzYWdlID09ICdmdW5jdGlvbicgJiYgIWdsb2JhbC5pbXBvcnRTY3JpcHRzKXtcbiAgICBkZWZlciA9IGZ1bmN0aW9uKGlkKXtcbiAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShpZCArICcnLCAnKicpO1xuICAgIH07XG4gICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBsaXN0ZW5lciwgZmFsc2UpO1xuICAvLyBJRTgtXG4gIH0gZWxzZSBpZihPTlJFQURZU1RBVEVDSEFOR0UgaW4gY2VsKCdzY3JpcHQnKSl7XG4gICAgZGVmZXIgPSBmdW5jdGlvbihpZCl7XG4gICAgICBodG1sLmFwcGVuZENoaWxkKGNlbCgnc2NyaXB0JykpW09OUkVBRFlTVEFURUNIQU5HRV0gPSBmdW5jdGlvbigpe1xuICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHRoaXMpO1xuICAgICAgICBydW4uY2FsbChpZCk7XG4gICAgICB9O1xuICAgIH07XG4gIC8vIFJlc3Qgb2xkIGJyb3dzZXJzXG4gIH0gZWxzZSB7XG4gICAgZGVmZXIgPSBmdW5jdGlvbihpZCl7XG4gICAgICBzZXRUaW1lb3V0KGN0eChydW4sIGlkLCAxKSwgMCk7XG4gICAgfTtcbiAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHNldDogICBzZXRUYXNrLFxuICBjbGVhcjogY2xlYXJUYXNrXG59OyIsInZhciB0b0ludGVnZXIgPSByZXF1aXJlKCcuL190by1pbnRlZ2VyJylcbiAgLCBtYXggICAgICAgPSBNYXRoLm1heFxuICAsIG1pbiAgICAgICA9IE1hdGgubWluO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpbmRleCwgbGVuZ3RoKXtcbiAgaW5kZXggPSB0b0ludGVnZXIoaW5kZXgpO1xuICByZXR1cm4gaW5kZXggPCAwID8gbWF4KGluZGV4ICsgbGVuZ3RoLCAwKSA6IG1pbihpbmRleCwgbGVuZ3RoKTtcbn07IiwiLy8gNy4xLjQgVG9JbnRlZ2VyXG52YXIgY2VpbCAgPSBNYXRoLmNlaWxcbiAgLCBmbG9vciA9IE1hdGguZmxvb3I7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIGlzTmFOKGl0ID0gK2l0KSA/IDAgOiAoaXQgPiAwID8gZmxvb3IgOiBjZWlsKShpdCk7XG59OyIsIi8vIHRvIGluZGV4ZWQgb2JqZWN0LCB0b09iamVjdCB3aXRoIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgc3RyaW5nc1xudmFyIElPYmplY3QgPSByZXF1aXJlKCcuL19pb2JqZWN0JylcbiAgLCBkZWZpbmVkID0gcmVxdWlyZSgnLi9fZGVmaW5lZCcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIHJldHVybiBJT2JqZWN0KGRlZmluZWQoaXQpKTtcbn07IiwiLy8gNy4xLjE1IFRvTGVuZ3RoXG52YXIgdG9JbnRlZ2VyID0gcmVxdWlyZSgnLi9fdG8taW50ZWdlcicpXG4gICwgbWluICAgICAgID0gTWF0aC5taW47XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIGl0ID4gMCA/IG1pbih0b0ludGVnZXIoaXQpLCAweDFmZmZmZmZmZmZmZmZmKSA6IDA7IC8vIHBvdygyLCA1MykgLSAxID09IDkwMDcxOTkyNTQ3NDA5OTFcbn07IiwiLy8gNy4xLjEzIFRvT2JqZWN0KGFyZ3VtZW50KVxudmFyIGRlZmluZWQgPSByZXF1aXJlKCcuL19kZWZpbmVkJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIE9iamVjdChkZWZpbmVkKGl0KSk7XG59OyIsIi8vIDcuMS4xIFRvUHJpbWl0aXZlKGlucHV0IFssIFByZWZlcnJlZFR5cGVdKVxudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9faXMtb2JqZWN0Jyk7XG4vLyBpbnN0ZWFkIG9mIHRoZSBFUzYgc3BlYyB2ZXJzaW9uLCB3ZSBkaWRuJ3QgaW1wbGVtZW50IEBAdG9QcmltaXRpdmUgY2FzZVxuLy8gYW5kIHRoZSBzZWNvbmQgYXJndW1lbnQgLSBmbGFnIC0gcHJlZmVycmVkIHR5cGUgaXMgYSBzdHJpbmdcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQsIFMpe1xuICBpZighaXNPYmplY3QoaXQpKXJldHVybiBpdDtcbiAgdmFyIGZuLCB2YWw7XG4gIGlmKFMgJiYgdHlwZW9mIChmbiA9IGl0LnRvU3RyaW5nKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpcmV0dXJuIHZhbDtcbiAgaWYodHlwZW9mIChmbiA9IGl0LnZhbHVlT2YpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsO1xuICBpZighUyAmJiB0eXBlb2YgKGZuID0gaXQudG9TdHJpbmcpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsO1xuICB0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWVcIik7XG59OyIsInZhciBpZCA9IDBcbiAgLCBweCA9IE1hdGgucmFuZG9tKCk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGtleSl7XG4gIHJldHVybiAnU3ltYm9sKCcuY29uY2F0KGtleSA9PT0gdW5kZWZpbmVkID8gJycgOiBrZXksICcpXycsICgrK2lkICsgcHgpLnRvU3RyaW5nKDM2KSk7XG59OyIsInZhciBnbG9iYWwgICAgICAgICA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpXG4gICwgY29yZSAgICAgICAgICAgPSByZXF1aXJlKCcuL19jb3JlJylcbiAgLCBMSUJSQVJZICAgICAgICA9IHJlcXVpcmUoJy4vX2xpYnJhcnknKVxuICAsIHdrc0V4dCAgICAgICAgID0gcmVxdWlyZSgnLi9fd2tzLWV4dCcpXG4gICwgZGVmaW5lUHJvcGVydHkgPSByZXF1aXJlKCcuL19vYmplY3QtZHAnKS5mO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihuYW1lKXtcbiAgdmFyICRTeW1ib2wgPSBjb3JlLlN5bWJvbCB8fCAoY29yZS5TeW1ib2wgPSBMSUJSQVJZID8ge30gOiBnbG9iYWwuU3ltYm9sIHx8IHt9KTtcbiAgaWYobmFtZS5jaGFyQXQoMCkgIT0gJ18nICYmICEobmFtZSBpbiAkU3ltYm9sKSlkZWZpbmVQcm9wZXJ0eSgkU3ltYm9sLCBuYW1lLCB7dmFsdWU6IHdrc0V4dC5mKG5hbWUpfSk7XG59OyIsImV4cG9ydHMuZiA9IHJlcXVpcmUoJy4vX3drcycpOyIsInZhciBzdG9yZSAgICAgID0gcmVxdWlyZSgnLi9fc2hhcmVkJykoJ3drcycpXG4gICwgdWlkICAgICAgICA9IHJlcXVpcmUoJy4vX3VpZCcpXG4gICwgU3ltYm9sICAgICA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpLlN5bWJvbFxuICAsIFVTRV9TWU1CT0wgPSB0eXBlb2YgU3ltYm9sID09ICdmdW5jdGlvbic7XG5cbnZhciAkZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obmFtZSl7XG4gIHJldHVybiBzdG9yZVtuYW1lXSB8fCAoc3RvcmVbbmFtZV0gPVxuICAgIFVTRV9TWU1CT0wgJiYgU3ltYm9sW25hbWVdIHx8IChVU0VfU1lNQk9MID8gU3ltYm9sIDogdWlkKSgnU3ltYm9sLicgKyBuYW1lKSk7XG59O1xuXG4kZXhwb3J0cy5zdG9yZSA9IHN0b3JlOyIsInZhciBjbGFzc29mICAgPSByZXF1aXJlKCcuL19jbGFzc29mJylcbiAgLCBJVEVSQVRPUiAgPSByZXF1aXJlKCcuL193a3MnKSgnaXRlcmF0b3InKVxuICAsIEl0ZXJhdG9ycyA9IHJlcXVpcmUoJy4vX2l0ZXJhdG9ycycpO1xubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL19jb3JlJykuZ2V0SXRlcmF0b3JNZXRob2QgPSBmdW5jdGlvbihpdCl7XG4gIGlmKGl0ICE9IHVuZGVmaW5lZClyZXR1cm4gaXRbSVRFUkFUT1JdXG4gICAgfHwgaXRbJ0BAaXRlcmF0b3InXVxuICAgIHx8IEl0ZXJhdG9yc1tjbGFzc29mKGl0KV07XG59OyIsIid1c2Ugc3RyaWN0JztcbnZhciBhZGRUb1Vuc2NvcGFibGVzID0gcmVxdWlyZSgnLi9fYWRkLXRvLXVuc2NvcGFibGVzJylcbiAgLCBzdGVwICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9faXRlci1zdGVwJylcbiAgLCBJdGVyYXRvcnMgICAgICAgID0gcmVxdWlyZSgnLi9faXRlcmF0b3JzJylcbiAgLCB0b0lPYmplY3QgICAgICAgID0gcmVxdWlyZSgnLi9fdG8taW9iamVjdCcpO1xuXG4vLyAyMi4xLjMuNCBBcnJheS5wcm90b3R5cGUuZW50cmllcygpXG4vLyAyMi4xLjMuMTMgQXJyYXkucHJvdG90eXBlLmtleXMoKVxuLy8gMjIuMS4zLjI5IEFycmF5LnByb3RvdHlwZS52YWx1ZXMoKVxuLy8gMjIuMS4zLjMwIEFycmF5LnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vX2l0ZXItZGVmaW5lJykoQXJyYXksICdBcnJheScsIGZ1bmN0aW9uKGl0ZXJhdGVkLCBraW5kKXtcbiAgdGhpcy5fdCA9IHRvSU9iamVjdChpdGVyYXRlZCk7IC8vIHRhcmdldFxuICB0aGlzLl9pID0gMDsgICAgICAgICAgICAgICAgICAgLy8gbmV4dCBpbmRleFxuICB0aGlzLl9rID0ga2luZDsgICAgICAgICAgICAgICAgLy8ga2luZFxuLy8gMjIuMS41LjIuMSAlQXJyYXlJdGVyYXRvclByb3RvdHlwZSUubmV4dCgpXG59LCBmdW5jdGlvbigpe1xuICB2YXIgTyAgICAgPSB0aGlzLl90XG4gICAgLCBraW5kICA9IHRoaXMuX2tcbiAgICAsIGluZGV4ID0gdGhpcy5faSsrO1xuICBpZighTyB8fCBpbmRleCA+PSBPLmxlbmd0aCl7XG4gICAgdGhpcy5fdCA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gc3RlcCgxKTtcbiAgfVxuICBpZihraW5kID09ICdrZXlzJyAgKXJldHVybiBzdGVwKDAsIGluZGV4KTtcbiAgaWYoa2luZCA9PSAndmFsdWVzJylyZXR1cm4gc3RlcCgwLCBPW2luZGV4XSk7XG4gIHJldHVybiBzdGVwKDAsIFtpbmRleCwgT1tpbmRleF1dKTtcbn0sICd2YWx1ZXMnKTtcblxuLy8gYXJndW1lbnRzTGlzdFtAQGl0ZXJhdG9yXSBpcyAlQXJyYXlQcm90b192YWx1ZXMlICg5LjQuNC42LCA5LjQuNC43KVxuSXRlcmF0b3JzLkFyZ3VtZW50cyA9IEl0ZXJhdG9ycy5BcnJheTtcblxuYWRkVG9VbnNjb3BhYmxlcygna2V5cycpO1xuYWRkVG9VbnNjb3BhYmxlcygndmFsdWVzJyk7XG5hZGRUb1Vuc2NvcGFibGVzKCdlbnRyaWVzJyk7IiwidmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuLy8gMTkuMS4yLjIgLyAxNS4yLjMuNSBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pXG4kZXhwb3J0KCRleHBvcnQuUywgJ09iamVjdCcsIHtjcmVhdGU6IHJlcXVpcmUoJy4vX29iamVjdC1jcmVhdGUnKX0pOyIsInZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7XG4vLyAxOS4xLjIuNCAvIDE1LjIuMy42IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKVxuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhcmVxdWlyZSgnLi9fZGVzY3JpcHRvcnMnKSwgJ09iamVjdCcsIHtkZWZpbmVQcm9wZXJ0eTogcmVxdWlyZSgnLi9fb2JqZWN0LWRwJykuZn0pOyIsIi8vIDE5LjEuMi42IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgUClcbnZhciB0b0lPYmplY3QgICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fdG8taW9iamVjdCcpXG4gICwgJGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IHJlcXVpcmUoJy4vX29iamVjdC1nb3BkJykuZjtcblxucmVxdWlyZSgnLi9fb2JqZWN0LXNhcCcpKCdnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3InLCBmdW5jdGlvbigpe1xuICByZXR1cm4gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGl0LCBrZXkpe1xuICAgIHJldHVybiAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRvSU9iamVjdChpdCksIGtleSk7XG4gIH07XG59KTsiLCIvLyAxOS4xLjIuOSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTylcbnZhciB0b09iamVjdCAgICAgICAgPSByZXF1aXJlKCcuL190by1vYmplY3QnKVxuICAsICRnZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoJy4vX29iamVjdC1ncG8nKTtcblxucmVxdWlyZSgnLi9fb2JqZWN0LXNhcCcpKCdnZXRQcm90b3R5cGVPZicsIGZ1bmN0aW9uKCl7XG4gIHJldHVybiBmdW5jdGlvbiBnZXRQcm90b3R5cGVPZihpdCl7XG4gICAgcmV0dXJuICRnZXRQcm90b3R5cGVPZih0b09iamVjdChpdCkpO1xuICB9O1xufSk7IiwiLy8gMTkuMS4yLjE0IE9iamVjdC5rZXlzKE8pXG52YXIgdG9PYmplY3QgPSByZXF1aXJlKCcuL190by1vYmplY3QnKVxuICAsICRrZXlzICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWtleXMnKTtcblxucmVxdWlyZSgnLi9fb2JqZWN0LXNhcCcpKCdrZXlzJywgZnVuY3Rpb24oKXtcbiAgcmV0dXJuIGZ1bmN0aW9uIGtleXMoaXQpe1xuICAgIHJldHVybiAka2V5cyh0b09iamVjdChpdCkpO1xuICB9O1xufSk7IiwiLy8gMTkuMS4zLjE5IE9iamVjdC5zZXRQcm90b3R5cGVPZihPLCBwcm90bylcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7XG4kZXhwb3J0KCRleHBvcnQuUywgJ09iamVjdCcsIHtzZXRQcm90b3R5cGVPZjogcmVxdWlyZSgnLi9fc2V0LXByb3RvJykuc2V0fSk7IiwiIiwiJ3VzZSBzdHJpY3QnO1xudmFyIExJQlJBUlkgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2xpYnJhcnknKVxuICAsIGdsb2JhbCAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpXG4gICwgY3R4ICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fY3R4JylcbiAgLCBjbGFzc29mICAgICAgICAgICAgPSByZXF1aXJlKCcuL19jbGFzc29mJylcbiAgLCAkZXhwb3J0ICAgICAgICAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsIGlzT2JqZWN0ICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpXG4gICwgYUZ1bmN0aW9uICAgICAgICAgID0gcmVxdWlyZSgnLi9fYS1mdW5jdGlvbicpXG4gICwgYW5JbnN0YW5jZSAgICAgICAgID0gcmVxdWlyZSgnLi9fYW4taW5zdGFuY2UnKVxuICAsIGZvck9mICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2Zvci1vZicpXG4gICwgc3BlY2llc0NvbnN0cnVjdG9yID0gcmVxdWlyZSgnLi9fc3BlY2llcy1jb25zdHJ1Y3RvcicpXG4gICwgdGFzayAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fdGFzaycpLnNldFxuICAsIG1pY3JvdGFzayAgICAgICAgICA9IHJlcXVpcmUoJy4vX21pY3JvdGFzaycpKClcbiAgLCBQUk9NSVNFICAgICAgICAgICAgPSAnUHJvbWlzZSdcbiAgLCBUeXBlRXJyb3IgICAgICAgICAgPSBnbG9iYWwuVHlwZUVycm9yXG4gICwgcHJvY2VzcyAgICAgICAgICAgID0gZ2xvYmFsLnByb2Nlc3NcbiAgLCAkUHJvbWlzZSAgICAgICAgICAgPSBnbG9iYWxbUFJPTUlTRV1cbiAgLCBwcm9jZXNzICAgICAgICAgICAgPSBnbG9iYWwucHJvY2Vzc1xuICAsIGlzTm9kZSAgICAgICAgICAgICA9IGNsYXNzb2YocHJvY2VzcykgPT0gJ3Byb2Nlc3MnXG4gICwgZW1wdHkgICAgICAgICAgICAgID0gZnVuY3Rpb24oKXsgLyogZW1wdHkgKi8gfVxuICAsIEludGVybmFsLCBHZW5lcmljUHJvbWlzZUNhcGFiaWxpdHksIFdyYXBwZXI7XG5cbnZhciBVU0VfTkFUSVZFID0gISFmdW5jdGlvbigpe1xuICB0cnkge1xuICAgIC8vIGNvcnJlY3Qgc3ViY2xhc3Npbmcgd2l0aCBAQHNwZWNpZXMgc3VwcG9ydFxuICAgIHZhciBwcm9taXNlICAgICA9ICRQcm9taXNlLnJlc29sdmUoMSlcbiAgICAgICwgRmFrZVByb21pc2UgPSAocHJvbWlzZS5jb25zdHJ1Y3RvciA9IHt9KVtyZXF1aXJlKCcuL193a3MnKSgnc3BlY2llcycpXSA9IGZ1bmN0aW9uKGV4ZWMpeyBleGVjKGVtcHR5LCBlbXB0eSk7IH07XG4gICAgLy8gdW5oYW5kbGVkIHJlamVjdGlvbnMgdHJhY2tpbmcgc3VwcG9ydCwgTm9kZUpTIFByb21pc2Ugd2l0aG91dCBpdCBmYWlscyBAQHNwZWNpZXMgdGVzdFxuICAgIHJldHVybiAoaXNOb2RlIHx8IHR5cGVvZiBQcm9taXNlUmVqZWN0aW9uRXZlbnQgPT0gJ2Z1bmN0aW9uJykgJiYgcHJvbWlzZS50aGVuKGVtcHR5KSBpbnN0YW5jZW9mIEZha2VQcm9taXNlO1xuICB9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9XG59KCk7XG5cbi8vIGhlbHBlcnNcbnZhciBzYW1lQ29uc3RydWN0b3IgPSBmdW5jdGlvbihhLCBiKXtcbiAgLy8gd2l0aCBsaWJyYXJ5IHdyYXBwZXIgc3BlY2lhbCBjYXNlXG4gIHJldHVybiBhID09PSBiIHx8IGEgPT09ICRQcm9taXNlICYmIGIgPT09IFdyYXBwZXI7XG59O1xudmFyIGlzVGhlbmFibGUgPSBmdW5jdGlvbihpdCl7XG4gIHZhciB0aGVuO1xuICByZXR1cm4gaXNPYmplY3QoaXQpICYmIHR5cGVvZiAodGhlbiA9IGl0LnRoZW4pID09ICdmdW5jdGlvbicgPyB0aGVuIDogZmFsc2U7XG59O1xudmFyIG5ld1Byb21pc2VDYXBhYmlsaXR5ID0gZnVuY3Rpb24oQyl7XG4gIHJldHVybiBzYW1lQ29uc3RydWN0b3IoJFByb21pc2UsIEMpXG4gICAgPyBuZXcgUHJvbWlzZUNhcGFiaWxpdHkoQylcbiAgICA6IG5ldyBHZW5lcmljUHJvbWlzZUNhcGFiaWxpdHkoQyk7XG59O1xudmFyIFByb21pc2VDYXBhYmlsaXR5ID0gR2VuZXJpY1Byb21pc2VDYXBhYmlsaXR5ID0gZnVuY3Rpb24oQyl7XG4gIHZhciByZXNvbHZlLCByZWplY3Q7XG4gIHRoaXMucHJvbWlzZSA9IG5ldyBDKGZ1bmN0aW9uKCQkcmVzb2x2ZSwgJCRyZWplY3Qpe1xuICAgIGlmKHJlc29sdmUgIT09IHVuZGVmaW5lZCB8fCByZWplY3QgIT09IHVuZGVmaW5lZCl0aHJvdyBUeXBlRXJyb3IoJ0JhZCBQcm9taXNlIGNvbnN0cnVjdG9yJyk7XG4gICAgcmVzb2x2ZSA9ICQkcmVzb2x2ZTtcbiAgICByZWplY3QgID0gJCRyZWplY3Q7XG4gIH0pO1xuICB0aGlzLnJlc29sdmUgPSBhRnVuY3Rpb24ocmVzb2x2ZSk7XG4gIHRoaXMucmVqZWN0ICA9IGFGdW5jdGlvbihyZWplY3QpO1xufTtcbnZhciBwZXJmb3JtID0gZnVuY3Rpb24oZXhlYyl7XG4gIHRyeSB7XG4gICAgZXhlYygpO1xuICB9IGNhdGNoKGUpe1xuICAgIHJldHVybiB7ZXJyb3I6IGV9O1xuICB9XG59O1xudmFyIG5vdGlmeSA9IGZ1bmN0aW9uKHByb21pc2UsIGlzUmVqZWN0KXtcbiAgaWYocHJvbWlzZS5fbilyZXR1cm47XG4gIHByb21pc2UuX24gPSB0cnVlO1xuICB2YXIgY2hhaW4gPSBwcm9taXNlLl9jO1xuICBtaWNyb3Rhc2soZnVuY3Rpb24oKXtcbiAgICB2YXIgdmFsdWUgPSBwcm9taXNlLl92XG4gICAgICAsIG9rICAgID0gcHJvbWlzZS5fcyA9PSAxXG4gICAgICAsIGkgICAgID0gMDtcbiAgICB2YXIgcnVuID0gZnVuY3Rpb24ocmVhY3Rpb24pe1xuICAgICAgdmFyIGhhbmRsZXIgPSBvayA/IHJlYWN0aW9uLm9rIDogcmVhY3Rpb24uZmFpbFxuICAgICAgICAsIHJlc29sdmUgPSByZWFjdGlvbi5yZXNvbHZlXG4gICAgICAgICwgcmVqZWN0ICA9IHJlYWN0aW9uLnJlamVjdFxuICAgICAgICAsIGRvbWFpbiAgPSByZWFjdGlvbi5kb21haW5cbiAgICAgICAgLCByZXN1bHQsIHRoZW47XG4gICAgICB0cnkge1xuICAgICAgICBpZihoYW5kbGVyKXtcbiAgICAgICAgICBpZighb2spe1xuICAgICAgICAgICAgaWYocHJvbWlzZS5faCA9PSAyKW9uSGFuZGxlVW5oYW5kbGVkKHByb21pc2UpO1xuICAgICAgICAgICAgcHJvbWlzZS5faCA9IDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKGhhbmRsZXIgPT09IHRydWUpcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZihkb21haW4pZG9tYWluLmVudGVyKCk7XG4gICAgICAgICAgICByZXN1bHQgPSBoYW5kbGVyKHZhbHVlKTtcbiAgICAgICAgICAgIGlmKGRvbWFpbilkb21haW4uZXhpdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZihyZXN1bHQgPT09IHJlYWN0aW9uLnByb21pc2Upe1xuICAgICAgICAgICAgcmVqZWN0KFR5cGVFcnJvcignUHJvbWlzZS1jaGFpbiBjeWNsZScpKTtcbiAgICAgICAgICB9IGVsc2UgaWYodGhlbiA9IGlzVGhlbmFibGUocmVzdWx0KSl7XG4gICAgICAgICAgICB0aGVuLmNhbGwocmVzdWx0LCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0gZWxzZSByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgIH0gZWxzZSByZWplY3QodmFsdWUpO1xuICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgd2hpbGUoY2hhaW4ubGVuZ3RoID4gaSlydW4oY2hhaW5baSsrXSk7IC8vIHZhcmlhYmxlIGxlbmd0aCAtIGNhbid0IHVzZSBmb3JFYWNoXG4gICAgcHJvbWlzZS5fYyA9IFtdO1xuICAgIHByb21pc2UuX24gPSBmYWxzZTtcbiAgICBpZihpc1JlamVjdCAmJiAhcHJvbWlzZS5faClvblVuaGFuZGxlZChwcm9taXNlKTtcbiAgfSk7XG59O1xudmFyIG9uVW5oYW5kbGVkID0gZnVuY3Rpb24ocHJvbWlzZSl7XG4gIHRhc2suY2FsbChnbG9iYWwsIGZ1bmN0aW9uKCl7XG4gICAgdmFyIHZhbHVlID0gcHJvbWlzZS5fdlxuICAgICAgLCBhYnJ1cHQsIGhhbmRsZXIsIGNvbnNvbGU7XG4gICAgaWYoaXNVbmhhbmRsZWQocHJvbWlzZSkpe1xuICAgICAgYWJydXB0ID0gcGVyZm9ybShmdW5jdGlvbigpe1xuICAgICAgICBpZihpc05vZGUpe1xuICAgICAgICAgIHByb2Nlc3MuZW1pdCgndW5oYW5kbGVkUmVqZWN0aW9uJywgdmFsdWUsIHByb21pc2UpO1xuICAgICAgICB9IGVsc2UgaWYoaGFuZGxlciA9IGdsb2JhbC5vbnVuaGFuZGxlZHJlamVjdGlvbil7XG4gICAgICAgICAgaGFuZGxlcih7cHJvbWlzZTogcHJvbWlzZSwgcmVhc29uOiB2YWx1ZX0pO1xuICAgICAgICB9IGVsc2UgaWYoKGNvbnNvbGUgPSBnbG9iYWwuY29uc29sZSkgJiYgY29uc29sZS5lcnJvcil7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uJywgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIC8vIEJyb3dzZXJzIHNob3VsZCBub3QgdHJpZ2dlciBgcmVqZWN0aW9uSGFuZGxlZGAgZXZlbnQgaWYgaXQgd2FzIGhhbmRsZWQgaGVyZSwgTm9kZUpTIC0gc2hvdWxkXG4gICAgICBwcm9taXNlLl9oID0gaXNOb2RlIHx8IGlzVW5oYW5kbGVkKHByb21pc2UpID8gMiA6IDE7XG4gICAgfSBwcm9taXNlLl9hID0gdW5kZWZpbmVkO1xuICAgIGlmKGFicnVwdCl0aHJvdyBhYnJ1cHQuZXJyb3I7XG4gIH0pO1xufTtcbnZhciBpc1VuaGFuZGxlZCA9IGZ1bmN0aW9uKHByb21pc2Upe1xuICBpZihwcm9taXNlLl9oID09IDEpcmV0dXJuIGZhbHNlO1xuICB2YXIgY2hhaW4gPSBwcm9taXNlLl9hIHx8IHByb21pc2UuX2NcbiAgICAsIGkgICAgID0gMFxuICAgICwgcmVhY3Rpb247XG4gIHdoaWxlKGNoYWluLmxlbmd0aCA+IGkpe1xuICAgIHJlYWN0aW9uID0gY2hhaW5baSsrXTtcbiAgICBpZihyZWFjdGlvbi5mYWlsIHx8ICFpc1VuaGFuZGxlZChyZWFjdGlvbi5wcm9taXNlKSlyZXR1cm4gZmFsc2U7XG4gIH0gcmV0dXJuIHRydWU7XG59O1xudmFyIG9uSGFuZGxlVW5oYW5kbGVkID0gZnVuY3Rpb24ocHJvbWlzZSl7XG4gIHRhc2suY2FsbChnbG9iYWwsIGZ1bmN0aW9uKCl7XG4gICAgdmFyIGhhbmRsZXI7XG4gICAgaWYoaXNOb2RlKXtcbiAgICAgIHByb2Nlc3MuZW1pdCgncmVqZWN0aW9uSGFuZGxlZCcsIHByb21pc2UpO1xuICAgIH0gZWxzZSBpZihoYW5kbGVyID0gZ2xvYmFsLm9ucmVqZWN0aW9uaGFuZGxlZCl7XG4gICAgICBoYW5kbGVyKHtwcm9taXNlOiBwcm9taXNlLCByZWFzb246IHByb21pc2UuX3Z9KTtcbiAgICB9XG4gIH0pO1xufTtcbnZhciAkcmVqZWN0ID0gZnVuY3Rpb24odmFsdWUpe1xuICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gIGlmKHByb21pc2UuX2QpcmV0dXJuO1xuICBwcm9taXNlLl9kID0gdHJ1ZTtcbiAgcHJvbWlzZSA9IHByb21pc2UuX3cgfHwgcHJvbWlzZTsgLy8gdW53cmFwXG4gIHByb21pc2UuX3YgPSB2YWx1ZTtcbiAgcHJvbWlzZS5fcyA9IDI7XG4gIGlmKCFwcm9taXNlLl9hKXByb21pc2UuX2EgPSBwcm9taXNlLl9jLnNsaWNlKCk7XG4gIG5vdGlmeShwcm9taXNlLCB0cnVlKTtcbn07XG52YXIgJHJlc29sdmUgPSBmdW5jdGlvbih2YWx1ZSl7XG4gIHZhciBwcm9taXNlID0gdGhpc1xuICAgICwgdGhlbjtcbiAgaWYocHJvbWlzZS5fZClyZXR1cm47XG4gIHByb21pc2UuX2QgPSB0cnVlO1xuICBwcm9taXNlID0gcHJvbWlzZS5fdyB8fCBwcm9taXNlOyAvLyB1bndyYXBcbiAgdHJ5IHtcbiAgICBpZihwcm9taXNlID09PSB2YWx1ZSl0aHJvdyBUeXBlRXJyb3IoXCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZlwiKTtcbiAgICBpZih0aGVuID0gaXNUaGVuYWJsZSh2YWx1ZSkpe1xuICAgICAgbWljcm90YXNrKGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciB3cmFwcGVyID0ge193OiBwcm9taXNlLCBfZDogZmFsc2V9OyAvLyB3cmFwXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhlbi5jYWxsKHZhbHVlLCBjdHgoJHJlc29sdmUsIHdyYXBwZXIsIDEpLCBjdHgoJHJlamVjdCwgd3JhcHBlciwgMSkpO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICRyZWplY3QuY2FsbCh3cmFwcGVyLCBlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb21pc2UuX3YgPSB2YWx1ZTtcbiAgICAgIHByb21pc2UuX3MgPSAxO1xuICAgICAgbm90aWZ5KHByb21pc2UsIGZhbHNlKTtcbiAgICB9XG4gIH0gY2F0Y2goZSl7XG4gICAgJHJlamVjdC5jYWxsKHtfdzogcHJvbWlzZSwgX2Q6IGZhbHNlfSwgZSk7IC8vIHdyYXBcbiAgfVxufTtcblxuLy8gY29uc3RydWN0b3IgcG9seWZpbGxcbmlmKCFVU0VfTkFUSVZFKXtcbiAgLy8gMjUuNC4zLjEgUHJvbWlzZShleGVjdXRvcilcbiAgJFByb21pc2UgPSBmdW5jdGlvbiBQcm9taXNlKGV4ZWN1dG9yKXtcbiAgICBhbkluc3RhbmNlKHRoaXMsICRQcm9taXNlLCBQUk9NSVNFLCAnX2gnKTtcbiAgICBhRnVuY3Rpb24oZXhlY3V0b3IpO1xuICAgIEludGVybmFsLmNhbGwodGhpcyk7XG4gICAgdHJ5IHtcbiAgICAgIGV4ZWN1dG9yKGN0eCgkcmVzb2x2ZSwgdGhpcywgMSksIGN0eCgkcmVqZWN0LCB0aGlzLCAxKSk7XG4gICAgfSBjYXRjaChlcnIpe1xuICAgICAgJHJlamVjdC5jYWxsKHRoaXMsIGVycik7XG4gICAgfVxuICB9O1xuICBJbnRlcm5hbCA9IGZ1bmN0aW9uIFByb21pc2UoZXhlY3V0b3Ipe1xuICAgIHRoaXMuX2MgPSBbXTsgICAgICAgICAgICAgLy8gPC0gYXdhaXRpbmcgcmVhY3Rpb25zXG4gICAgdGhpcy5fYSA9IHVuZGVmaW5lZDsgICAgICAvLyA8LSBjaGVja2VkIGluIGlzVW5oYW5kbGVkIHJlYWN0aW9uc1xuICAgIHRoaXMuX3MgPSAwOyAgICAgICAgICAgICAgLy8gPC0gc3RhdGVcbiAgICB0aGlzLl9kID0gZmFsc2U7ICAgICAgICAgIC8vIDwtIGRvbmVcbiAgICB0aGlzLl92ID0gdW5kZWZpbmVkOyAgICAgIC8vIDwtIHZhbHVlXG4gICAgdGhpcy5faCA9IDA7ICAgICAgICAgICAgICAvLyA8LSByZWplY3Rpb24gc3RhdGUsIDAgLSBkZWZhdWx0LCAxIC0gaGFuZGxlZCwgMiAtIHVuaGFuZGxlZFxuICAgIHRoaXMuX24gPSBmYWxzZTsgICAgICAgICAgLy8gPC0gbm90aWZ5XG4gIH07XG4gIEludGVybmFsLnByb3RvdHlwZSA9IHJlcXVpcmUoJy4vX3JlZGVmaW5lLWFsbCcpKCRQcm9taXNlLnByb3RvdHlwZSwge1xuICAgIC8vIDI1LjQuNS4zIFByb21pc2UucHJvdG90eXBlLnRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpXG4gICAgdGhlbjogZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCl7XG4gICAgICB2YXIgcmVhY3Rpb24gICAgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eShzcGVjaWVzQ29uc3RydWN0b3IodGhpcywgJFByb21pc2UpKTtcbiAgICAgIHJlYWN0aW9uLm9rICAgICA9IHR5cGVvZiBvbkZ1bGZpbGxlZCA9PSAnZnVuY3Rpb24nID8gb25GdWxmaWxsZWQgOiB0cnVlO1xuICAgICAgcmVhY3Rpb24uZmFpbCAgID0gdHlwZW9mIG9uUmVqZWN0ZWQgPT0gJ2Z1bmN0aW9uJyAmJiBvblJlamVjdGVkO1xuICAgICAgcmVhY3Rpb24uZG9tYWluID0gaXNOb2RlID8gcHJvY2Vzcy5kb21haW4gOiB1bmRlZmluZWQ7XG4gICAgICB0aGlzLl9jLnB1c2gocmVhY3Rpb24pO1xuICAgICAgaWYodGhpcy5fYSl0aGlzLl9hLnB1c2gocmVhY3Rpb24pO1xuICAgICAgaWYodGhpcy5fcylub3RpZnkodGhpcywgZmFsc2UpO1xuICAgICAgcmV0dXJuIHJlYWN0aW9uLnByb21pc2U7XG4gICAgfSxcbiAgICAvLyAyNS40LjUuMSBQcm9taXNlLnByb3RvdHlwZS5jYXRjaChvblJlamVjdGVkKVxuICAgICdjYXRjaCc6IGZ1bmN0aW9uKG9uUmVqZWN0ZWQpe1xuICAgICAgcmV0dXJuIHRoaXMudGhlbih1bmRlZmluZWQsIG9uUmVqZWN0ZWQpO1xuICAgIH1cbiAgfSk7XG4gIFByb21pc2VDYXBhYmlsaXR5ID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgcHJvbWlzZSAgPSBuZXcgSW50ZXJuYWw7XG4gICAgdGhpcy5wcm9taXNlID0gcHJvbWlzZTtcbiAgICB0aGlzLnJlc29sdmUgPSBjdHgoJHJlc29sdmUsIHByb21pc2UsIDEpO1xuICAgIHRoaXMucmVqZWN0ICA9IGN0eCgkcmVqZWN0LCBwcm9taXNlLCAxKTtcbiAgfTtcbn1cblxuJGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LlcgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwge1Byb21pc2U6ICRQcm9taXNlfSk7XG5yZXF1aXJlKCcuL19zZXQtdG8tc3RyaW5nLXRhZycpKCRQcm9taXNlLCBQUk9NSVNFKTtcbnJlcXVpcmUoJy4vX3NldC1zcGVjaWVzJykoUFJPTUlTRSk7XG5XcmFwcGVyID0gcmVxdWlyZSgnLi9fY29yZScpW1BST01JU0VdO1xuXG4vLyBzdGF0aWNzXG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCBQUk9NSVNFLCB7XG4gIC8vIDI1LjQuNC41IFByb21pc2UucmVqZWN0KHIpXG4gIHJlamVjdDogZnVuY3Rpb24gcmVqZWN0KHIpe1xuICAgIHZhciBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkodGhpcylcbiAgICAgICwgJCRyZWplY3QgICA9IGNhcGFiaWxpdHkucmVqZWN0O1xuICAgICQkcmVqZWN0KHIpO1xuICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7XG4gIH1cbn0pO1xuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAoTElCUkFSWSB8fCAhVVNFX05BVElWRSksIFBST01JU0UsIHtcbiAgLy8gMjUuNC40LjYgUHJvbWlzZS5yZXNvbHZlKHgpXG4gIHJlc29sdmU6IGZ1bmN0aW9uIHJlc29sdmUoeCl7XG4gICAgLy8gaW5zdGFuY2VvZiBpbnN0ZWFkIG9mIGludGVybmFsIHNsb3QgY2hlY2sgYmVjYXVzZSB3ZSBzaG91bGQgZml4IGl0IHdpdGhvdXQgcmVwbGFjZW1lbnQgbmF0aXZlIFByb21pc2UgY29yZVxuICAgIGlmKHggaW5zdGFuY2VvZiAkUHJvbWlzZSAmJiBzYW1lQ29uc3RydWN0b3IoeC5jb25zdHJ1Y3RvciwgdGhpcykpcmV0dXJuIHg7XG4gICAgdmFyIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eSh0aGlzKVxuICAgICAgLCAkJHJlc29sdmUgID0gY2FwYWJpbGl0eS5yZXNvbHZlO1xuICAgICQkcmVzb2x2ZSh4KTtcbiAgICByZXR1cm4gY2FwYWJpbGl0eS5wcm9taXNlO1xuICB9XG59KTtcbiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIShVU0VfTkFUSVZFICYmIHJlcXVpcmUoJy4vX2l0ZXItZGV0ZWN0JykoZnVuY3Rpb24oaXRlcil7XG4gICRQcm9taXNlLmFsbChpdGVyKVsnY2F0Y2gnXShlbXB0eSk7XG59KSksIFBST01JU0UsIHtcbiAgLy8gMjUuNC40LjEgUHJvbWlzZS5hbGwoaXRlcmFibGUpXG4gIGFsbDogZnVuY3Rpb24gYWxsKGl0ZXJhYmxlKXtcbiAgICB2YXIgQyAgICAgICAgICA9IHRoaXNcbiAgICAgICwgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KEMpXG4gICAgICAsIHJlc29sdmUgICAgPSBjYXBhYmlsaXR5LnJlc29sdmVcbiAgICAgICwgcmVqZWN0ICAgICA9IGNhcGFiaWxpdHkucmVqZWN0O1xuICAgIHZhciBhYnJ1cHQgPSBwZXJmb3JtKGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgdmFsdWVzICAgID0gW11cbiAgICAgICAgLCBpbmRleCAgICAgPSAwXG4gICAgICAgICwgcmVtYWluaW5nID0gMTtcbiAgICAgIGZvck9mKGl0ZXJhYmxlLCBmYWxzZSwgZnVuY3Rpb24ocHJvbWlzZSl7XG4gICAgICAgIHZhciAkaW5kZXggICAgICAgID0gaW5kZXgrK1xuICAgICAgICAgICwgYWxyZWFkeUNhbGxlZCA9IGZhbHNlO1xuICAgICAgICB2YWx1ZXMucHVzaCh1bmRlZmluZWQpO1xuICAgICAgICByZW1haW5pbmcrKztcbiAgICAgICAgQy5yZXNvbHZlKHByb21pc2UpLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICAgIGlmKGFscmVhZHlDYWxsZWQpcmV0dXJuO1xuICAgICAgICAgIGFscmVhZHlDYWxsZWQgID0gdHJ1ZTtcbiAgICAgICAgICB2YWx1ZXNbJGluZGV4XSA9IHZhbHVlO1xuICAgICAgICAgIC0tcmVtYWluaW5nIHx8IHJlc29sdmUodmFsdWVzKTtcbiAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgIH0pO1xuICAgICAgLS1yZW1haW5pbmcgfHwgcmVzb2x2ZSh2YWx1ZXMpO1xuICAgIH0pO1xuICAgIGlmKGFicnVwdClyZWplY3QoYWJydXB0LmVycm9yKTtcbiAgICByZXR1cm4gY2FwYWJpbGl0eS5wcm9taXNlO1xuICB9LFxuICAvLyAyNS40LjQuNCBQcm9taXNlLnJhY2UoaXRlcmFibGUpXG4gIHJhY2U6IGZ1bmN0aW9uIHJhY2UoaXRlcmFibGUpe1xuICAgIHZhciBDICAgICAgICAgID0gdGhpc1xuICAgICAgLCBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkoQylcbiAgICAgICwgcmVqZWN0ICAgICA9IGNhcGFiaWxpdHkucmVqZWN0O1xuICAgIHZhciBhYnJ1cHQgPSBwZXJmb3JtKGZ1bmN0aW9uKCl7XG4gICAgICBmb3JPZihpdGVyYWJsZSwgZmFsc2UsIGZ1bmN0aW9uKHByb21pc2Upe1xuICAgICAgICBDLnJlc29sdmUocHJvbWlzZSkudGhlbihjYXBhYmlsaXR5LnJlc29sdmUsIHJlamVjdCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBpZihhYnJ1cHQpcmVqZWN0KGFicnVwdC5lcnJvcik7XG4gICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxufSk7IiwiJ3VzZSBzdHJpY3QnO1xudmFyICRhdCAgPSByZXF1aXJlKCcuL19zdHJpbmctYXQnKSh0cnVlKTtcblxuLy8gMjEuMS4zLjI3IFN0cmluZy5wcm90b3R5cGVbQEBpdGVyYXRvcl0oKVxucmVxdWlyZSgnLi9faXRlci1kZWZpbmUnKShTdHJpbmcsICdTdHJpbmcnLCBmdW5jdGlvbihpdGVyYXRlZCl7XG4gIHRoaXMuX3QgPSBTdHJpbmcoaXRlcmF0ZWQpOyAvLyB0YXJnZXRcbiAgdGhpcy5faSA9IDA7ICAgICAgICAgICAgICAgIC8vIG5leHQgaW5kZXhcbi8vIDIxLjEuNS4yLjEgJVN0cmluZ0l0ZXJhdG9yUHJvdG90eXBlJS5uZXh0KClcbn0sIGZ1bmN0aW9uKCl7XG4gIHZhciBPICAgICA9IHRoaXMuX3RcbiAgICAsIGluZGV4ID0gdGhpcy5faVxuICAgICwgcG9pbnQ7XG4gIGlmKGluZGV4ID49IE8ubGVuZ3RoKXJldHVybiB7dmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZX07XG4gIHBvaW50ID0gJGF0KE8sIGluZGV4KTtcbiAgdGhpcy5faSArPSBwb2ludC5sZW5ndGg7XG4gIHJldHVybiB7dmFsdWU6IHBvaW50LCBkb25lOiBmYWxzZX07XG59KTsiLCIndXNlIHN0cmljdCc7XG4vLyBFQ01BU2NyaXB0IDYgc3ltYm9scyBzaGltXG52YXIgZ2xvYmFsICAgICAgICAgPSByZXF1aXJlKCcuL19nbG9iYWwnKVxuICAsIGhhcyAgICAgICAgICAgID0gcmVxdWlyZSgnLi9faGFzJylcbiAgLCBERVNDUklQVE9SUyAgICA9IHJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJylcbiAgLCAkZXhwb3J0ICAgICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgcmVkZWZpbmUgICAgICAgPSByZXF1aXJlKCcuL19yZWRlZmluZScpXG4gICwgTUVUQSAgICAgICAgICAgPSByZXF1aXJlKCcuL19tZXRhJykuS0VZXG4gICwgJGZhaWxzICAgICAgICAgPSByZXF1aXJlKCcuL19mYWlscycpXG4gICwgc2hhcmVkICAgICAgICAgPSByZXF1aXJlKCcuL19zaGFyZWQnKVxuICAsIHNldFRvU3RyaW5nVGFnID0gcmVxdWlyZSgnLi9fc2V0LXRvLXN0cmluZy10YWcnKVxuICAsIHVpZCAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fdWlkJylcbiAgLCB3a3MgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX3drcycpXG4gICwgd2tzRXh0ICAgICAgICAgPSByZXF1aXJlKCcuL193a3MtZXh0JylcbiAgLCB3a3NEZWZpbmUgICAgICA9IHJlcXVpcmUoJy4vX3drcy1kZWZpbmUnKVxuICAsIGtleU9mICAgICAgICAgID0gcmVxdWlyZSgnLi9fa2V5b2YnKVxuICAsIGVudW1LZXlzICAgICAgID0gcmVxdWlyZSgnLi9fZW51bS1rZXlzJylcbiAgLCBpc0FycmF5ICAgICAgICA9IHJlcXVpcmUoJy4vX2lzLWFycmF5JylcbiAgLCBhbk9iamVjdCAgICAgICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpXG4gICwgdG9JT2JqZWN0ICAgICAgPSByZXF1aXJlKCcuL190by1pb2JqZWN0JylcbiAgLCB0b1ByaW1pdGl2ZSAgICA9IHJlcXVpcmUoJy4vX3RvLXByaW1pdGl2ZScpXG4gICwgY3JlYXRlRGVzYyAgICAgPSByZXF1aXJlKCcuL19wcm9wZXJ0eS1kZXNjJylcbiAgLCBfY3JlYXRlICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1jcmVhdGUnKVxuICAsIGdPUE5FeHQgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdvcG4tZXh0JylcbiAgLCAkR09QRCAgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1nb3BkJylcbiAgLCAkRFAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpXG4gICwgJGtleXMgICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3Qta2V5cycpXG4gICwgZ09QRCAgICAgICAgICAgPSAkR09QRC5mXG4gICwgZFAgICAgICAgICAgICAgPSAkRFAuZlxuICAsIGdPUE4gICAgICAgICAgID0gZ09QTkV4dC5mXG4gICwgJFN5bWJvbCAgICAgICAgPSBnbG9iYWwuU3ltYm9sXG4gICwgJEpTT04gICAgICAgICAgPSBnbG9iYWwuSlNPTlxuICAsIF9zdHJpbmdpZnkgICAgID0gJEpTT04gJiYgJEpTT04uc3RyaW5naWZ5XG4gICwgUFJPVE9UWVBFICAgICAgPSAncHJvdG90eXBlJ1xuICAsIEhJRERFTiAgICAgICAgID0gd2tzKCdfaGlkZGVuJylcbiAgLCBUT19QUklNSVRJVkUgICA9IHdrcygndG9QcmltaXRpdmUnKVxuICAsIGlzRW51bSAgICAgICAgID0ge30ucHJvcGVydHlJc0VudW1lcmFibGVcbiAgLCBTeW1ib2xSZWdpc3RyeSA9IHNoYXJlZCgnc3ltYm9sLXJlZ2lzdHJ5JylcbiAgLCBBbGxTeW1ib2xzICAgICA9IHNoYXJlZCgnc3ltYm9scycpXG4gICwgT1BTeW1ib2xzICAgICAgPSBzaGFyZWQoJ29wLXN5bWJvbHMnKVxuICAsIE9iamVjdFByb3RvICAgID0gT2JqZWN0W1BST1RPVFlQRV1cbiAgLCBVU0VfTkFUSVZFICAgICA9IHR5cGVvZiAkU3ltYm9sID09ICdmdW5jdGlvbidcbiAgLCBRT2JqZWN0ICAgICAgICA9IGdsb2JhbC5RT2JqZWN0O1xuLy8gRG9uJ3QgdXNlIHNldHRlcnMgaW4gUXQgU2NyaXB0LCBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvMTczXG52YXIgc2V0dGVyID0gIVFPYmplY3QgfHwgIVFPYmplY3RbUFJPVE9UWVBFXSB8fCAhUU9iamVjdFtQUk9UT1RZUEVdLmZpbmRDaGlsZDtcblxuLy8gZmFsbGJhY2sgZm9yIG9sZCBBbmRyb2lkLCBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9Njg3XG52YXIgc2V0U3ltYm9sRGVzYyA9IERFU0NSSVBUT1JTICYmICRmYWlscyhmdW5jdGlvbigpe1xuICByZXR1cm4gX2NyZWF0ZShkUCh7fSwgJ2EnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpeyByZXR1cm4gZFAodGhpcywgJ2EnLCB7dmFsdWU6IDd9KS5hOyB9XG4gIH0pKS5hICE9IDc7XG59KSA/IGZ1bmN0aW9uKGl0LCBrZXksIEQpe1xuICB2YXIgcHJvdG9EZXNjID0gZ09QRChPYmplY3RQcm90bywga2V5KTtcbiAgaWYocHJvdG9EZXNjKWRlbGV0ZSBPYmplY3RQcm90b1trZXldO1xuICBkUChpdCwga2V5LCBEKTtcbiAgaWYocHJvdG9EZXNjICYmIGl0ICE9PSBPYmplY3RQcm90bylkUChPYmplY3RQcm90bywga2V5LCBwcm90b0Rlc2MpO1xufSA6IGRQO1xuXG52YXIgd3JhcCA9IGZ1bmN0aW9uKHRhZyl7XG4gIHZhciBzeW0gPSBBbGxTeW1ib2xzW3RhZ10gPSBfY3JlYXRlKCRTeW1ib2xbUFJPVE9UWVBFXSk7XG4gIHN5bS5fayA9IHRhZztcbiAgcmV0dXJuIHN5bTtcbn07XG5cbnZhciBpc1N5bWJvbCA9IFVTRV9OQVRJVkUgJiYgdHlwZW9mICRTeW1ib2wuaXRlcmF0b3IgPT0gJ3N5bWJvbCcgPyBmdW5jdGlvbihpdCl7XG4gIHJldHVybiB0eXBlb2YgaXQgPT0gJ3N5bWJvbCc7XG59IDogZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gaXQgaW5zdGFuY2VvZiAkU3ltYm9sO1xufTtcblxudmFyICRkZWZpbmVQcm9wZXJ0eSA9IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KGl0LCBrZXksIEQpe1xuICBpZihpdCA9PT0gT2JqZWN0UHJvdG8pJGRlZmluZVByb3BlcnR5KE9QU3ltYm9scywga2V5LCBEKTtcbiAgYW5PYmplY3QoaXQpO1xuICBrZXkgPSB0b1ByaW1pdGl2ZShrZXksIHRydWUpO1xuICBhbk9iamVjdChEKTtcbiAgaWYoaGFzKEFsbFN5bWJvbHMsIGtleSkpe1xuICAgIGlmKCFELmVudW1lcmFibGUpe1xuICAgICAgaWYoIWhhcyhpdCwgSElEREVOKSlkUChpdCwgSElEREVOLCBjcmVhdGVEZXNjKDEsIHt9KSk7XG4gICAgICBpdFtISURERU5dW2tleV0gPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZihoYXMoaXQsIEhJRERFTikgJiYgaXRbSElEREVOXVtrZXldKWl0W0hJRERFTl1ba2V5XSA9IGZhbHNlO1xuICAgICAgRCA9IF9jcmVhdGUoRCwge2VudW1lcmFibGU6IGNyZWF0ZURlc2MoMCwgZmFsc2UpfSk7XG4gICAgfSByZXR1cm4gc2V0U3ltYm9sRGVzYyhpdCwga2V5LCBEKTtcbiAgfSByZXR1cm4gZFAoaXQsIGtleSwgRCk7XG59O1xudmFyICRkZWZpbmVQcm9wZXJ0aWVzID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhpdCwgUCl7XG4gIGFuT2JqZWN0KGl0KTtcbiAgdmFyIGtleXMgPSBlbnVtS2V5cyhQID0gdG9JT2JqZWN0KFApKVxuICAgICwgaSAgICA9IDBcbiAgICAsIGwgPSBrZXlzLmxlbmd0aFxuICAgICwga2V5O1xuICB3aGlsZShsID4gaSkkZGVmaW5lUHJvcGVydHkoaXQsIGtleSA9IGtleXNbaSsrXSwgUFtrZXldKTtcbiAgcmV0dXJuIGl0O1xufTtcbnZhciAkY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGl0LCBQKXtcbiAgcmV0dXJuIFAgPT09IHVuZGVmaW5lZCA/IF9jcmVhdGUoaXQpIDogJGRlZmluZVByb3BlcnRpZXMoX2NyZWF0ZShpdCksIFApO1xufTtcbnZhciAkcHJvcGVydHlJc0VudW1lcmFibGUgPSBmdW5jdGlvbiBwcm9wZXJ0eUlzRW51bWVyYWJsZShrZXkpe1xuICB2YXIgRSA9IGlzRW51bS5jYWxsKHRoaXMsIGtleSA9IHRvUHJpbWl0aXZlKGtleSwgdHJ1ZSkpO1xuICBpZih0aGlzID09PSBPYmplY3RQcm90byAmJiBoYXMoQWxsU3ltYm9scywga2V5KSAmJiAhaGFzKE9QU3ltYm9scywga2V5KSlyZXR1cm4gZmFsc2U7XG4gIHJldHVybiBFIHx8ICFoYXModGhpcywga2V5KSB8fCAhaGFzKEFsbFN5bWJvbHMsIGtleSkgfHwgaGFzKHRoaXMsIEhJRERFTikgJiYgdGhpc1tISURERU5dW2tleV0gPyBFIDogdHJ1ZTtcbn07XG52YXIgJGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihpdCwga2V5KXtcbiAgaXQgID0gdG9JT2JqZWN0KGl0KTtcbiAga2V5ID0gdG9QcmltaXRpdmUoa2V5LCB0cnVlKTtcbiAgaWYoaXQgPT09IE9iamVjdFByb3RvICYmIGhhcyhBbGxTeW1ib2xzLCBrZXkpICYmICFoYXMoT1BTeW1ib2xzLCBrZXkpKXJldHVybjtcbiAgdmFyIEQgPSBnT1BEKGl0LCBrZXkpO1xuICBpZihEICYmIGhhcyhBbGxTeW1ib2xzLCBrZXkpICYmICEoaGFzKGl0LCBISURERU4pICYmIGl0W0hJRERFTl1ba2V5XSkpRC5lbnVtZXJhYmxlID0gdHJ1ZTtcbiAgcmV0dXJuIEQ7XG59O1xudmFyICRnZXRPd25Qcm9wZXJ0eU5hbWVzID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlOYW1lcyhpdCl7XG4gIHZhciBuYW1lcyAgPSBnT1BOKHRvSU9iamVjdChpdCkpXG4gICAgLCByZXN1bHQgPSBbXVxuICAgICwgaSAgICAgID0gMFxuICAgICwga2V5O1xuICB3aGlsZShuYW1lcy5sZW5ndGggPiBpKXtcbiAgICBpZighaGFzKEFsbFN5bWJvbHMsIGtleSA9IG5hbWVzW2krK10pICYmIGtleSAhPSBISURERU4gJiYga2V5ICE9IE1FVEEpcmVzdWx0LnB1c2goa2V5KTtcbiAgfSByZXR1cm4gcmVzdWx0O1xufTtcbnZhciAkZ2V0T3duUHJvcGVydHlTeW1ib2xzID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlTeW1ib2xzKGl0KXtcbiAgdmFyIElTX09QICA9IGl0ID09PSBPYmplY3RQcm90b1xuICAgICwgbmFtZXMgID0gZ09QTihJU19PUCA/IE9QU3ltYm9scyA6IHRvSU9iamVjdChpdCkpXG4gICAgLCByZXN1bHQgPSBbXVxuICAgICwgaSAgICAgID0gMFxuICAgICwga2V5O1xuICB3aGlsZShuYW1lcy5sZW5ndGggPiBpKXtcbiAgICBpZihoYXMoQWxsU3ltYm9scywga2V5ID0gbmFtZXNbaSsrXSkgJiYgKElTX09QID8gaGFzKE9iamVjdFByb3RvLCBrZXkpIDogdHJ1ZSkpcmVzdWx0LnB1c2goQWxsU3ltYm9sc1trZXldKTtcbiAgfSByZXR1cm4gcmVzdWx0O1xufTtcblxuLy8gMTkuNC4xLjEgU3ltYm9sKFtkZXNjcmlwdGlvbl0pXG5pZighVVNFX05BVElWRSl7XG4gICRTeW1ib2wgPSBmdW5jdGlvbiBTeW1ib2woKXtcbiAgICBpZih0aGlzIGluc3RhbmNlb2YgJFN5bWJvbCl0aHJvdyBUeXBlRXJyb3IoJ1N5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciEnKTtcbiAgICB2YXIgdGFnID0gdWlkKGFyZ3VtZW50cy5sZW5ndGggPiAwID8gYXJndW1lbnRzWzBdIDogdW5kZWZpbmVkKTtcbiAgICB2YXIgJHNldCA9IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgIGlmKHRoaXMgPT09IE9iamVjdFByb3RvKSRzZXQuY2FsbChPUFN5bWJvbHMsIHZhbHVlKTtcbiAgICAgIGlmKGhhcyh0aGlzLCBISURERU4pICYmIGhhcyh0aGlzW0hJRERFTl0sIHRhZykpdGhpc1tISURERU5dW3RhZ10gPSBmYWxzZTtcbiAgICAgIHNldFN5bWJvbERlc2ModGhpcywgdGFnLCBjcmVhdGVEZXNjKDEsIHZhbHVlKSk7XG4gICAgfTtcbiAgICBpZihERVNDUklQVE9SUyAmJiBzZXR0ZXIpc2V0U3ltYm9sRGVzYyhPYmplY3RQcm90bywgdGFnLCB7Y29uZmlndXJhYmxlOiB0cnVlLCBzZXQ6ICRzZXR9KTtcbiAgICByZXR1cm4gd3JhcCh0YWcpO1xuICB9O1xuICByZWRlZmluZSgkU3ltYm9sW1BST1RPVFlQRV0sICd0b1N0cmluZycsIGZ1bmN0aW9uIHRvU3RyaW5nKCl7XG4gICAgcmV0dXJuIHRoaXMuX2s7XG4gIH0pO1xuXG4gICRHT1BELmYgPSAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuICAkRFAuZiAgID0gJGRlZmluZVByb3BlcnR5O1xuICByZXF1aXJlKCcuL19vYmplY3QtZ29wbicpLmYgPSBnT1BORXh0LmYgPSAkZ2V0T3duUHJvcGVydHlOYW1lcztcbiAgcmVxdWlyZSgnLi9fb2JqZWN0LXBpZScpLmYgID0gJHByb3BlcnR5SXNFbnVtZXJhYmxlO1xuICByZXF1aXJlKCcuL19vYmplY3QtZ29wcycpLmYgPSAkZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xuXG4gIGlmKERFU0NSSVBUT1JTICYmICFyZXF1aXJlKCcuL19saWJyYXJ5Jykpe1xuICAgIHJlZGVmaW5lKE9iamVjdFByb3RvLCAncHJvcGVydHlJc0VudW1lcmFibGUnLCAkcHJvcGVydHlJc0VudW1lcmFibGUsIHRydWUpO1xuICB9XG5cbiAgd2tzRXh0LmYgPSBmdW5jdGlvbihuYW1lKXtcbiAgICByZXR1cm4gd3JhcCh3a3MobmFtZSkpO1xuICB9XG59XG5cbiRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5XICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsIHtTeW1ib2w6ICRTeW1ib2x9KTtcblxuZm9yKHZhciBzeW1ib2xzID0gKFxuICAvLyAxOS40LjIuMiwgMTkuNC4yLjMsIDE5LjQuMi40LCAxOS40LjIuNiwgMTkuNC4yLjgsIDE5LjQuMi45LCAxOS40LjIuMTAsIDE5LjQuMi4xMSwgMTkuNC4yLjEyLCAxOS40LjIuMTMsIDE5LjQuMi4xNFxuICAnaGFzSW5zdGFuY2UsaXNDb25jYXRTcHJlYWRhYmxlLGl0ZXJhdG9yLG1hdGNoLHJlcGxhY2Usc2VhcmNoLHNwZWNpZXMsc3BsaXQsdG9QcmltaXRpdmUsdG9TdHJpbmdUYWcsdW5zY29wYWJsZXMnXG4pLnNwbGl0KCcsJyksIGkgPSAwOyBzeW1ib2xzLmxlbmd0aCA+IGk7ICl3a3Moc3ltYm9sc1tpKytdKTtcblxuZm9yKHZhciBzeW1ib2xzID0gJGtleXMod2tzLnN0b3JlKSwgaSA9IDA7IHN5bWJvbHMubGVuZ3RoID4gaTsgKXdrc0RlZmluZShzeW1ib2xzW2krK10pO1xuXG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCAnU3ltYm9sJywge1xuICAvLyAxOS40LjIuMSBTeW1ib2wuZm9yKGtleSlcbiAgJ2Zvcic6IGZ1bmN0aW9uKGtleSl7XG4gICAgcmV0dXJuIGhhcyhTeW1ib2xSZWdpc3RyeSwga2V5ICs9ICcnKVxuICAgICAgPyBTeW1ib2xSZWdpc3RyeVtrZXldXG4gICAgICA6IFN5bWJvbFJlZ2lzdHJ5W2tleV0gPSAkU3ltYm9sKGtleSk7XG4gIH0sXG4gIC8vIDE5LjQuMi41IFN5bWJvbC5rZXlGb3Ioc3ltKVxuICBrZXlGb3I6IGZ1bmN0aW9uIGtleUZvcihrZXkpe1xuICAgIGlmKGlzU3ltYm9sKGtleSkpcmV0dXJuIGtleU9mKFN5bWJvbFJlZ2lzdHJ5LCBrZXkpO1xuICAgIHRocm93IFR5cGVFcnJvcihrZXkgKyAnIGlzIG5vdCBhIHN5bWJvbCEnKTtcbiAgfSxcbiAgdXNlU2V0dGVyOiBmdW5jdGlvbigpeyBzZXR0ZXIgPSB0cnVlOyB9LFxuICB1c2VTaW1wbGU6IGZ1bmN0aW9uKCl7IHNldHRlciA9IGZhbHNlOyB9XG59KTtcblxuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwgJ09iamVjdCcsIHtcbiAgLy8gMTkuMS4yLjIgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKVxuICBjcmVhdGU6ICRjcmVhdGUsXG4gIC8vIDE5LjEuMi40IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKVxuICBkZWZpbmVQcm9wZXJ0eTogJGRlZmluZVByb3BlcnR5LFxuICAvLyAxOS4xLjIuMyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhPLCBQcm9wZXJ0aWVzKVxuICBkZWZpbmVQcm9wZXJ0aWVzOiAkZGVmaW5lUHJvcGVydGllcyxcbiAgLy8gMTkuMS4yLjYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKVxuICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IsXG4gIC8vIDE5LjEuMi43IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE8pXG4gIGdldE93blByb3BlcnR5TmFtZXM6ICRnZXRPd25Qcm9wZXJ0eU5hbWVzLFxuICAvLyAxOS4xLjIuOCBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKE8pXG4gIGdldE93blByb3BlcnR5U3ltYm9sczogJGdldE93blByb3BlcnR5U3ltYm9sc1xufSk7XG5cbi8vIDI0LjMuMiBKU09OLnN0cmluZ2lmeSh2YWx1ZSBbLCByZXBsYWNlciBbLCBzcGFjZV1dKVxuJEpTT04gJiYgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAoIVVTRV9OQVRJVkUgfHwgJGZhaWxzKGZ1bmN0aW9uKCl7XG4gIHZhciBTID0gJFN5bWJvbCgpO1xuICAvLyBNUyBFZGdlIGNvbnZlcnRzIHN5bWJvbCB2YWx1ZXMgdG8gSlNPTiBhcyB7fVxuICAvLyBXZWJLaXQgY29udmVydHMgc3ltYm9sIHZhbHVlcyB0byBKU09OIGFzIG51bGxcbiAgLy8gVjggdGhyb3dzIG9uIGJveGVkIHN5bWJvbHNcbiAgcmV0dXJuIF9zdHJpbmdpZnkoW1NdKSAhPSAnW251bGxdJyB8fCBfc3RyaW5naWZ5KHthOiBTfSkgIT0gJ3t9JyB8fCBfc3RyaW5naWZ5KE9iamVjdChTKSkgIT0gJ3t9Jztcbn0pKSwgJ0pTT04nLCB7XG4gIHN0cmluZ2lmeTogZnVuY3Rpb24gc3RyaW5naWZ5KGl0KXtcbiAgICBpZihpdCA9PT0gdW5kZWZpbmVkIHx8IGlzU3ltYm9sKGl0KSlyZXR1cm47IC8vIElFOCByZXR1cm5zIHN0cmluZyBvbiB1bmRlZmluZWRcbiAgICB2YXIgYXJncyA9IFtpdF1cbiAgICAgICwgaSAgICA9IDFcbiAgICAgICwgcmVwbGFjZXIsICRyZXBsYWNlcjtcbiAgICB3aGlsZShhcmd1bWVudHMubGVuZ3RoID4gaSlhcmdzLnB1c2goYXJndW1lbnRzW2krK10pO1xuICAgIHJlcGxhY2VyID0gYXJnc1sxXTtcbiAgICBpZih0eXBlb2YgcmVwbGFjZXIgPT0gJ2Z1bmN0aW9uJykkcmVwbGFjZXIgPSByZXBsYWNlcjtcbiAgICBpZigkcmVwbGFjZXIgfHwgIWlzQXJyYXkocmVwbGFjZXIpKXJlcGxhY2VyID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSl7XG4gICAgICBpZigkcmVwbGFjZXIpdmFsdWUgPSAkcmVwbGFjZXIuY2FsbCh0aGlzLCBrZXksIHZhbHVlKTtcbiAgICAgIGlmKCFpc1N5bWJvbCh2YWx1ZSkpcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gICAgYXJnc1sxXSA9IHJlcGxhY2VyO1xuICAgIHJldHVybiBfc3RyaW5naWZ5LmFwcGx5KCRKU09OLCBhcmdzKTtcbiAgfVxufSk7XG5cbi8vIDE5LjQuMy40IFN5bWJvbC5wcm90b3R5cGVbQEB0b1ByaW1pdGl2ZV0oaGludClcbiRTeW1ib2xbUFJPVE9UWVBFXVtUT19QUklNSVRJVkVdIHx8IHJlcXVpcmUoJy4vX2hpZGUnKSgkU3ltYm9sW1BST1RPVFlQRV0sIFRPX1BSSU1JVElWRSwgJFN5bWJvbFtQUk9UT1RZUEVdLnZhbHVlT2YpO1xuLy8gMTkuNC4zLjUgU3ltYm9sLnByb3RvdHlwZVtAQHRvU3RyaW5nVGFnXVxuc2V0VG9TdHJpbmdUYWcoJFN5bWJvbCwgJ1N5bWJvbCcpO1xuLy8gMjAuMi4xLjkgTWF0aFtAQHRvU3RyaW5nVGFnXVxuc2V0VG9TdHJpbmdUYWcoTWF0aCwgJ01hdGgnLCB0cnVlKTtcbi8vIDI0LjMuMyBKU09OW0BAdG9TdHJpbmdUYWddXG5zZXRUb1N0cmluZ1RhZyhnbG9iYWwuSlNPTiwgJ0pTT04nLCB0cnVlKTsiLCJyZXF1aXJlKCcuL193a3MtZGVmaW5lJykoJ2FzeW5jSXRlcmF0b3InKTsiLCJyZXF1aXJlKCcuL193a3MtZGVmaW5lJykoJ29ic2VydmFibGUnKTsiLCJyZXF1aXJlKCcuL2VzNi5hcnJheS5pdGVyYXRvcicpO1xudmFyIGdsb2JhbCAgICAgICAgPSByZXF1aXJlKCcuL19nbG9iYWwnKVxuICAsIGhpZGUgICAgICAgICAgPSByZXF1aXJlKCcuL19oaWRlJylcbiAgLCBJdGVyYXRvcnMgICAgID0gcmVxdWlyZSgnLi9faXRlcmF0b3JzJylcbiAgLCBUT19TVFJJTkdfVEFHID0gcmVxdWlyZSgnLi9fd2tzJykoJ3RvU3RyaW5nVGFnJyk7XG5cbmZvcih2YXIgY29sbGVjdGlvbnMgPSBbJ05vZGVMaXN0JywgJ0RPTVRva2VuTGlzdCcsICdNZWRpYUxpc3QnLCAnU3R5bGVTaGVldExpc3QnLCAnQ1NTUnVsZUxpc3QnXSwgaSA9IDA7IGkgPCA1OyBpKyspe1xuICB2YXIgTkFNRSAgICAgICA9IGNvbGxlY3Rpb25zW2ldXG4gICAgLCBDb2xsZWN0aW9uID0gZ2xvYmFsW05BTUVdXG4gICAgLCBwcm90byAgICAgID0gQ29sbGVjdGlvbiAmJiBDb2xsZWN0aW9uLnByb3RvdHlwZTtcbiAgaWYocHJvdG8gJiYgIXByb3RvW1RPX1NUUklOR19UQUddKWhpZGUocHJvdG8sIFRPX1NUUklOR19UQUcsIE5BTUUpO1xuICBJdGVyYXRvcnNbTkFNRV0gPSBJdGVyYXRvcnMuQXJyYXk7XG59IiwiLy8gICAgIHByb3h5LW9ic2VydmUgdjAuMC4xOFxuLy8gICAgIENvcHlyaWdodCAoYykgMjAxNSwgMjAxNiBTaW1vbiBZLiBCbGFja3dlbGwsIEFueVdoaWNoV2F5XG4vLyAgICAgTUlUIExpY2Vuc2UgLSBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG4oZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXHQvLyBDcmVhdGVzIGFuZCByZXR1cm5zIGEgUHJveHkgd3JhcHBpbmcgYSB0YXJnZXQgc28gdGhhdCBhbGwgY2hhbmdlcyBjYW4gYmUgdHJhcHBlZCBhbmQgZm9yd2FyZGVkIHRvXG5cdC8vIGEgY2FsbGJhY2suIFRoZSBjYWxsYmFjayB0YWtlcyBhbiBhcnJheSBvZiBjaGFuZ2VzIGp1c3QgbGlrZSB0aGUgdHJhZGl0aW9uYWwgb3JpZ2luYWwgQ2hyb21lIE9iamVjdC5vYnNlcnZlXG5cdC8vIHtvYmplY3Q6PG9iamVjdCBjaGFuZ2VkPixuYW1lOjxmaWVsZCBjaGFuZ2VkPix0eXBlOmFkZHx1cGRhdGV8ZGVsZXRlfHJlY29uZmlndXJlfHByZXZlbnRFeHRlbnNpb25zfHNldFByb3RvdHlwZSxvbGRWYWx1ZTo8b2xkIHZhbHVlIGlmIHVwZGF0ZSB8IGRlbGV0ZT59XG5cdC8vIFRoZSBhY2NlcHRsaXN0IGNhbiBiZSBhZGR8dXBkYXRlfGRlbGV0ZXxyZWNvbmZpZ3VyZXxwcmV2ZW50RXh0ZW5zaW9uc3xzZXRQcm90b3R5cGUuXG5cdC8vIHYgMC4wLjEwIHRvIHN1cHBvcnQgcGF1c2luZyBhbmQgcmVzdGFydGluZyBvYnNlcnZhdGlvbiB0d28gYWRkaXRpb25hbCBjb25zdHJ1Y3RvciBhcmd1bWVudHMgYXJlIGF2YWlsYWJsZSB0byBPYmplY3Qub2JzZXJ2ZTpcblx0Ly8gcGF1c2FibGUgLSBjcmVhdGUgdGhlIE9ic2VydmVyIHNvIGl0IGNhbiBiZSBwYXVzZWRcblx0Ly8gcGF1c2UgLSBjcmVhdGUgb2JzZXJ2ZXIgaW4gcGF1c2VkIHN0YXRlXG5cdC8vIGlmIHBhdXNhYmxlIGlzIHRydWUgdGhlbiBhbiBhZGRpdGlvbmFsIG1ldGhvZCBkZWxpdmVyKGlnbm9yZVByZXZpb3VzKSBpcyBhdmFpbGFibGUgdG8gc3RhcnQgZGVsaXZlcnlcblx0Ly8gdG8gcGF1c2UgZGVsaXZlcnkgc2V0IGEgcHJvcGVydHkgY2FsbGVkIHBhdXNlIG9uIHRoZSBmdW5jdGlvbiBkZWxpdmVyIHRvIHRydWVcblx0Ly8gcGF1c2FibGUgaXMgb3B0aW9uYWwgdG8gcmVkdWNlIHRoZSBjaGFuY2Ugb2Ygc2hhZG93aW5nIGEgcHJvcGVydHkgb3IgbWV0aG9kIG9uIGFueSBleGlzdGluZyBjb2RlIGNhbGxlZCBkZWxpdmVyXG5cdGlmKCFPYmplY3Qub2JzZXJ2ZSAmJiB0eXBlb2YoUHJveHkpPT09XCJmdW5jdGlvblwiKSB7XG5cdFx0ZnVuY3Rpb24gT2JzZXJ2ZXIodGFyZ2V0LGNhbGxiYWNrLGFjY2VwdGxpc3QscGF1c2FibGUscGF1c2UsZGVsYXkpIHtcblx0ICAgIFx0dmFyIG1lID0gdGhpcywgcHJveHk7XG5cdCAgICBcdGZ1bmN0aW9uIGRlbGl2ZXIoaWdub3JlUHJldmlvdXMsZGVsYXkpIHtcblx0ICAgIFx0XHRkZWxpdmVyLmRlbGF5ID0gZGVsYXk7XG5cdCAgICBcdFx0aWYoIWRlbGl2ZXIucGF1c2UpIHtcblx0ICAgICAgICBcdFx0aWYobWUuY2hhbmdlc2V0Lmxlbmd0aD4wKSB7XG5cdCAgICAgICAgXHRcdFx0aWYoIWlnbm9yZVByZXZpb3VzKSB7XG5cdFx0ICAgIFx0ICAgIFx0XHR2YXIgY2hhbmdlcyA9IG1lLmNoYW5nZXNldC5maWx0ZXIoZnVuY3Rpb24oY2hhbmdlKSB7IHJldHVybiAhYWNjZXB0bGlzdCB8fCBhY2NlcHRsaXN0LmluZGV4T2YoY2hhbmdlLnR5cGUpPj0wOyB9KTtcblx0XHQgICAgICAgIFx0XHRcdGlmKGNoYW5nZXMubGVuZ3RoPjApIHtcblx0XHQgICAgICAgIFx0XHRcdFx0Y2FsbGJhY2soY2hhbmdlcyk7XG5cdFx0ICAgICAgICBcdFx0XHR9XG5cdCAgICAgICAgXHRcdFx0fVxuXHQgICAgICAgIFx0XHRcdG1lLmNoYW5nZXNldCA9IFtdO1xuXHQgICAgICAgIFx0XHR9XG5cdCAgICBcdFx0fVxuXHQgICAgXHR9XG5cdCAgICBcdGRlbGl2ZXIucGF1c2UgPSBwYXVzZTtcblx0ICAgIFx0ZGVsaXZlci5kZWxheSA9IGRlbGF5O1xuXHRcdCAgICBtZS5nZXQgPSBmdW5jdGlvbih0YXJnZXQsIHByb3BlcnR5KSB7XG5cdFx0ICAgIFx0aWYocHJvcGVydHk9PT1cIl9fb2JzZXJ2ZXJfX1wiKSB7XG5cdFx0ICAgIFx0XHRyZXR1cm4gbWU7XG5cdFx0ICAgIFx0fVxuXHRcdCAgICBcdGlmKHByb3BlcnR5PT09XCJ1bm9ic2VydmVcIikge1xuXHRcdCAgICBcdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdCAgICBcdFx0XHRPYmplY3QudW5vYnNlcnZlKHRhcmdldCk7XG5cdFx0ICAgIFx0XHRcdHJldHVybiB0YXJnZXQ7XG5cdFx0ICAgIFx0XHR9O1xuXHRcdCAgICBcdH1cblx0XHQgICAgXHRpZihwcm9wZXJ0eT09PVwiZGVsaXZlclwiKSB7XG5cdFx0ICAgIFx0XHRyZXR1cm4gZGVsaXZlcjtcblx0XHQgICAgXHR9XG5cdFx0ICAgIFx0cmV0dXJuIHRhcmdldFtwcm9wZXJ0eV07XG5cdFx0ICAgIH1cblx0ICAgIFx0bWUudGFyZ2V0ID0gdGFyZ2V0O1xuXHQgICAgXHRtZS5jaGFuZ2VzZXQgPSBbXTtcblx0ICAgIFx0aWYoIW1lLnRhcmdldC5fX29ic2VydmVyQ2FsbGJhY2tzX18pIHtcblx0ICAgIFx0XHQvLyBfX29ic2VydmVyQ2FsbGJhY2tzX18gaXMgdXNlZCBhcyBhbiBpbmRleCB0byBnZXQgYXQgdGhlIHByb3h5IHdoaWNoIGlzIHRoZSBvYnNlcnZlciwgc28gd2UgY2FuIHVub2JzZXJ2ZVxuXHQgICAgXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsXCJfX29ic2VydmVyQ2FsbGJhY2tzX19cIix7ZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZSx3cml0YWJsZTpmYWxzZSx2YWx1ZTpbXX0pO1xuXHQgICAgXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsXCJfX29ic2VydmVyc19fXCIse2VudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWUsd3JpdGFibGU6ZmFsc2UsdmFsdWU6W119KTtcblx0ICAgIFx0fVxuXHQgICAgXHRtZS50YXJnZXQuX19vYnNlcnZlckNhbGxiYWNrc19fLnB1c2goY2FsbGJhY2spO1xuXHQgICAgXHRtZS50YXJnZXQuX19vYnNlcnZlcnNfXy5wdXNoKHRoaXMpO1xuXHQgICAgXHRwcm94eSA9IG5ldyBQcm94eSh0YXJnZXQsbWUpO1xuXHQgICAgXHRkZWxpdmVyKGZhbHNlLGRlbGF5KTtcblx0ICAgIFx0cmV0dXJuIHByb3h5O1xuXHQgICAgfVxuXHRcdE9ic2VydmVyLnByb3RvdHlwZS5kZWxpdmVyID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5nZXQobnVsbCxcImRlbGl2ZXJcIik7XG5cdFx0fVxuXHQgICAgT2JzZXJ2ZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKHRhcmdldCwgcHJvcGVydHksIHZhbHVlKSB7IC8vICwgcmVjZWl2ZXJcblx0ICAgIFx0dmFyIG9sZHZhbHVlID0gdGFyZ2V0W3Byb3BlcnR5XTtcblx0ICAgIFx0dmFyIHR5cGUgPSAob2xkdmFsdWU9PT11bmRlZmluZWQgPyBcImFkZFwiIDogXCJ1cGRhdGVcIik7XG5cdCAgICBcdHRhcmdldFtwcm9wZXJ0eV0gPSB2YWx1ZTtcblx0ICAgIFx0aWYodGFyZ2V0Ll9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCAmJiAoIXRoaXMuYWNjZXB0bGlzdCB8fCB0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZih0eXBlKT49MCkpIHtcblx0ICAgICAgICBcdHZhciBjaGFuZ2UgPSB7b2JqZWN0OnRhcmdldCxuYW1lOnByb3BlcnR5LHR5cGU6dHlwZX0sXG5cdCAgICAgICAgXHRcdHN0YXJ0ID0gdGhpcy5jaGFuZ2VzZXQubGVuZ3RoID09PSAwLFxuXHQgICAgICAgIFx0XHRkZWxpdmVyID0gdGhpcy5kZWxpdmVyKCk7XG5cdCAgICAgICAgXHRpZih0eXBlPT09XCJ1cGRhdGVcIikge1xuXHQgICAgICAgIFx0XHRjaGFuZ2Uub2xkVmFsdWUgPSBvbGR2YWx1ZTtcblx0ICAgICAgICBcdH1cblx0ICAgICAgICBcdHRoaXMuY2hhbmdlc2V0LnB1c2goY2hhbmdlKTtcblx0ICAgICAgICBcdGlmKHN0YXJ0KSB7XG5cdCAgICAgICAgXHRcdGRlbGl2ZXIoZmFsc2UsKHR5cGVvZihkZWxpdmVyLmRlbGF5KT09PVwibnVtYmVyXCIgPyBkZWxpdmVyLmRlbGF5IDogMTApKTtcblx0ICAgICAgICBcdH1cblx0ICAgIFx0fVxuXHQgICAgXHRyZXR1cm4gdHJ1ZTtcblx0ICAgIH07XG5cdCAgICBPYnNlcnZlci5wcm90b3R5cGUuZGVsZXRlUHJvcGVydHkgPSBmdW5jdGlvbih0YXJnZXQsIHByb3BlcnR5KSB7XG5cdCAgICBcdHZhciBvbGR2YWx1ZSA9IHRhcmdldFtwcm9wZXJ0eV07XG5cdCAgICBcdC8vaWYodHlwZW9mKG9sZHZhbHVlKSE9PVwidW5kZWZpbmVkXCIpIHtcblx0XHQgICAgXHRkZWxldGUgdGFyZ2V0W3Byb3BlcnR5XTtcblx0XHQgICAgXHRpZih0YXJnZXQuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wICYmICF0aGlzLmFjY2VwdGxpc3QgfHwgdGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoXCJkZWxldGVcIik+PTApIHtcblx0XHQgICAgICAgIFx0dmFyIGNoYW5nZSA9IHtvYmplY3Q6dGFyZ2V0LG5hbWU6cHJvcGVydHksdHlwZTpcImRlbGV0ZVwiLG9sZFZhbHVlOm9sZHZhbHVlfSxcblx0XHQgICAgICAgIFx0XHRzdGFydCA9IHRoaXMuY2hhbmdlc2V0Lmxlbmd0aCA9PT0gMCxcblx0XHQgICAgICAgIFx0XHRkZWxpdmVyID0gdGhpcy5kZWxpdmVyKCk7XG5cdFx0ICAgICAgICBcdHRoaXMuY2hhbmdlc2V0LnB1c2goY2hhbmdlKTtcblx0XHQgICAgICAgIFx0aWYoc3RhcnQpIHtcblx0XHQgICAgICAgIFx0XHRkZWxpdmVyKGZhbHNlLCh0eXBlb2YoZGVsaXZlci5kZWxheSk9PT1cIm51bWJlclwiID8gZGVsaXZlci5kZWxheSA6IDEwKSk7XG5cdFx0ICAgICAgICBcdH1cblx0XHQgICAgXHR9XG5cdCAgICBcdC8vfVxuXHQgICAgXHRyZXR1cm4gdHJ1ZTtcblx0ICAgIH07XG5cdCAgICBPYnNlcnZlci5wcm90b3R5cGUuZGVmaW5lUHJvcGVydHkgPSBmdW5jdGlvbih0YXJnZXQsIHByb3BlcnR5LCBkZXNjcmlwdG9yKSB7XG5cdCAgICBcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5LCBkZXNjcmlwdG9yKTtcblx0ICAgIFx0aWYodGFyZ2V0Ll9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCAmJiAhdGhpcy5hY2NlcHRsaXN0IHx8IHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKFwicmVjb25maWd1cmVcIik+PTApIHtcblx0ICAgICAgICBcdHZhciBjaGFuZ2UgPSB7b2JqZWN0OnRhcmdldCxuYW1lOnByb3BlcnR5LHR5cGU6XCJyZWNvbmZpZ3VyZVwifSxcbiAgICAgICAgXHRcdFx0c3RhcnQgPSB0aGlzLmNoYW5nZXNldC5sZW5ndGggPT09IDAsXG4gICAgICAgIFx0XHRcdGRlbGl2ZXIgPSB0aGlzLmRlbGl2ZXIoKTtcblx0ICAgICAgICBcdHRoaXMuY2hhbmdlc2V0LnB1c2goY2hhbmdlKTtcblx0ICAgICAgICBcdGlmKHN0YXJ0KSB7XG5cdCAgICAgICAgXHRcdGRlbGl2ZXIoZmFsc2UsKHR5cGVvZihkZWxpdmVyLmRlbGF5KT09PVwibnVtYmVyXCIgPyBkZWxpdmVyLmRlbGF5IDogMTApKTtcblx0ICAgICAgICBcdH1cblx0ICAgIFx0fVxuXHQgICAgXHRyZXR1cm4gdHJ1ZTtcblx0ICAgIH07XG5cdCAgICBPYnNlcnZlci5wcm90b3R5cGUuc2V0UHJvdG90eXBlT2YgPSBmdW5jdGlvbih0YXJnZXQsIHByb3RvdHlwZSkge1xuXHQgICAgXHR2YXIgb2xkdmFsdWUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGFyZ2V0KTtcblx0ICAgIFx0T2JqZWN0LnNldFByb3RvdHlwZU9mKHRhcmdldCwgcHJvdG90eXBlKTtcblx0ICAgIFx0aWYodGFyZ2V0Ll9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCAmJiAhdGhpcy5hY2NlcHRsaXN0IHx8IHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKFwic2V0UHJvdG90eXBlXCIpPj0wKSB7XG5cdCAgICAgICAgXHR2YXIgY2hhbmdlID0ge29iamVjdDp0YXJnZXQsbmFtZTpcIl9fcHJvdG9fX1wiLHR5cGU6XCJzZXRQcm90b3R5cGVcIixvbGRWYWx1ZTpvbGR2YWx1ZX0sXG4gICAgXHRcdFx0XHRzdGFydCA9IHRoaXMuY2hhbmdlc2V0Lmxlbmd0aCA9PT0gMCxcbiAgICBcdFx0XHRcdGRlbGl2ZXIgPSB0aGlzLmRlbGl2ZXIoKTtcblx0ICAgICAgICBcdHRoaXMuY2hhbmdlc2V0LnB1c2goY2hhbmdlKTtcblx0ICAgICAgICBcdGlmKHN0YXJ0KSB7XG5cdCAgICAgICAgXHRcdGRlbGl2ZXIoZmFsc2UsKHR5cGVvZihkZWxpdmVyLmRlbGF5KT09PVwibnVtYmVyXCIgPyBkZWxpdmVyLmRlbGF5IDogMTApKTtcblx0ICAgICAgICBcdH1cblx0ICAgIFx0fVxuXHQgICAgXHRyZXR1cm4gdHJ1ZTtcblx0ICAgIH07XG5cdCAgICBPYnNlcnZlci5wcm90b3R5cGUucHJldmVudEV4dGVuc2lvbnMgPSBmdW5jdGlvbih0YXJnZXQpIHtcblx0ICAgICAgICBPYmplY3QucHJldmVudEV4dGVuc2lvbnModGFyZ2V0KTtcblx0ICAgIFx0aWYodGFyZ2V0Ll9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCAmJiAhdGhpcy5hY2NlcHRsaXN0IHx8IHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKFwicHJldmVudEV4dGVuc2lvbnNcIik+PTApIHtcblx0ICAgICAgICBcdHZhciBjaGFuZ2UgPSB7b2JqZWN0OnRhcmdldCx0eXBlOlwicHJldmVudEV4dGVuc2lvbnNcIn0sXG5cdFx0XHRcdFx0c3RhcnQgPSB0aGlzLmNoYW5nZXNldC5sZW5ndGggPT09IDAsXG5cdFx0XHRcdFx0ZGVsaXZlciA9IHRoaXMuZGVsaXZlcigpO1xuXHQgICAgICAgIFx0dGhpcy5jaGFuZ2VzZXQucHVzaChjaGFuZ2UpO1xuXHQgICAgICAgIFx0aWYoc3RhcnQpIHtcblx0ICAgICAgICBcdFx0ZGVsaXZlcihmYWxzZSwodHlwZW9mKGRlbGl2ZXIuZGVsYXkpPT09XCJudW1iZXJcIiA/IGRlbGl2ZXIuZGVsYXkgOiAxMCkpO1xuXHQgICAgICAgIFx0fVxuXHQgICAgXHR9XG5cdCAgICBcdHJldHVybiB0cnVlO1xuXHQgICAgfTtcblx0ICAgIE9iamVjdC5vYnNlcnZlID0gZnVuY3Rpb24ob2JqZWN0LGNhbGxiYWNrLGFjY2VwdGxpc3QscGF1c2FibGUscGF1c2UsZGVsYXkpIHtcblx0ICAgIFx0cmV0dXJuIG5ldyBPYnNlcnZlcihvYmplY3QsY2FsbGJhY2ssYWNjZXB0bGlzdCxwYXVzYWJsZSxwYXVzZSxkZWxheSk7XG5cdCAgICB9O1xuXHQgICAgT2JqZWN0LnVub2JzZXJ2ZSA9IGZ1bmN0aW9uKG9iamVjdCxjYWxsYmFjaykge1xuXHQgICAgXHRpZihvYmplY3QuX19vYnNlcnZlckNhbGxiYWNrc19fKSB7XG5cdCAgICBcdFx0aWYoIWNhbGxiYWNrKSB7XG5cdCAgICBcdFx0XHRvYmplY3QuX19vYnNlcnZlckNhbGxiYWNrc19fLnNwbGljZSgwLG9iamVjdC5fX29ic2VydmVyQ2FsbGJhY2tzX18ubGVuZ3RoKTtcblx0ICAgIFx0XHRcdG9iamVjdC5fX29ic2VydmVyc19fLnNwbGljZSgwLG9iamVjdC5fX29ic2VydmVyc19fLmxlbmd0aCk7XG5cdCAgICBcdFx0XHRyZXR1cm47XG5cdCAgICBcdFx0fVxuXHQgICAgXHRcdG9iamVjdC5fX29ic2VydmVyQ2FsbGJhY2tzX18uZm9yRWFjaChmdW5jdGlvbihvYnNlcnZlcmNhbGxiYWNrLGkpIHtcblx0ICAgIFx0XHRcdGlmKGNhbGxiYWNrPT09b2JzZXJ2ZXJjYWxsYmFjaykge1xuXHQgICAgXHRcdFx0XHRvYmplY3QuX19vYnNlcnZlckNhbGxiYWNrc19fLnNwbGljZShpLDEpO1xuXHQgICAgXHRcdFx0XHRkZWxldGUgb2JqZWN0Ll9fb2JzZXJ2ZXJzX19baV0uY2FsbGJhY2s7XG5cdCAgICBcdFx0XHRcdG9iamVjdC5fX29ic2VydmVyc19fLnNwbGljZShpLDEpO1xuXHQgICAgXHRcdFx0fVxuXHQgICAgXHRcdH0pO1xuXHQgICAgXHR9XG5cdCAgICB9O1xuXHQgICAgQXJyYXkub2JzZXJ2ZSA9IGZ1bmN0aW9uKG9iamVjdCxjYWxsYmFjayxhY2NlcHRsaXN0LHBhdXNhYmxlLHBhdXNlLGRlbGF5KSB7XG5cdCAgICBcdGlmKCEob2JqZWN0IGluc3RhbmNlb2YgQXJyYXkpICYmICFBcnJheS5pc0FycmF5KG9iamVjdCkpIHtcblx0ICAgIFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmlyc3QgYXJndW1lbnQgdG8gQXJyYXkub2JzZXJ2ZXIgaXMgbm90IGFuIEFycmF5XCIpO1xuXHQgICAgXHR9XG5cdCAgICBcdHZhciBhcnJheXByb3h5ID0gbmV3IFByb3h5KG9iamVjdCx7Z2V0OiBmdW5jdGlvbih0YXJnZXQscHJvcGVydHkpIHtcblx0ICAgIFx0XHRpZihwcm9wZXJ0eT09PVwidW5vYnNlcnZlXCIpIHtcblx0XHQgICAgXHRcdHJldHVybiBmdW5jdGlvbihjYWxsYmFjaykge1xuXHRcdCAgICBcdFx0XHRpZihjYWxsYmFjaykge1xuXHRcdCAgICBcdFx0XHRcdHJldHVybiBPYmplY3QudW5vYnNlcnZlKHRhcmdldCxjYWxsYmFjayk7XG5cdFx0ICAgIFx0XHRcdH1cblx0XHQgICAgXHRcdFx0cmV0dXJuIHRhcmdldC51bm9ic2VydmUoKTtcblx0XHQgICAgXHRcdH07XG5cdFx0ICAgIFx0fVxuXHQgICAgXHRcdGlmKHByb3BlcnR5PT09XCJzcGxpY2VcIikge1xuXHQgICAgXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKHN0YXJ0LGVuZCkge1xuXHQgICAgXHRcdFx0XHRpZih0eXBlb2Yoc3RhcnQpIT09XCJudW1iZXJcIiB8fCB0eXBlb2YoZW5kKSE9PVwibnVtYmVyXCIpIHtcblx0ICAgIFx0XHRcdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmlyc3QgdHdvIGFyZ3VtZW50cyB0byBBcnJheSBzcGxpY2UgYXJlIG5vdCBudW1iZXIsIG51bWJlclwiKTtcblx0ICAgIFx0XHRcdFx0fVxuXHQgICAgXHQgICAgXHRcdHZhciByZW1vdmVkID0gdGhpcy5zbGljZShzdGFydCxzdGFydCtlbmQpLFxuXHQgICAgXHQgICAgXHRcdFx0YWRkZWRDb3VudCA9IChhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50cy5sZW5ndGgtMiA6IDApLFxuXHQgICAgXHQgICAgXHRcdFx0Y2hhbmdlID0gIHtvYmplY3Q6b2JqZWN0LHR5cGU6XCJzcGxpY2VcIixpbmRleDpzdGFydCxyZW1vdmVkOnJlbW92ZWQsYWRkZWRDb3VudDphZGRlZENvdW50fTtcblx0ICAgIFx0ICAgIFx0XHR0YXJnZXQuc3BsaWNlLmFwcGx5KHRhcmdldCxhcmd1bWVudHMpO1xuXHQgICAgXHQgICAgXHRcdGlmKGFjY2VwdGxpc3QuaW5kZXhPZihcInNwbGljZVwiKT49MCkge1xuXHQgICAgXHQgICAgXHRcdFx0dmFyIHN0YXJ0ID0gcHJveHkuX19vYnNlcnZlcl9fLmNoYW5nZXNldC5sZW5ndGggPT09IDAsXG5cdCAgICBcdCAgICAgICAgXHRcdFx0ZGVsaXZlciA9IHByb3h5Ll9fb2JzZXJ2ZXJfXy5kZWxpdmVyKCk7XG5cdCAgICBcdCAgICBcdFx0XHRwcm94eS5fX29ic2VydmVyX18uY2hhbmdlc2V0LnB1c2goY2hhbmdlKTtcblx0ICAgIFx0ICAgIFx0XHRcdGlmKHN0YXJ0KSB7XG5cdCAgICBcdFx0ICAgICAgICBcdFx0ZGVsaXZlcihmYWxzZSwodHlwZW9mKGRlbGl2ZXIuZGVsYXkpPT09XCJudW1iZXJcIiA/IGRlbGl2ZXIuZGVsYXkgOiAxMCkpO1xuXHQgICAgXHRcdCAgICAgICAgXHR9XG5cdCAgICBcdCAgICBcdFx0fVxuXHQgICAgXHQgICAgXHR9XG5cdCAgICBcdFx0fVxuXHQgICAgXHRcdGlmKHByb3BlcnR5PT09XCJwdXNoXCIpIHtcblx0ICAgIFx0XHRcdCByZXR1cm4gZnVuY3Rpb24oaXRlbSkge1xuXHQgICAgXHRcdCAgICBcdHJldHVybiB0aGlzLnNwbGljZSh0aGlzLmxlbmd0aCwwLGl0ZW0pO1xuXHQgICAgXHRcdCAgICB9XG5cdCAgICBcdFx0fVxuXHQgICAgXHRcdGlmKHByb3BlcnR5PT09XCJwb3BcIikge1xuXHQgICAgXHRcdFx0IHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgIFx0XHQgICAgXHRyZXR1cm4gdGhpcy5zcGxpY2UodGhpcy5sZW5ndGgtMSwxKTtcblx0ICAgIFx0XHQgICAgfVxuXHQgICAgXHRcdH1cblx0ICAgIFx0XHRpZihwcm9wZXJ0eT09PVwidW5zaGlmdFwiKSB7XG5cdCAgICBcdFx0XHQgcmV0dXJuIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICBcdFx0ICAgIFx0XHRyZXR1cm4gdGhpcy5zcGxpY2UoMCwwLGl0ZW0pO1xuICAgIFx0XHQgICAgXHR9XG5cdCAgICBcdFx0fVxuXHQgICAgXHRcdGlmKHByb3BlcnR5PT09XCJzaGlmdFwiKSB7XG5cdCAgICBcdFx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICBcdCAgICBcdFx0cmV0dXJuIHRoaXMuc3BsaWNlKDAsMSk7XG5cdCAgICBcdCAgICBcdH1cblx0ICAgIFx0XHR9XG5cdCAgICBcdFx0cmV0dXJuIHRhcmdldFtwcm9wZXJ0eV07XG5cdCAgICBcdH19KTtcblx0ICAgIFx0dmFyIHByb3h5ID0gT2JqZWN0Lm9ic2VydmUoYXJyYXlwcm94eSxmdW5jdGlvbihjaGFuZ2VzZXQpIHsgXG5cdCAgICBcdFx0dmFyIGNoYW5nZXMgPSBjaGFuZ2VzZXQuZmlsdGVyKGZ1bmN0aW9uKGNoYW5nZSkgeyByZXR1cm4gY2hhbmdlLm5hbWUhPT1cImxlbmd0aFwiICYmIGNoYW5nZS5uYW1lIT09XCJhZGRcIiAmJiAoIWFjY2VwdGxpc3QgfHwgYWNjZXB0bGlzdC5pbmRleE9mKGNoYW5nZS50eXBlKT49MCk7IH0pO1xuXHQgICAgXHRcdGlmKGNoYW5nZXMubGVuZ3RoPjApIHtcblx0ICAgIFx0XHRcdGNhbGxiYWNrKGNoYW5nZXMpO1xuXHQgICAgXHRcdH1cblx0ICAgIFx0fSxhY2NlcHRsaXN0LHBhdXNhYmxlLHBhdXNlLGRlbGF5KTtcblx0ICAgIFx0cmV0dXJuIHByb3h5O1xuXHQgICAgfTtcblx0ICAgIEFycmF5LnVub2JzZXJ2ZSA9IGZ1bmN0aW9uKG9iamVjdCxjYWxsYmFjaykge1xuXHRcdCAgcmV0dXJuIG9iamVjdC51bm9ic2VydmUoY2FsbGJhY2spO1xuXHQgICAgfVxuXHR9XG5cdE9iamVjdC5kZWVwT2JzZXJ2ZSA9IGZ1bmN0aW9uKG9iamVjdCxjYWxsYmFjayxwYXJ0cykge1xuXHRcdHBhcnRzID0gKHBhcnRzID8gcGFydHMgOiBbXSk7XG5cdFx0dmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpO1xuXHRcdGtleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdGlmKG9iamVjdFtrZXldIGluc3RhbmNlb2YgT2JqZWN0KSB7XG5cdFx0XHRcdHZhciBuZXdwYXJ0cyA9IHBhcnRzLnNsaWNlKDApO1xuXHRcdFx0XHRuZXdwYXJ0cy5wdXNoKGtleSk7XG5cdFx0XHRcdG9iamVjdFtrZXldID0gT2JqZWN0LmRlZXBPYnNlcnZlKG9iamVjdFtrZXldLGNhbGxiYWNrLG5ld3BhcnRzKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHR2YXIgb2JzZXJ2ZWQgPSBPYmplY3Qub2JzZXJ2ZShvYmplY3QsZnVuY3Rpb24oY2hhbmdlc2V0KSB7XG5cdFx0XHR2YXIgY2hhbmdlcyA9IFtdO1xuXHRcdFx0ZnVuY3Rpb24gcmVjdXJzZShuYW1lLHJvb3RPYmplY3Qsb2xkT2JqZWN0LG5ld09iamVjdCxwYXRoKSB7XG5cdFx0XHRcdGlmKG5ld09iamVjdCBpbnN0YW5jZW9mIE9iamVjdCkge1xuXHRcdFx0XHRcdHZhciBuZXdrZXlzID0gT2JqZWN0LmtleXMobmV3T2JqZWN0KTtcblx0XHRcdFx0XHRuZXdrZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHRcdFx0XHRpZighb2xkT2JqZWN0IHx8IChvbGRPYmplY3Rba2V5XSE9PW5ld09iamVjdFtrZXldKSkge1xuXHRcdFx0XHRcdFx0XHR2YXIgb2xkdmFsdWUgPSAob2xkT2JqZWN0ICYmIG9sZE9iamVjdFtrZXldIT09dW5kZWZpbmVkID8gb2xkT2JqZWN0W2tleV0gOiB1bmRlZmluZWQpLFxuXHRcdFx0XHRcdFx0XHRcdGNoYW5nZSA9IChvbGR2YWx1ZT09PXVuZGVmaW5lZCA/IFwiYWRkXCIgOiBcInVwZGF0ZVwiKSxcblx0XHRcdFx0XHRcdFx0XHRrZXlwYXRoID0gcGF0aCArIFwiLlwiICsga2V5O1xuXHRcdFx0XHRcdFx0XHRjaGFuZ2VzLnB1c2goe25hbWU6bmFtZSxvYmplY3Q6cm9vdE9iamVjdCx0eXBlOmNoYW5nZSxvbGRWYWx1ZTpvbGR2YWx1ZSxuZXdWYWx1ZTpuZXdPYmplY3Rba2V5XSxrZXlwYXRoOmtleXBhdGh9KTtcblx0XHRcdFx0XHRcdFx0cmVjdXJzZShuYW1lLHJvb3RPYmplY3Qsb2xkdmFsdWUsbmV3T2JqZWN0W2tleV0sa2V5cGF0aCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSBpZihvbGRPYmplY3QgaW5zdGFuY2VvZiBPYmplY3QpIHtcblx0XHRcdFx0XHR2YXIgb2xka2V5cyA9IE9iamVjdC5rZXlzKG9sZE9iamVjdCk7XG5cdFx0XHRcdFx0b2xka2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0XHRcdFx0dmFyIGNoYW5nZSA9IChuZXdPYmplY3Q9PT1udWxsID8gXCJ1cGRhdGVcIiA6IFwiZGVsZXRlXCIpLFxuXHRcdFx0XHRcdFx0XHRrZXlwYXRoID0gcGF0aCArIFwiLlwiICsga2V5O1xuXHRcdFx0XHRcdFx0Y2hhbmdlcy5wdXNoKHtuYW1lOm5hbWUsb2JqZWN0OnJvb3RPYmplY3QsdHlwZTpjaGFuZ2Usb2xkVmFsdWU6b2xkT2JqZWN0W2tleV0sbmV3VmFsdWU6bmV3T2JqZWN0LGtleXBhdGg6a2V5cGF0aH0pO1xuXHRcdFx0XHRcdFx0cmVjdXJzZShuYW1lLHJvb3RPYmplY3Qsb2xkT2JqZWN0W2tleV0sdW5kZWZpbmVkLGtleXBhdGgpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRjaGFuZ2VzZXQuZm9yRWFjaChmdW5jdGlvbihjaGFuZ2UpIHtcblx0XHRcdFx0dmFyIGtleXBhdGggPSAocGFydHMubGVuZ3RoPjAgPyBwYXJ0cy5qb2luKFwiLlwiKSArIFwiLlwiIDogXCJcIikgKyBjaGFuZ2UubmFtZTtcblx0XHRcdFx0Y2hhbmdlcy5wdXNoKHtuYW1lOmNoYW5nZS5uYW1lLG9iamVjdDpjaGFuZ2Uub2JqZWN0LHR5cGU6Y2hhbmdlLnR5cGUsb2xkVmFsdWU6Y2hhbmdlLm9sZFZhbHVlLG5ld1ZhbHVlOmNoYW5nZS5vYmplY3RbY2hhbmdlLm5hbWVdLGtleXBhdGg6a2V5cGF0aH0pO1xuXHRcdFx0XHRyZWN1cnNlKGNoYW5nZS5uYW1lLGNoYW5nZS5vYmplY3QsY2hhbmdlLm9sZFZhbHVlLGNoYW5nZS5vYmplY3RbY2hhbmdlLm5hbWVdLGtleXBhdGgpO1xuXHRcdFx0fSk7XG5cdFx0XHRjYWxsYmFjayhjaGFuZ2VzKTtcblx0XHR9KTtcblx0XHRyZXR1cm4gb2JzZXJ2ZWQ7XG5cdH07XG59KSgpOyIsImltcG9ydCBTeW5jaGVyIGZyb20gJy4vc3luY2hlci9TeW5jaGVyJztcbmltcG9ydCBEYXRhT2JqZWN0UmVwb3J0ZXIgZnJvbSAnLi9zeW5jaGVyL0RhdGFPYmplY3RSZXBvcnRlcic7XG5pbXBvcnQgRGF0YU9iamVjdE9ic2VydmVyIGZyb20gJy4vc3luY2hlci9EYXRhT2JqZWN0T2JzZXJ2ZXInO1xuXG5leHBvcnQge1N5bmNoZXIsIERhdGFPYmplY3RSZXBvcnRlciwgRGF0YU9iamVjdE9ic2VydmVyfTtcbiIsIi8qKlxuKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0FcbiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSURcbiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMXG4qIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WXG4qIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQVxuKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHXG4qIENvcHlyaWdodCAyMDE2IEFwaXplZVxuKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTlxuKlxuKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4qIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4qIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4qIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qKi9cblxuaW1wb3J0IFN5bmNPYmplY3QsIHtDaGFuZ2VUeXBlLCBPYmplY3RUeXBlfSBmcm9tICcuL1Byb3h5T2JqZWN0JztcbmltcG9ydCBEYXRhT2JqZWN0Q2hpbGQgZnJvbSAnLi9EYXRhT2JqZWN0Q2hpbGQnO1xuaW1wb3J0IHtkZWVwQ2xvbmV9IGZyb20gJy4uL3V0aWxzL3V0aWxzLmpzJztcblxuLyoqXG4gKiBNYWluIGV4dGVuc2lvbiBjbGFzcyBmb3Igb2JzZXJ2ZXJzIGFuZCByZXBvcnRlcnMsIHdpdGggY29tbW9uIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMuXG4gKiBDaGlsZHJlbiBtYW5hZ2VtZW50IGlzIGNvbW1vbiBmb3Igb2JzZXJ2ZXJzIGFuZCByZXBvcnRlcnMuXG4gKi9cbmNsYXNzIERhdGFPYmplY3Qge1xuICAvKiBwcml2YXRlXG4gIF92ZXJzaW9uOiBudW1iZXJcblxuICBfb3duZXI6IEh5cGVydHlVUkxcbiAgX3VybDogT2JqZWN0VVJMXG4gIF9zY2hlbWE6IFNjaGVtYVxuICBfYnVzOiBNaW5pQnVzXG4gIF9zdGF0dXM6IG9uIHwgcGF1c2VkXG4gIF9zeW5jT2JqOiBTeW5jRGF0YVxuXG4gIF9jaGlsZHJlbjogeyBpZDogRGF0YU9iamVjdENoaWxkIH1cbiAgX2NoaWxkcmVuTGlzdGVuZXJzOiBbTXNnTGlzdGVuZXJdXG5cbiAgLS0tLWV2ZW50IGhhbmRsZXJzLS0tLVxuICBfb25BZGRDaGlsZEhhbmRsZXI6IChldmVudCkgPT4gdm9pZFxuICAqL1xuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqIFNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseSBieSBIeXBlcnRpZXMuIEl0J3MgY2FsbGVkIGJ5IHRoZSBTeW5jaGVyIGNyZWF0ZSBvciBzdWJzY3JpYmUgbWV0aG9kJ3NcbiAgICovXG4gIGNvbnN0cnVjdG9yKHN5bmNoZXIsIHVybCwgc2NoZW1hLCBpbml0aWFsU3RhdHVzLCBpbml0aWFsRGF0YSwgY2hpbGRyZW5zKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIF90aGlzLl9zeW5jaGVyID0gc3luY2hlcjtcbiAgICBfdGhpcy5fdXJsID0gdXJsO1xuICAgIF90aGlzLl9zY2hlbWEgPSBzY2hlbWE7XG4gICAgX3RoaXMuX3N0YXR1cyA9IGluaXRpYWxTdGF0dXM7XG4gICAgX3RoaXMuX3N5bmNPYmogPSBuZXcgU3luY09iamVjdChpbml0aWFsRGF0YSk7XG4gICAgX3RoaXMuX2NoaWxkcmVucyA9IGNoaWxkcmVucztcblxuICAgIF90aGlzLl92ZXJzaW9uID0gMDtcbiAgICBfdGhpcy5fY2hpbGRJZCA9IDA7XG4gICAgX3RoaXMuX2NoaWxkcmVuT2JqZWN0cyA9IHt9O1xuICAgIF90aGlzLl9jaGlsZHJlbkxpc3RlbmVycyA9IFtdO1xuXG4gICAgX3RoaXMuX293bmVyID0gc3luY2hlci5fb3duZXI7XG4gICAgX3RoaXMuX2J1cyA9IHN5bmNoZXIuX2J1cztcbiAgfVxuXG4gIF9hbGxvY2F0ZUxpc3RlbmVycygpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgbGV0IGNoaWxkQmFzZVVSTCA9IF90aGlzLl91cmwgKyAnL2NoaWxkcmVuLyc7XG4gICAgY29uc29sZS5sb2coJ1tEYXRhIE9iamVjdCAtIEFsbG9jYXRlTGlzdGVuZXJzXSAtICcsIF90aGlzLl9jaGlsZHJlbnMpO1xuICAgIGlmIChfdGhpcy5fY2hpbGRyZW5zKSB7XG4gICAgICBfdGhpcy5fY2hpbGRyZW5zLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgICAgIGxldCBjaGlsZFVSTCA9IGNoaWxkQmFzZVVSTCArIGNoaWxkO1xuICAgICAgICBsZXQgbGlzdGVuZXIgPSBfdGhpcy5fYnVzLmFkZExpc3RlbmVyKGNoaWxkVVJMLCAobXNnKSA9PiB7XG4gICAgICAgICAgLy9pZ25vcmUgbXNnIHNlbnQgYnkgaGltc2VsZlxuICAgICAgICAgIGlmIChtc2cuZnJvbSAhPT0gdGhpcy5fb3duZXIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0LUNoaWxkcmVuLVJDVjogJywgbXNnKTtcbiAgICAgICAgICAgIHN3aXRjaCAobXNnLnR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSAnY3JlYXRlJzogX3RoaXMuX29uQ2hpbGRDcmVhdGUobXNnKTsgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6IGNvbnNvbGUubG9nKG1zZyk7IGJyZWFrO1xuICAgICAgICAgICAgICBkZWZhdWx0OiBfdGhpcy5fY2hhbmdlQ2hpbGRyZW4obXNnKTsgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBfcmVsZWFzZUxpc3RlbmVycygpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzLmZvckVhY2goKGxpc3RlbmVyKSA9PiB7XG4gICAgICBsaXN0ZW5lci5yZW1vdmUoKTtcbiAgICB9KTtcblxuICAgIE9iamVjdC5rZXlzKF90aGlzLl9jaGlsZHJlbk9iamVjdHMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgX3RoaXMuX2NoaWxkcmVuT2JqZWN0c1trZXldLl9yZWxlYXNlTGlzdGVuZXJzKCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogT2JqZWN0IFVSTCBvZiByZXBvcnRlciBvciBvYnNlcnZlclxuICAgKiBAdHlwZSB7T2JqZWN0VVJMfVxuICAgKi9cbiAgZ2V0IHVybCgpIHsgcmV0dXJuIHRoaXMuX3VybDsgfVxuXG4gIC8qKlxuICAgKiBPYmplY3Qgc2NoZW1hIFVSTCAodGhpcyBmaWVsZCBpcyBub3QgeWV0IHN0YWJsZSwgYW5kIGlzIHN1YnNqZWN0IHRvIGNoYW5nZSlcbiAgICogQHR5cGUge1NjaGVtYVVSTH1cbiAgICovXG4gIGdldCBzY2hlbWEoKSB7IHJldHVybiB0aGlzLl9zY2hlbWE7IH1cblxuICAvKipcbiAgICogU3RhdHVzIG9mIHRoZSByZXBvcnRlciBvciBvYnNlcnZlciBjb25uZWN0aW9uICh0aGlzIGZpZWxkIGlzIG5vdCB5ZXQgc3RhYmxlLCBhbmQgaXMgc3Vic2plY3QgdG8gY2hhbmdlKVxuICAgKiBAdHlwZSB7U3RhdHVzfSAtIEVudW0gb2Y6IG9uIHwgcGF1c2VkXG4gICAqL1xuICBnZXQgc3RhdHVzKCkgeyByZXR1cm4gdGhpcy5fc3RhdHVzOyB9XG5cbiAgLyoqXG4gICAqIERhdGEgc3RydWN0dXJlIHRvIGJlIHN5bmNocm9uaXplZC5cbiAgICogQHR5cGUge0pTT059IC0gSlNPTiBzdHJ1Y3R1cmUgdGhhdCBzaG91bGQgZm9sbG93IHRoZSBkZWZpbmVkIHNjaGVtYSwgaWYgYW55LlxuICAgKi9cbiAgZ2V0IGRhdGEoKSB7IHJldHVybiB0aGlzLl9zeW5jT2JqLmRhdGE7IH1cblxuICAvKipcbiAgICogQWxsIGNyZWF0ZWQgY2hpbGRyZW4ncyBzaW5jZSB0aGUgc3Vic2NyaXB0aW9uLCBkb2Vzbid0IGNvbnRhaW4gYWxsIGNoaWxkcmVuJ3Mgc2luY2UgcmVwb3J0ZXIgY3JlYXRpb24uXG4gICAqIEB0eXBlIHtPYmplY3Q8Q2hpbGRJZCwgRGF0YU9iamVjdENoaWxkPn1cbiAgICovXG4gIGdldCBjaGlsZHJlbnMoKSB7IHJldHVybiB0aGlzLl9jaGlsZHJlbk9iamVjdHM7IH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgcGF1c2UoKSB7XG4gICAgLy9UT0RPOiB0aGlzIGZlYXR1cmUgbmVlZHMgbW9yZSBhbmFsaXNlXG4gICAgdGhyb3cgJ05vdCBpbXBsZW1lbnRlZCc7XG4gIH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgcmVzdW1lKCkge1xuICAgIC8vVE9ETzogdGhpcyBmZWF0dXJlIG5lZWRzIG1vcmUgYW5hbGlzZVxuICAgIHRocm93ICdOb3QgaW1wbGVtZW50ZWQnO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIHN0b3AoKSB7XG4gICAgLy9UT0RPOiBzaG91bGQgcmVtb3ZlIHRoZSBzdWJzY3JpcHRpb24gYW5kIHNlbmQgbWVzc2FnZSB1bnN1YnNjcmliZT9cbiAgICB0aHJvdyAnTm90IGltcGxlbWVudGVkJztcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW5kIGFkZCBhIERhdGFPYmplY3RDaGlsZCB0byBhIGNoaWxkcmVuIGNvbGxlY3Rpb24uXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjaGlsZHJlbiAtIENoaWxkcmVuIG5hbWUgd2hlcmUgdGhlIGNoaWxkIGlzIGFkZGVkLlxuICAgKiBAcGFyYW0ge0pTT059IGluaXRpYWxEYXRhIC0gSW5pdGlhbCBkYXRhIG9mIHRoZSBjaGlsZFxuICAgKiBAcmV0dXJuIHtQcm9taXNlPERhdGFPYmplY3RDaGlsZD59IC0gUmV0dXJuIFByb21pc2UgdG8gYSBuZXcgRGF0YU9iamVjdENoaWxkLlxuICAgKi9cbiAgYWRkQ2hpbGQoY2hpbGRyZW4sIGluaXRpYWxEYXRhKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIC8vY3JlYXRlIG5ldyBjaGlsZCB1bmlxdWUgSUQsIGJhc2VkIG9uIGh5cGVydHlVUkxcbiAgICBfdGhpcy5fY2hpbGRJZCsrO1xuICAgIGxldCBtc2dDaGlsZElkID0gX3RoaXMuX293bmVyICsgJyMnICsgX3RoaXMuX2NoaWxkSWQ7XG4gICAgbGV0IG1zZ0NoaWxkUGF0aCA9IF90aGlzLl91cmwgKyAnL2NoaWxkcmVuLycgKyBjaGlsZHJlbjtcblxuICAgIC8vRkxPVy1PVVQ6IHRoaXMgbWVzc2FnZSB3aWxsIGJlIHNlbnQgZGlyZWN0bHkgdG8gYSByZXNvdXJjZSBjaGlsZCBhZGRyZXNzOiBNZXNzYWdlQnVzXG4gICAgbGV0IHJlcXVlc3RNc2cgPSB7XG4gICAgICB0eXBlOiAnY3JlYXRlJywgZnJvbTogX3RoaXMuX293bmVyLCB0bzogbXNnQ2hpbGRQYXRoLFxuICAgICAgYm9keTogeyByZXNvdXJjZTogbXNnQ2hpbGRJZCwgdmFsdWU6IGluaXRpYWxEYXRhIH1cbiAgICB9O1xuXG4gICAgLy9yZXR1cm5zIHByb21pc2UsIGluIHRoZSBmdXR1cmUsIHRoZSBBUEkgbWF5IGNoYW5nZSB0byBhc3luY2hyb25vdXMgY2FsbFxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgbGV0IG1zZ0lkID0gX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShyZXF1ZXN0TXNnKTtcblxuICAgICAgY29uc29sZS5sb2coJ2NyZWF0ZS1yZXBvcnRlci1jaGlsZCggJyArIF90aGlzLl9vd25lciArICcgKTogJywgcmVxdWVzdE1zZyk7XG4gICAgICBsZXQgbmV3Q2hpbGQgPSBuZXcgRGF0YU9iamVjdENoaWxkKF90aGlzLCBtc2dDaGlsZElkLCBpbml0aWFsRGF0YSwgX3RoaXMuX293bmVyLCBtc2dJZCk7XG4gICAgICBuZXdDaGlsZC5vbkNoYW5nZSgoZXZlbnQpID0+IHtcbiAgICAgICAgX3RoaXMuX29uQ2hhbmdlKGV2ZW50LCB7IHBhdGg6IG1zZ0NoaWxkUGF0aCwgY2hpbGRJZDogbXNnQ2hpbGRJZCB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBfdGhpcy5fY2hpbGRyZW5PYmplY3RzW21zZ0NoaWxkSWRdID0gbmV3Q2hpbGQ7XG5cbiAgICAgIHJlc29sdmUobmV3Q2hpbGQpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIHRoZSBjYWxsYmFjayB0byBwcm9jZXNzIGNyZWF0ZSBhbmQgZGVsZXRlIG9mIGNoaWxkcmVucy5cbiAgICogQHBhcmFtIHtmdW5jdGlvbihldmVudDogTXNnRXZlbnQpfSBjYWxsYmFja1xuICAgKi9cbiAgb25BZGRDaGlsZChjYWxsYmFjaykge1xuICAgIHRoaXMuX29uQWRkQ2hpbGRyZW5IYW5kbGVyID0gY2FsbGJhY2s7XG4gIH1cblxuICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBEYXRhT2JqZWN0IC0+IGFkZENoaWxkXG4gIF9vbkNoaWxkQ3JlYXRlKG1zZykge1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG4gICAgbGV0IG1zZ0NoaWxkSWQgPSBtc2cuYm9keS5yZXNvdXJjZTtcblxuICAgIGNvbnNvbGUubG9nKCdjcmVhdGUtb2JzZXJ2ZXItY2hpbGQoICcgKyBfdGhpcy5fb3duZXIgKyAnICk6ICcsIG1zZyk7XG4gICAgbGV0IG5ld0NoaWxkID0gbmV3IERhdGFPYmplY3RDaGlsZChfdGhpcywgbXNnQ2hpbGRJZCwgbXNnLmJvZHkudmFsdWUpO1xuICAgIF90aGlzLl9jaGlsZHJlbk9iamVjdHNbbXNnQ2hpbGRJZF0gPSBuZXdDaGlsZDtcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgLy9GTE9XLU9VVDogd2lsbCBmbG93IHRvIERhdGFPYmplY3RDaGlsZCAtPiBfb25SZXNwb25zZVxuICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7XG4gICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLFxuICAgICAgICBib2R5OiB7IGNvZGU6IDIwMCwgc291cmNlOiBfdGhpcy5fb3duZXIgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBsZXQgZXZlbnQgPSB7XG4gICAgICB0eXBlOiBtc2cudHlwZSxcbiAgICAgIGZyb206IG1zZy5mcm9tLFxuICAgICAgdXJsOiBtc2cudG8sXG4gICAgICB2YWx1ZTogbXNnLmJvZHkudmFsdWUsXG4gICAgICBjaGlsZElkOiBtc2dDaGlsZElkLFxuICAgICAgaWRlbnRpdHk6IG1zZy5ib2R5LmlkZW50aXR5XG4gICAgfTtcblxuICAgIGlmIChfdGhpcy5fb25BZGRDaGlsZHJlbkhhbmRsZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdBREQtQ0hJTERSRU4tRVZFTlQ6ICcsIGV2ZW50KTtcbiAgICAgIF90aGlzLl9vbkFkZENoaWxkcmVuSGFuZGxlcihldmVudCk7XG4gICAgfVxuICB9XG5cbiAgLy9zZW5kIGRlbHRhIG1lc3NhZ2VzIHRvIHN1YnNjcmlwdGlvbnNcbiAgX29uQ2hhbmdlKGV2ZW50LCBjaGlsZEluZm8pIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgX3RoaXMuX3ZlcnNpb24rKztcblxuICAgIGlmIChfdGhpcy5fc3RhdHVzID09PSAnb24nKSB7XG4gICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IGRpcmVjdGx5IHRvIGEgcmVzb3VyY2UgY2hhbmdlcyBhZGRyZXNzOiBNZXNzYWdlQnVzXG4gICAgICBsZXQgY2hhbmdlTXNnID0ge1xuICAgICAgICB0eXBlOiAndXBkYXRlJywgZnJvbTogX3RoaXMuX3VybCwgdG86IF90aGlzLl91cmwgKyAnL2NoYW5nZXMnLFxuICAgICAgICBib2R5OiB7IHZlcnNpb246IF90aGlzLl92ZXJzaW9uLCBzb3VyY2U6IF90aGlzLl9vd25lciwgYXR0cmlidXRlOiBldmVudC5maWVsZCB9XG4gICAgICB9O1xuXG4gICAgICBjb25zb2xlLmxvZygnW0RhdGFPYmplY3QgLSBfb25DaGFuZ2VdIC0gJywgZXZlbnQsIGNoaWxkSW5mbywgY2hhbmdlTXNnKTtcblxuICAgICAgaWYgKGV2ZW50Lm9UeXBlID09PSBPYmplY3RUeXBlLk9CSkVDVCkge1xuICAgICAgICBpZiAoZXZlbnQuY1R5cGUgIT09IENoYW5nZVR5cGUuUkVNT1ZFKSB7XG4gICAgICAgICAgY2hhbmdlTXNnLmJvZHkudmFsdWUgPSBldmVudC5kYXRhO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGFuZ2VNc2cuYm9keS5hdHRyaWJ1dGVUeXBlID0gZXZlbnQub1R5cGU7XG4gICAgICAgIGNoYW5nZU1zZy5ib2R5LnZhbHVlID0gZXZlbnQuZGF0YTtcbiAgICAgICAgaWYgKGV2ZW50LmNUeXBlICE9PSBDaGFuZ2VUeXBlLlVQREFURSkge1xuICAgICAgICAgIGNoYW5nZU1zZy5ib2R5Lm9wZXJhdGlvbiA9IGV2ZW50LmNUeXBlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vY2hpbGRJbmZvIG11c3QgaGF2ZSAocGF0aCwgY2hpbGRJZClcbiAgICAgIGlmIChjaGlsZEluZm8pIHtcbiAgICAgICAgY2hhbmdlTXNnLnRvID0gY2hpbGRJbmZvLnBhdGg7XG4gICAgICAgIGNoYW5nZU1zZy5ib2R5LnJlc291cmNlID0gY2hpbGRJbmZvLmNoaWxkSWQ7XG4gICAgICB9XG5cbiAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoY2hhbmdlTXNnKTtcbiAgICB9XG4gIH1cblxuICAvL0ZMT1ctSU46IGRlbHRhIG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBEYXRhT2JqZWN0UmVwb3J0ZXIgb3IgRGF0YU9iamVjdENoaWxkIHdoZW4gY2hhbmdpbmcgZGF0YVxuICBfY2hhbmdlT2JqZWN0KHN5bmNPYmosIG1zZykge1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG5cbiAgICAvL1RPRE86IHVwZGF0ZSB2ZXJzaW9uID9cbiAgICAvL2hvdyB0byBoYW5kbGUgYW4gaW5jb3JyZWN0IHZlcnNpb24gPyBFeGFtcGxlOiByZWNlaXZlIGEgdmVyc2lvbiAzIHdoZW4gdGhlIG9ic2VydmVyIGlzIGluIHZlcnNpb24gMSwgd2hlcmUgaXMgdGhlIHZlcnNpb24gMiA/XG4gICAgLy93aWxsIHdlIG5lZWQgdG8gY29uZmlybSB0aGUgcmVjZXB0aW9uID9cbiAgICBpZiAoX3RoaXMuX3ZlcnNpb24gKyAxID09PSBtc2cuYm9keS52ZXJzaW9uKSB7XG4gICAgICBfdGhpcy5fdmVyc2lvbisrO1xuICAgICAgbGV0IHBhdGggPSBtc2cuYm9keS5hdHRyaWJ1dGU7XG4gICAgICBsZXQgdmFsdWUgPSBkZWVwQ2xvbmUobXNnLmJvZHkudmFsdWUpO1xuICAgICAgbGV0IGZpbmRSZXN1bHQgPSBzeW5jT2JqLmZpbmRCZWZvcmUocGF0aCk7XG5cbiAgICAgIGlmIChtc2cuYm9keS5hdHRyaWJ1dGVUeXBlID09PSBPYmplY3RUeXBlLkFSUkFZKSB7XG4gICAgICAgIGlmIChtc2cuYm9keS5vcGVyYXRpb24gPT09IENoYW5nZVR5cGUuQUREKSB7XG4gICAgICAgICAgbGV0IGFyciA9IGZpbmRSZXN1bHQub2JqO1xuICAgICAgICAgIGxldCBpbmRleCA9IGZpbmRSZXN1bHQubGFzdDtcbiAgICAgICAgICBBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KGFyciwgW2luZGV4LCAwXS5jb25jYXQodmFsdWUpKTtcbiAgICAgICAgfSBlbHNlIGlmIChtc2cuYm9keS5vcGVyYXRpb24gPT09IENoYW5nZVR5cGUuUkVNT1ZFKSB7XG4gICAgICAgICAgbGV0IGFyciA9IGZpbmRSZXN1bHQub2JqO1xuICAgICAgICAgIGxldCBpbmRleCA9IGZpbmRSZXN1bHQubGFzdDtcbiAgICAgICAgICBhcnIuc3BsaWNlKGluZGV4LCB2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmluZFJlc3VsdC5vYmpbZmluZFJlc3VsdC5sYXN0XSA9IHZhbHVlOyAvLyBVUERBVEVcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKG1zZy5ib2R5LnZhbHVlKSB7XG4gICAgICAgICAgZmluZFJlc3VsdC5vYmpbZmluZFJlc3VsdC5sYXN0XSA9IHZhbHVlOyAvLyBVUERBVEUgb3IgQUREXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVsZXRlIGZpbmRSZXN1bHQub2JqW2ZpbmRSZXN1bHQubGFzdF07IC8vIFJFTU9WRVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vVE9ETzogaG93IHRvIGhhbmRsZSB1bnN5bmNocm9uaXplZCB2ZXJzaW9ucz9cbiAgICAgIGNvbnNvbGUubG9nKCdVTlNZTkNIUk9OSVpFRCBWRVJTSU9OOiAoZGF0YSA9PiAnICsgX3RoaXMuX3ZlcnNpb24gKyAnLCBtc2cgPT4gJyArIG1zZy5ib2R5LnZlcnNpb24gKyAnKScpO1xuICAgIH1cbiAgfVxuXG4gIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIGEgcmVtb3RlIERhdGFPYmplY3RDaGlsZCB3aGVuIGNoYW5naW5nIGRhdGFcbiAgX2NoYW5nZUNoaWxkcmVuKG1zZykge1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG4gICAgY29uc29sZS5sb2coJ0NoYW5nZSBjaGlsZHJlbjogJywgX3RoaXMuX293bmVyLCBtc2cpO1xuXG4gICAgbGV0IGNoaWxkSWQgPSBtc2cuYm9keS5yZXNvdXJjZTtcbiAgICBsZXQgY2hpbGRyZW4gPSBfdGhpcy5fY2hpbGRyZW5PYmplY3RzW2NoaWxkSWRdO1xuXG4gICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICBfdGhpcy5fY2hhbmdlT2JqZWN0KGNoaWxkcmVuLl9zeW5jT2JqLCBtc2cpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygnTm8gY2hpbGRyZW4gZm91bmQgZm9yOiAnLCBjaGlsZElkKTtcbiAgICB9XG4gIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBEYXRhT2JqZWN0O1xuIiwiLyoqXG4qIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQVxuKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRFxuKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0xcbiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlZcbiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBXG4qIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUdcbiogQ29weXJpZ2h0IDIwMTYgQXBpemVlXG4qIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOXG4qXG4qIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4qIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbioqL1xuXG5pbXBvcnQgU3luY09iamVjdCBmcm9tICcuL1Byb3h5T2JqZWN0JztcblxuLyoqXG4gKiBUaGUgY2xhc3MgcmV0dXJuZWQgZnJvbSB0aGUgRGF0YU9iamVjdCBhZGRDaGlsZHJlbiBjYWxsIG9yIGZyb20gb25BZGRDaGlsZHJlbiBpZiByZW1vdGVseSBjcmVhdGVkLlxuICogQ2hpbGRyZW4gb2JqZWN0IHN5bmNocm9uaXphdGlvbiBpcyBhIGEgZmFzdCBmb3J3YXJkIG1lY2hhbmlzbSwgbm8gbmVlZCBmb3IgZGlyZWN0IHN1YnNjcmlwdGlvbnMsIGl0IHVzZXMgdGhlIGFscmVhZHkgYXV0aG9yaXplZCBzdWJzY3JpcHRpb24gZnJvbSB0aGUgcGFyZW50IERhdGFPYmplY3QuXG4gKi9cbmNsYXNzIERhdGFPYmplY3RDaGlsZCAvKiBpbXBsZW1lbnRzIFN5bmNTdGF0dXMgKi8ge1xuICAvKiBwcml2YXRlXG5cbiAgLS0tLWV2ZW50IGhhbmRsZXJzLS0tLVxuICBfb25SZXNwb25zZUhhbmRsZXI6IChldmVudCkgPT4gdm9pZFxuICAqL1xuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqIFNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseSBieSBIeXBlcnRpZXMuIEl0J3MgY2FsbGVkIGJ5IHRoZSBEYXRhT2JqZWN0LmFkZENoaWxkcmVuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihwYXJlbnQsIGNoaWxkSWQsIGluaXRpYWxEYXRhLCBvd25lciwgbXNnSWQpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgX3RoaXMuX3BhcmVudCA9IHBhcmVudDtcbiAgICBfdGhpcy5fY2hpbGRJZCA9IGNoaWxkSWQ7XG4gICAgX3RoaXMuX293bmVyID0gb3duZXI7XG4gICAgX3RoaXMuX21zZ0lkID0gbXNnSWQ7XG5cbiAgICBfdGhpcy5fc3luY09iaiA9IG5ldyBTeW5jT2JqZWN0KGluaXRpYWxEYXRhKTtcblxuICAgIF90aGlzLl9idXMgPSBwYXJlbnQuX2J1cztcbiAgICBfdGhpcy5fYWxsb2NhdGVMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIF9hbGxvY2F0ZUxpc3RlbmVycygpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgLy90aGlzIGlzIG9ubHkgbmVlZGVkIGZvciBjaGlsZHJlbiByZXBvcnRlcnNcbiAgICBpZiAoX3RoaXMuX293bmVyKSB7XG4gICAgICBfdGhpcy5fbGlzdGVuZXIgPSBfdGhpcy5fYnVzLmFkZExpc3RlbmVyKF90aGlzLl9vd25lciwgKG1zZykgPT4ge1xuICAgICAgICBpZiAobXNnLnR5cGUgPT09ICdyZXNwb25zZScgJiYgbXNnLmlkID09PSBfdGhpcy5fbXNnSWQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnRGF0YU9iamVjdENoaWxkLm9uUmVzcG9uc2U6JywgbXNnKTtcbiAgICAgICAgICBfdGhpcy5fb25SZXNwb25zZShtc2cpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBfcmVsZWFzZUxpc3RlbmVycygpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgaWYgKF90aGlzLl9saXN0ZW5lcikge1xuICAgICAgX3RoaXMuX2xpc3RlbmVyLnJlbW92ZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWxlYXNlIGFuZCBkZWxldGUgb2JqZWN0IGRhdGFcbiAgICovXG4gIGRlbGV0ZSgpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgZGVsZXRlIF90aGlzLl9wYXJlbnQuX2NoaWxkcmVuW190aGlzLl9jaGlsZElkXTtcblxuICAgIF90aGlzLl9yZWxlYXNlTGlzdGVuZXJzKCk7XG5cbiAgICAvL1RPRE86IHNlbmQgZGVsZXRlIG1lc3NhZ2UgP1xuICB9XG5cbiAgLyoqXG4gICAqIENoaWxkcmVuIElEIGdlbmVyYXRlZCBvbiBhZGRDaGlsZHJlbi4gVW5pcXVlIGlkZW50aWZpZXJcbiAgICogQHR5cGUge1VSTH0gLSBVUkwgb2YgdGhlIGZvcm1hdCA8SHlwZXJ0eVVSTD4jPG51bWVyaWMtc2VxdWVuY2U+XG4gICAqL1xuICBnZXQgY2hpbGRJZCgpIHsgcmV0dXJuIHRoaXMuX2NoaWxkSWQ7IH1cblxuICAvKipcbiAgICogRGF0YSBTdHJ1Y3R1cmUgdG8gYmUgc3luY2hyb25pemVkLlxuICAgKiBAdHlwZSB7SlNPTn0gLSBKU09OIHN0cnVjdHVyZSB0aGF0IHNob3VsZCBmb2xsb3cgdGhlIGRlZmluZWQgc2NoZW1hLCBpZiBhbnkuXG4gICAqL1xuICBnZXQgZGF0YSgpIHsgcmV0dXJuIHRoaXMuX3N5bmNPYmouZGF0YTsgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciB0aGUgY2hhbmdlIGxpc3RlbmVycyBzZW50IGJ5IHRoZSByZXBvcnRlciBjaGlsZFxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50OiBNc2dFdmVudCl9IGNhbGxiYWNrXG4gICAqL1xuICBvbkNoYW5nZShjYWxsYmFjaykge1xuICAgIHRoaXMuX3N5bmNPYmoub2JzZXJ2ZSgoZXZlbnQpID0+IHtcbiAgICAgIGNhbGxiYWNrKGV2ZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCB0aGUgY2FsbGJhY2sgdG8gcHJvY2VzcyByZXNwb25zZSBub3RpZmljYXRpb25zIG9mIHRoZSBjcmVhdGVzXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2tcbiAgICovXG4gIG9uUmVzcG9uc2UoY2FsbGJhY2spIHtcbiAgICB0aGlzLl9vblJlc3BvbnNlSGFuZGxlciA9IGNhbGxiYWNrO1xuICB9XG5cbiAgLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gYSByZW1vdGUgRGF0YU9iamVjdCAtPiBfb25DaGlsZENyZWF0ZVxuICBfb25SZXNwb25zZShtc2cpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgbGV0IGV2ZW50ID0ge1xuICAgICAgdHlwZTogbXNnLnR5cGUsXG4gICAgICB1cmw6IG1zZy5ib2R5LnNvdXJjZSxcbiAgICAgIGNvZGU6IG1zZy5ib2R5LmNvZGVcbiAgICB9O1xuXG4gICAgaWYgKF90aGlzLl9vblJlc3BvbnNlSGFuZGxlcikge1xuICAgICAgX3RoaXMuX29uUmVzcG9uc2VIYW5kbGVyKGV2ZW50KTtcbiAgICB9XG4gIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBEYXRhT2JqZWN0Q2hpbGQ7XG4iLCIvKipcbiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBXG4qIENvcHlyaWdodCAyMDE2IElORVNDLUlEXG4qIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTFxuKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVlxuKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0FcbiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBR1xuKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWVcbiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU5cbipcbiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4qIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4qIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKiovXG5cbmltcG9ydCBEYXRhT2JqZWN0IGZyb20gJy4vRGF0YU9iamVjdCc7XG5pbXBvcnQgRGF0YU9iamVjdENoaWxkIGZyb20gJy4vRGF0YU9iamVjdENoaWxkJztcblxubGV0IEZpbHRlclR5cGUgPSB7QU5ZOiAnYW55JywgU1RBUlQ6ICdzdGFydCcsIEVYQUNUOiAnZXhhY3QnfTtcblxuLyoqXG4gKiBUaGUgY2xhc3MgcmV0dXJuZWQgZnJvbSB0aGUgU3luY2hlciBzdWJzY3JpYmUgY2FsbC5cbiAqIFRvIGJlIHVzZWQgYXMgYW4gb2JzZXJ2YXRpb24gcG9pbnQgZnJvbSBhIERhdGFPYmplY3RSZXBvcnRlciBjaGFuZ2UuXG4gKi9cbmNsYXNzIERhdGFPYmplY3RPYnNlcnZlciBleHRlbmRzIERhdGFPYmplY3QgLyogaW1wbGVtZW50cyBTeW5jU3RhdHVzICovIHtcbiAgLyogcHJpdmF0ZVxuICBfY2hhbmdlTGlzdGVuZXI6IE1zZ0xpc3RlbmVyXG5cbiAgLS0tLWV2ZW50IGhhbmRsZXJzLS0tLVxuICBfZmlsdGVyczogezxmaWx0ZXI+OiB7dHlwZTogPHN0YXJ0LCBleGFjdD4sIGNhbGxiYWNrOiA8ZnVuY3Rpb24+fSB9XG4gICovXG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICogU2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5IGJ5IEh5cGVydGllcy4gSXQncyBjYWxsZWQgYnkgdGhlIFN5bmNoZXIuc3Vic2NyaWJlIG1ldGhvZFxuICAgKi9cbiAgY29uc3RydWN0b3Ioc3luY2hlciwgdXJsLCBzY2hlbWEsIGluaXRpYWxTdGF0dXMsIGluaXRpYWxEYXRhLCBjaGlsZHJlbnMsIGluaXRpYWxWZXJzaW9uKSB7XG4gICAgc3VwZXIoc3luY2hlciwgdXJsLCBzY2hlbWEsIGluaXRpYWxTdGF0dXMsIGluaXRpYWxEYXRhLmRhdGEsIGNoaWxkcmVucyk7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIF90aGlzLl92ZXJzaW9uID0gaW5pdGlhbFZlcnNpb247XG4gICAgX3RoaXMuX2ZpbHRlcnMgPSB7fTtcblxuICAgIF90aGlzLl9zeW5jT2JqLm9ic2VydmUoKGV2ZW50KSA9PiB7XG4gICAgICBfdGhpcy5fb25GaWx0ZXIoZXZlbnQpO1xuICAgIH0pO1xuXG4gICAgLy9zZXR1cCBjaGlsZHJlbnMgZGF0YSBmcm9tIHN1YnNjcmlwdGlvblxuICAgIE9iamVjdC5rZXlzKGluaXRpYWxEYXRhLmNoaWxkcmVucykuZm9yRWFjaCgoY2hpbGRJZCkgPT4ge1xuICAgICAgbGV0IGNoaWxkRGF0YSA9IGluaXRpYWxEYXRhLmNoaWxkcmVuc1tjaGlsZElkXTtcbiAgICAgIF90aGlzLl9jaGlsZHJlbk9iamVjdHNbY2hpbGRJZF0gPSBuZXcgRGF0YU9iamVjdENoaWxkKF90aGlzLCBjaGlsZElkLCBjaGlsZERhdGEpO1xuICAgIH0pO1xuXG4gICAgX3RoaXMuX2FsbG9jYXRlTGlzdGVuZXJzKCk7XG4gIH1cblxuICBfYWxsb2NhdGVMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuX2FsbG9jYXRlTGlzdGVuZXJzKCk7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIF90aGlzLl9jaGFuZ2VMaXN0ZW5lciA9IF90aGlzLl9idXMuYWRkTGlzdGVuZXIoX3RoaXMuX3VybCArICcvY2hhbmdlcycsIChtc2cpID0+IHtcbiAgICAgIGlmIChtc2cudHlwZSA9PT0gJ3VwZGF0ZScpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnRGF0YU9iamVjdE9ic2VydmVyLScgKyBfdGhpcy5fdXJsICsgJy1SQ1Y6ICcsIG1zZyk7XG4gICAgICAgICAgX3RoaXMuX2NoYW5nZU9iamVjdChfdGhpcy5fc3luY09iaiwgbXNnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIF9yZWxlYXNlTGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLl9yZWxlYXNlTGlzdGVuZXJzKCk7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIF90aGlzLl9jaGFuZ2VMaXN0ZW5lci5yZW1vdmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWxlYXNlIGFuZCBkZWxldGUgb2JqZWN0IGRhdGFcbiAgICovXG4gIGRlbGV0ZSgpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgX3RoaXMuX3JlbGVhc2VMaXN0ZW5lcnMoKTtcbiAgICBkZWxldGUgX3RoaXMuX3N5bmNoZXIuX29ic2VydmVyc1tfdGhpcy5fdXJsXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWxlYXNlIGFuZCBkZWxldGUgb2JqZWN0IGRhdGFcbiAgICovXG4gIHVuc3Vic2NyaWJlKCkge1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG5cbiAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IHRvIHRoZSBydW50aW1lIGluc3RhbmNlIG9mIFN5bmNoZXJNYW5hZ2VyIC0+IF9vbkxvY2FsVW5TdWJzY3JpYmVcbiAgICBsZXQgdW5TdWJzY3JpYmVNc2cgPSB7XG4gICAgICB0eXBlOiAndW5zdWJzY3JpYmUnLCBmcm9tOiBfdGhpcy5fb3duZXIsIHRvOiBfdGhpcy5fc3luY2hlci5fc3ViVVJMLFxuICAgICAgYm9keTogeyByZXNvdXJjZTogX3RoaXMuX3VybCB9XG4gICAgfTtcblxuICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UodW5TdWJzY3JpYmVNc2csIChyZXBseSkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ0RhdGFPYmplY3RPYnNlcnZlci1VTlNVQlNDUklCRTogJywgcmVwbHkpO1xuICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7XG4gICAgICAgIF90aGlzLl9yZWxlYXNlTGlzdGVuZXJzKCk7XG4gICAgICAgIGRlbGV0ZSBfdGhpcy5fc3luY2hlci5fb2JzZXJ2ZXJzW190aGlzLl91cmxdO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIHRoZSBjaGFuZ2UgbGlzdGVuZXJzIHNlbnQgYnkgdGhlIHJlcG9ydGVyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmaWx0ZXIgLSBGaWx0ZXIgdGhhdCBpZGVudGlmaWVzIHRoZSBmaWVsZCAoc2VwYXJhdGVkIGRvdCBwYXRoKS4gQWNjZXB0cyAqIGF0IHRoZSBlbmQgZm9yIGEgbW9yZSB1bnJlc3RyaWN0ZWQgZmlsdGVyaW5nLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50OiBNc2dFdmVudCl9IGNhbGxiYWNrXG4gICAqL1xuICBvbkNoYW5nZShmaWx0ZXIsIGNhbGxiYWNrKSB7XG4gICAgbGV0IGtleSA9IGZpbHRlcjtcbiAgICBsZXQgZmlsdGVyT2JqID0ge1xuICAgICAgdHlwZTogRmlsdGVyVHlwZS5FWEFDVCxcbiAgICAgIGNhbGxiYWNrOiBjYWxsYmFja1xuICAgIH07XG5cbiAgICBsZXQgaWR4ID0gZmlsdGVyLmluZGV4T2YoJyonKTtcbiAgICBpZiAoaWR4ID09PSBmaWx0ZXIubGVuZ3RoIC0gMSkge1xuICAgICAgaWYgKGlkeCA9PT0gMCkge1xuICAgICAgICBmaWx0ZXJPYmoudHlwZSA9IEZpbHRlclR5cGUuQU5ZO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmlsdGVyT2JqLnR5cGUgPSBGaWx0ZXJUeXBlLlNUQVJUO1xuICAgICAgICBrZXkgPSBmaWx0ZXIuc3Vic3RyKDAsIGZpbHRlci5sZW5ndGggLSAxKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9maWx0ZXJzW2tleV0gPSBmaWx0ZXJPYmo7XG4gIH1cblxuICBfb25GaWx0ZXIoZXZlbnQpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgT2JqZWN0LmtleXMoX3RoaXMuX2ZpbHRlcnMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgbGV0IGZpbHRlciA9IF90aGlzLl9maWx0ZXJzW2tleV07XG4gICAgICBpZiAoZmlsdGVyLnR5cGUgPT09IEZpbHRlclR5cGUuQU5ZKSB7XG4gICAgICAgIC8vbWF0Y2ggYW55dGhpbmdcbiAgICAgICAgZmlsdGVyLmNhbGxiYWNrKGV2ZW50KTtcbiAgICAgIH0gZWxzZSBpZiAoZmlsdGVyLnR5cGUgPT09IEZpbHRlclR5cGUuU1RBUlQpIHtcbiAgICAgICAgLy9pZiBzdGFydHMgd2l0aCBmaWx0ZXIuLi5cbiAgICAgICAgaWYgKGV2ZW50LmZpZWxkLmluZGV4T2Yoa2V5KSA9PT0gMCkge1xuICAgICAgICAgIGZpbHRlci5jYWxsYmFjayhldmVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZmlsdGVyLnR5cGUgPT09IEZpbHRlclR5cGUuRVhBQ1QpIHtcbiAgICAgICAgLy9leGFjdCBtYXRjaFxuICAgICAgICBpZiAoZXZlbnQuZmllbGQgPT09IGtleSkge1xuICAgICAgICAgIGZpbHRlci5jYWxsYmFjayhldmVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBEYXRhT2JqZWN0T2JzZXJ2ZXI7XG4iLCIvKipcbiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBXG4qIENvcHlyaWdodCAyMDE2IElORVNDLUlEXG4qIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTFxuKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVlxuKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0FcbiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBR1xuKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWVcbiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU5cbipcbiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4qIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4qIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKiovXG5cbmltcG9ydCBEYXRhT2JqZWN0IGZyb20gJy4vRGF0YU9iamVjdCc7XG5pbXBvcnQgeyBkZWVwQ2xvbmUgfSBmcm9tICcuLi91dGlscy91dGlscy5qcyc7XG5cbi8qKlxuICogVGhlIGNsYXNzIHJldHVybmVkIGZyb20gdGhlIFN5bmNoZXIgY3JlYXRlIGNhbGwuXG4gKiBUbyBiZSB1c2VkIGFzIGEgcmVwb3J0ZXIgcG9pbnQsIGNoYW5nZXMgd2lsbCBiZSBzdWJtaXRlZCB0byBEYXRhT2JqZWN0T2JzZXJ2ZXIgaW5zdGFuY2VzLlxuICovXG5jbGFzcyBEYXRhT2JqZWN0UmVwb3J0ZXIgZXh0ZW5kcyBEYXRhT2JqZWN0IC8qIGltcGxlbWVudHMgU3luY1N0YXR1cyAqLyB7XG4gIC8qIHByaXZhdGVcbiAgX3N1YnNjcmlwdGlvbnM6IDxoeXBlcnR5VXJsOiB7IHN0YXR1czogc3RyaW5nIH0gfT5cblxuICAtLS0tZXZlbnQgaGFuZGxlcnMtLS0tXG4gIF9vblN1YnNjcmlwdGlvbkhhbmRsZXI6IChldmVudCkgPT4gdm9pZFxuICBfb25SZXNwb25zZUhhbmRsZXI6IChldmVudCkgPT4gdm9pZFxuICBfb25SZWFkSGFuZGxlcjogKGV2ZW50KSA9PiB2b2lkXG4gICovXG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICogU2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5IGJ5IEh5cGVydGllcy4gSXQncyBjYWxsZWQgYnkgdGhlIFN5bmNoZXIuY3JlYXRlIG1ldGhvZFxuICAgKi9cbiAgY29uc3RydWN0b3Ioc3luY2hlciwgdXJsLCBzY2hlbWEsIGluaXRpYWxTdGF0dXMsIGluaXRpYWxEYXRhLCBjaGlsZHJlbnMpIHtcbiAgICBzdXBlcihzeW5jaGVyLCB1cmwsIHNjaGVtYSwgaW5pdGlhbFN0YXR1cywgaW5pdGlhbERhdGEsIGNoaWxkcmVucyk7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIF90aGlzLl9zdWJzY3JpcHRpb25zID0ge307XG5cbiAgICBfdGhpcy5fc3luY09iai5vYnNlcnZlKChldmVudCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ0RhdGFPYmplY3RSZXBvcnRlci0nICsgdXJsICsgJy1TRU5EOiAnLCBldmVudCk7XG4gICAgICBfdGhpcy5fb25DaGFuZ2UoZXZlbnQpO1xuICAgIH0pO1xuXG4gICAgX3RoaXMuX2FsbG9jYXRlTGlzdGVuZXJzKCk7XG4gIH1cblxuICBfYWxsb2NhdGVMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuX2FsbG9jYXRlTGlzdGVuZXJzKCk7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIF90aGlzLl9vYmplY3RMaXN0ZW5lciA9IF90aGlzLl9idXMuYWRkTGlzdGVuZXIoX3RoaXMuX3VybCwgKG1zZykgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ0RhdGFPYmplY3QtJyArIF90aGlzLl91cmwgKyAnLVJDVjogJywgbXNnKTtcbiAgICAgIHN3aXRjaCAobXNnLnR5cGUpIHtcbiAgICAgICAgY2FzZSAncmVzcG9uc2UnOiBfdGhpcy5fb25SZXNwb25zZShtc2cpOyBicmVhaztcbiAgICAgICAgY2FzZSAncmVhZCc6IF90aGlzLl9vblJlYWQobXNnKTsgYnJlYWs7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBfcmVsZWFzZUxpc3RlbmVycygpIHtcbiAgICBzdXBlci5fcmVsZWFzZUxpc3RlbmVycygpO1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG5cbiAgICBfdGhpcy5fb2JqZWN0TGlzdGVuZXIucmVtb3ZlKCk7XG4gIH1cblxuICAvKipcbiAgICogU2VuZCBpbnZpdGF0aW9ucyAoY3JlYXRlIG1lc3NhZ2VzKSB0byBoeXBlcnRpZXMsIG9ic2VydmVycyBsaXN0LlxuICAgKiBAcGFyYW0gIHtIeXBlcnR5VVJMW119IG9ic2VydmVycyBMaXN0IG9mIEh5cGVydHkgVVJMJ3NcbiAgICovXG4gIGludml0ZU9ic2VydmVycyhvYnNlcnZlcnMpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCB0byB0aGUgcnVudGltZSBpbnN0YW5jZSBvZiBTeW5jaGVyTWFuYWdlciAtPiBfb25DcmVhdGVcbiAgICBsZXQgaW52aXRlTXNnID0ge1xuICAgICAgdHlwZTogJ2NyZWF0ZScsIGZyb206IF90aGlzLl9zeW5jaGVyLl9vd25lciwgdG86IF90aGlzLl9zeW5jaGVyLl9zdWJVUkwsXG4gICAgICBib2R5OiB7IHJlc291cmNlOiBfdGhpcy5fdXJsLCBzY2hlbWE6IF90aGlzLl9zY2hlbWEsIHZhbHVlOiBfdGhpcy5fc3luY09iai5kYXRhLCBhdXRob3Jpc2U6IG9ic2VydmVycyB9XG4gICAgfTtcblxuICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoaW52aXRlTXNnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWxlYXNlIGFuZCBkZWxldGUgb2JqZWN0IGRhdGFcbiAgICovXG4gIGRlbGV0ZSgpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCB0byB0aGUgcnVudGltZSBpbnN0YW5jZSBvZiBTeW5jaGVyTWFuYWdlciAtPiBfb25EZWxldGVcbiAgICBsZXQgZGVsZXRlTXNnID0ge1xuICAgICAgdHlwZTogJ2RlbGV0ZScsIGZyb206IF90aGlzLl9vd25lciwgdG86IF90aGlzLl9zeW5jaGVyLl9zdWJVUkwsXG4gICAgICBib2R5OiB7IHJlc291cmNlOiBfdGhpcy5fdXJsIH1cbiAgICB9O1xuXG4gICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShkZWxldGVNc2csIChyZXBseSkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ0RhdGFPYmplY3RSZXBvcnRlci1ERUxFVEU6ICcsIHJlcGx5KTtcbiAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkge1xuICAgICAgICBfdGhpcy5fcmVsZWFzZUxpc3RlbmVycygpO1xuICAgICAgICBkZWxldGUgX3RoaXMuX3N5bmNoZXIuX3JlcG9ydGVyc1tfdGhpcy5fdXJsXTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJzY3JpcHRpb25zIHJlcXVlc3RlZCBhbmQgYWNjZXB0ZWQgdG8gdGhpcyByZXBvcnRlclxuICAgKiBAdHlwZSB7T2JqZWN0PEh5cGVydHlVUkwsIFN5bmNTdWJzY3JpcHRpb24+fVxuICAgKi9cbiAgZ2V0IHN1YnNjcmlwdGlvbnMoKSB7IHJldHVybiB0aGlzLl9zdWJzY3JpcHRpb25zOyB9XG5cbiAgLyoqXG4gICAqIFNldHVwIHRoZSBjYWxsYmFjayB0byBwcm9jZXNzIHN1YnNjcmliZSBhbmQgdW5zdWJzY3JpYmUgbm90aWZpY2F0aW9uc1xuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50OiBNc2dFdmVudCl9IGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHJlY2VpdmUgZXZlbnRzXG4gICAqL1xuICBvblN1YnNjcmlwdGlvbihjYWxsYmFjaykge1xuICAgIHRoaXMuX29uU3Vic2NyaXB0aW9uSGFuZGxlciA9IGNhbGxiYWNrO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIHRoZSBjYWxsYmFjayB0byBwcm9jZXNzIHJlc3BvbnNlIG5vdGlmaWNhdGlvbnMgb2YgdGhlIGNyZWF0ZSdzXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sgZnVuY3Rpb24gdG8gcmVjZWl2ZSBldmVudHNcbiAgICovXG4gIG9uUmVzcG9uc2UoY2FsbGJhY2spIHtcbiAgICB0aGlzLl9vblJlc3BvbnNlSGFuZGxlciA9IGNhbGxiYWNrO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIHRoZSBjYWxsYmFjayB0byBwcm9jZXNzIHJlYWQgbm90aWZpY2F0aW9uc1xuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50OiBNc2dFdmVudCl9IGNhbGxiYWNrXG4gICAqL1xuICBvblJlYWQoY2FsbGJhY2spIHtcbiAgICB0aGlzLl9vblJlYWRIYW5kbGVyID0gY2FsbGJhY2s7XG4gIH1cblxuICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBwYXJlbnQgU3luY2hlciAtPiBfb25Gb3J3YXJkXG4gIF9vbkZvcndhcmQobXNnKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0UmVwb3J0ZXItUkNWOiAnLCBtc2cpO1xuICAgIHN3aXRjaCAobXNnLmJvZHkudHlwZSkge1xuICAgICAgY2FzZSAnc3Vic2NyaWJlJzogX3RoaXMuX29uU3Vic2NyaWJlKG1zZyk7IGJyZWFrO1xuICAgICAgY2FzZSAndW5zdWJzY3JpYmUnOiBfdGhpcy5fb25VblN1YnNjcmliZShtc2cpOyBicmVhaztcbiAgICB9XG4gIH1cblxuICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSB0aGlzIC0+IF9vbkZvcndhcmQ6IGVtaXR0ZWQgYnkgYSByZW1vdGUgU3luY2hlciAtPiBzdWJzY3JpYmVcbiAgX29uU3Vic2NyaWJlKG1zZykge1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG4gICAgbGV0IGh5cGVydHlVcmwgPSBtc2cuYm9keS5mcm9tO1xuXG4gICAgbGV0IGV2ZW50ID0ge1xuICAgICAgdHlwZTogbXNnLmJvZHkudHlwZSxcbiAgICAgIHVybDogaHlwZXJ0eVVybCxcblxuICAgICAgaWRlbnRpdHk6IG1zZy5ib2R5LmlkZW50aXR5LFxuXG4gICAgICBhY2NlcHQ6ICgpID0+IHtcbiAgICAgICAgLy9jcmVhdGUgbmV3IHN1YnNjcmlwdGlvblxuICAgICAgICBsZXQgc3ViID0geyB1cmw6IGh5cGVydHlVcmwsIHN0YXR1czogJ29uJyB9O1xuICAgICAgICBfdGhpcy5fc3Vic2NyaXB0aW9uc1toeXBlcnR5VXJsXSA9IHN1YjtcblxuICAgICAgICAvL3Byb2Nlc3MgYW5kIHNlbmQgY2hpbGRyZW5zIGRhdGFcbiAgICAgICAgbGV0IGNoaWxkcmVuVmFsdWVzID0ge307XG4gICAgICAgIE9iamVjdC5rZXlzKF90aGlzLl9jaGlsZHJlbk9iamVjdHMpLmZvckVhY2goKGNoaWxkSWQpID0+IHtcbiAgICAgICAgICBsZXQgY2hpbGREYXRhID0gX3RoaXMuX2NoaWxkcmVuT2JqZWN0c1tjaGlsZElkXS5kYXRhO1xuICAgICAgICAgIGNoaWxkcmVuVmFsdWVzW2NoaWxkSWRdID0gZGVlcENsb25lKGNoaWxkRGF0YSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vc2VuZCBvayByZXNwb25zZSBtZXNzYWdlXG4gICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLFxuICAgICAgICAgIGJvZHk6IHsgY29kZTogMjAwLCBzY2hlbWE6IF90aGlzLl9zY2hlbWEsIHZlcnNpb246IF90aGlzLl92ZXJzaW9uLCB2YWx1ZTogeyBkYXRhOiBkZWVwQ2xvbmUoX3RoaXMuZGF0YSksIGNoaWxkcmVuczogY2hpbGRyZW5WYWx1ZXMgfSB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzdWI7XG4gICAgICB9LFxuXG4gICAgICByZWplY3Q6IChyZWFzb24pID0+IHtcbiAgICAgICAgLy9zZW5kIHJlamVjdCByZXNwb25zZSBtZXNzYWdlXG4gICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLFxuICAgICAgICAgIGJvZHk6IHsgY29kZTogNDAzLCBkZXNjOiByZWFzb24gfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKF90aGlzLl9vblN1YnNjcmlwdGlvbkhhbmRsZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdTVUJTQ1JJUFRJT04tRVZFTlQ6ICcsIGV2ZW50KTtcbiAgICAgIF90aGlzLl9vblN1YnNjcmlwdGlvbkhhbmRsZXIoZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIHRoaXMgLT4gX29uRm9yd2FyZDogZW1pdHRlZCBieSBhIHJlbW90ZSBEYXRhT2JqZWN0T2JzZXJ2ZXIgLT4gdW5zdWJzY3JpYmVcbiAgX29uVW5TdWJzY3JpYmUobXNnKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcbiAgICBsZXQgaHlwZXJ0eVVybCA9IG1zZy5ib2R5LmZyb207XG5cbiAgICBsZXQgc3ViID0gX3RoaXMuX3N1YnNjcmlwdGlvbnNbaHlwZXJ0eVVybF07XG4gICAgZGVsZXRlIF90aGlzLl9zdWJzY3JpcHRpb25zW2h5cGVydHlVcmxdO1xuXG4gICAgbGV0IGV2ZW50ID0ge1xuICAgICAgdHlwZTogbXNnLmJvZHkudHlwZSxcbiAgICAgIHVybDogaHlwZXJ0eVVybCxcbiAgICAgIG9iamVjdDogc3ViXG4gICAgfTtcblxuICAgIGlmIChfdGhpcy5fb25TdWJzY3JpcHRpb25IYW5kbGVyKSB7XG4gICAgICBjb25zb2xlLmxvZygnVU4tU1VCU0NSSVBUSU9OLUVWRU5UOiAnLCBldmVudCk7XG4gICAgICBfdGhpcy5fb25TdWJzY3JpcHRpb25IYW5kbGVyKGV2ZW50KTtcbiAgICB9XG4gIH1cblxuICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBSZXBvcnRlclVSTCBhZGRyZXNzOiBlbWl0ZWQgYnkgYSByZW1vdGUgU3luY2hlciAtPiBfb25SZW1vdGVDcmVhdGUgLT4gZXZlbnQuYWNrXG4gIF9vblJlc3BvbnNlKG1zZykge1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG5cbiAgICBsZXQgZXZlbnQgPSB7XG4gICAgICB0eXBlOiBtc2cudHlwZSxcbiAgICAgIHVybDogbXNnLmZyb20sXG4gICAgICBjb2RlOiBtc2cuYm9keS5jb2RlXG4gICAgfTtcblxuICAgIGlmIChfdGhpcy5fb25SZXNwb25zZUhhbmRsZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdSRVNQT05TRS1FVkVOVDogJywgZXZlbnQpO1xuICAgICAgX3RoaXMuX29uUmVzcG9uc2VIYW5kbGVyKGV2ZW50KTtcbiAgICB9XG4gIH1cblxuICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBSZXBvcnRlclVSTCBhZGRyZXNzOiBlbWl0ZWQgYnkgYSByZW1vdGUgU3luY2hlciAtPiByZWFkXG4gIF9vblJlYWQobXNnKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIGxldCBldmVudCA9IHtcbiAgICAgIHR5cGU6IG1zZy50eXBlLFxuICAgICAgdXJsOiBtc2cuZnJvbSxcblxuICAgICAgYWNjZXB0OiAoKSA9PiB7XG4gICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLFxuICAgICAgICAgIGJvZHk6IHsgY29kZTogMjAwLCB2YWx1ZTogZGVlcENsb25lKF90aGlzLmRhdGEpIH1cbiAgICAgICAgfSk7XG4gICAgICB9LFxuXG4gICAgICByZWplY3Q6IChyZWFzb24pID0+IHtcbiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sXG4gICAgICAgICAgYm9keTogeyBjb2RlOiA0MDEsIGRlc2M6IHJlYXNvbiB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoX3RoaXMuX29uUmVhZEhhbmRsZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdSRUFELUVWRU5UOiAnLCBldmVudCk7XG4gICAgICBfdGhpcy5fb25SZWFkSGFuZGxlcihldmVudCk7XG4gICAgfVxuICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGF0YU9iamVjdFJlcG9ydGVyO1xuIiwiLyoqXG4qIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQVxuKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRFxuKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0xcbiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlZcbiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBXG4qIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUdcbiogQ29weXJpZ2h0IDIwMTYgQXBpemVlXG4qIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOXG4qXG4qIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4qIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbioqL1xuXG4vKipcbiAqIEBhY2Nlc3MgcHJpdmF0ZVxuICogVGhpcyBjbGFzcyBpcyByZXNwb25zaWJsZSBmb3IgY29sbGVjdGluZyBkZWx0YSBjaGFuZ2VzIGluIHJlbW90ZSBvYmplY3RzLCBiZWZvcmUgdGhlIHJlc3BvbnNlIG9mIHN1YnNjcmlwdGlvbiByZWFjaCB0aGUgb2JzZXJ2ZXIuXG4gKiBJdCdzIHVzZWQgaW4gU3luY2hlciAtPiBzdWJzY3JpYmUuIFRoZSBmbG93IGlzIGRlZmluZWQgYXM6XG4gKiAxLiAob2JzZXJ2ZXIpIC0tc3Vic2NyaWJlLS0+IChyZXBvcnRlcilcbiAqIDIuIChvYnNlcnZlcikgPC0tZGVsdGEgdXBkYXRlcy0tIChyZXBvcnRlcilcbiAqIDMuIChvYnNlcnZlcikgPC0tc3Vic2NyaWJlIHJlc3BvbnNlLS0gKHJlcG9ydGVyKVxuICogVGhpcyBtZWFucyB0aGF0IHRoZXJlIGNvdWxkIGJlIGRlbHRhIHVwZGF0ZXMgdHJhbnNmZXJyZWQgYmVmb3JlIHRoZSBzdWJzY3JpcHRpb24gY29uZmlybWF0aW9uLlxuICogU2luY2UgdGhlcmUgaXMgbm8gRGF0YU9iamVjdE9ic2VydmVyIGJlZm9yZSB0aGUgdWJzY3JpcHRpb24gY29uZmlybWF0aW9uLCB0aGVyZSBzaG91bGQgYmUgc29tZSBvdGhlciBvYmplY3QgY29sbGVjdGluZyB0aGUgdXBkYXRlcy5cbiAqIFByb3Zpc2lvbmFsIGRhdGEgaXMgYXBwbGllZCB0byB0aGUgRGF0YU9iamVjdE9ic2VydmVyIGFmdGVyIGNvbmZpcm1hdGlvbi4gT3IgZGlzY2FyZGVkIGlmIHRoZXJlIGlzIG5vIGNvbmZpcm1hdGlvbi5cbiAqL1xuY2xhc3MgRGF0YVByb3Zpc2lvbmFsIHtcbiAgLyogcHJpdmF0ZVxuICBfY2hpbGRyZW5MaXN0ZW5lcnM6IFtNc2dMaXN0ZW5lcl1cbiAgX2xpc3RlbmVyOiBNc2dMaXN0ZW5lclxuXG4gIF9jaGFuZ2VzOiBbXVxuICAqL1xuXG4gIGNvbnN0cnVjdG9yKG93bmVyLCB1cmwsIGJ1cywgY2hpbGRyZW4pIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgX3RoaXMuX293bmVyID0gb3duZXI7XG4gICAgX3RoaXMuX3VybCA9IHVybDtcbiAgICBfdGhpcy5fYnVzID0gYnVzO1xuICAgIF90aGlzLl9jaGlsZHJlbiA9IGNoaWxkcmVuO1xuXG4gICAgX3RoaXMuX2NoYW5nZXMgPSBbXTtcbiAgICBfdGhpcy5fYWxsb2NhdGVMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIF9hbGxvY2F0ZUxpc3RlbmVycygpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgX3RoaXMuX2xpc3RlbmVyID0gX3RoaXMuX2J1cy5hZGRMaXN0ZW5lcihfdGhpcy5fdXJsLCAobXNnKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnRGF0YVByb3Zpc2lvbmFsLScgKyBfdGhpcy5fdXJsICsgJy1SQ1Y6ICcsIG1zZyk7XG4gICAgICBfdGhpcy5fY2hhbmdlcy5wdXNoKG1zZyk7XG4gICAgfSk7XG5cbiAgICAvKlxuICAgIF90aGlzLl9jaGlsZHJlbkxpc3RlbmVycyA9IFtdO1xuICAgIGlmIChfdGhpcy5fY2hpbGRyZW4pIHtcbiAgICAgIGxldCBjaGlsZEJhc2VVUkwgPSB1cmwgKyAnL2NoaWxkcmVuLyc7XG4gICAgICBfdGhpcy5fY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICAgICAgbGV0IGNoaWxkVVJMID0gY2hpbGRCYXNlVVJMICsgY2hpbGQ7XG4gICAgICAgIGxldCBsaXN0ZW5lciA9IF90aGlzLl9idXMuYWRkTGlzdGVuZXIoY2hpbGRVUkwsIChtc2cpID0+IHtcbiAgICAgICAgICAvL2lnbm9yZSBtc2cgc2VudCBieSBoaW1zZWxmXG4gICAgICAgICAgaWYgKG1zZy5mcm9tICE9PSBvd25lcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2cobXNnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIF90aGlzLl9jaGlsZHJlbkxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICAgIH0pO1xuICAgIH0qL1xuICB9XG5cbiAgX3JlbGVhc2VMaXN0ZW5lcnMoKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIF90aGlzLl9saXN0ZW5lci5yZW1vdmUoKTtcblxuICAgIC8qX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzLmZvckVhY2goKGxpc3RlbmVyKSA9PiB7XG4gICAgICBsaXN0ZW5lci5yZW1vdmUoKTtcbiAgICB9KTsqL1xuICB9XG5cbiAgZ2V0IGNoaWxkcmVuKCkgeyByZXR1cm4gdGhpcy5fY2hpbGRyZW47IH1cblxuICBhcHBseShvYnNlcnZlcikge1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG4gICAgX3RoaXMuX2NoYW5nZXMuZm9yRWFjaCgoY2hhbmdlKSA9PiB7XG4gICAgICBvYnNlcnZlci5fY2hhbmdlT2JqZWN0KG9ic2VydmVyLl9zeW5jT2JqLCBjaGFuZ2UpO1xuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IERhdGFQcm92aXNpb25hbDtcbiIsImltcG9ydCAncHJveHktb2JzZXJ2ZSc7XG5cbi8qKlxuICogQGFjY2VzcyBwcml2YXRlXG4gKiBNYWluIGNsYXNzIHRoYXQgbWFpbnRhaW5zIGEgSlNPTiBvYmplY3QsIGFuZCBvYnNlcnZlcyBjaGFuZ2VzIGluIHRoaXMgb2JqZWN0LCByZWN1cnNpdmVseS5cbiAqIEludGVybmFsIG9iamVjdHMgYW5kIGFycmF5cyBhcmUgYWxzbyBvYnNlcnZlZC5cbiAqL1xuY2xhc3MgU3luY09iamVjdCB7XG5cbiAgY29uc3RydWN0b3IoaW5pdGlhbERhdGEpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgX3RoaXMuX29ic2VydmVycyA9IFtdO1xuICAgIF90aGlzLl9maWx0ZXJzID0ge307XG5cbiAgICB0aGlzLl9kYXRhID0gaW5pdGlhbERhdGEgfHwge307XG5cbiAgICB0aGlzLl9pbnRlcm5hbE9ic2VydmUodGhpcy5fZGF0YSk7XG4gIH1cblxuICBnZXQgZGF0YSgpIHsgcmV0dXJuIHRoaXMuX2RhdGE7IH1cblxuICBvYnNlcnZlKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5fb2JzZXJ2ZXJzLnB1c2goY2FsbGJhY2spO1xuICB9XG5cbiAgZmluZChwYXRoKSB7XG4gICAgbGV0IGxpc3QgPSBwYXRoLnNwbGl0KCcuJyk7XG5cbiAgICByZXR1cm4gdGhpcy5fZmluZFdpdGhTcGxpdChsaXN0KTtcbiAgfVxuXG4gIGZpbmRCZWZvcmUocGF0aCkge1xuICAgIGxldCByZXN1bHQgPSB7fTtcbiAgICBsZXQgbGlzdCA9IHBhdGguc3BsaXQoJy4nKTtcbiAgICByZXN1bHQubGFzdCA9IGxpc3QucG9wKCk7XG4gICAgcmVzdWx0Lm9iaiA9IHRoaXMuX2ZpbmRXaXRoU3BsaXQobGlzdCk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgX2ZpbmRXaXRoU3BsaXQobGlzdCkge1xuICAgIGxldCBvYmogPSB0aGlzLl9kYXRhO1xuICAgIGxpc3QuZm9yRWFjaCgodmFsdWUpID0+IHtcbiAgICAgIG9iaiA9IG9ialt2YWx1ZV07XG4gICAgfSk7XG5cbiAgICByZXR1cm4gb2JqO1xuICB9XG5cbiAgX2lzT2JzZXJ2YWJsZShvYmopIHtcbiAgICBpZiAob2JqLmNvbnN0cnVjdG9yID09PSBPYmplY3QgfHwgb2JqLmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cblxuICBfaW50ZXJuYWxPYnNlcnZlKG9iamVjdCkge1xuXG4gICAgbGV0IGhhbmRsZXIgPSAoY2hhbmdlc2V0KSA9PiB7XG5cbiAgICAgIGNoYW5nZXNldC5mb3JFYWNoKChjaGFuZ2UpID0+IHtcbiAgICAgICAgaWYgKGNoYW5nZS5uZXdWYWx1ZSAmJiBjaGFuZ2UubmV3VmFsdWUgaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICAgICAgICBpZiAoY2hhbmdlLm5ld1ZhbHVlIGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgICAgICAgICBsZXQgbyA9IE9iamVjdC5kZWVwT2JzZXJ2ZShjaGFuZ2UubmV3VmFsdWUsIGhhbmRsZXIpO1xuICAgICAgICAgICAgb2JqZWN0W2NoYW5nZS5rZXlwYXRoXSA9IG87XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGNoYW5nZS5uZXdWYWx1ZSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICBsZXQgbyA9IEFycmF5Lm9ic2VydmUoY2hhbmdlLm5ld1ZhbHVlLCBoYW5kbGVyKTtcbiAgICAgICAgICAgIG9iamVjdFtjaGFuZ2Uua2V5cGF0aF0gPSBvO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNoYW5nZXNldC5ldmVyeSgoY2hhbmdlKSA9PiB7XG4gICAgICAgIHRoaXMuX29uQ2hhbmdlcyhjaGFuZ2UpO1xuICAgICAgfSk7XG5cbiAgICB9O1xuXG4gICAgdGhpcy5fZGF0YSA9IE9iamVjdC5kZWVwT2JzZXJ2ZShvYmplY3QsIGhhbmRsZXIpO1xuXG4gIH1cblxuICBfZmlyZUV2ZW50KGV2ZW50KSB7XG4gICAgdGhpcy5fb2JzZXJ2ZXJzLmZvckVhY2goKGNhbGxiYWNrKSA9PiB7XG4gICAgICBjYWxsYmFjayhldmVudCk7XG4gICAgfSk7XG4gIH1cblxuICBfb25DaGFuZ2VzKGNoYW5nZSkge1xuXG4gICAgbGV0IG9iaiA9IGNoYW5nZS5vYmplY3Q7XG4gICAgbGV0IG9ialR5cGU7XG5cbiAgICBpZiAob2JqLmNvbnN0cnVjdG9yID09PSBPYmplY3QpIHtcbiAgICAgIG9ialR5cGUgPSBPYmplY3RUeXBlLk9CSkVDVDtcbiAgICB9XG5cbiAgICBpZiAob2JqLmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xuICAgICAgb2JqVHlwZSA9IE9iamVjdFR5cGUuQVJSQVk7XG4gICAgfVxuXG4gICAgbGV0IGZpZWxkU3RyaW5nID0gY2hhbmdlLmtleXBhdGg7XG5cbiAgICAvLyBjb25zb2xlLmxvZygnRmllbGQ6JywgZmllbGRTdHJpbmcpO1xuICAgIC8vIGNvbnNvbGUubG9nKCd0eXBlOicsIGNoYW5nZS50eXBlKTtcblxuICAgIC8vbGV0IG9sZFZhbHVlID0gY2hhbmdlLm9sZFZhbHVlO1xuICAgIGxldCBuZXdWYWx1ZSA9IG9ialtjaGFuZ2UubmFtZV07XG5cbiAgICAvLyBjb25zb2xlLmluZm8oY2hhbmdlLnR5cGUgKyAnIHwgRmllbGQ6ICcgKyBmaWVsZFN0cmluZyArICcgfCBOZXcgVmFsdWU6JywgSlNPTi5zdHJpbmdpZnkobmV3VmFsdWUpKTtcblxuICAgIGlmIChjaGFuZ2UudHlwZSA9PT0gJ3VwZGF0ZScpIHtcbiAgICAgIHRoaXMuX2ZpcmVFdmVudCh7XG4gICAgICAgIGNUeXBlOiBDaGFuZ2VUeXBlLlVQREFURSxcbiAgICAgICAgb1R5cGU6IG9ialR5cGUsXG4gICAgICAgIGZpZWxkOiBmaWVsZFN0cmluZyxcbiAgICAgICAgZGF0YTogbmV3VmFsdWVcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChjaGFuZ2UudHlwZSA9PT0gJ2FkZCcpIHtcbiAgICAgIHRoaXMuX2ZpcmVFdmVudCh7XG4gICAgICAgIGNUeXBlOiBDaGFuZ2VUeXBlLkFERCxcbiAgICAgICAgb1R5cGU6IG9ialR5cGUsXG4gICAgICAgIGZpZWxkOiBmaWVsZFN0cmluZyxcbiAgICAgICAgZGF0YTogbmV3VmFsdWVcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChjaGFuZ2UudHlwZSA9PT0gJ2RlbGV0ZScpIHtcbiAgICAgIHRoaXMuX2ZpcmVFdmVudCh7XG4gICAgICAgIGNUeXBlOiBDaGFuZ2VUeXBlLlJFTU9WRSxcbiAgICAgICAgb1R5cGU6IG9ialR5cGUsXG4gICAgICAgIGZpZWxkOiBmaWVsZFN0cmluZ1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbn1cblxuZXhwb3J0IGxldCBDaGFuZ2VUeXBlID0ge1VQREFURTogJ3VwZGF0ZScsIEFERDogJ2FkZCcsIFJFTU9WRTogJ3JlbW92ZSd9O1xuZXhwb3J0IGxldCBPYmplY3RUeXBlID0ge09CSkVDVDogJ29iamVjdCcsIEFSUkFZOiAnYXJyYXknfTtcbmV4cG9ydCBkZWZhdWx0IFN5bmNPYmplY3Q7XG4iLCIvKipcbiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBXG4qIENvcHlyaWdodCAyMDE2IElORVNDLUlEXG4qIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTFxuKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVlxuKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0FcbiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBR1xuKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWVcbiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU5cbipcbiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4qIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4qIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKiovXG5cbmltcG9ydCBEYXRhT2JqZWN0UmVwb3J0ZXIgZnJvbSAnLi9EYXRhT2JqZWN0UmVwb3J0ZXInO1xuaW1wb3J0IERhdGFPYmplY3RPYnNlcnZlciBmcm9tICcuL0RhdGFPYmplY3RPYnNlcnZlcic7XG5pbXBvcnQgRGF0YVByb3Zpc2lvbmFsIGZyb20gJy4vRGF0YVByb3Zpc2lvbmFsJztcblxuLyoqXG4gKiBUaGUgbWFpbiBjbGFzcyBmb3IgdGhlIHN5bmNoZXIgcGFja2FnZS5cbiAqIFRoZSBTeW5jaGVyIGlzIGEgc2luZ2xldG9uIGNsYXNzIHBlciBIeXBlcnR5L1VSTCBhbmQgaXQgaXMgdGhlIG93bmVyIG9mIGFsbCBjcmVhdGVkIERhdGEgU3luYyBPYmplY3RzIGFjY29yZGluZyB0byB0aGUgUmVwb3J0ZXIgLSBPYnNlcnZlciBwYXR0ZXJuLlxuICogTWFpbiBmdW5jdGlvbmFsaXR5IGlzIHRvIGNyZWF0ZSByZXBvcnRlcnMgYW5kIHRvIHN1YnNjcmliZSB0byBleGlzdGluZyBvbmVzLlxuICovXG5jbGFzcyBTeW5jaGVyIHtcbiAgLyogcHJpdmF0ZVxuICBfb3duZXI6IFVSTFxuICBfYnVzOiBNaW5pQnVzXG5cbiAgX3N1YlVSTDogVVJMXG5cbiAgX3JlcG9ydGVyczogPHVybDogRGF0YU9iamVjdFJlcG9ydGVyPlxuICBfb2JzZXJ2ZXJzOiA8dXJsOiBEYXRhT2JqZWN0T2JzZXJ2ZXI+XG4gIF9wcm92aXNpb25hbHM6IDx1cmw6IERhdGFQcm92aXNpb25hbD5cblxuICAtLS0tZXZlbnQgaGFuZGxlcnMtLS0tXG4gIF9vbk5vdGlmaWNhdGlvbkhhbmRsZXI6IChldmVudCkgPT4gdm9pZFxuICAqL1xuXG4gLyoqXG4gICogQ29uc3RydWN0b3IgdGhhdCBzaG91bGQgYmUgdXNlZCBieSB0aGUgSHlwZXJ0eSBvd25lclxuICAqIEBwYXJhbSB7SHlwZXJ0eVVSTH0gb3duZXIgLSBIeXBlcnR5IFVSTCBvd25lci4gQW4gVVJMIGFsbG9jYXRlZCBieSB0aGUgcnVudGltZSB0aGF0IHVuaXF1ZWx5IGlkZW50aWZpZXMgdGhlIEh5cGVydHkuXG4gICogQHBhcmFtIHtNaW5pQnVzfSBidXMgLSBBbiBpbnN0YW5jZSBvZiB0aGUgTWluaUJ1cyBwcm92aWRlZCBpbiB0aGUgc2FuZGJveC4gV2hlbiBhbiBvYmplY3QgKFJlcG9ydGVyIG9yIE9ic2VydmVkKSBpcyBjcmVhdGVkLCB0aGUgU3luY2hlck1hbmFnZXIgd2lsbCBhZGQgYSBsaXN0ZW5lciBpbiB0aGUgTWluaUJ1cyB0byByZWNlaXZlL3NlbmQgTWVzc2FnZXMgb2YgdGhhdCBvYmplY3QuXG4gICogQHBhcmFtIHtKU09OfSBjb25maWcgLSBDb25maWd1cmF0aW9uIGRhdGEuIFRoZSBvbmx5IHJlcXVpcmVkIGZpZWxkIGZvciBub3cgaXMgdGhlIHJ1bnRpbWVVUkwuXG4gICovXG4gY29uc3RydWN0b3Iob3duZXIsIGJ1cywgY29uZmlnKSB7XG4gICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICBfdGhpcy5fb3duZXIgPSBvd25lcjtcbiAgIF90aGlzLl9idXMgPSBidXM7XG5cbiAgIF90aGlzLl9zdWJVUkwgPSBjb25maWcucnVudGltZVVSTCArICcvc20nO1xuXG4gICBfdGhpcy5fcmVwb3J0ZXJzID0ge307XG4gICBfdGhpcy5fb2JzZXJ2ZXJzID0ge307XG4gICBfdGhpcy5fcHJvdmlzaW9uYWxzID0ge307XG5cbiAgIGJ1cy5hZGRMaXN0ZW5lcihvd25lciwgKG1zZykgPT4ge1xuICAgICAvL2lnbm9yZSBtc2cgc2VudCBieSBoaW1zZWxmXG4gICAgIGlmIChtc2cuZnJvbSAhPT0gb3duZXIpIHtcbiAgICAgICBjb25zb2xlLmxvZygnU3luY2hlci1SQ1Y6ICcsIG1zZyk7XG4gICAgICAgc3dpdGNoIChtc2cudHlwZSkge1xuICAgICAgICAgY2FzZSAnZm9yd2FyZCc6IF90aGlzLl9vbkZvcndhcmQobXNnKTsgYnJlYWs7XG4gICAgICAgICBjYXNlICdjcmVhdGUnOiBfdGhpcy5fb25SZW1vdGVDcmVhdGUobXNnKTsgYnJlYWs7XG4gICAgICAgICBjYXNlICdkZWxldGUnOiBfdGhpcy5fb25SZW1vdGVEZWxldGUobXNnKTsgYnJlYWs7XG4gICAgICAgfVxuICAgICB9XG4gICB9KTtcbiB9XG5cbiAvKipcbiAgKiBUaGUgb3duZXIgb2YgdGhlIFN5bmNoZXIgYW5kIGFsbCBjcmVhdGVkIHJlcG9ydGVycy5cbiAgKiBAdHlwZSB7SHlwZXJ0eVVSTH1cbiAgKi9cbiBnZXQgb3duZXIoKSB7IHJldHVybiB0aGlzLl9vd25lcjsgfVxuXG4gLyoqXG4gICogQWxsIG93bmVkIHJlcG9ydGVycywgdGhlIG9uZXMgdGhhdCB3ZXJlIGNyZWF0ZWQgYnkgYSBjcmVhdGVcbiAgKiBAdHlwZSB7T2JqZWN0PFVSTCwgRGF0YU9iamVjdFJlcG9ydGVyPn1cbiAgKi9cbiBnZXQgcmVwb3J0ZXJzKCkgeyByZXR1cm4gdGhpcy5fcmVwb3J0ZXJzOyB9XG5cbiAvKipcbiAgKiBBbGwgb3duZWQgb2JzZXJ2ZXJzLCB0aGUgb25lcyB0aGF0IHdlcmUgY3JlYXRlZCBieSBhIGxvY2FsIHN1YnNjcmlwdGlvblxuICAqIEB0eXBlIHtPYmplY3Q8VVJMLCBEYXRhT2JqZWN0T2JzZXJ2ZXI+fVxuICAqL1xuIGdldCBvYnNlcnZlcnMoKSB7IHJldHVybiB0aGlzLl9vYnNlcnZlcnM7IH1cblxuIC8qKlxuICAqIFJlcXVlc3QgYSBEYXRhT2JqZWN0UmVwb3J0ZXIgY3JlYXRpb24uIFRoZSBVUkwgd2lsbCBiZSBiZSByZXF1ZXN0ZWQgYnkgdGhlIGFsbG9jYXRpb24gbWVjaGFuaXNtLlxuICAqIEBwYXJhbSAge1NjaGVtYVVSTH0gc2NoZW1hIC0gSHlwZXJ0eSBDYXRhbG9ndWUgVVJMIGFkZHJlc3MgdGhhdCBjYW4gYmUgdXNlZCB0byByZXRyaWV2ZSB0aGUgSlNPTi1TY2hlbWEgZGVzY3JpYmluZyB0aGUgRGF0YSBPYmplY3Qgc2NoZW1hXG4gICogQHBhcmFtICB7SHlwZXJ0eVVSTFtdfSBvYnNlcnZlcnMgLSBMaXN0IG9mIGh5cGVydGllcyB0aGF0IGFyZSBwcmUtYXV0aG9yaXplZCBmb3Igc3Vic2NyaXB0aW9uXG4gICogQHBhcmFtICB7SlNPTn0gaW5pdGlhbERhdGEgLSBJbml0aWFsIGRhdGEgb2YgdGhlIHJlcG9ydGVyXG4gICogQHJldHVybiB7UHJvbWlzZTxEYXRhT2JqZWN0UmVwb3J0ZXI+fSBSZXR1cm4gUHJvbWlzZSB0byBhIG5ldyBSZXBvcnRlci4gVGhlIHJlcG9ydGVyIGNhbiBiZSBhY2NlcHRlZCBvciByZWplY3RlZCBieSB0aGUgUEVQXG4gICovXG4gY3JlYXRlKHNjaGVtYSwgb2JzZXJ2ZXJzLCBpbml0aWFsRGF0YSkge1xuICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgaW5pdGlhbERhdGEucmVwb3J0ZXIgPSBfdGhpcy5fb3duZXI7XG4gICBpbml0aWFsRGF0YS5zY2hlbWEgPSBzY2hlbWE7XG5cbiAgIC8vRkxPVy1PVVQ6IHRoaXMgbWVzc2FnZSB3aWxsIGJlIHNlbnQgdG8gdGhlIHJ1bnRpbWUgaW5zdGFuY2Ugb2YgU3luY2hlck1hbmFnZXIgLT4gX29uQ3JlYXRlXG4gICBsZXQgcmVxdWVzdE1zZyA9IHtcbiAgICAgdHlwZTogJ2NyZWF0ZScsIGZyb206IF90aGlzLl9vd25lciwgdG86IF90aGlzLl9zdWJVUkwsXG4gICAgIGJvZHk6IHsgc2NoZW1hOiBzY2hlbWEsIHZhbHVlOiBpbml0aWFsRGF0YSwgYXV0aG9yaXNlOiBvYnNlcnZlcnMgfVxuICAgfTtcblxuICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgLy9yZXF1ZXN0IGNyZWF0ZSB0byB0aGUgYWxsb2NhdGlvbiBzeXN0ZW0uIENhbiBiZSByZWplY3RlZCBieSB0aGUgUG9saWN5RW5naW5lLlxuICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHJlcXVlc3RNc2csIChyZXBseSkgPT4ge1xuICAgICAgIGNvbnNvbGUubG9nKCdjcmVhdGUtcmVzcG9uc2U6ICcsIHJlcGx5KTtcbiAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHtcbiAgICAgICAgIC8vcmVwb3J0ZXIgY3JlYXRpb24gYWNjZXB0ZWRcbiAgICAgICAgIGxldCBvYmpVUkwgPSByZXBseS5ib2R5LnJlc291cmNlO1xuICAgICAgICAgbGV0IG5ld09iaiA9IG5ldyBEYXRhT2JqZWN0UmVwb3J0ZXIoX3RoaXMsIG9ialVSTCwgc2NoZW1hLCAnb24nLCBpbml0aWFsRGF0YSwgcmVwbHkuYm9keS5jaGlsZHJlblJlc291cmNlcyk7XG4gICAgICAgICBfdGhpcy5fcmVwb3J0ZXJzW29ialVSTF0gPSBuZXdPYmo7XG5cbiAgICAgICAgIHJlc29sdmUobmV3T2JqKTtcbiAgICAgICB9IGVsc2Uge1xuICAgICAgICAgLy9yZXBvcnRlciBjcmVhdGlvbiByZWplY3RlZFxuICAgICAgICAgcmVqZWN0KHJlcGx5LmJvZHkuZGVzYyk7XG4gICAgICAgfVxuICAgICB9KTtcbiAgIH0pO1xuIH1cblxuIC8qKlxuICAqIFJlcXVlc3QgYSBzdWJzY3JpcHRpb24gdG8gYW4gZXhpc3RlbnQgcmVwb3J0ZXIgb2JqZWN0LlxuICAqIEBwYXJhbSB7U2NoZW1hVVJMfSBzY2hlbWEgLSBIeXBlcnR5IENhdGFsb2d1ZSBVUkwgYWRkcmVzcyB0aGF0IGNhbiBiZSB1c2VkIHRvIHJldHJpZXZlIHRoZSBKU09OLVNjaGVtYSBkZXNjcmliaW5nIHRoZSBEYXRhIE9iamVjdCBzY2hlbWFcbiAgKiBAcGFyYW0ge09iamVjdFVSTH0gb2JqVVJMIC0gQWRkcmVzcyBvZiB0aGUgZXhpc3RlbnQgcmVwb3J0ZXIgb2JqZWN0IHRvIGJlIG9ic2VydmVkXG4gICogQHJldHVybiB7UHJvbWlzZTxEYXRhT2JqZWN0T2JzZXJ2ZXI+fSBSZXR1cm4gUHJvbWlzZSB0byBhIG5ldyBvYnNlcnZlci4gSXQncyBhc3NvY2lhdGVkIHdpdGggdGhlIHJlcG9ydGVyLlxuICAqL1xuIHN1YnNjcmliZShzY2hlbWEsIG9ialVSTCkge1xuICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCB0byB0aGUgcnVudGltZSBpbnN0YW5jZSBvZiBTeW5jaGVyTWFuYWdlciAtPiBfb25Mb2NhbFN1YnNjcmliZVxuICAgbGV0IHN1YnNjcmliZU1zZyA9IHtcbiAgICAgdHlwZTogJ3N1YnNjcmliZScsIGZyb206IF90aGlzLl9vd25lciwgdG86IF90aGlzLl9zdWJVUkwsXG4gICAgIGJvZHk6IHsgc2NoZW1hOiBzY2hlbWEsIHJlc291cmNlOiBvYmpVUkwgfVxuICAgfTtcblxuICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgLy9yZXF1ZXN0IHN1YnNjcmlwdGlvblxuICAgICAvL1Byb3Zpc2lvbmFsIGRhdGEgaXMgYXBwbGllZCB0byB0aGUgRGF0YU9iamVjdE9ic2VydmVyIGFmdGVyIGNvbmZpcm1hdGlvbi4gT3IgZGlzY2FyZGVkIGlmIHRoZXJlIGlzIG5vIGNvbmZpcm1hdGlvbi5cbiAgICAgLy9mb3IgbW9yZSBpbmZvIHNlZSB0aGUgRGF0YVByb3Zpc2lvbmFsIGNsYXNzIGRvY3VtZW50YXRpb24uXG4gICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2Uoc3Vic2NyaWJlTXNnLCAocmVwbHkpID0+IHtcbiAgICAgICBjb25zb2xlLmxvZygnc3Vic2NyaWJlLXJlc3BvbnNlOiAnLCByZXBseSk7XG4gICAgICAgbGV0IG5ld1Byb3Zpc2lvbmFsID0gX3RoaXMuX3Byb3Zpc2lvbmFsc1tvYmpVUkxdO1xuICAgICAgIGRlbGV0ZSBfdGhpcy5fcHJvdmlzaW9uYWxzW29ialVSTF07XG4gICAgICAgaWYgKG5ld1Byb3Zpc2lvbmFsKSBuZXdQcm92aXNpb25hbC5fcmVsZWFzZUxpc3RlbmVycygpO1xuXG4gICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA8IDIwMCkge1xuICAgICAgICAgbmV3UHJvdmlzaW9uYWwgPSBuZXcgRGF0YVByb3Zpc2lvbmFsKF90aGlzLl9vd25lciwgb2JqVVJMLCBfdGhpcy5fYnVzLCByZXBseS5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzKTtcbiAgICAgICAgIF90aGlzLl9wcm92aXNpb25hbHNbb2JqVVJMXSA9IG5ld1Byb3Zpc2lvbmFsO1xuICAgICAgIH0gZWxzZSBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHtcbiAgICAgICAgIGxldCBuZXdPYmogPSBuZXcgRGF0YU9iamVjdE9ic2VydmVyKF90aGlzLCBvYmpVUkwsIHNjaGVtYSwgJ29uJywgcmVwbHkuYm9keS52YWx1ZSwgbmV3UHJvdmlzaW9uYWwuY2hpbGRyZW4sIHJlcGx5LmJvZHkudmVyc2lvbik7XG4gICAgICAgICBfdGhpcy5fb2JzZXJ2ZXJzW29ialVSTF0gPSBuZXdPYmo7XG5cbiAgICAgICAgIHJlc29sdmUobmV3T2JqKTtcbiAgICAgICAgIG5ld1Byb3Zpc2lvbmFsLmFwcGx5KG5ld09iaik7XG4gICAgICAgfSBlbHNlIHtcbiAgICAgICAgIHJlamVjdChyZXBseS5ib2R5LmRlc2MpO1xuICAgICAgIH1cbiAgICAgfSk7XG4gICB9KTtcbiB9XG5cbiAvKipcbiAgKiBSZXF1ZXN0IGEgcmVhZCBhY3Rpb24gb24gdGhlIHJlcG9ydGVyIG9iamVjdFxuICAqIEBwYXJhbSB7T2JqZWN0VVJMfSBvYmpVUkwgLSBVUkwgb2YgdGhlIHJlcG9ydGVyIG9iamVjdCB0byBiZSByZWFkXG4gICogQHJldHVybiB7UHJvbWlzZTxPYmplY3Q+fSBSZXR1cm4gUHJvbWlzZSB0byBsYXN0IGF2YWlsYWJsZSBkYXRhIG9mIHRoZSByZXBvcnRlclxuICAqL1xuIHJlYWQob2JqVVJMKSB7XG4gICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IGRpcmVjdGx5IHRvIHJlcG9ydGVyIG9iamVjdCAobWF5YmUgdGhlcmUgaXMgbm8gbGlzdGVuZXIgYXZhaWxhYmxlLCBzbyBpdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggTWVzc2FnZUJ1cyAtPiByZXNvbHZlKVxuICAgLy93aWxsIHJlYWNoIHRoZSByZW1vdGUgb2JqZWN0IGluIERhdGFPYmplY3RSZXBvcnRlciAtPiBfb25SZWFkXG4gICBsZXQgcmVhZE1zZyA9IHtcbiAgICAgdHlwZTogJ3JlYWQnLCBmcm9tOiBfdGhpcy5fb3duZXIsIHRvOiBvYmpVUkxcbiAgIH07XG5cbiAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UocmVhZE1zZywgKHJlcGx5KSA9PiB7XG4gICAgICAgY29uc29sZS5sb2coJ3JlYWQtcmVzcG9uc2U6ICcsIHJlcGx5KTtcbiAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHtcbiAgICAgICAgIHJlc29sdmUocmVwbHkuYm9keS52YWx1ZSk7XG4gICAgICAgfSBlbHNlIHtcbiAgICAgICAgIHJlamVjdChyZXBseS5ib2R5LmRlc2MpO1xuICAgICAgIH1cbiAgICAgfSk7XG4gICB9KTtcbiB9XG5cbiAvKipcbiAgKiBTZXR1cCB0aGUgY2FsbGJhY2sgdG8gcHJvY2VzcyBjcmVhdGUgYW5kIGRlbGV0ZSBldmVudHMgb2YgcmVtb3ZlIFJlcG9ydGVyIG9iamVjdHMuXG4gICogVGhpcyBpcyByZWxlYXRlZCB0byB0aGUgbWVzc2FnZW5zIHNlbnQgYnkgY3JlYXRlIHRvIHRoZSBvYnNlcnZlcnMgSHlwZXJ0eSBhcnJheS5cbiAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50OiBNc2dFdmVudCl9IGNhbGxiYWNrXG4gICovXG4gb25Ob3RpZmljYXRpb24oY2FsbGJhY2spIHtcbiAgIHRoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlciA9IGNhbGxiYWNrO1xuIH1cblxuIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIGEgbG9jYWwgcnVudGltZSBSZXBvcnRlck9iamVjdCAtPiBfb25SZW1vdGVTdWJzY3JpYmVcbiBfb25Gb3J3YXJkKG1zZykge1xuICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgbGV0IHJlcG9ydGVyID0gX3RoaXMuX3JlcG9ydGVyc1ttc2cuYm9keS50b107XG4gICByZXBvcnRlci5fb25Gb3J3YXJkKG1zZyk7XG4gfVxuXG4gLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gYSByZW1vdGUgU3luY2hlciAtPiBjcmVhdGUgKHRoaXMgaXMgYWN0dWFsbHkgYW4gaW52aXRhdGlvbiB0byBzdWJzY3JpYmUpXG4gX29uUmVtb3RlQ3JlYXRlKG1zZykge1xuICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgLy9yZW1vdmUgXCIvc3Vic2NyaXB0aW9uXCIgZnJvbSB0aGUgVVJMXG4gICBsZXQgcmVzb3VyY2UgPSBtc2cuZnJvbS5zbGljZSgwLCAtMTMpO1xuXG4gICBsZXQgZXZlbnQgPSB7XG4gICAgIHR5cGU6IG1zZy50eXBlLFxuICAgICBmcm9tOiBtc2cuYm9keS5zb3VyY2UsXG4gICAgIHVybDogcmVzb3VyY2UsXG4gICAgIHNjaGVtYTogbXNnLmJvZHkuc2NoZW1hLFxuICAgICB2YWx1ZTogbXNnLmJvZHkudmFsdWUsXG4gICAgIGlkZW50aXR5OiBtc2cuYm9keS5pZGVudGl0eSxcblxuICAgICBhY2s6ICh0eXBlKSA9PiB7XG4gICAgICAgbGV0IGxUeXBlID0gMjAwO1xuICAgICAgIGlmICh0eXBlKSB7XG4gICAgICAgICBsVHlwZSA9IHR5cGU7XG4gICAgICAgfVxuXG4gICAgICAgLy9zZW5kIGFjayByZXNwb25zZSBtZXNzYWdlXG4gICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7XG4gICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBtc2cuZnJvbSxcbiAgICAgICAgIGJvZHk6IHsgY29kZTogbFR5cGUgfVxuICAgICAgIH0pO1xuICAgICB9XG4gICB9O1xuXG4gICBpZiAoX3RoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlcikge1xuICAgICBjb25zb2xlLmxvZygnTk9USUZJQ0FUSU9OLUVWRU5UOiAnLCBldmVudCk7XG4gICAgIF90aGlzLl9vbk5vdGlmaWNhdGlvbkhhbmRsZXIoZXZlbnQpO1xuICAgfVxuIH1cblxuIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIGEgcmVtb3RlIERhdGFPYmplY3RSZXBvcnRlciAtPiBkZWxldGVcbiBfb25SZW1vdGVEZWxldGUobXNnKSB7XG4gICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAvL3JlbW92ZSBcIi9zdWJzY3JpcHRpb25cIiBmcm9tIHRoZSBVUkxcbiAgIGxldCByZXNvdXJjZSA9IG1zZy5ib2R5LnJlc291cmNlO1xuXG4gICBsZXQgb2JqZWN0ID0gX3RoaXMuX29ic2VydmVyc1tyZXNvdXJjZV07XG4gICBpZiAob2JqZWN0KSB7XG4gICAgIGxldCBldmVudCA9IHtcbiAgICAgICB0eXBlOiBtc2cudHlwZSxcbiAgICAgICB1cmw6IHJlc291cmNlLFxuICAgICAgIGlkZW50aXR5OiBtc2cuYm9keS5pZGVudGl0eSxcblxuICAgICAgIGFjazogKHR5cGUpID0+IHtcbiAgICAgICAgIGxldCBsVHlwZSA9IDIwMDtcbiAgICAgICAgIGlmICh0eXBlKSB7XG4gICAgICAgICAgIGxUeXBlID0gdHlwZTtcbiAgICAgICAgIH1cblxuICAgICAgICAgLy9UT0RPOiBhbnkgb3RoZXIgZGlmZmVyZW50IG9wdGlvbnMgZm9yIHRoZSByZWxlYXNlIHByb2Nlc3MsIGxpa2UgYWNjZXB0IGJ1dCBub3IgcmVsZWFzZSBsb2NhbD9cbiAgICAgICAgIGlmIChsVHlwZSA9PT0gMjAwKSB7XG4gICAgICAgICAgIG9iamVjdC5kZWxldGUoKTtcbiAgICAgICAgIH1cblxuICAgICAgICAgLy9zZW5kIGFjayByZXNwb25zZSBtZXNzYWdlXG4gICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sXG4gICAgICAgICAgIGJvZHk6IHsgY29kZTogbFR5cGUsIHNvdXJjZTogX3RoaXMuX293bmVyIH1cbiAgICAgICAgIH0pO1xuICAgICAgIH1cbiAgICAgfTtcblxuICAgICBpZiAoX3RoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlcikge1xuICAgICAgIGNvbnNvbGUubG9nKCdOT1RJRklDQVRJT04tRVZFTlQ6ICcsIGV2ZW50KTtcbiAgICAgICBfdGhpcy5fb25Ob3RpZmljYXRpb25IYW5kbGVyKGV2ZW50KTtcbiAgICAgfVxuICAgfSBlbHNlIHtcbiAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7XG4gICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sXG4gICAgICAgYm9keTogeyBjb2RlOiA0MDQsIHNvdXJjZTogX3RoaXMuX293bmVyIH1cbiAgICAgfSk7XG4gICB9XG4gfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IFN5bmNoZXI7XG4iLCIvKipcbiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBXG4qIENvcHlyaWdodCAyMDE2IElORVNDLUlEXG4qIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTFxuKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVlxuKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0FcbiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBR1xuKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWVcbiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU5cbipcbiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4qIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4qIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKiovXG4vKipcbiAqIFN1cHBvcnQgbW9kdWxlIHdpdGggc29tZSBmdW5jdGlvbnMgd2lsbCBiZSB1c2VmdWxcbiAqIEBtb2R1bGUgdXRpbHNcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIGRpdmlkZVVSTFxuICogQHR5cGUgT2JqZWN0XG4gKiBAcHJvcGVydHkge3N0cmluZ30gdHlwZSBUaGUgdHlwZSBvZiBVUkxcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBkb21haW4gVGhlIGRvbWFpbiBvZiBVUkxcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBpZGVudGl0eSBUaGUgaWRlbnRpdHkgb2YgVVJMXG4gKi9cblxuLyoqXG4gKiBEaXZpZGUgYW4gdXJsIGluIHR5cGUsIGRvbWFpbiBhbmQgaWRlbnRpdHlcbiAqIEBwYXJhbSAge1VSTC5VUkx9IHVybCAtIHVybCBhZGRyZXNzXG4gKiBAcmV0dXJuIHtkaXZpZGVVUkx9IHRoZSByZXN1bHQgb2YgZGl2aWRlVVJMXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXZpZGVVUkwodXJsKSB7XG5cbiAgaWYgKCF1cmwpIHRocm93IEVycm9yKCdVUkwgaXMgbmVlZGVkIHRvIHNwbGl0Jyk7XG5cbiAgLy8gbGV0IHJlID0gLyhbYS16QS1aLV0qKT86XFwvXFwvKD86XFwuKT8oWy1hLXpBLVowLTlAOiUuX1xcK34jPV17MiwyNTZ9XFwuW2Etel17Miw2fVxcYikqKFxcL1tcXC9cXGRcXHdcXC4tXSopKig/OltcXD9dKSooLispKi9naTtcbiAgbGV0IHJlID0gLyhbYS16QS1aLV0qKTpcXC9cXC8oPzpcXC4pPyhbLWEtekEtWjAtOUA6JS5fXFwrfiM9XXsyLDI1Nn0pKFstYS16QS1aMC05QDolLl9cXCt+Iz1cXC9dKikvZ2k7XG4gIGxldCBzdWJzdCA9ICckMSwkMiwkMyc7XG4gIGxldCBwYXJ0cyA9IHVybC5yZXBsYWNlKHJlLCBzdWJzdCkuc3BsaXQoJywnKTtcblxuICAvLyBJZiB0aGUgdXJsIGhhcyBubyBwcm90b2NvbCwgdGhlIGRlZmF1bHQgcHJvdG9jb2wgc2V0IGlzIGh0dHBzXG4gIGlmIChwYXJ0c1swXSA9PT0gdXJsKSB7XG4gICAgcGFydHNbMF0gPSAnaHR0cHMnO1xuICAgIHBhcnRzWzFdID0gdXJsO1xuICB9XG5cbiAgbGV0IHJlc3VsdCA9IHtcbiAgICB0eXBlOiBwYXJ0c1swXSxcbiAgICBkb21haW46IHBhcnRzWzFdLFxuICAgIGlkZW50aXR5OiBwYXJ0c1syXVxuICB9O1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXZpZGVFbWFpbChlbWFpbCkge1xuICBsZXQgaW5kZXhPZkF0ID0gZW1haWwuaW5kZXhPZignQCcpO1xuXG4gIGxldCByZXN1bHQgPSB7XG4gICAgdXNlcm5hbWU6IGVtYWlsLnN1YnN0cmluZygwLCBpbmRleE9mQXQpLFxuICAgIGRvbWFpbjogZW1haWwuc3Vic3RyaW5nKGluZGV4T2ZBdCArIDEsIGVtYWlsLmxlbmd0aClcbiAgfTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIE9iamVjdCBpcyBlbXB0eVxuICogQHBhcmFtICB7T2JqZWN0fSBvYmplY3QgT2JqZWN0IHRvIGJlIGNoZWNrZWRcbiAqIEByZXR1cm4ge0Jvb2xlYW59ICAgICAgIHN0YXR1cyBvZiBPYmplY3QsIGVtcHR5IG9yIG5vdCAodHJ1ZXxmYWxzZSk7XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbXB0eU9iamVjdChvYmplY3QpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKG9iamVjdCkubGVuZ3RoID4gMCA/IGZhbHNlIDogdHJ1ZTtcbn1cblxuLyoqXG4gKiBNYWtlIGEgQ09QWSBvZiB0aGUgb3JpZ2luYWwgZGF0YVxuICogQHBhcmFtICB7T2JqZWN0fSAgb2JqIC0gb2JqZWN0IHRvIGJlIGNsb25lZFxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVlcENsb25lKG9iaikge1xuICAvL1RPRE86IHNpbXBsZSBidXQgaW5lZmZpY2llbnQgSlNPTiBkZWVwIGNsb25lLi4uXG4gIGlmIChvYmopIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpO1xufVxuXG4vKipcbiAqIE9idGFpbnMgdGhlIHVzZXIgVVJMIHRoYXQgY29ycmVzcG9uZHMgdG8gYSBnaXZlbiBlbWFpbFxuICogQHBhcmFtICB7c3RyaW5nfSB1c2VyRW1haWwgVGhlIHVzZXIgZW1haWxcbiAqIEByZXR1cm4ge1VSTC5VUkx9IHVzZXJVUkwgVGhlIHVzZXIgVVJMXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRVc2VyVVJMRnJvbUVtYWlsKHVzZXJFbWFpbCkge1xuICBsZXQgaW5kZXhPZkF0ID0gdXNlckVtYWlsLmluZGV4T2YoJ0AnKTtcbiAgcmV0dXJuICd1c2VyOi8vJyArIHVzZXJFbWFpbC5zdWJzdHJpbmcoaW5kZXhPZkF0ICsgMSwgdXNlckVtYWlsLmxlbmd0aCkgKyAnLycgKyB1c2VyRW1haWwuc3Vic3RyaW5nKDAsIGluZGV4T2ZBdCk7XG59XG5cbi8qKlxuICogT2J0YWlucyB0aGUgdXNlciBlbWFpbCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEgZ2l2ZW4gVVJMXG4gKiBAcGFyYW0gIHtVUkwuVVJMfSB1c2VyVVJMIFRoZSB1c2VyIFVSTFxuICogQHJldHVybiB7c3RyaW5nfSB1c2VyRW1haWwgVGhlIHVzZXIgZW1haWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFVzZXJFbWFpbEZyb21VUkwodXNlclVSTCkge1xuICBsZXQgdXJsID0gZGl2aWRlVVJMKHVzZXJVUkwpO1xuICByZXR1cm4gdXJsLmlkZW50aXR5LnJlcGxhY2UoJy8nLCAnJykgKyAnQCcgKyB1cmwuZG9tYWluOyAvLyBpZGVudGl0eSBmaWVsZCBoYXMgJy9leGFtcGxlSUQnIGluc3RlYWQgb2YgJ2V4YW1wbGVJRCdcbn1cblxuXG4vKipcbiAqIENoZWNrIGlmIHRoZSB1c2VyIGlkZW50aWZpZXIgaXMgYWxyZWFkeSBpbiB0aGUgVVJMIGZvcm1hdCwgaWYgbm90LCBjb252ZXJ0IHRvIFVSTCBmb3JtYXRcbiAqIEBwYXJhbSAge3N0cmluZ30gICBpZGVudGlmaWVyICB1c2VyIGlkZW50aWZpZXJcbiAqIEByZXR1cm4ge3N0cmluZ30gICB1c2VyVVJMICAgIHRoZSB1c2VyIFVSTFxuICovXG5leHBvcnQgZnVuY3Rpb24gY29udmVydFRvVXNlclVSTChpZGVudGlmaWVyKSB7XG5cbiAgLy8gY2hlY2sgaWYgdGhlIGlkZW50aWZpZXIgaXMgYWxyZWFkeSBpbiB0aGUgdXJsIGZvcm1hdFxuICBpZiAoaWRlbnRpZmllci5zdWJzdHJpbmcoMCwgNykgPT09ICd1c2VyOi8vJykge1xuICAgIGxldCBkaXZpZGVkVVJMID0gZGl2aWRlVVJMKGlkZW50aWZpZXIpO1xuXG4gICAgLy9jaGVjayBpZiB0aGUgdXJsIGlzIHdlbGwgZm9ybWF0ZWRcbiAgICBpZiAoZGl2aWRlZFVSTC5kb21haW4gJiYgZGl2aWRlZFVSTC5pZGVudGl0eSkge1xuICAgICAgcmV0dXJuIGlkZW50aWZpZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93ICd1c2VyVVJMIHdpdGggd3JvbmcgZm9ybWF0JztcbiAgICB9XG5cbiAgLy9pZiBub3QsIGNvbnZlcnQgdGhlIHVzZXIgZW1haWwgdG8gVVJMIGZvcm1hdFxuICB9IGVsc2Uge1xuICAgIHJldHVybiBnZXRVc2VyVVJMRnJvbUVtYWlsKGlkZW50aWZpZXIpO1xuICB9XG59XG4iXX0=\n"]}