{"version":3,"sources":["Syncher.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","Syncher","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","Object","observe","Array","O","A","notifier","getNotifier","perform","original","type","wrappers","push","item","args","arguments","ret","apply","index","addedCount","removed","unshift","pop","len","shift","splice","start","deleteCount","wrapper","prototype","object","handler","unobserve","2","default","__esModule","core-js/library/fn/json/stringify","3","core-js/library/fn/object/create","4","core-js/library/fn/object/define-property","5","core-js/library/fn/object/get-own-property-descriptor","6","core-js/library/fn/object/get-prototype-of","7","core-js/library/fn/object/keys","8","core-js/library/fn/object/set-prototype-of","9","core-js/library/fn/promise","10","core-js/library/fn/symbol","11","instance","Constructor","TypeError","12","_interopRequireDefault","obj","_defineProperty","_defineProperty2","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","../core-js/object/define-property","13","_Object$getOwnPropertyDescriptor","_x","_x2","_x3","_again","property","receiver","Function","desc","undefined","value","getter","get","parent","getPrototypeOf","babel-runtime/core-js/object/get-own-property-descriptor","14","_Object$create","_Object$setPrototypeOf","subClass","superClass","constructor","__proto__","babel-runtime/core-js/object/create","babel-runtime/core-js/object/set-prototype-of","15","_typeof2","_typeof3","ReferenceError","../helpers/typeof","16","_Symbol","babel-runtime/core-js/symbol","17","core","it","JSON","stringify","../../modules/$.core","18","$","P","D","create","../../modules/$","19","setDesc","20","getDesc","../../modules/es6.object.get-own-property-descriptor","21","../../modules/es6.object.get-prototype-of","22","keys","../../modules/es6.object.keys","23","setPrototypeOf","../../modules/es6.object.set-prototype-of","24","Promise","../modules/$.core","../modules/es6.object.to-string","../modules/es6.promise","../modules/es6.string.iterator","../modules/web.dom.iterable","25","Symbol","../../modules/es6.object.to-string","../../modules/es6.symbol","26","27","28","isObject","./$.is-object","29","cof","TAG","ARG","T","B","callee","./$.cof","./$.wks","30","toString","slice","31","version","__e","32","aFunction","fn","that","b","c","./$.a-function","33","34","defineProperty","./$.fails","35","document","is","createElement","./$.global","36","getKeys","getSymbols","symbols","isEnum","./$","37","ctx","PROTOTYPE","$export","name","source","own","out","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","S","IS_PROTO","IS_BIND","IS_WRAP","W","C","param","./$.core","./$.ctx","38","exec","39","isArrayIter","anObject","toLength","getIterFn","iterable","entries","step","iterator","iterFn","next","done","./$.an-object","./$.is-array-iter","./$.iter-call","./$.to-length","./core.get-iterator-method","40","toIObject","getNames","windowNames","getOwnPropertyNames","getWindowNames","./$.to-iobject","41","Math","__g","42","hasOwnProperty","43","createDesc","./$.descriptors","./$.property-desc","44","documentElement","45","un","46","propertyIsEnumerable","split","47","Iterators","ITERATOR","ArrayProto","./$.iterators","48","isArray","arg","49","50","51","setToStringTag","IteratorPrototype","NAME","./$.hide","./$.set-to-string-tag","52","LIBRARY","redefine","hide","has","$iterCreate","getProto","BUGGY","FF_ITERATOR","KEYS","VALUES","returnThis","Base","DEFAULT","IS_SET","FORCED","methods","getMethod","kind","proto","DEF_VALUES","VALUES_BUG","$native","$default","values","./$.export","./$.has","./$.iter-create","./$.library","./$.redefine","53","SAFE_CLOSING","riter","from","skipClosing","safe","arr","iter","54","55","56","$Object","getOwnPropertyDescriptor","setDescs","getOwnPropertySymbols","each","forEach","57","el","58","59","head","last","notify","macrotask","set","Observer","MutationObserver","WebKitMutationObserver","process","isNode","flush","domain","exit","enter","nextTick","toggle","node","createTextNode","characterData","data","resolve","then","task","./$.task","60","fails","KEY","exp","61","bitmap","62","src","63","64","x","y","65","check","test","buggy","66","DESCRIPTORS","SPECIES","67","def","tag","stat","68","SHARED","store","69","70","71","toInteger","defined","TO_STRING","pos","String","charCodeAt","charAt","./$.defined","./$.to-integer","72","defer","channel","port","invoke","html","cel","setTask","setImmediate","clearTask","clearImmediate","MessageChannel","counter","queue","ONREADYSTATECHANGE","run","id","listner","event","port2","port1","onmessage","postMessage","addEventListener","importScripts","appendChild","removeChild","setTimeout","clear","./$.dom-create","./$.html","./$.invoke","73","ceil","floor","isNaN","74","IObject","./$.iobject","75","min","76","77","px","random","concat","78","uid","./$.shared","./$.uid","79","classof","getIteratorMethod","./$.classof","80","addToUnscopables","iterated","_t","_i","_k","Arguments","./$.add-to-unscopables","./$.iter-define","./$.iter-step","81","$getOwnPropertyDescriptor","./$.object-sap","82","toObject","$getPrototypeOf","./$.to-object","83","$keys","84","./$.set-proto","85","86","Wrapper","strictNew","forOf","setProto","same","speciesConstructor","asap","PROMISE","testResolve","sub","USE_NATIVE","P2","works","thenableThenGotten","sameConstructor","getConstructor","isThenable","PromiseCapability","reject","promise","$$resolve","$$reject","error","record","isReject","chain","v","ok","reaction","result","fail","h","console","p","isUnhandled","emit","onunhandledrejection","reason","_d","$reject","d","$resolve","executor","err","onFulfilled","onRejected","catch","capability","all","abrupt","remaining","results","alreadyCalled","race","./$.for-of","./$.iter-detect","./$.microtask","./$.redefine-all","./$.same-value","./$.set-species","./$.species-constructor","./$.strict-new","87","$at","point","./$.string-at","88","$fails","shared","wks","keyOf","$names","enumKeys","_create","$Symbol","$JSON","_stringify","setter","HIDDEN","SymbolRegistry","AllSymbols","useNative","ObjectProto","setSymbolDesc","protoDesc","wrap","sym","isSymbol","$defineProperty","$defineProperties","$create","$propertyIsEnumerable","E","$getOwnPropertyNames","names","$getOwnPropertySymbols","$stringify","replacer","$replacer","$$","buggyJSON","symbolStatics","for","keyFor","useSetter","useSimple","./$.enum-keys","./$.get-names","./$.is-array","./$.keyof","89","NodeList","HTMLCollection","./es6.array.iterator","90","w","k","H","takeRecords","_period","addedNodes","removedNodes","previousSibling","nextSibling","attributeName","attributeNamespace","oldValue","I","J","m","attributes","namespaceURI","abs","nodeType","nodeValue","childNodes","z","q","j","K","mo_id","attributeFilter","attributeOldValue","childList","subtree","characterDataOldValue","disconnect","clearTimeout","91","root","_undefined","observed","handlers","defaultAcceptList","inArray","indexOf","array","pivot","createMap","Map","size","delete","callback","getProps","func","avoid","join","replace","prop","hop","getPrototype","getDescriptor","nextFrame","requestAnimationFrame","webkitRequestAnimationFrame","initial","Date","doObserve","acceptList","performPropertyChecks","setHandler","createObjectData","runGlobalLoop","descs","frozen","isFrozen","extensible","isExtensible","properties","retrieveNotifier","descriptors","updateCheck","idx","except","descr","ovalue","odesc","addChangeRecord","deletionCheck","proplen","deliverHandlerRecords","hdata","records","changeRecords","changeRecord","recordCopy","performChange","changeType","thisObj","odata","deliverChangeRecords","92","DataObjectObserver","DataObjectReporter","_Syncher","_Syncher2","_DataObjectReporter","_DataObjectReporter2","_DataObjectObserver","_DataObjectObserver2","./syncher/DataObjectObserver","./syncher/DataObjectReporter","./syncher/Syncher","array.observe","mutationobserver-shim","object.observe","93","_promise","_promise2","_keys","_keys2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_SyncObject","_SyncObject2","_DataObjectChild","_DataObjectChild2","_utils","DataObject","syncher","url","schema","initialStatus","initialData","childrens","_this","_syncher","_url","_schema","_status","_syncObj","_childrens","_version","_childId","_childrenObjects","_childrenListeners","_owner","_bus","_this2","childBaseURL","child","childURL","listener","addListener","msg","log","_onChildCreate","_changeChildren","remove","_releaseListeners","resource","msgChildId","msgChildPath","requestMsg","to","body","msgId","newChild","onChange","_onChange","path","childId","_onAddChildrenHandler","identity","childInfo","changeMsg","attribute","field","oType","ObjectType","OBJECT","cType","ChangeType","REMOVE","attributeType","UPDATE","operation","syncObj","deepClone","findResult","findBefore","ARRAY","ADD","_arr","_index","children","_changeObject","../utils/utils.js","./DataObjectChild","./SyncObject","babel-runtime/core-js/object/keys","babel-runtime/core-js/promise","babel-runtime/helpers/classCallCheck","babel-runtime/helpers/createClass","94","DataObjectChild","owner","_parent","_msgId","_allocateListeners","_listener","_onResponse","_children","_onResponseHandler","95","_getPrototypeOf","_getPrototypeOf2","_possibleConstructorReturn2","_possibleConstructorReturn3","_get2","_get3","_inherits2","_inherits3","_DataObject2","_DataObject3","FilterType","ANY","START","EXACT","_DataObject","initialVersion","_filters","_onFilter","childData","_changeListener","_observers","unSubscribeMsg","_subURL","reply","filter","filterObj","substr","./DataObject","babel-runtime/core-js/object/get-prototype-of","babel-runtime/helpers/get","babel-runtime/helpers/inherits","babel-runtime/helpers/possibleConstructorReturn","96","_subscriptions","_responseListener","observers","inviteMsg","authorise","deleteMsg","_reporters","_onSubscriptionHandler","_onSubscribe","_onUnSubscribe","hypertyUrl","accept","status","childrenValues","97","DataProvisional","bus","_changes","observer","change","98","SyncObject","_data","_internalObserve","Path","list","_findWithSplit","_isObservable","changes","_onChanges","_prop","np","ArrayIndex","objType","fieldString","removeSize","removeValues","removeIndex","_fireEvent","addSize","addValues","reIndexFrom","_field","_fieldString","newValue","_path","_observables","_this3","arrayIndex","nPath","clone","str","99","_DataProvisional","_DataProvisional2","config","runtimeURL","_provisionals","_onForward","_onRemoteCreate","_onRemoteDelete","reporter","objURL","newObj","childrenResources","subscribeMsg","newProvisional","_onNotificationHandler","ack","lType","./DataObjectObserver","./DataObjectReporter","./DataProvisional","100","divideURL","re","subst","parts","divideEmail","email","indexOfAt","username","substring","emptyObject","parse","_stringify2","getUserURLFromEmail","userEmail","getUserEmailFromURL","userURL","convertToUserURL","identifier","dividedURL","babel-runtime/core-js/json/stringify"],"mappings":"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","file":"Syncher.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.Syncher = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nObject.observe && !Array.observe && (function(O, A) {\r\n\"use strict\";\r\n\r\nvar notifier = O.getNotifier,\r\n    perform = \"performChange\",\r\n    original = \"_original\",\r\n    type = \"splice\";\r\n\r\nvar wrappers = {\r\n    push: function push(item) {\r\n        var args = arguments,\r\n            ret = push[original].apply(this, args);\r\n\r\n        notifier(this)[perform](type, function() {\r\n            return {\r\n                index: ret - args.length,\r\n                addedCount: args.length,\r\n                removed: []\r\n            };\r\n        });\r\n\r\n        return ret;\r\n    },\r\n    unshift: function unshift(item) {\r\n        var args = arguments,\r\n            ret = unshift[original].apply(this, args);\r\n\r\n        notifier(this)[perform](type, function() {\r\n            return {\r\n                index: 0,\r\n                addedCount: args.length,\r\n                removed: []\r\n            };\r\n        });\r\n\r\n        return ret;\r\n    },\r\n    pop: function pop() {\r\n        var len = this.length,\r\n            item = pop[original].call(this);\r\n\r\n        if (this.length !== len)\r\n            notifier(this)[perform](type, function() {\r\n                return {\r\n                    index: this.length,\r\n                    addedCount: 0,\r\n                    removed: [ item ]\r\n                };\r\n            }, this);\r\n\r\n        return item;\r\n    },\r\n    shift: function shift() {\r\n        var len = this.length,\r\n            item = shift[original].call(this);\r\n\r\n        if (this.length !== len)\r\n            notifier(this)[perform](type, function() {\r\n                return {\r\n                    index: 0,\r\n                    addedCount: 0,\r\n                    removed: [ item ]\r\n                };\r\n            }, this);\r\n\r\n        return item;\r\n    },\r\n    splice: function splice(start, deleteCount) {\r\n        var args = arguments,\r\n            removed = splice[original].apply(this, args);\r\n\r\n        if (removed.length || args.length > 2)\r\n            notifier(this)[perform](type, function() {\r\n                return {\r\n                    index: start,\r\n                    addedCount: args.length - 2,\r\n                    removed: removed\r\n                };\r\n            }, this);\r\n\r\n        return removed;\r\n    }\r\n};\r\n\r\nfor (var wrapper in wrappers) {\r\n    wrappers[wrapper][original] = A.prototype[wrapper];\r\n    A.prototype[wrapper] = wrappers[wrapper];\r\n}\r\n\r\nA.observe = function(object, handler) {\r\n    return O.observe(object, handler, [ \"add\", \"update\", \"delete\", type ]);\r\n};\r\nA.unobserve = O.unobserve;\r\n\r\n})(Object, Array);\r\n\n},{}],2:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n},{\"core-js/library/fn/json/stringify\":17}],3:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };\n},{\"core-js/library/fn/object/create\":18}],4:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n},{\"core-js/library/fn/object/define-property\":19}],5:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/get-own-property-descriptor\"), __esModule: true };\n},{\"core-js/library/fn/object/get-own-property-descriptor\":20}],6:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/get-prototype-of\"), __esModule: true };\n},{\"core-js/library/fn/object/get-prototype-of\":21}],7:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };\n},{\"core-js/library/fn/object/keys\":22}],8:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };\n},{\"core-js/library/fn/object/set-prototype-of\":23}],9:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/promise\"), __esModule: true };\n},{\"core-js/library/fn/promise\":24}],10:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };\n},{\"core-js/library/fn/symbol\":25}],11:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n},{}],12:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n},{\"../core-js/object/define-property\":4}],13:[function(require,module,exports){\n\"use strict\";\n\nvar _Object$getOwnPropertyDescriptor = require(\"babel-runtime/core-js/object/get-own-property-descriptor\")[\"default\"];\n\nexports[\"default\"] = function get(_x, _x2, _x3) {\n  var _again = true;\n\n  _function: while (_again) {\n    var object = _x,\n        property = _x2,\n        receiver = _x3;\n    _again = false;\n    if (object === null) object = Function.prototype;\n\n    var desc = _Object$getOwnPropertyDescriptor(object, property);\n\n    if (desc === undefined) {\n      var parent = Object.getPrototypeOf(object);\n\n      if (parent === null) {\n        return undefined;\n      } else {\n        _x = parent;\n        _x2 = property;\n        _x3 = receiver;\n        _again = true;\n        desc = parent = undefined;\n        continue _function;\n      }\n    } else if (\"value\" in desc) {\n      return desc.value;\n    } else {\n      var getter = desc.get;\n\n      if (getter === undefined) {\n        return undefined;\n      }\n\n      return getter.call(receiver);\n    }\n  }\n};\n\nexports.__esModule = true;\n},{\"babel-runtime/core-js/object/get-own-property-descriptor\":5}],14:[function(require,module,exports){\n\"use strict\";\n\nvar _Object$create = require(\"babel-runtime/core-js/object/create\")[\"default\"];\n\nvar _Object$setPrototypeOf = require(\"babel-runtime/core-js/object/set-prototype-of\")[\"default\"];\n\nexports[\"default\"] = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = _Object$create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _Object$setPrototypeOf ? _Object$setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nexports.__esModule = true;\n},{\"babel-runtime/core-js/object/create\":3,\"babel-runtime/core-js/object/set-prototype-of\":8}],15:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};\n},{\"../helpers/typeof\":16}],16:[function(require,module,exports){\n\"use strict\";\n\nvar _Symbol = require(\"babel-runtime/core-js/symbol\")[\"default\"];\n\nexports[\"default\"] = function (obj) {\n  return obj && obj.constructor === _Symbol ? \"symbol\" : typeof obj;\n};\n\nexports.__esModule = true;\n},{\"babel-runtime/core-js/symbol\":10}],17:[function(require,module,exports){\nvar core = require('../../modules/$.core');\nmodule.exports = function stringify(it){ // eslint-disable-line no-unused-vars\n  return (core.JSON && core.JSON.stringify || JSON.stringify).apply(JSON, arguments);\n};\n},{\"../../modules/$.core\":31}],18:[function(require,module,exports){\nvar $ = require('../../modules/$');\nmodule.exports = function create(P, D){\n  return $.create(P, D);\n};\n},{\"../../modules/$\":56}],19:[function(require,module,exports){\nvar $ = require('../../modules/$');\nmodule.exports = function defineProperty(it, key, desc){\n  return $.setDesc(it, key, desc);\n};\n},{\"../../modules/$\":56}],20:[function(require,module,exports){\nvar $ = require('../../modules/$');\nrequire('../../modules/es6.object.get-own-property-descriptor');\nmodule.exports = function getOwnPropertyDescriptor(it, key){\n  return $.getDesc(it, key);\n};\n},{\"../../modules/$\":56,\"../../modules/es6.object.get-own-property-descriptor\":81}],21:[function(require,module,exports){\nrequire('../../modules/es6.object.get-prototype-of');\nmodule.exports = require('../../modules/$.core').Object.getPrototypeOf;\n},{\"../../modules/$.core\":31,\"../../modules/es6.object.get-prototype-of\":82}],22:[function(require,module,exports){\nrequire('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/$.core').Object.keys;\n},{\"../../modules/$.core\":31,\"../../modules/es6.object.keys\":83}],23:[function(require,module,exports){\nrequire('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/$.core').Object.setPrototypeOf;\n},{\"../../modules/$.core\":31,\"../../modules/es6.object.set-prototype-of\":84}],24:[function(require,module,exports){\nrequire('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.promise');\nmodule.exports = require('../modules/$.core').Promise;\n},{\"../modules/$.core\":31,\"../modules/es6.object.to-string\":85,\"../modules/es6.promise\":86,\"../modules/es6.string.iterator\":87,\"../modules/web.dom.iterable\":89}],25:[function(require,module,exports){\nrequire('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nmodule.exports = require('../../modules/$.core').Symbol;\n},{\"../../modules/$.core\":31,\"../../modules/es6.object.to-string\":85,\"../../modules/es6.symbol\":88}],26:[function(require,module,exports){\nmodule.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n},{}],27:[function(require,module,exports){\nmodule.exports = function(){ /* empty */ };\n},{}],28:[function(require,module,exports){\nvar isObject = require('./$.is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n},{\"./$.is-object\":49}],29:[function(require,module,exports){\n// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./$.cof')\n  , TAG = require('./$.wks')('toStringTag')\n  // ES3 wrong here\n  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\nmodule.exports = function(it){\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = (O = Object(it))[TAG]) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n},{\"./$.cof\":30,\"./$.wks\":78}],30:[function(require,module,exports){\nvar toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};\n},{}],31:[function(require,module,exports){\nvar core = module.exports = {version: '1.2.6'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n},{}],32:[function(require,module,exports){\n// optional / simple context binding\nvar aFunction = require('./$.a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n},{\"./$.a-function\":26}],33:[function(require,module,exports){\n// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n},{}],34:[function(require,module,exports){\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./$.fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n},{\"./$.fails\":38}],35:[function(require,module,exports){\nvar isObject = require('./$.is-object')\n  , document = require('./$.global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};\n},{\"./$.global\":41,\"./$.is-object\":49}],36:[function(require,module,exports){\n// all enumerable object keys, includes symbols\nvar $ = require('./$');\nmodule.exports = function(it){\n  var keys       = $.getKeys(it)\n    , getSymbols = $.getSymbols;\n  if(getSymbols){\n    var symbols = getSymbols(it)\n      , isEnum  = $.isEnum\n      , i       = 0\n      , key;\n    while(symbols.length > i)if(isEnum.call(it, key = symbols[i++]))keys.push(key);\n  }\n  return keys;\n};\n},{\"./$\":56}],37:[function(require,module,exports){\nvar global    = require('./$.global')\n  , core      = require('./$.core')\n  , ctx       = require('./$.ctx')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && key in target;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(param){\n        return this instanceof C ? new C(param) : C(param);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    if(IS_PROTO)(exports[PROTOTYPE] || (exports[PROTOTYPE] = {}))[key] = out;\n  }\n};\n// type bitmap\n$export.F = 1;  // forced\n$export.G = 2;  // global\n$export.S = 4;  // static\n$export.P = 8;  // proto\n$export.B = 16; // bind\n$export.W = 32; // wrap\nmodule.exports = $export;\n},{\"./$.core\":31,\"./$.ctx\":32,\"./$.global\":41}],38:[function(require,module,exports){\nmodule.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n},{}],39:[function(require,module,exports){\nvar ctx         = require('./$.ctx')\n  , call        = require('./$.iter-call')\n  , isArrayIter = require('./$.is-array-iter')\n  , anObject    = require('./$.an-object')\n  , toLength    = require('./$.to-length')\n  , getIterFn   = require('./core.get-iterator-method');\nmodule.exports = function(iterable, entries, fn, that){\n  var iterFn = getIterFn(iterable)\n    , f      = ctx(fn, that, entries ? 2 : 1)\n    , index  = 0\n    , length, step, iterator;\n  if(typeof iterFn != 'function')throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if(isArrayIter(iterFn))for(length = toLength(iterable.length); length > index; index++){\n    entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n  } else for(iterator = iterFn.call(iterable); !(step = iterator.next()).done; ){\n    call(iterator, f, step.value, entries);\n  }\n};\n},{\"./$.an-object\":28,\"./$.ctx\":32,\"./$.is-array-iter\":47,\"./$.iter-call\":50,\"./$.to-length\":75,\"./core.get-iterator-method\":79}],40:[function(require,module,exports){\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./$.to-iobject')\n  , getNames  = require('./$').getNames\n  , toString  = {}.toString;\n\nvar windowNames = typeof window == 'object' && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function(it){\n  try {\n    return getNames(it);\n  } catch(e){\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.get = function getOwnPropertyNames(it){\n  if(windowNames && toString.call(it) == '[object Window]')return getWindowNames(it);\n  return getNames(toIObject(it));\n};\n},{\"./$\":56,\"./$.to-iobject\":74}],41:[function(require,module,exports){\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n},{}],42:[function(require,module,exports){\nvar hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};\n},{}],43:[function(require,module,exports){\nvar $          = require('./$')\n  , createDesc = require('./$.property-desc');\nmodule.exports = require('./$.descriptors') ? function(object, key, value){\n  return $.setDesc(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n},{\"./$\":56,\"./$.descriptors\":34,\"./$.property-desc\":61}],44:[function(require,module,exports){\nmodule.exports = require('./$.global').document && document.documentElement;\n},{\"./$.global\":41}],45:[function(require,module,exports){\n// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function(fn, args, that){\n  var un = that === undefined;\n  switch(args.length){\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return              fn.apply(that, args);\n};\n},{}],46:[function(require,module,exports){\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./$.cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n},{\"./$.cof\":30}],47:[function(require,module,exports){\n// check on default Array iterator\nvar Iterators  = require('./$.iterators')\n  , ITERATOR   = require('./$.wks')('iterator')\n  , ArrayProto = Array.prototype;\n\nmodule.exports = function(it){\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n},{\"./$.iterators\":55,\"./$.wks\":78}],48:[function(require,module,exports){\n// 7.2.2 IsArray(argument)\nvar cof = require('./$.cof');\nmodule.exports = Array.isArray || function(arg){\n  return cof(arg) == 'Array';\n};\n},{\"./$.cof\":30}],49:[function(require,module,exports){\nmodule.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n},{}],50:[function(require,module,exports){\n// call something on iterator step with safe closing on error\nvar anObject = require('./$.an-object');\nmodule.exports = function(iterator, fn, value, entries){\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch(e){\n    var ret = iterator['return'];\n    if(ret !== undefined)anObject(ret.call(iterator));\n    throw e;\n  }\n};\n},{\"./$.an-object\":28}],51:[function(require,module,exports){\n'use strict';\nvar $              = require('./$')\n  , descriptor     = require('./$.property-desc')\n  , setToStringTag = require('./$.set-to-string-tag')\n  , IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./$.hide')(IteratorPrototype, require('./$.wks')('iterator'), function(){ return this; });\n\nmodule.exports = function(Constructor, NAME, next){\n  Constructor.prototype = $.create(IteratorPrototype, {next: descriptor(1, next)});\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n},{\"./$\":56,\"./$.hide\":43,\"./$.property-desc\":61,\"./$.set-to-string-tag\":67,\"./$.wks\":78}],52:[function(require,module,exports){\n'use strict';\nvar LIBRARY        = require('./$.library')\n  , $export        = require('./$.export')\n  , redefine       = require('./$.redefine')\n  , hide           = require('./$.hide')\n  , has            = require('./$.has')\n  , Iterators      = require('./$.iterators')\n  , $iterCreate    = require('./$.iter-create')\n  , setToStringTag = require('./$.set-to-string-tag')\n  , getProto       = require('./$').getProto\n  , ITERATOR       = require('./$.wks')('iterator')\n  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n  , FF_ITERATOR    = '@@iterator'\n  , KEYS           = 'keys'\n  , VALUES         = 'values';\n\nvar returnThis = function(){ return this; };\n\nmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function(kind){\n    if(!BUGGY && kind in proto)return proto[kind];\n    switch(kind){\n      case KEYS: return function keys(){ return new Constructor(this, kind); };\n      case VALUES: return function values(){ return new Constructor(this, kind); };\n    } return function entries(){ return new Constructor(this, kind); };\n  };\n  var TAG        = NAME + ' Iterator'\n    , DEF_VALUES = DEFAULT == VALUES\n    , VALUES_BUG = false\n    , proto      = Base.prototype\n    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n    , $default   = $native || getMethod(DEFAULT)\n    , methods, key;\n  // Fix native\n  if($native){\n    var IteratorPrototype = getProto($default.call(new Base));\n    // Set @@toStringTag to native iterators\n    setToStringTag(IteratorPrototype, TAG, true);\n    // FF fix\n    if(!LIBRARY && has(proto, FF_ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n    // fix Array#{values, @@iterator}.name in V8 / FF\n    if(DEF_VALUES && $native.name !== VALUES){\n      VALUES_BUG = true;\n      $default = function values(){ return $native.call(this); };\n    }\n  }\n  // Define iterator\n  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG]  = returnThis;\n  if(DEFAULT){\n    methods = {\n      values:  DEF_VALUES  ? $default : getMethod(VALUES),\n      keys:    IS_SET      ? $default : getMethod(KEYS),\n      entries: !DEF_VALUES ? $default : getMethod('entries')\n    };\n    if(FORCED)for(key in methods){\n      if(!(key in proto))redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n},{\"./$\":56,\"./$.export\":37,\"./$.has\":42,\"./$.hide\":43,\"./$.iter-create\":51,\"./$.iterators\":55,\"./$.library\":58,\"./$.redefine\":63,\"./$.set-to-string-tag\":67,\"./$.wks\":78}],53:[function(require,module,exports){\nvar ITERATOR     = require('./$.wks')('iterator')\n  , SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function(){ SAFE_CLOSING = true; };\n  Array.from(riter, function(){ throw 2; });\n} catch(e){ /* empty */ }\n\nmodule.exports = function(exec, skipClosing){\n  if(!skipClosing && !SAFE_CLOSING)return false;\n  var safe = false;\n  try {\n    var arr  = [7]\n      , iter = arr[ITERATOR]();\n    iter.next = function(){ safe = true; };\n    arr[ITERATOR] = function(){ return iter; };\n    exec(arr);\n  } catch(e){ /* empty */ }\n  return safe;\n};\n},{\"./$.wks\":78}],54:[function(require,module,exports){\nmodule.exports = function(done, value){\n  return {value: value, done: !!done};\n};\n},{}],55:[function(require,module,exports){\nmodule.exports = {};\n},{}],56:[function(require,module,exports){\nvar $Object = Object;\nmodule.exports = {\n  create:     $Object.create,\n  getProto:   $Object.getPrototypeOf,\n  isEnum:     {}.propertyIsEnumerable,\n  getDesc:    $Object.getOwnPropertyDescriptor,\n  setDesc:    $Object.defineProperty,\n  setDescs:   $Object.defineProperties,\n  getKeys:    $Object.keys,\n  getNames:   $Object.getOwnPropertyNames,\n  getSymbols: $Object.getOwnPropertySymbols,\n  each:       [].forEach\n};\n},{}],57:[function(require,module,exports){\nvar $         = require('./$')\n  , toIObject = require('./$.to-iobject');\nmodule.exports = function(object, el){\n  var O      = toIObject(object)\n    , keys   = $.getKeys(O)\n    , length = keys.length\n    , index  = 0\n    , key;\n  while(length > index)if(O[key = keys[index++]] === el)return key;\n};\n},{\"./$\":56,\"./$.to-iobject\":74}],58:[function(require,module,exports){\nmodule.exports = true;\n},{}],59:[function(require,module,exports){\nvar global    = require('./$.global')\n  , macrotask = require('./$.task').set\n  , Observer  = global.MutationObserver || global.WebKitMutationObserver\n  , process   = global.process\n  , Promise   = global.Promise\n  , isNode    = require('./$.cof')(process) == 'process'\n  , head, last, notify;\n\nvar flush = function(){\n  var parent, domain, fn;\n  if(isNode && (parent = process.domain)){\n    process.domain = null;\n    parent.exit();\n  }\n  while(head){\n    domain = head.domain;\n    fn     = head.fn;\n    if(domain)domain.enter();\n    fn(); // <- currently we use it only for Promise - try / catch not required\n    if(domain)domain.exit();\n    head = head.next;\n  } last = undefined;\n  if(parent)parent.enter();\n};\n\n// Node.js\nif(isNode){\n  notify = function(){\n    process.nextTick(flush);\n  };\n// browsers with MutationObserver\n} else if(Observer){\n  var toggle = 1\n    , node   = document.createTextNode('');\n  new Observer(flush).observe(node, {characterData: true}); // eslint-disable-line no-new\n  notify = function(){\n    node.data = toggle = -toggle;\n  };\n// environments with maybe non-completely correct, but existent Promise\n} else if(Promise && Promise.resolve){\n  notify = function(){\n    Promise.resolve().then(flush);\n  };\n// for other environments - macrotask based on:\n// - setImmediate\n// - MessageChannel\n// - window.postMessag\n// - onreadystatechange\n// - setTimeout\n} else {\n  notify = function(){\n    // strange IE + webpack dev server bug - use .call(global)\n    macrotask.call(global, flush);\n  };\n}\n\nmodule.exports = function asap(fn){\n  var task = {fn: fn, next: undefined, domain: isNode && process.domain};\n  if(last)last.next = task;\n  if(!head){\n    head = task;\n    notify();\n  } last = task;\n};\n},{\"./$.cof\":30,\"./$.global\":41,\"./$.task\":72}],60:[function(require,module,exports){\n// most Object methods by ES6 should accept primitives\nvar $export = require('./$.export')\n  , core    = require('./$.core')\n  , fails   = require('./$.fails');\nmodule.exports = function(KEY, exec){\n  var fn  = (core.Object || {})[KEY] || Object[KEY]\n    , exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);\n};\n},{\"./$.core\":31,\"./$.export\":37,\"./$.fails\":38}],61:[function(require,module,exports){\nmodule.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n},{}],62:[function(require,module,exports){\nvar redefine = require('./$.redefine');\nmodule.exports = function(target, src){\n  for(var key in src)redefine(target, key, src[key]);\n  return target;\n};\n},{\"./$.redefine\":63}],63:[function(require,module,exports){\nmodule.exports = require('./$.hide');\n},{\"./$.hide\":43}],64:[function(require,module,exports){\n// 7.2.9 SameValue(x, y)\nmodule.exports = Object.is || function is(x, y){\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n},{}],65:[function(require,module,exports){\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar getDesc  = require('./$').getDesc\n  , isObject = require('./$.is-object')\n  , anObject = require('./$.an-object');\nvar check = function(O, proto){\n  anObject(O);\n  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function(test, buggy, set){\n      try {\n        set = require('./$.ctx')(Function.call, getDesc(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch(e){ buggy = true; }\n      return function setPrototypeOf(O, proto){\n        check(O, proto);\n        if(buggy)O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n},{\"./$\":56,\"./$.an-object\":28,\"./$.ctx\":32,\"./$.is-object\":49}],66:[function(require,module,exports){\n'use strict';\nvar core        = require('./$.core')\n  , $           = require('./$')\n  , DESCRIPTORS = require('./$.descriptors')\n  , SPECIES     = require('./$.wks')('species');\n\nmodule.exports = function(KEY){\n  var C = core[KEY];\n  if(DESCRIPTORS && C && !C[SPECIES])$.setDesc(C, SPECIES, {\n    configurable: true,\n    get: function(){ return this; }\n  });\n};\n},{\"./$\":56,\"./$.core\":31,\"./$.descriptors\":34,\"./$.wks\":78}],67:[function(require,module,exports){\nvar def = require('./$').setDesc\n  , has = require('./$.has')\n  , TAG = require('./$.wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};\n},{\"./$\":56,\"./$.has\":42,\"./$.wks\":78}],68:[function(require,module,exports){\nvar global = require('./$.global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};\n},{\"./$.global\":41}],69:[function(require,module,exports){\n// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject  = require('./$.an-object')\n  , aFunction = require('./$.a-function')\n  , SPECIES   = require('./$.wks')('species');\nmodule.exports = function(O, D){\n  var C = anObject(O).constructor, S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n},{\"./$.a-function\":26,\"./$.an-object\":28,\"./$.wks\":78}],70:[function(require,module,exports){\nmodule.exports = function(it, Constructor, name){\n  if(!(it instanceof Constructor))throw TypeError(name + \": use the 'new' operator!\");\n  return it;\n};\n},{}],71:[function(require,module,exports){\nvar toInteger = require('./$.to-integer')\n  , defined   = require('./$.defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function(TO_STRING){\n  return function(that, pos){\n    var s = String(defined(that))\n      , i = toInteger(pos)\n      , l = s.length\n      , a, b;\n    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n},{\"./$.defined\":33,\"./$.to-integer\":73}],72:[function(require,module,exports){\nvar ctx                = require('./$.ctx')\n  , invoke             = require('./$.invoke')\n  , html               = require('./$.html')\n  , cel                = require('./$.dom-create')\n  , global             = require('./$.global')\n  , process            = global.process\n  , setTask            = global.setImmediate\n  , clearTask          = global.clearImmediate\n  , MessageChannel     = global.MessageChannel\n  , counter            = 0\n  , queue              = {}\n  , ONREADYSTATECHANGE = 'onreadystatechange'\n  , defer, channel, port;\nvar run = function(){\n  var id = +this;\n  if(queue.hasOwnProperty(id)){\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listner = function(event){\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif(!setTask || !clearTask){\n  setTask = function setImmediate(fn){\n    var args = [], i = 1;\n    while(arguments.length > i)args.push(arguments[i++]);\n    queue[++counter] = function(){\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id){\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if(require('./$.cof')(process) == 'process'){\n    defer = function(id){\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if(MessageChannel){\n    channel = new MessageChannel;\n    port    = channel.port2;\n    channel.port1.onmessage = listner;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){\n    defer = function(id){\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listner, false);\n  // IE8-\n  } else if(ONREADYSTATECHANGE in cel('script')){\n    defer = function(id){\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function(id){\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set:   setTask,\n  clear: clearTask\n};\n},{\"./$.cof\":30,\"./$.ctx\":32,\"./$.dom-create\":35,\"./$.global\":41,\"./$.html\":44,\"./$.invoke\":45}],73:[function(require,module,exports){\n// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n},{}],74:[function(require,module,exports){\n// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./$.iobject')\n  , defined = require('./$.defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};\n},{\"./$.defined\":33,\"./$.iobject\":46}],75:[function(require,module,exports){\n// 7.1.15 ToLength\nvar toInteger = require('./$.to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n},{\"./$.to-integer\":73}],76:[function(require,module,exports){\n// 7.1.13 ToObject(argument)\nvar defined = require('./$.defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};\n},{\"./$.defined\":33}],77:[function(require,module,exports){\nvar id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n},{}],78:[function(require,module,exports){\nvar store  = require('./$.shared')('wks')\n  , uid    = require('./$.uid')\n  , Symbol = require('./$.global').Symbol;\nmodule.exports = function(name){\n  return store[name] || (store[name] =\n    Symbol && Symbol[name] || (Symbol || uid)('Symbol.' + name));\n};\n},{\"./$.global\":41,\"./$.shared\":68,\"./$.uid\":77}],79:[function(require,module,exports){\nvar classof   = require('./$.classof')\n  , ITERATOR  = require('./$.wks')('iterator')\n  , Iterators = require('./$.iterators');\nmodule.exports = require('./$.core').getIteratorMethod = function(it){\n  if(it != undefined)return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n},{\"./$.classof\":29,\"./$.core\":31,\"./$.iterators\":55,\"./$.wks\":78}],80:[function(require,module,exports){\n'use strict';\nvar addToUnscopables = require('./$.add-to-unscopables')\n  , step             = require('./$.iter-step')\n  , Iterators        = require('./$.iterators')\n  , toIObject        = require('./$.to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./$.iter-define')(Array, 'Array', function(iterated, kind){\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , kind  = this._k\n    , index = this._i++;\n  if(!O || index >= O.length){\n    this._t = undefined;\n    return step(1);\n  }\n  if(kind == 'keys'  )return step(0, index);\n  if(kind == 'values')return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n},{\"./$.add-to-unscopables\":27,\"./$.iter-define\":52,\"./$.iter-step\":54,\"./$.iterators\":55,\"./$.to-iobject\":74}],81:[function(require,module,exports){\n// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\nvar toIObject = require('./$.to-iobject');\n\nrequire('./$.object-sap')('getOwnPropertyDescriptor', function($getOwnPropertyDescriptor){\n  return function getOwnPropertyDescriptor(it, key){\n    return $getOwnPropertyDescriptor(toIObject(it), key);\n  };\n});\n},{\"./$.object-sap\":60,\"./$.to-iobject\":74}],82:[function(require,module,exports){\n// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = require('./$.to-object');\n\nrequire('./$.object-sap')('getPrototypeOf', function($getPrototypeOf){\n  return function getPrototypeOf(it){\n    return $getPrototypeOf(toObject(it));\n  };\n});\n},{\"./$.object-sap\":60,\"./$.to-object\":76}],83:[function(require,module,exports){\n// 19.1.2.14 Object.keys(O)\nvar toObject = require('./$.to-object');\n\nrequire('./$.object-sap')('keys', function($keys){\n  return function keys(it){\n    return $keys(toObject(it));\n  };\n});\n},{\"./$.object-sap\":60,\"./$.to-object\":76}],84:[function(require,module,exports){\n// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./$.export');\n$export($export.S, 'Object', {setPrototypeOf: require('./$.set-proto').set});\n},{\"./$.export\":37,\"./$.set-proto\":65}],85:[function(require,module,exports){\n\n},{}],86:[function(require,module,exports){\n'use strict';\nvar $          = require('./$')\n  , LIBRARY    = require('./$.library')\n  , global     = require('./$.global')\n  , ctx        = require('./$.ctx')\n  , classof    = require('./$.classof')\n  , $export    = require('./$.export')\n  , isObject   = require('./$.is-object')\n  , anObject   = require('./$.an-object')\n  , aFunction  = require('./$.a-function')\n  , strictNew  = require('./$.strict-new')\n  , forOf      = require('./$.for-of')\n  , setProto   = require('./$.set-proto').set\n  , same       = require('./$.same-value')\n  , SPECIES    = require('./$.wks')('species')\n  , speciesConstructor = require('./$.species-constructor')\n  , asap       = require('./$.microtask')\n  , PROMISE    = 'Promise'\n  , process    = global.process\n  , isNode     = classof(process) == 'process'\n  , P          = global[PROMISE]\n  , Wrapper;\n\nvar testResolve = function(sub){\n  var test = new P(function(){});\n  if(sub)test.constructor = Object;\n  return P.resolve(test) === test;\n};\n\nvar USE_NATIVE = function(){\n  var works = false;\n  function P2(x){\n    var self = new P(x);\n    setProto(self, P2.prototype);\n    return self;\n  }\n  try {\n    works = P && P.resolve && testResolve();\n    setProto(P2, P);\n    P2.prototype = $.create(P.prototype, {constructor: {value: P2}});\n    // actual Firefox has broken subclass support, test that\n    if(!(P2.resolve(5).then(function(){}) instanceof P2)){\n      works = false;\n    }\n    // actual V8 bug, https://code.google.com/p/v8/issues/detail?id=4162\n    if(works && require('./$.descriptors')){\n      var thenableThenGotten = false;\n      P.resolve($.setDesc({}, 'then', {\n        get: function(){ thenableThenGotten = true; }\n      }));\n      works = thenableThenGotten;\n    }\n  } catch(e){ works = false; }\n  return works;\n}();\n\n// helpers\nvar sameConstructor = function(a, b){\n  // library wrapper special case\n  if(LIBRARY && a === P && b === Wrapper)return true;\n  return same(a, b);\n};\nvar getConstructor = function(C){\n  var S = anObject(C)[SPECIES];\n  return S != undefined ? S : C;\n};\nvar isThenable = function(it){\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar PromiseCapability = function(C){\n  var resolve, reject;\n  this.promise = new C(function($$resolve, $$reject){\n    if(resolve !== undefined || reject !== undefined)throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject  = $$reject;\n  });\n  this.resolve = aFunction(resolve),\n  this.reject  = aFunction(reject)\n};\nvar perform = function(exec){\n  try {\n    exec();\n  } catch(e){\n    return {error: e};\n  }\n};\nvar notify = function(record, isReject){\n  if(record.n)return;\n  record.n = true;\n  var chain = record.c;\n  asap(function(){\n    var value = record.v\n      , ok    = record.s == 1\n      , i     = 0;\n    var run = function(reaction){\n      var handler = ok ? reaction.ok : reaction.fail\n        , resolve = reaction.resolve\n        , reject  = reaction.reject\n        , result, then;\n      try {\n        if(handler){\n          if(!ok)record.h = true;\n          result = handler === true ? value : handler(value);\n          if(result === reaction.promise){\n            reject(TypeError('Promise-chain cycle'));\n          } else if(then = isThenable(result)){\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch(e){\n        reject(e);\n      }\n    };\n    while(chain.length > i)run(chain[i++]); // variable length - can't use forEach\n    chain.length = 0;\n    record.n = false;\n    if(isReject)setTimeout(function(){\n      var promise = record.p\n        , handler, console;\n      if(isUnhandled(promise)){\n        if(isNode){\n          process.emit('unhandledRejection', value, promise);\n        } else if(handler = global.onunhandledrejection){\n          handler({promise: promise, reason: value});\n        } else if((console = global.console) && console.error){\n          console.error('Unhandled promise rejection', value);\n        }\n      } record.a = undefined;\n    }, 1);\n  });\n};\nvar isUnhandled = function(promise){\n  var record = promise._d\n    , chain  = record.a || record.c\n    , i      = 0\n    , reaction;\n  if(record.h)return false;\n  while(chain.length > i){\n    reaction = chain[i++];\n    if(reaction.fail || !isUnhandled(reaction.promise))return false;\n  } return true;\n};\nvar $reject = function(value){\n  var record = this;\n  if(record.d)return;\n  record.d = true;\n  record = record.r || record; // unwrap\n  record.v = value;\n  record.s = 2;\n  record.a = record.c.slice();\n  notify(record, true);\n};\nvar $resolve = function(value){\n  var record = this\n    , then;\n  if(record.d)return;\n  record.d = true;\n  record = record.r || record; // unwrap\n  try {\n    if(record.p === value)throw TypeError(\"Promise can't be resolved itself\");\n    if(then = isThenable(value)){\n      asap(function(){\n        var wrapper = {r: record, d: false}; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch(e){\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      record.v = value;\n      record.s = 1;\n      notify(record, false);\n    }\n  } catch(e){\n    $reject.call({r: record, d: false}, e); // wrap\n  }\n};\n\n// constructor polyfill\nif(!USE_NATIVE){\n  // 25.4.3.1 Promise(executor)\n  P = function Promise(executor){\n    aFunction(executor);\n    var record = this._d = {\n      p: strictNew(this, P, PROMISE),         // <- promise\n      c: [],                                  // <- awaiting reactions\n      a: undefined,                           // <- checked in isUnhandled reactions\n      s: 0,                                   // <- state\n      d: false,                               // <- done\n      v: undefined,                           // <- value\n      h: false,                               // <- handled rejection\n      n: false                                // <- notify\n    };\n    try {\n      executor(ctx($resolve, record, 1), ctx($reject, record, 1));\n    } catch(err){\n      $reject.call(record, err);\n    }\n  };\n  require('./$.redefine-all')(P.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected){\n      var reaction = new PromiseCapability(speciesConstructor(this, P))\n        , promise  = reaction.promise\n        , record   = this._d;\n      reaction.ok   = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      record.c.push(reaction);\n      if(record.a)record.a.push(reaction);\n      if(record.s)notify(record, false);\n      return promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function(onRejected){\n      return this.then(undefined, onRejected);\n    }\n  });\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Promise: P});\nrequire('./$.set-to-string-tag')(P, PROMISE);\nrequire('./$.set-species')(PROMISE);\nWrapper = require('./$.core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r){\n    var capability = new PromiseCapability(this)\n      , $$reject   = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (!USE_NATIVE || testResolve(true)), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x){\n    // instanceof instead of internal slot check because we should fix it without replacement native Promise core\n    if(x instanceof P && sameConstructor(x.constructor, this))return x;\n    var capability = new PromiseCapability(this)\n      , $$resolve  = capability.resolve;\n    $$resolve(x);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./$.iter-detect')(function(iter){\n  P.all(iter)['catch'](function(){});\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable){\n    var C          = getConstructor(this)\n      , capability = new PromiseCapability(C)\n      , resolve    = capability.resolve\n      , reject     = capability.reject\n      , values     = [];\n    var abrupt = perform(function(){\n      forOf(iterable, false, values.push, values);\n      var remaining = values.length\n        , results   = Array(remaining);\n      if(remaining)$.each.call(values, function(promise, index){\n        var alreadyCalled = false;\n        C.resolve(promise).then(function(value){\n          if(alreadyCalled)return;\n          alreadyCalled = true;\n          results[index] = value;\n          --remaining || resolve(results);\n        }, reject);\n      });\n      else resolve(results);\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable){\n    var C          = getConstructor(this)\n      , capability = new PromiseCapability(C)\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      forOf(iterable, false, function(promise){\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  }\n});\n},{\"./$\":56,\"./$.a-function\":26,\"./$.an-object\":28,\"./$.classof\":29,\"./$.core\":31,\"./$.ctx\":32,\"./$.descriptors\":34,\"./$.export\":37,\"./$.for-of\":39,\"./$.global\":41,\"./$.is-object\":49,\"./$.iter-detect\":53,\"./$.library\":58,\"./$.microtask\":59,\"./$.redefine-all\":62,\"./$.same-value\":64,\"./$.set-proto\":65,\"./$.set-species\":66,\"./$.set-to-string-tag\":67,\"./$.species-constructor\":69,\"./$.strict-new\":70,\"./$.wks\":78}],87:[function(require,module,exports){\n'use strict';\nvar $at  = require('./$.string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./$.iter-define')(String, 'String', function(iterated){\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , index = this._i\n    , point;\n  if(index >= O.length)return {value: undefined, done: true};\n  point = $at(O, index);\n  this._i += point.length;\n  return {value: point, done: false};\n});\n},{\"./$.iter-define\":52,\"./$.string-at\":71}],88:[function(require,module,exports){\n'use strict';\n// ECMAScript 6 symbols shim\nvar $              = require('./$')\n  , global         = require('./$.global')\n  , has            = require('./$.has')\n  , DESCRIPTORS    = require('./$.descriptors')\n  , $export        = require('./$.export')\n  , redefine       = require('./$.redefine')\n  , $fails         = require('./$.fails')\n  , shared         = require('./$.shared')\n  , setToStringTag = require('./$.set-to-string-tag')\n  , uid            = require('./$.uid')\n  , wks            = require('./$.wks')\n  , keyOf          = require('./$.keyof')\n  , $names         = require('./$.get-names')\n  , enumKeys       = require('./$.enum-keys')\n  , isArray        = require('./$.is-array')\n  , anObject       = require('./$.an-object')\n  , toIObject      = require('./$.to-iobject')\n  , createDesc     = require('./$.property-desc')\n  , getDesc        = $.getDesc\n  , setDesc        = $.setDesc\n  , _create        = $.create\n  , getNames       = $names.get\n  , $Symbol        = global.Symbol\n  , $JSON          = global.JSON\n  , _stringify     = $JSON && $JSON.stringify\n  , setter         = false\n  , HIDDEN         = wks('_hidden')\n  , isEnum         = $.isEnum\n  , SymbolRegistry = shared('symbol-registry')\n  , AllSymbols     = shared('symbols')\n  , useNative      = typeof $Symbol == 'function'\n  , ObjectProto    = Object.prototype;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function(){\n  return _create(setDesc({}, 'a', {\n    get: function(){ return setDesc(this, 'a', {value: 7}).a; }\n  })).a != 7;\n}) ? function(it, key, D){\n  var protoDesc = getDesc(ObjectProto, key);\n  if(protoDesc)delete ObjectProto[key];\n  setDesc(it, key, D);\n  if(protoDesc && it !== ObjectProto)setDesc(ObjectProto, key, protoDesc);\n} : setDesc;\n\nvar wrap = function(tag){\n  var sym = AllSymbols[tag] = _create($Symbol.prototype);\n  sym._k = tag;\n  DESCRIPTORS && setter && setSymbolDesc(ObjectProto, tag, {\n    configurable: true,\n    set: function(value){\n      if(has(this, HIDDEN) && has(this[HIDDEN], tag))this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    }\n  });\n  return sym;\n};\n\nvar isSymbol = function(it){\n  return typeof it == 'symbol';\n};\n\nvar $defineProperty = function defineProperty(it, key, D){\n  if(D && has(AllSymbols, key)){\n    if(!D.enumerable){\n      if(!has(it, HIDDEN))setDesc(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if(has(it, HIDDEN) && it[HIDDEN][key])it[HIDDEN][key] = false;\n      D = _create(D, {enumerable: createDesc(0, false)});\n    } return setSymbolDesc(it, key, D);\n  } return setDesc(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P){\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P))\n    , i    = 0\n    , l = keys.length\n    , key;\n  while(l > i)$defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P){\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key){\n  var E = isEnum.call(this, key);\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key]\n    ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key){\n  var D = getDesc(it = toIObject(it), key);\n  if(D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key]))D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it){\n  var names  = getNames(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i)if(!has(AllSymbols, key = names[i++]) && key != HIDDEN)result.push(key);\n  return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it){\n  var names  = getNames(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i)if(has(AllSymbols, key = names[i++]))result.push(AllSymbols[key]);\n  return result;\n};\nvar $stringify = function stringify(it){\n  if(it === undefined || isSymbol(it))return; // IE8 returns string on undefined\n  var args = [it]\n    , i    = 1\n    , $$   = arguments\n    , replacer, $replacer;\n  while($$.length > i)args.push($$[i++]);\n  replacer = args[1];\n  if(typeof replacer == 'function')$replacer = replacer;\n  if($replacer || !isArray(replacer))replacer = function(key, value){\n    if($replacer)value = $replacer.call(this, key, value);\n    if(!isSymbol(value))return value;\n  };\n  args[1] = replacer;\n  return _stringify.apply($JSON, args);\n};\nvar buggyJSON = $fails(function(){\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({a: S}) != '{}' || _stringify(Object(S)) != '{}';\n});\n\n// 19.4.1.1 Symbol([description])\nif(!useNative){\n  $Symbol = function Symbol(){\n    if(isSymbol(this))throw TypeError('Symbol is not a constructor');\n    return wrap(uid(arguments.length > 0 ? arguments[0] : undefined));\n  };\n  redefine($Symbol.prototype, 'toString', function toString(){\n    return this._k;\n  });\n\n  isSymbol = function(it){\n    return it instanceof $Symbol;\n  };\n\n  $.create     = $create;\n  $.isEnum     = $propertyIsEnumerable;\n  $.getDesc    = $getOwnPropertyDescriptor;\n  $.setDesc    = $defineProperty;\n  $.setDescs   = $defineProperties;\n  $.getNames   = $names.get = $getOwnPropertyNames;\n  $.getSymbols = $getOwnPropertySymbols;\n\n  if(DESCRIPTORS && !require('./$.library')){\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n}\n\nvar symbolStatics = {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function(key){\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(key){\n    return keyOf(SymbolRegistry, key);\n  },\n  useSetter: function(){ setter = true; },\n  useSimple: function(){ setter = false; }\n};\n// 19.4.2.2 Symbol.hasInstance\n// 19.4.2.3 Symbol.isConcatSpreadable\n// 19.4.2.4 Symbol.iterator\n// 19.4.2.6 Symbol.match\n// 19.4.2.8 Symbol.replace\n// 19.4.2.9 Symbol.search\n// 19.4.2.10 Symbol.species\n// 19.4.2.11 Symbol.split\n// 19.4.2.12 Symbol.toPrimitive\n// 19.4.2.13 Symbol.toStringTag\n// 19.4.2.14 Symbol.unscopables\n$.each.call((\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,' +\n  'species,split,toPrimitive,toStringTag,unscopables'\n).split(','), function(it){\n  var sym = wks(it);\n  symbolStatics[it] = useNative ? sym : wrap(sym);\n});\n\nsetter = true;\n\n$export($export.G + $export.W, {Symbol: $Symbol});\n\n$export($export.S, 'Symbol', symbolStatics);\n\n$export($export.S + $export.F * !useNative, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!useNative || buggyJSON), 'JSON', {stringify: $stringify});\n\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n},{\"./$\":56,\"./$.an-object\":28,\"./$.descriptors\":34,\"./$.enum-keys\":36,\"./$.export\":37,\"./$.fails\":38,\"./$.get-names\":40,\"./$.global\":41,\"./$.has\":42,\"./$.is-array\":48,\"./$.keyof\":57,\"./$.library\":58,\"./$.property-desc\":61,\"./$.redefine\":63,\"./$.set-to-string-tag\":67,\"./$.shared\":68,\"./$.to-iobject\":74,\"./$.uid\":77,\"./$.wks\":78}],89:[function(require,module,exports){\nrequire('./es6.array.iterator');\nvar Iterators = require('./$.iterators');\nIterators.NodeList = Iterators.HTMLCollection = Iterators.Array;\n},{\"./$.iterators\":55,\"./es6.array.iterator\":80}],90:[function(require,module,exports){\n// mutationobserver-shim v0.3.1 (github.com/megawac/MutationObserver.js)\n// Authors: Graeme Yeates (github.com/megawac) \nwindow.MutationObserver=window.MutationObserver||window.WebKitMutationObserver||function(r){function w(a){this.g=[];this.k=a}function H(a){(function c(){var d=a.takeRecords();d.length&&a.k(d,a);a.f=setTimeout(c,w._period)})()}function t(a){var b={type:null,target:null,addedNodes:[],removedNodes:[],previousSibling:null,nextSibling:null,attributeName:null,attributeNamespace:null,oldValue:null},c;for(c in a)b[c]!==r&&a[c]!==r&&(b[c]=a[c]);return b}function I(a,b){var c=B(a,b);return function(d){var g=\nd.length,n;b.a&&c.a&&A(d,a,c.a,b.d);if(b.b||b.e)n=J(d,a,c,b);if(n||d.length!==g)c=B(a,b)}}function A(a,b,c,d){for(var g={},n=b.attributes,h,m,C=n.length;C--;)h=n[C],m=h.name,d&&d[m]===r||(h.value!==c[m]&&a.push(t({type:\"attributes\",target:b,attributeName:m,oldValue:c[m],attributeNamespace:h.namespaceURI})),g[m]=!0);for(m in c)g[m]||a.push(t({target:b,type:\"attributes\",attributeName:m,oldValue:c[m]}))}function J(a,b,c,d){function g(b,c,g,h,y){var r=b.length-1;y=-~((r-y)/2);for(var f,k,e;e=b.pop();)f=\ng[e.h],k=h[e.i],d.b&&y&&Math.abs(e.h-e.i)>=r&&(a.push(t({type:\"childList\",target:c,addedNodes:[f],removedNodes:[f],nextSibling:f.nextSibling,previousSibling:f.previousSibling})),y--),d.a&&k.a&&A(a,f,k.a,d.d),d.c&&3===f.nodeType&&f.nodeValue!==k.c&&a.push(t({type:\"characterData\",target:f})),d.e&&n(f,k)}function n(b,c){for(var x=b.childNodes,p=c.b,y=x.length,w=p?p.length:0,f,k,e,l,u,z=0,v=0,q=0;v<y||q<w;)l=x[v],u=(e=p[q])&&e.j,l===u?(d.a&&e.a&&A(a,l,e.a,d.d),d.c&&e.c!==r&&l.nodeValue!==e.c&&a.push(t({type:\"characterData\",\ntarget:l})),k&&g(k,b,x,p,z),d.e&&(l.childNodes.length||e.b&&e.b.length)&&n(l,e),v++,q++):(h=!0,f||(f={},k=[]),l&&(f[e=D(l)]||(f[e]=!0,-1===(e=E(p,l,q,\"j\"))?d.b&&(a.push(t({type:\"childList\",target:b,addedNodes:[l],nextSibling:l.nextSibling,previousSibling:l.previousSibling})),z++):k.push({h:v,i:e})),v++),u&&u!==x[v]&&(f[e=D(u)]||(f[e]=!0,-1===(e=E(x,u,v))?d.b&&(a.push(t({type:\"childList\",target:c.j,removedNodes:[u],nextSibling:p[q+1],previousSibling:p[q-1]})),z--):k.push({h:e,i:q})),q++));k&&g(k,b,\nx,p,z)}var h;n(b,c);return h}function B(a,b){var c=!0;return function g(a){var h={j:a};!b.c||3!==a.nodeType&&8!==a.nodeType?(b.a&&c&&1===a.nodeType&&(h.a=F(a.attributes,function(a,c){if(!b.d||b.d[c.name])a[c.name]=c.value;return a})),c&&(b.b||b.c||b.a&&b.e)&&(h.b=K(a.childNodes,g)),c=b.e):h.c=a.nodeValue;return h}(a)}function D(a){try{return a.id||(a.mo_id=a.mo_id||G++)}catch(b){try{return a.nodeValue}catch(c){return G++}}}function K(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d,a);return c}\nfunction F(a,b){for(var c={},d=0;d<a.length;d++)c=b(c,a[d],d,a);return c}function E(a,b,c,d){for(;c<a.length;c++)if((d?a[c][d]:a[c])===b)return c;return-1}w._period=30;w.prototype={observe:function(a,b){for(var c={a:!!(b.attributes||b.attributeFilter||b.attributeOldValue),b:!!b.childList,e:!!b.subtree,c:!(!b.characterData&&!b.characterDataOldValue)},d=this.g,g=0;g<d.length;g++)d[g].m===a&&d.splice(g,1);b.attributeFilter&&(c.d=F(b.attributeFilter,function(a,b){a[b]=!0;return a}));d.push({m:a,l:I(a,\nc)});this.f||H(this)},takeRecords:function(){for(var a=[],b=this.g,c=0;c<b.length;c++)b[c].l(a);return a},disconnect:function(){this.g=[];clearTimeout(this.f);this.f=null}};var G=1;return w}(void 0);\n\n},{}],91:[function(require,module,exports){\n/*!\r\n * Object.observe polyfill - v0.2.4\r\n * by Massimo Artizzu (MaxArt2501)\r\n *\r\n * https://github.com/MaxArt2501/object-observe\r\n *\r\n * Licensed under the MIT License\r\n * See LICENSE for details\r\n */\r\n\r\n// Some type definitions\r\n/**\r\n * This represents the data relative to an observed object\r\n * @typedef  {Object}                     ObjectData\r\n * @property {Map<Handler, HandlerData>}  handlers\r\n * @property {String[]}                   properties\r\n * @property {*[]}                        values\r\n * @property {Descriptor[]}               descriptors\r\n * @property {Notifier}                   notifier\r\n * @property {Boolean}                    frozen\r\n * @property {Boolean}                    extensible\r\n * @property {Object}                     proto\r\n */\r\n/**\r\n * Function definition of a handler\r\n * @callback Handler\r\n * @param {ChangeRecord[]}                changes\r\n*/\r\n/**\r\n * This represents the data relative to an observed object and one of its\r\n * handlers\r\n * @typedef  {Object}                     HandlerData\r\n * @property {Map<Object, ObservedData>}  observed\r\n * @property {ChangeRecord[]}             changeRecords\r\n */\r\n/**\r\n * @typedef  {Object}                     ObservedData\r\n * @property {String[]}                   acceptList\r\n * @property {ObjectData}                 data\r\n*/\r\n/**\r\n * Type definition for a change. Any other property can be added using\r\n * the notify() or performChange() methods of the notifier.\r\n * @typedef  {Object}                     ChangeRecord\r\n * @property {String}                     type\r\n * @property {Object}                     object\r\n * @property {String}                     [name]\r\n * @property {*}                          [oldValue]\r\n * @property {Number}                     [index]\r\n */\r\n/**\r\n * Type definition for a notifier (what Object.getNotifier returns)\r\n * @typedef  {Object}                     Notifier\r\n * @property {Function}                   notify\r\n * @property {Function}                   performChange\r\n */\r\n/**\r\n * Function called with Notifier.performChange. It may optionally return a\r\n * ChangeRecord that gets automatically notified, but `type` and `object`\r\n * properties are overridden.\r\n * @callback Performer\r\n * @returns {ChangeRecord|undefined}\r\n */\r\n\r\nObject.observe || (function(O, A, root, _undefined) {\r\n    \"use strict\";\r\n\r\n        /**\r\n         * Relates observed objects and their data\r\n         * @type {Map<Object, ObjectData}\r\n         */\r\n    var observed,\r\n        /**\r\n         * List of handlers and their data\r\n         * @type {Map<Handler, Map<Object, HandlerData>>}\r\n         */\r\n        handlers,\r\n\r\n        defaultAcceptList = [ \"add\", \"update\", \"delete\", \"reconfigure\", \"setPrototype\", \"preventExtensions\" ];\r\n\r\n    // Functions for internal usage\r\n\r\n        /**\r\n         * Checks if the argument is an Array object. Polyfills Array.isArray.\r\n         * @function isArray\r\n         * @param {?*} object\r\n         * @returns {Boolean}\r\n         */\r\n    var isArray = A.isArray || (function(toString) {\r\n            return function (object) { return toString.call(object) === \"[object Array]\"; };\r\n        })(O.prototype.toString),\r\n\r\n        /**\r\n         * Returns the index of an item in a collection, or -1 if not found.\r\n         * Uses the generic Array.indexOf or Array.prototype.indexOf if available.\r\n         * @function inArray\r\n         * @param {Array} array\r\n         * @param {*} pivot           Item to look for\r\n         * @param {Number} [start=0]  Index to start from\r\n         * @returns {Number}\r\n         */\r\n        inArray = A.prototype.indexOf ? A.indexOf || function(array, pivot, start) {\r\n            return A.prototype.indexOf.call(array, pivot, start);\r\n        } : function(array, pivot, start) {\r\n            for (var i = start || 0; i < array.length; i++)\r\n                if (array[i] === pivot)\r\n                    return i;\r\n            return -1;\r\n        },\r\n\r\n        /**\r\n         * Returns an instance of Map, or a Map-like object is Map is not\r\n         * supported or doesn't support forEach()\r\n         * @function createMap\r\n         * @returns {Map}\r\n         */\r\n        createMap = root.Map === _undefined || !Map.prototype.forEach ? function() {\r\n            // Lightweight shim of Map. Lacks clear(), entries(), keys() and\r\n            // values() (the last 3 not supported by IE11, so can't use them),\r\n            // it doesn't handle the constructor's argument (like IE11) and of\r\n            // course it doesn't support for...of.\r\n            // Chrome 31-35 and Firefox 13-24 have a basic support of Map, but\r\n            // they lack forEach(), so their native implementation is bad for\r\n            // this polyfill. (Chrome 36+ supports Object.observe.)\r\n            var keys = [], values = [];\r\n\r\n            return {\r\n                size: 0,\r\n                has: function(key) { return inArray(keys, key) > -1; },\r\n                get: function(key) { return values[inArray(keys, key)]; },\r\n                set: function(key, value) {\r\n                    var i = inArray(keys, key);\r\n                    if (i === -1) {\r\n                        keys.push(key);\r\n                        values.push(value);\r\n                        this.size++;\r\n                    } else values[i] = value;\r\n                },\r\n                \"delete\": function(key) {\r\n                    var i = inArray(keys, key);\r\n                    if (i > -1) {\r\n                        keys.splice(i, 1);\r\n                        values.splice(i, 1);\r\n                        this.size--;\r\n                    }\r\n                },\r\n                forEach: function(callback/*, thisObj*/) {\r\n                    for (var i = 0; i < keys.length; i++)\r\n                        callback.call(arguments[1], values[i], keys[i], this);\r\n                }\r\n            };\r\n        } : function() { return new Map(); },\r\n\r\n        /**\r\n         * Simple shim for Object.getOwnPropertyNames when is not available\r\n         * Misses checks on object, don't use as a replacement of Object.keys/getOwnPropertyNames\r\n         * @function getProps\r\n         * @param {Object} object\r\n         * @returns {String[]}\r\n         */\r\n        getProps = O.getOwnPropertyNames ? (function() {\r\n            var func = O.getOwnPropertyNames;\r\n            try {\r\n                arguments.callee;\r\n            } catch (e) {\r\n                // Strict mode is supported\r\n\r\n                // In strict mode, we can't access to \"arguments\", \"caller\" and\r\n                // \"callee\" properties of functions. Object.getOwnPropertyNames\r\n                // returns [ \"prototype\", \"length\", \"name\" ] in Firefox; it returns\r\n                // \"caller\" and \"arguments\" too in Chrome and in Internet\r\n                // Explorer, so those values must be filtered.\r\n                var avoid = (func(inArray).join(\" \") + \" \").replace(/prototype |length |name /g, \"\").slice(0, -1).split(\" \");\r\n                if (avoid.length) func = function(object) {\r\n                    var props = O.getOwnPropertyNames(object);\r\n                    if (typeof object === \"function\")\r\n                        for (var i = 0, j; i < avoid.length;)\r\n                            if ((j = inArray(props, avoid[i++])) > -1)\r\n                                props.splice(j, 1);\r\n\r\n                    return props;\r\n                };\r\n            }\r\n            return func;\r\n        })() : function(object) {\r\n            // Poor-mouth version with for...in (IE8-)\r\n            var props = [], prop, hop;\r\n            if (\"hasOwnProperty\" in object) {\r\n                for (prop in object)\r\n                    if (object.hasOwnProperty(prop))\r\n                        props.push(prop);\r\n            } else {\r\n                hop = O.hasOwnProperty;\r\n                for (prop in object)\r\n                    if (hop.call(object, prop))\r\n                        props.push(prop);\r\n            }\r\n\r\n            // Inserting a common non-enumerable property of arrays\r\n            if (isArray(object))\r\n                props.push(\"length\");\r\n\r\n            return props;\r\n        },\r\n\r\n        /**\r\n         * Return the prototype of the object... if defined.\r\n         * @function getPrototype\r\n         * @param {Object} object\r\n         * @returns {Object}\r\n         */\r\n        getPrototype = O.getPrototypeOf,\r\n\r\n        /**\r\n         * Return the descriptor of the object... if defined.\r\n         * IE8 supports a (useless) Object.getOwnPropertyDescriptor for DOM\r\n         * nodes only, so defineProperties is checked instead.\r\n         * @function getDescriptor\r\n         * @param {Object} object\r\n         * @param {String} property\r\n         * @returns {Descriptor}\r\n         */\r\n        getDescriptor = O.defineProperties && O.getOwnPropertyDescriptor,\r\n\r\n        /**\r\n         * Sets up the next check and delivering iteration, using\r\n         * requestAnimationFrame or a (close) polyfill.\r\n         * @function nextFrame\r\n         * @param {function} func\r\n         * @returns {number}\r\n         */\r\n        nextFrame = root.requestAnimationFrame || root.webkitRequestAnimationFrame || (function() {\r\n            var initial = +new Date,\r\n                last = initial;\r\n            return function(func) {\r\n                return setTimeout(function() {\r\n                    func((last = +new Date) - initial);\r\n                }, 17);\r\n            };\r\n        })(),\r\n\r\n        /**\r\n         * Sets up the observation of an object\r\n         * @function doObserve\r\n         * @param {Object} object\r\n         * @param {Handler} handler\r\n         * @param {String[]} [acceptList]\r\n         */\r\n        doObserve = function(object, handler, acceptList) {\r\n            var data = observed.get(object);\r\n\r\n            if (data) {\r\n                performPropertyChecks(data, object);\r\n                setHandler(object, data, handler, acceptList);\r\n            } else {\r\n                data = createObjectData(object);\r\n                setHandler(object, data, handler, acceptList);\r\n\r\n                if (observed.size === 1)\r\n                    // Let the observation begin!\r\n                    nextFrame(runGlobalLoop);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Creates the initial data for an observed object\r\n         * @function createObjectData\r\n         * @param {Object} object\r\n         */\r\n        createObjectData = function(object, data) {\r\n            var props = getProps(object),\r\n                values = [], descs, i = 0,\r\n                data = {\r\n                    handlers: createMap(),\r\n                    frozen: O.isFrozen ? O.isFrozen(object) : false,\r\n                    extensible: O.isExtensible ? O.isExtensible(object) : true,\r\n                    proto: getPrototype && getPrototype(object),\r\n                    properties: props,\r\n                    values: values,\r\n                    notifier: retrieveNotifier(object, data)\r\n                };\r\n\r\n            if (getDescriptor) {\r\n                descs = data.descriptors = [];\r\n                while (i < props.length) {\r\n                    descs[i] = getDescriptor(object, props[i]);\r\n                    values[i] = object[props[i++]];\r\n                }\r\n            } else while (i < props.length)\r\n                values[i] = object[props[i++]];\r\n\r\n            observed.set(object, data);\r\n\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * Performs basic property value change checks on an observed object\r\n         * @function performPropertyChecks\r\n         * @param {ObjectData} data\r\n         * @param {Object} object\r\n         * @param {String} [except]  Doesn't deliver the changes to the\r\n         *                           handlers that accept this type\r\n         */\r\n        performPropertyChecks = (function() {\r\n            var updateCheck = getDescriptor ? function(object, data, idx, except, descr) {\r\n                var key = data.properties[idx],\r\n                    value = object[key],\r\n                    ovalue = data.values[idx],\r\n                    odesc = data.descriptors[idx];\r\n\r\n                if (\"value\" in descr && (ovalue === value\r\n                        ? ovalue === 0 && 1/ovalue !== 1/value\r\n                        : ovalue === ovalue || value === value)) {\r\n                    addChangeRecord(object, data, {\r\n                        name: key,\r\n                        type: \"update\",\r\n                        object: object,\r\n                        oldValue: ovalue\r\n                    }, except);\r\n                    data.values[idx] = value;\r\n                }\r\n                if (odesc.configurable && (!descr.configurable\r\n                        || descr.writable !== odesc.writable\r\n                        || descr.enumerable !== odesc.enumerable\r\n                        || descr.get !== odesc.get\r\n                        || descr.set !== odesc.set)) {\r\n                    addChangeRecord(object, data, {\r\n                        name: key,\r\n                        type: \"reconfigure\",\r\n                        object: object,\r\n                        oldValue: ovalue\r\n                    }, except);\r\n                    data.descriptors[idx] = descr;\r\n                }\r\n            } : function(object, data, idx, except) {\r\n                var key = data.properties[idx],\r\n                    value = object[key],\r\n                    ovalue = data.values[idx];\r\n\r\n                if (ovalue === value ? ovalue === 0 && 1/ovalue !== 1/value\r\n                        : ovalue === ovalue || value === value) {\r\n                    addChangeRecord(object, data, {\r\n                        name: key,\r\n                        type: \"update\",\r\n                        object: object,\r\n                        oldValue: ovalue\r\n                    }, except);\r\n                    data.values[idx] = value;\r\n                }\r\n            };\r\n\r\n            // Checks if some property has been deleted\r\n            var deletionCheck = getDescriptor ? function(object, props, proplen, data, except) {\r\n                var i = props.length, descr;\r\n                while (proplen && i--) {\r\n                    if (props[i] !== null) {\r\n                        descr = getDescriptor(object, props[i]);\r\n                        proplen--;\r\n\r\n                        // If there's no descriptor, the property has really\r\n                        // been deleted; otherwise, it's been reconfigured so\r\n                        // that's not enumerable anymore\r\n                        if (descr) updateCheck(object, data, i, except, descr);\r\n                        else {\r\n                            addChangeRecord(object, data, {\r\n                                name: props[i],\r\n                                type: \"delete\",\r\n                                object: object,\r\n                                oldValue: data.values[i]\r\n                            }, except);\r\n                            data.properties.splice(i, 1);\r\n                            data.values.splice(i, 1);\r\n                            data.descriptors.splice(i, 1);\r\n                        }\r\n                    }\r\n                }\r\n            } : function(object, props, proplen, data, except) {\r\n                var i = props.length;\r\n                while (proplen && i--)\r\n                    if (props[i] !== null) {\r\n                        addChangeRecord(object, data, {\r\n                            name: props[i],\r\n                            type: \"delete\",\r\n                            object: object,\r\n                            oldValue: data.values[i]\r\n                        }, except);\r\n                        data.properties.splice(i, 1);\r\n                        data.values.splice(i, 1);\r\n                        proplen--;\r\n                    }\r\n            };\r\n\r\n            return function(data, object, except) {\r\n                if (!data.handlers.size || data.frozen) return;\r\n\r\n                var props, proplen, keys,\r\n                    values = data.values,\r\n                    descs = data.descriptors,\r\n                    i = 0, idx,\r\n                    key, value,\r\n                    proto, descr;\r\n\r\n                // If the object isn't extensible, we don't need to check for new\r\n                // or deleted properties\r\n                if (data.extensible) {\r\n\r\n                    props = data.properties.slice();\r\n                    proplen = props.length;\r\n                    keys = getProps(object);\r\n\r\n                    if (descs) {\r\n                        while (i < keys.length) {\r\n                            key = keys[i++];\r\n                            idx = inArray(props, key);\r\n                            descr = getDescriptor(object, key);\r\n\r\n                            if (idx === -1) {\r\n                                addChangeRecord(object, data, {\r\n                                    name: key,\r\n                                    type: \"add\",\r\n                                    object: object\r\n                                }, except);\r\n                                data.properties.push(key);\r\n                                values.push(object[key]);\r\n                                descs.push(descr);\r\n                            } else {\r\n                                props[idx] = null;\r\n                                proplen--;\r\n                                updateCheck(object, data, idx, except, descr);\r\n                            }\r\n                        }\r\n                        deletionCheck(object, props, proplen, data, except);\r\n\r\n                        if (!O.isExtensible(object)) {\r\n                            data.extensible = false;\r\n                            addChangeRecord(object, data, {\r\n                                type: \"preventExtensions\",\r\n                                object: object\r\n                            }, except);\r\n\r\n                            data.frozen = O.isFrozen(object);\r\n                        }\r\n                    } else {\r\n                        while (i < keys.length) {\r\n                            key = keys[i++];\r\n                            idx = inArray(props, key);\r\n                            value = object[key];\r\n\r\n                            if (idx === -1) {\r\n                                addChangeRecord(object, data, {\r\n                                    name: key,\r\n                                    type: \"add\",\r\n                                    object: object\r\n                                }, except);\r\n                                data.properties.push(key);\r\n                                values.push(value);\r\n                            } else {\r\n                                props[idx] = null;\r\n                                proplen--;\r\n                                updateCheck(object, data, idx, except);\r\n                            }\r\n                        }\r\n                        deletionCheck(object, props, proplen, data, except);\r\n                    }\r\n\r\n                } else if (!data.frozen) {\r\n\r\n                    // If the object is not extensible, but not frozen, we just have\r\n                    // to check for value changes\r\n                    for (; i < props.length; i++) {\r\n                        key = props[i];\r\n                        updateCheck(object, data, i, except, getDescriptor(object, key));\r\n                    }\r\n\r\n                    if (O.isFrozen(object))\r\n                        data.frozen = true;\r\n                }\r\n\r\n                if (getPrototype) {\r\n                    proto = getPrototype(object);\r\n                    if (proto !== data.proto) {\r\n                        addChangeRecord(object, data, {\r\n                            type: \"setPrototype\",\r\n                            name: \"__proto__\",\r\n                            object: object,\r\n                            oldValue: data.proto\r\n                        });\r\n                        data.proto = proto;\r\n                    }\r\n                }\r\n            };\r\n        })(),\r\n\r\n        /**\r\n         * Sets up the main loop for object observation and change notification\r\n         * It stops if no object is observed.\r\n         * @function runGlobalLoop\r\n         */\r\n        runGlobalLoop = function() {\r\n            if (observed.size) {\r\n                observed.forEach(performPropertyChecks);\r\n                handlers.forEach(deliverHandlerRecords);\r\n                nextFrame(runGlobalLoop);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Deliver the change records relative to a certain handler, and resets\r\n         * the record list.\r\n         * @param {HandlerData} hdata\r\n         * @param {Handler} handler\r\n         */\r\n        deliverHandlerRecords = function(hdata, handler) {\r\n            var records = hdata.changeRecords;\r\n            if (records.length) {\r\n                hdata.changeRecords = [];\r\n                handler(records);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Returns the notifier for an object - whether it's observed or not\r\n         * @function retrieveNotifier\r\n         * @param {Object} object\r\n         * @param {ObjectData} [data]\r\n         * @returns {Notifier}\r\n         */\r\n        retrieveNotifier = function(object, data) {\r\n            if (arguments.length < 2)\r\n                data = observed.get(object);\r\n\r\n            /** @type {Notifier} */\r\n            return data && data.notifier || {\r\n                /**\r\n                 * @method notify\r\n                 * @see http://arv.github.io/ecmascript-object-observe/#notifierprototype._notify\r\n                 * @memberof Notifier\r\n                 * @param {ChangeRecord} changeRecord\r\n                 */\r\n                notify: function(changeRecord) {\r\n                    changeRecord.type; // Just to check the property is there...\r\n\r\n                    // If there's no data, the object has been unobserved\r\n                    var data = observed.get(object);\r\n                    if (data) {\r\n                        var recordCopy = { object: object }, prop;\r\n                        for (prop in changeRecord)\r\n                            if (prop !== \"object\")\r\n                                recordCopy[prop] = changeRecord[prop];\r\n                        addChangeRecord(object, data, recordCopy);\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * @method performChange\r\n                 * @see http://arv.github.io/ecmascript-object-observe/#notifierprototype_.performchange\r\n                 * @memberof Notifier\r\n                 * @param {String} changeType\r\n                 * @param {Performer} func     The task performer\r\n                 * @param {*} [thisObj]        Used to set `this` when calling func\r\n                 */\r\n                performChange: function(changeType, func/*, thisObj*/) {\r\n                    if (typeof changeType !== \"string\")\r\n                        throw new TypeError(\"Invalid non-string changeType\");\r\n\r\n                    if (typeof func !== \"function\")\r\n                        throw new TypeError(\"Cannot perform non-function\");\r\n\r\n                    // If there's no data, the object has been unobserved\r\n                    var data = observed.get(object),\r\n                        prop, changeRecord,\r\n                        thisObj = arguments[2],\r\n                        result = thisObj === _undefined ? func() : func.call(thisObj);\r\n\r\n                    data && performPropertyChecks(data, object, changeType);\r\n\r\n                    // If there's no data, the object has been unobserved\r\n                    if (data && result && typeof result === \"object\") {\r\n                        changeRecord = { object: object, type: changeType };\r\n                        for (prop in result)\r\n                            if (prop !== \"object\" && prop !== \"type\")\r\n                                changeRecord[prop] = result[prop];\r\n                        addChangeRecord(object, data, changeRecord);\r\n                    }\r\n                }\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Register (or redefines) an handler in the collection for a given\r\n         * object and a given type accept list.\r\n         * @function setHandler\r\n         * @param {Object} object\r\n         * @param {ObjectData} data\r\n         * @param {Handler} handler\r\n         * @param {String[]} acceptList\r\n         */\r\n        setHandler = function(object, data, handler, acceptList) {\r\n            var hdata = handlers.get(handler);\r\n            if (!hdata)\r\n                handlers.set(handler, hdata = {\r\n                    observed: createMap(),\r\n                    changeRecords: []\r\n                });\r\n            hdata.observed.set(object, {\r\n                acceptList: acceptList.slice(),\r\n                data: data\r\n            });\r\n            data.handlers.set(handler, hdata);\r\n        },\r\n\r\n        /**\r\n         * Adds a change record in a given ObjectData\r\n         * @function addChangeRecord\r\n         * @param {Object} object\r\n         * @param {ObjectData} data\r\n         * @param {ChangeRecord} changeRecord\r\n         * @param {String} [except]\r\n         */\r\n        addChangeRecord = function(object, data, changeRecord, except) {\r\n            data.handlers.forEach(function(hdata) {\r\n                var acceptList = hdata.observed.get(object).acceptList;\r\n                // If except is defined, Notifier.performChange has been\r\n                // called, with except as the type.\r\n                // All the handlers that accepts that type are skipped.\r\n                if ((typeof except !== \"string\"\r\n                        || inArray(acceptList, except) === -1)\r\n                        && inArray(acceptList, changeRecord.type) > -1)\r\n                    hdata.changeRecords.push(changeRecord);\r\n            });\r\n        };\r\n\r\n    observed = createMap();\r\n    handlers = createMap();\r\n\r\n    /**\r\n     * @function Object.observe\r\n     * @see http://arv.github.io/ecmascript-object-observe/#Object.observe\r\n     * @param {Object} object\r\n     * @param {Handler} handler\r\n     * @param {String[]} [acceptList]\r\n     * @throws {TypeError}\r\n     * @returns {Object}               The observed object\r\n     */\r\n    O.observe = function observe(object, handler, acceptList) {\r\n        if (!object || typeof object !== \"object\" && typeof object !== \"function\")\r\n            throw new TypeError(\"Object.observe cannot observe non-object\");\r\n\r\n        if (typeof handler !== \"function\")\r\n            throw new TypeError(\"Object.observe cannot deliver to non-function\");\r\n\r\n        if (O.isFrozen && O.isFrozen(handler))\r\n            throw new TypeError(\"Object.observe cannot deliver to a frozen function object\");\r\n\r\n        if (acceptList === _undefined)\r\n            acceptList = defaultAcceptList;\r\n        else if (!acceptList || typeof acceptList !== \"object\")\r\n            throw new TypeError(\"Third argument to Object.observe must be an array of strings.\");\r\n\r\n        doObserve(object, handler, acceptList);\r\n\r\n        return object;\r\n    };\r\n\r\n    /**\r\n     * @function Object.unobserve\r\n     * @see http://arv.github.io/ecmascript-object-observe/#Object.unobserve\r\n     * @param {Object} object\r\n     * @param {Handler} handler\r\n     * @throws {TypeError}\r\n     * @returns {Object}         The given object\r\n     */\r\n    O.unobserve = function unobserve(object, handler) {\r\n        if (object === null || typeof object !== \"object\" && typeof object !== \"function\")\r\n            throw new TypeError(\"Object.unobserve cannot unobserve non-object\");\r\n\r\n        if (typeof handler !== \"function\")\r\n            throw new TypeError(\"Object.unobserve cannot deliver to non-function\");\r\n\r\n        var hdata = handlers.get(handler), odata;\r\n\r\n        if (hdata && (odata = hdata.observed.get(object))) {\r\n            hdata.observed.forEach(function(odata, object) {\r\n                performPropertyChecks(odata.data, object);\r\n            });\r\n            nextFrame(function() {\r\n                deliverHandlerRecords(hdata, handler);\r\n            });\r\n\r\n            // In Firefox 13-18, size is a function, but createMap should fall\r\n            // back to the shim for those versions\r\n            if (hdata.observed.size === 1 && hdata.observed.has(object))\r\n                handlers[\"delete\"](handler);\r\n            else hdata.observed[\"delete\"](object);\r\n\r\n            if (odata.data.handlers.size === 1)\r\n                observed[\"delete\"](object);\r\n            else odata.data.handlers[\"delete\"](handler);\r\n        }\r\n\r\n        return object;\r\n    };\r\n\r\n    /**\r\n     * @function Object.getNotifier\r\n     * @see http://arv.github.io/ecmascript-object-observe/#GetNotifier\r\n     * @param {Object} object\r\n     * @throws {TypeError}\r\n     * @returns {Notifier}\r\n     */\r\n    O.getNotifier = function getNotifier(object) {\r\n        if (object === null || typeof object !== \"object\" && typeof object !== \"function\")\r\n            throw new TypeError(\"Object.getNotifier cannot getNotifier non-object\");\r\n\r\n        if (O.isFrozen && O.isFrozen(object)) return null;\r\n\r\n        return retrieveNotifier(object);\r\n    };\r\n\r\n    /**\r\n     * @function Object.deliverChangeRecords\r\n     * @see http://arv.github.io/ecmascript-object-observe/#Object.deliverChangeRecords\r\n     * @see http://arv.github.io/ecmascript-object-observe/#DeliverChangeRecords\r\n     * @param {Handler} handler\r\n     * @throws {TypeError}\r\n     */\r\n    O.deliverChangeRecords = function deliverChangeRecords(handler) {\r\n        if (typeof handler !== \"function\")\r\n            throw new TypeError(\"Object.deliverChangeRecords cannot deliver to non-function\");\r\n\r\n        var hdata = handlers.get(handler);\r\n        if (hdata) {\r\n            hdata.observed.forEach(function(odata, object) {\r\n                performPropertyChecks(odata.data, object);\r\n            });\r\n            deliverHandlerRecords(hdata, handler);\r\n        }\r\n    };\r\n\r\n})(Object, Array, this);\r\n\n},{}],92:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,\"__esModule\",{value:true});exports.DataObjectObserver=exports.DataObjectReporter=exports.Syncher=undefined;require('mutationobserver-shim');require('object.observe');require('array.observe');var _Syncher=require('./syncher/Syncher');var _Syncher2=_interopRequireDefault(_Syncher);var _DataObjectReporter=require('./syncher/DataObjectReporter');var _DataObjectReporter2=_interopRequireDefault(_DataObjectReporter);var _DataObjectObserver=require('./syncher/DataObjectObserver');var _DataObjectObserver2=_interopRequireDefault(_DataObjectObserver);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};} // polyfills\nexports.Syncher=_Syncher2.default;exports.DataObjectReporter=_DataObjectReporter2.default;exports.DataObjectObserver=_DataObjectObserver2.default;\n\n},{\"./syncher/DataObjectObserver\":95,\"./syncher/DataObjectReporter\":96,\"./syncher/Syncher\":99,\"array.observe\":1,\"mutationobserver-shim\":90,\"object.observe\":91}],93:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,\"__esModule\",{value:true});var _promise=require('babel-runtime/core-js/promise');var _promise2=_interopRequireDefault(_promise);var _keys=require('babel-runtime/core-js/object/keys');var _keys2=_interopRequireDefault(_keys);var _classCallCheck2=require('babel-runtime/helpers/classCallCheck');var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require('babel-runtime/helpers/createClass');var _createClass3=_interopRequireDefault(_createClass2);var _SyncObject=require('./SyncObject');var _SyncObject2=_interopRequireDefault(_SyncObject);var _DataObjectChild=require('./DataObjectChild');var _DataObjectChild2=_interopRequireDefault(_DataObjectChild);var _utils=require('../utils/utils.js');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};} /**\n * Main extension class for observers and reporters, with common properties and methods.\n * Children management is common for observers and reporters.\n */ /**\n* Copyright 2016 PT Inovao e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/var DataObject=function(){ /* private\n  _version: number\n\n  _owner: HypertyURL\n  _url: ObjectURL\n  _schema: Schema\n  _bus: MiniBus\n  _status: on | paused\n  _syncObj: SyncData\n\n  _children: { id: DataObjectChild }\n  _childrenListeners: [MsgListener]\n\n  ----event handlers----\n  _onAddChildHandler: (event) => void\n  */ /**\n   * @ignore\n   * Should not be used directly by Hyperties. It's called by the Syncher create or subscribe method's\n   */function DataObject(syncher,url,schema,initialStatus,initialData,childrens){(0,_classCallCheck3.default)(this,DataObject);var _this=this;_this._syncher=syncher;_this._url=url;_this._schema=schema;_this._status=initialStatus;_this._syncObj=new _SyncObject2.default(initialData);_this._childrens=childrens;_this._version=0;_this._childId=0;_this._childrenObjects={};_this._childrenListeners=[];_this._owner=syncher._owner;_this._bus=syncher._bus;}(0,_createClass3.default)(DataObject,[{key:'_allocateListeners',value:function _allocateListeners(){var _this2=this;var _this=this;var childBaseURL=_this._url+'/children/';if(_this._childrens){_this._childrens.forEach(function(child){var childURL=childBaseURL+child;var listener=_this._bus.addListener(childURL,function(msg){ //ignore msg sent by himself\nif(msg.from!==_this2._owner){console.log('DataObject-Children-RCV: ',msg);switch(msg.type){case 'create':_this._onChildCreate(msg);break;case 'delete':console.log(msg);break;default:_this._changeChildren(msg);break;}}});_this._childrenListeners.push(listener);});}}},{key:'_releaseListeners',value:function _releaseListeners(){var _this=this;_this._childrenListeners.forEach(function(listener){listener.remove();});(0,_keys2.default)(_this._childrenObjects).forEach(function(key){_this._childrenObjects[key]._releaseListeners();});} /**\n   * Object URL of reporter or observer\n   * @type {ObjectURL}\n   */},{key:'pause', /**\n   * @ignore\n   */value:function pause(){ //TODO: this feature needs more analise\nthrow 'Not implemented';} /**\n   * @ignore\n   */},{key:'resume',value:function resume(){ //TODO: this feature needs more analise\nthrow 'Not implemented';} /**\n   * @ignore\n   */},{key:'stop',value:function stop(){ //TODO: should remove the subscription and send message unsubscribe?\nthrow 'Not implemented';} /**\n   * Create and add a children to the subscription group.\n   * @param {String} resource - Resource name, one of the items in the schema.properties.scheme of the parent object.\n   * @param {JSON} initialData - Initial data of the child\n   * @return {Promise<DataObjectChild>} - Return Promise to a new Children.\n   */},{key:'addChild',value:function addChild(resource,initialData){var _this=this; //create new child unique ID, based on hypertyURL\n_this._childId++;var msgChildId=_this._owner+'#'+_this._childId;var msgChildPath=_this._url+'/children/'+resource;var requestMsg={type:'create',from:_this._owner,to:msgChildPath,body:{resource:msgChildId,value:initialData}}; //returns promise, in the future, the API may change to asynchronous call\nreturn new _promise2.default(function(resolve){var msgId=_this._bus.postMessage(requestMsg);console.log('create-reporter-child( '+_this._owner+' ): ',requestMsg);var newChild=new _DataObjectChild2.default(_this,msgChildId,initialData,_this._owner,msgId);newChild.onChange(function(event){_this._onChange(event,{path:msgChildPath,childId:msgChildId});});_this._childrenObjects[msgChildId]=newChild;resolve(newChild);});} /**\n   * Setup the callback to process create and delete childrens\n   * @param {function(event: MsgEvent)} callback\n   */},{key:'onAddChild',value:function onAddChild(callback){this._onAddChildrenHandler=callback;}},{key:'_onChildCreate',value:function _onChildCreate(msg){var _this=this;var msgChildId=msg.body.resource;console.log('create-observer-child( '+_this._owner+' ): ',msg);var newChild=new _DataObjectChild2.default(_this,msgChildId,msg.body.value);_this._childrenObjects[msgChildId]=newChild;setTimeout(function(){_this._bus.postMessage({id:msg.id,type:'response',from:msg.to,to:msg.from,body:{code:200,source:_this._owner}});});var event={type:msg.type,from:msg.from,url:msg.to,value:msg.body.value,childId:msgChildId,identity:msg.body.identity};if(_this._onAddChildrenHandler){console.log('ADD-CHILDREN-EVENT: ',event);_this._onAddChildrenHandler(event);}} //send delta messages to subscriptions\n},{key:'_onChange',value:function _onChange(event,childInfo){var _this=this;_this._version++;if(_this._status==='on'){var changeMsg={type:'update',from:_this._url,to:_this._url+'/changes',body:{version:_this._version,source:_this._owner,attribute:event.field}};if(event.oType===_SyncObject.ObjectType.OBJECT){if(event.cType!==_SyncObject.ChangeType.REMOVE){changeMsg.body.value=event.data;}}else {changeMsg.body.attributeType=event.oType;changeMsg.body.value=event.data;if(event.cType!==_SyncObject.ChangeType.UPDATE){changeMsg.body.operation=event.cType;}} //childInfo must have (path, childId)\nif(childInfo){changeMsg.to=childInfo.path;changeMsg.body.resource=childInfo.childId;}_this._bus.postMessage(changeMsg);}} //receive and process delta messages\n},{key:'_changeObject',value:function _changeObject(syncObj,msg){var _this=this; //TODO: update version ?\n//how to handle an incorrect version ? Example: receive a version 3 when the observer is in version 1, where is the version 2 ?\n//will we need to confirm the reception ?\nif(_this._version+1===msg.body.version){_this._version++;var path=msg.body.attribute;var value=(0,_utils.deepClone)(msg.body.value);var findResult=syncObj.findBefore(path);if(msg.body.attributeType===_SyncObject.ObjectType.ARRAY){if(msg.body.operation===_SyncObject.ChangeType.ADD){var arr=findResult.obj;var index=findResult.last;Array.prototype.splice.apply(arr,[index,0].concat(value));}else if(msg.body.operation===_SyncObject.ChangeType.REMOVE){var _arr=findResult.obj;var _index=findResult.last;_arr.splice(_index,value);}else {findResult.obj[findResult.last]=value; // UPDATE\n}}else {if(msg.body.value){findResult.obj[findResult.last]=value; // UPDATE or ADD\n}else {delete findResult.obj[findResult.last]; // REMOVE\n}}}else { //TODO: how to handle unsynchronized versions?\nconsole.log('UNSYNCHRONIZED VERSION: (data => '+_this._version+', msg => '+msg.body.version+')');}}},{key:'_changeChildren',value:function _changeChildren(msg){var _this=this;console.log('Change children: ',_this._owner,msg);var childId=msg.body.resource;var children=_this._childrenObjects[childId];if(children){_this._changeObject(children._syncObj,msg);}else {console.log('No children found for: ',childId);}}},{key:'url',get:function get(){return this._url;} /**\n   * Object schema URL (this field is not yet stable, and is subsject to change)\n   * @type {SchemaURL}\n   */},{key:'schema',get:function get(){return this._schema;} /**\n   * Status of the reporter or observer connection (this field is not yet stable, and is subsject to change)\n   * @type {Status} - Enum of: on | paused\n   */},{key:'status',get:function get(){return this._status;} /**\n   * Data structure to be synchronized.\n   * @type {JSON} - JSON structure that should follow the defined schema, if any.\n   */},{key:'data',get:function get(){return this._syncObj.data;} /**\n   * All created children's since the subscription, doesn't contain all children's since reporter creation.\n   * @type {Object<ChildId, DataObjectChild>}\n   */},{key:'childrens',get:function get(){return this._childrenObjects;}}]);return DataObject;}();exports.default=DataObject;module.exports=exports['default'];\n\n},{\"../utils/utils.js\":100,\"./DataObjectChild\":94,\"./SyncObject\":98,\"babel-runtime/core-js/object/keys\":7,\"babel-runtime/core-js/promise\":9,\"babel-runtime/helpers/classCallCheck\":11,\"babel-runtime/helpers/createClass\":12}],94:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,\"__esModule\",{value:true});var _classCallCheck2=require('babel-runtime/helpers/classCallCheck');var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require('babel-runtime/helpers/createClass');var _createClass3=_interopRequireDefault(_createClass2);var _SyncObject=require('./SyncObject');var _SyncObject2=_interopRequireDefault(_SyncObject);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};} /**\n * The class returned from the DataObject addChildren call or from onAddChildren if remotely created.\n * Children object synchronization is a a fast forward mechanism, no need for direct subscriptions, it uses the already authorized subscription from the parent DataObject.\n */var DataObjectChild /* implements SyncStatus */=function(){ /* private\n\n  ----event handlers----\n  _onResponseHandler: (event) => void\n  */ /**\n   * @ignore\n   * Should not be used directly by Hyperties. It's called by the DataObject.addChildren\n   */function DataObjectChild(parent,childId,initialData,owner,msgId){(0,_classCallCheck3.default)(this,DataObjectChild);var _this=this;_this._parent=parent;_this._childId=childId;_this._owner=owner;_this._msgId=msgId;_this._syncObj=new _SyncObject2.default(initialData);_this._bus=parent._bus;_this._allocateListeners();}(0,_createClass3.default)(DataObjectChild,[{key:'_allocateListeners',value:function _allocateListeners(){var _this=this; //this is only needed for children reporters\nif(_this._owner){_this._listener=_this._bus.addListener(_this._owner,function(msg){if(msg.type==='response'&&msg.id===_this._msgId){console.log('DataObjectChild.onResponse:',msg);_this._onResponse(msg);}});}}},{key:'_releaseListeners',value:function _releaseListeners(){var _this=this;if(_this._listener){_this._listener.remove();}} /**\n   * Release and delete object data\n   */},{key:'delete',value:function _delete(){var _this=this;delete _this._parent._children[_this._childId];_this._releaseListeners(); //TODO: send delete message ?\n} /**\n   * Children ID generated on addChildren. Unique identifier\n   * @type {URL} - URL of the format <HypertyURL>#<numeric-sequence>\n   */},{key:'onChange', /**\n   * Register the change listeners sent by the reporter child\n   * @param {function(event: MsgEvent)} callback\n   */value:function onChange(callback){this._syncObj.observe(function(event){callback(event);});} /**\n   * Setup the callback to process response notifications of the creates\n   * @param {function(event: MsgEvent)} callback\n   */},{key:'onResponse',value:function onResponse(callback){this._onResponseHandler=callback;}},{key:'_onResponse',value:function _onResponse(msg){var _this=this;var event={type:msg.type,url:msg.body.source,code:msg.body.code};if(_this._onResponseHandler){_this._onResponseHandler(event);}}},{key:'childId',get:function get(){return this._childId;} /**\n   * Data Structure to be synchronized.\n   * @type {JSON} - JSON structure that should follow the defined schema, if any.\n   */},{key:'data',get:function get(){return this._syncObj.data;}}]);return DataObjectChild;}(); /**\n* Copyright 2016 PT Inovao e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/exports.default=DataObjectChild;module.exports=exports['default'];\n\n},{\"./SyncObject\":98,\"babel-runtime/helpers/classCallCheck\":11,\"babel-runtime/helpers/createClass\":12}],95:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,\"__esModule\",{value:true});var _keys=require('babel-runtime/core-js/object/keys');var _keys2=_interopRequireDefault(_keys);var _getPrototypeOf=require('babel-runtime/core-js/object/get-prototype-of');var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=require('babel-runtime/helpers/classCallCheck');var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require('babel-runtime/helpers/createClass');var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require('babel-runtime/helpers/possibleConstructorReturn');var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _get2=require('babel-runtime/helpers/get');var _get3=_interopRequireDefault(_get2);var _inherits2=require('babel-runtime/helpers/inherits');var _inherits3=_interopRequireDefault(_inherits2);var _DataObject2=require('./DataObject');var _DataObject3=_interopRequireDefault(_DataObject2);var _DataObjectChild=require('./DataObjectChild');var _DataObjectChild2=_interopRequireDefault(_DataObjectChild);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};} /**\n* Copyright 2016 PT Inovao e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/var FilterType={ANY:'any',START:'start',EXACT:'exact'}; /**\n * The class returned from the Syncher subscribe call.\n * To be used as an observation point from a DataObjectReporter change.\n */var DataObjectObserver=function(_DataObject){(0,_inherits3.default)(DataObjectObserver,_DataObject); /* private\n  _changeListener: MsgListener\n\n  ----event handlers----\n  _filters: {<filter>: {type: <start, exact>, callback: <function>} }\n  */ /**\n   * @ignore\n   * Should not be used directly by Hyperties. It's called by the Syncher.subscribe method\n   */function DataObjectObserver(syncher,url,schema,initialStatus,initialData,childrens,initialVersion){(0,_classCallCheck3.default)(this,DataObjectObserver);var _this2=(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(DataObjectObserver).call(this,syncher,url,schema,initialStatus,initialData.data,childrens));var _this=_this2;_this._version=initialVersion;_this._filters={};_this._syncObj.observe(function(event){_this._onFilter(event);}); //setup childrens data from subscription\n(0,_keys2.default)(initialData.childrens).forEach(function(childId){var childData=initialData.childrens[childId];_this._childrenObjects[childId]=new _DataObjectChild2.default(_this,childId,childData);});_this._allocateListeners();return _this2;}(0,_createClass3.default)(DataObjectObserver,[{key:'_allocateListeners',value:function _allocateListeners(){(0,_get3.default)((0,_getPrototypeOf2.default)(DataObjectObserver.prototype),'_allocateListeners',this).call(this);var _this=this;_this._changeListener=_this._bus.addListener(_this._url+'/changes',function(msg){if(msg.type==='update'){console.log('DataObjectObserver-'+_this._url+'-RCV: ',msg);_this._changeObject(_this._syncObj,msg);}});}},{key:'_releaseListeners',value:function _releaseListeners(){(0,_get3.default)((0,_getPrototypeOf2.default)(DataObjectObserver.prototype),'_releaseListeners',this).call(this);var _this=this;_this._changeListener.remove();} /**\n   * Release and delete object data\n   */},{key:'delete',value:function _delete(){var _this=this;_this._releaseListeners();delete _this._syncher._observers[_this._url];} /**\n   * Release and delete object data\n   */},{key:'unsubscribe',value:function unsubscribe(){var _this=this;var unSubscribeMsg={type:'unsubscribe',from:_this._owner,to:_this._syncher._subURL,body:{resource:_this._url}};_this._bus.postMessage(unSubscribeMsg,function(reply){console.log('DataObjectObserver-UNSUBSCRIBE: ',reply);if(reply.body.code===200){_this._releaseListeners();delete _this._syncher._observers[_this._url];}});} /**\n   * Register the change listeners sent by the reporter\n   * @param {string} filter - Filter that identifies the field (separeted dot path). Accepts * at the end for a more unrestricted filtering.\n   * @param {function(event: MsgEvent)} callback\n   */},{key:'onChange',value:function onChange(filter,callback){var key=filter;var filterObj={type:FilterType.EXACT,callback:callback};var idx=filter.indexOf('*');if(idx===filter.length-1){if(idx===0){filterObj.type=FilterType.ANY;}else {filterObj.type=FilterType.START;key=filter.substr(0,filter.length-1);}}this._filters[key]=filterObj;}},{key:'_onFilter',value:function _onFilter(event){var _this=this;(0,_keys2.default)(_this._filters).forEach(function(key){var filter=_this._filters[key];if(filter.type===FilterType.ANY){ //match anything\nfilter.callback(event);}else if(filter.type===FilterType.START){ //if starts with filter...\nif(event.field.indexOf(key)===0){filter.callback(event);}}else if(filter.type===FilterType.EXACT){ //exact match\nif(event.field===key){filter.callback(event);}}});}}]);return DataObjectObserver;}(_DataObject3.default /* implements SyncStatus */);exports.default=DataObjectObserver;module.exports=exports['default'];\n\n},{\"./DataObject\":93,\"./DataObjectChild\":94,\"babel-runtime/core-js/object/get-prototype-of\":6,\"babel-runtime/core-js/object/keys\":7,\"babel-runtime/helpers/classCallCheck\":11,\"babel-runtime/helpers/createClass\":12,\"babel-runtime/helpers/get\":13,\"babel-runtime/helpers/inherits\":14,\"babel-runtime/helpers/possibleConstructorReturn\":15}],96:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,\"__esModule\",{value:true});var _keys=require('babel-runtime/core-js/object/keys');var _keys2=_interopRequireDefault(_keys);var _getPrototypeOf=require('babel-runtime/core-js/object/get-prototype-of');var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=require('babel-runtime/helpers/classCallCheck');var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require('babel-runtime/helpers/createClass');var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require('babel-runtime/helpers/possibleConstructorReturn');var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _get2=require('babel-runtime/helpers/get');var _get3=_interopRequireDefault(_get2);var _inherits2=require('babel-runtime/helpers/inherits');var _inherits3=_interopRequireDefault(_inherits2);var _DataObject2=require('./DataObject');var _DataObject3=_interopRequireDefault(_DataObject2);var _utils=require('../utils/utils.js');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};} /**\n * The class returned from the Syncher create call.\n * To be used as a reporter point, changes will be submited to DataObjectObserver instances.\n */ /**\n* Copyright 2016 PT Inovao e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/var DataObjectReporter=function(_DataObject){(0,_inherits3.default)(DataObjectReporter,_DataObject); /* private\n  _subscriptions: <hypertyUrl: { status: string } }>\n\n  ----event handlers----\n  _onSubscriptionHandler: (event) => void\n  _onResponseHandler: (event) => void\n  */ /**\n   * @ignore\n   * Should not be used directly by Hyperties. It's called by the Syncher.create method\n   */function DataObjectReporter(syncher,url,schema,initialStatus,initialData,childrens){(0,_classCallCheck3.default)(this,DataObjectReporter);var _this2=(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(DataObjectReporter).call(this,syncher,url,schema,initialStatus,initialData,childrens));var _this=_this2;_this._subscriptions={};_this._syncObj.observe(function(event){console.log('DataObjectReporter-'+url+'-SEND: ',event);_this._onChange(event);});_this._allocateListeners();return _this2;}(0,_createClass3.default)(DataObjectReporter,[{key:'_allocateListeners',value:function _allocateListeners(){(0,_get3.default)((0,_getPrototypeOf2.default)(DataObjectReporter.prototype),'_allocateListeners',this).call(this);var _this=this;_this._responseListener=_this._bus.addListener(_this._url,function(msg){if(msg.type==='response'){_this._onResponse(msg);}});}},{key:'_releaseListeners',value:function _releaseListeners(){(0,_get3.default)((0,_getPrototypeOf2.default)(DataObjectReporter.prototype),'_releaseListeners',this).call(this);var _this=this;_this._responseListener.remove();}},{key:'inviteObservers',value:function inviteObservers(observers){var _this=this;var inviteMsg={type:'create',from:_this._syncher._owner,to:_this._syncher._subURL,body:{resource:_this._url,schema:_this._schema,value:_this._syncObj.data,authorise:observers}};_this._bus.postMessage(inviteMsg);} /**\n   * Release and delete object data\n   */},{key:'delete',value:function _delete(){var _this=this;var deleteMsg={type:'delete',from:_this._owner,to:_this._syncher._subURL,body:{resource:_this._url}};_this._bus.postMessage(deleteMsg,function(reply){console.log('DataObjectReporter-DELETE: ',reply);if(reply.body.code===200){_this._releaseListeners();delete _this._syncher._reporters[_this._url];}});} /**\n   * Subscriptions requested and accepted to this reporter\n   * @type {Object<HypertyURL, SyncSubscription>}\n   */},{key:'onSubscription', /**\n   * Setup the callback to process subscribe and unsubscribe notifications\n   * @param {function(event: MsgEvent)} callback\n   */value:function onSubscription(callback){this._onSubscriptionHandler=callback;} /**\n   * Setup the callback to process response notifications of the create's\n   * @param {function(event: MsgEvent)} callback\n   */},{key:'onResponse',value:function onResponse(callback){this._onResponseHandler=callback;}},{key:'_onForward',value:function _onForward(msg){var _this=this;console.log('DataObjectReporter-RCV: ',msg);switch(msg.body.type){case 'subscribe':_this._onSubscribe(msg);break;case 'unsubscribe':_this._onUnSubscribe(msg);break;}}},{key:'_onSubscribe',value:function _onSubscribe(msg){var _this=this;var hypertyUrl=msg.body.from;var event={type:msg.body.type,url:hypertyUrl,accept:function accept(){ //create new subscription\nvar sub={url:hypertyUrl,status:'on'};_this._subscriptions[hypertyUrl]=sub; //process and send childrens data\nvar childrenValues={};(0,_keys2.default)(_this._childrenObjects).forEach(function(childId){var childData=_this._childrenObjects[childId].data;childrenValues[childId]=(0,_utils.deepClone)(childData);}); //send ok response message\n_this._bus.postMessage({id:msg.id,type:'response',from:msg.to,to:msg.from,body:{code:200,schema:_this._schema,version:_this._version,value:{data:(0,_utils.deepClone)(_this.data),childrens:childrenValues}}});return sub;},reject:function reject(reason){ //send reject response message\n_this._bus.postMessage({id:msg.id,type:'response',from:msg.to,to:msg.from,body:{code:403,desc:reason}});}};if(_this._onSubscriptionHandler){console.log('SUBSCRIPTION-EVENT: ',event);_this._onSubscriptionHandler(event);}}},{key:'_onUnSubscribe',value:function _onUnSubscribe(msg){var _this=this;var hypertyUrl=msg.body.from;var sub=_this._subscriptions[hypertyUrl];delete _this._subscriptions[hypertyUrl];var event={type:msg.body.type,url:hypertyUrl,object:sub};if(_this._onSubscriptionHandler){console.log('UN-SUBSCRIPTION-EVENT: ',event);_this._onSubscriptionHandler(event);}}},{key:'_onResponse',value:function _onResponse(msg){var _this=this;var event={type:msg.type,url:msg.from,code:msg.body.code};if(_this._onResponseHandler){console.log('RESPONSE-EVENT: ',event);_this._onResponseHandler(event);}}},{key:'subscriptions',get:function get(){return this._subscriptions;}}]);return DataObjectReporter;}(_DataObject3.default /* implements SyncStatus */);exports.default=DataObjectReporter;module.exports=exports['default'];\n\n},{\"../utils/utils.js\":100,\"./DataObject\":93,\"babel-runtime/core-js/object/get-prototype-of\":6,\"babel-runtime/core-js/object/keys\":7,\"babel-runtime/helpers/classCallCheck\":11,\"babel-runtime/helpers/createClass\":12,\"babel-runtime/helpers/get\":13,\"babel-runtime/helpers/inherits\":14,\"babel-runtime/helpers/possibleConstructorReturn\":15}],97:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,\"__esModule\",{value:true});var _classCallCheck2=require('babel-runtime/helpers/classCallCheck');var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require('babel-runtime/helpers/createClass');var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};} /**\n* Copyright 2016 PT Inovao e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/ /**\n * @access private\n */var DataProvisional=function(){ /* private\n  _childrenListeners: [MsgListener]\n  _listener: MsgListener\n\n  _changes: []\n  */function DataProvisional(owner,url,bus,children){(0,_classCallCheck3.default)(this,DataProvisional);var _this=this;_this._owner=owner;_this._url=url;_this._bus=bus;_this._children=children;_this._changes=[];_this._allocateListeners();}(0,_createClass3.default)(DataProvisional,[{key:'_allocateListeners',value:function _allocateListeners(){var _this=this;_this._listener=_this._bus.addListener(_this._url,function(msg){console.log('DataProvisional-'+_this._url+'-RCV: ',msg);_this._changes.push(msg);}); /*\n    _this._childrenListeners = [];\n    if (_this._children) {\n      let childBaseURL = url + '/children/';\n      _this._children.forEach((child) => {\n        let childURL = childBaseURL + child;\n        let listener = _this._bus.addListener(childURL, (msg) => {\n          //ignore msg sent by himself\n          if (msg.from !== owner) {\n            console.log(msg);\n          }\n        });\n\n        _this._childrenListeners.push(listener);\n      });\n    }*/}},{key:'_releaseListeners',value:function _releaseListeners(){var _this=this;_this._listener.remove(); /*_this._childrenListeners.forEach((listener) => {\n      listener.remove();\n    });*/}},{key:'apply',value:function apply(observer){var _this=this;_this._changes.forEach(function(change){observer._changeObject(observer._syncObj,change);});}},{key:'children',get:function get(){return this._children;}}]);return DataProvisional;}();exports.default=DataProvisional;module.exports=exports['default'];\n\n},{\"babel-runtime/helpers/classCallCheck\":11,\"babel-runtime/helpers/createClass\":12}],98:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,\"__esModule\",{value:true});exports.ObjectType=exports.ChangeType=undefined;var _keys=require('babel-runtime/core-js/object/keys');var _keys2=_interopRequireDefault(_keys);var _classCallCheck2=require('babel-runtime/helpers/classCallCheck');var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require('babel-runtime/helpers/createClass');var _createClass3=_interopRequireDefault(_createClass2);var _utils=require('../utils/utils.js');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};} /**\n * @access private\n */var SyncObject=function(){ /* private\n    _data: any;\n    _observers: ((event: ChangeEvent) => void)[]\n  */function SyncObject(initialData){(0,_classCallCheck3.default)(this,SyncObject);var _this=this;_this._observers=[];_this._filters={};if(initialData){_this._data=(0,_utils.deepClone)(initialData);}else {_this._data={};}_this._internalObserve(new Path(),_this._data);}(0,_createClass3.default)(SyncObject,[{key:'observe',value:function observe(callback){this._observers.push(callback);}},{key:'find',value:function find(path){var list=path.split('.');return this._findWithSplit(list);}},{key:'findBefore',value:function findBefore(path){var result={};var list=path.split('.');result.last=list.pop();result.obj=this._findWithSplit(list);return result;}},{key:'_findWithSplit',value:function _findWithSplit(list){var obj=this._data;list.forEach(function(value){obj=obj[value];});return obj;}},{key:'_fireEvent',value:function _fireEvent(event){this._observers.forEach(function(callback){callback(event);});}},{key:'_isObservable',value:function _isObservable(obj){if(obj.constructor===Object||obj.constructor===Array){return true;}return false;}},{key:'_internalObserve',value:function _internalObserve(path,obj){var _this=this;if(_this._isObservable(obj)){var handler=function handler(changes){_this._onChanges(path,changes);};if(obj.constructor===Object){Object.observe(obj,handler);for(var prop in obj){if(_this._isObservable(obj[prop])){_this._internalObserve(path.new(prop),obj[prop]);}}}else if(obj.constructor===Array){Array.observe(obj,handler);for(var _prop in obj){if(_this._isObservable(obj[_prop])){var np=path.new(new ArrayIndex(obj[_prop],_prop));_this._internalObserve(np,obj[_prop]);}}}}}},{key:'_onChanges',value:function _onChanges(path,changes){var _this2=this;for(var i in changes){var obj=changes[i].object;var objType=void 0;if(obj.constructor===Object){objType=ObjectType.OBJECT;}if(obj.constructor===Array){objType=ObjectType.ARRAY;}if(changes[i].type==='splice'){(function(){var idx=changes[i].index;var field=path.new(''+idx);var fieldString=field.toString();var removeSize=changes[i].removed.length;if(removeSize!==0){var removeValues=changes[i].removed;removeValues.forEach(function(value,index){if(_this2._isObservable(value)){path.removeIndex(idx+index);}});_this2._fireEvent({cType:ChangeType.REMOVE,oType:objType,field:fieldString,data:removeSize});}var addSize=changes[i].addedCount;if(addSize!==0){var addValues=obj.slice(idx,idx+addSize);addValues.forEach(function(value,index){if(_this2._isObservable(value)){var np=path.new(new ArrayIndex(value,idx+index));_this2._internalObserve(np,value);}});_this2._fireEvent({cType:ChangeType.ADD,oType:objType,field:fieldString,data:(0,_utils.deepClone)(addValues)});} //re-define paths...\nif(idx!==obj.length-1){path.reIndexFrom(obj);}})();}else {var _field=path.new(changes[i].name);var _fieldString=_field.toString();if(_fieldString.indexOf('Symbol')!==-1){ //hack for PhantomJS2\n//console.log('SYMBOL: ', changes[i]);\ncontinue;} //let oldValue = changes[i].oldValue;\nvar newValue=obj[changes[i].name];if(changes[i].type==='update'){this._fireEvent({cType:ChangeType.UPDATE,oType:objType,field:_fieldString,data:(0,_utils.deepClone)(newValue)});}if(changes[i].type==='add'){this._internalObserve(_field,newValue);this._fireEvent({cType:ChangeType.ADD,oType:objType,field:_fieldString,data:(0,_utils.deepClone)(newValue)});}if(changes[i].type==='delete'){this._fireEvent({cType:ChangeType.REMOVE,oType:objType,field:_fieldString});}}}}},{key:'data',get:function get(){return this._data;}}]);return SyncObject;}(); //dynamic path for Array index...\n/**\n* Copyright 2016 PT Inovao e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/var Path=function(){function Path(){(0,_classCallCheck3.default)(this,Path);this._path=[];this._observables={}; //<index:ArrayIndex>\n}(0,_createClass3.default)(Path,[{key:'removeIndex',value:function removeIndex(idx){ //console.log('REMOVE-PATH ' + idx);\ndelete this._observables[idx];}},{key:'reIndexFrom',value:function reIndexFrom(array){var _this3=this;(0,_keys2.default)(this._observables).forEach(function(key){var arrayIndex=_this3._observables[key];var idx=array.indexOf(arrayIndex.obj);if(arrayIndex.idx!=idx){ //console.log('RE-INDEX: ' + key + '->' + idx);\narrayIndex.idx=idx;delete _this3._observables[key];_this3._observables[idx]=arrayIndex;}});}},{key:'new',value:function _new(idx){if(idx.constructor==ArrayIndex){ //console.log('PATH-OBSERV: ', idx);\nthis._observables[idx.idx]=idx;}var nPath=this.clone();nPath._path.push(idx);return nPath;}},{key:'clone',value:function clone(){var nPath=new Path();this._path.forEach(function(value){nPath._path.push(value);});return nPath;}},{key:'toString',value:function toString(){ //TODO: optimize!!\nvar str='';this._path.forEach(function(value,index){if(index===0){str=value.toString();}else {str+='.'+value.toString();}});return str;}}]);return Path;}();var ArrayIndex=function(){function ArrayIndex(obj,idx){(0,_classCallCheck3.default)(this,ArrayIndex);this.obj=obj;this.idx=idx;}(0,_createClass3.default)(ArrayIndex,[{key:'toString',value:function toString(){return this.idx.toString();}}]);return ArrayIndex;}();var ChangeType=exports.ChangeType={UPDATE:'update',ADD:'add',REMOVE:'remove'};var ObjectType=exports.ObjectType={OBJECT:'object',ARRAY:'array'};exports.default=SyncObject;\n\n},{\"../utils/utils.js\":100,\"babel-runtime/core-js/object/keys\":7,\"babel-runtime/helpers/classCallCheck\":11,\"babel-runtime/helpers/createClass\":12}],99:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,\"__esModule\",{value:true});var _promise=require('babel-runtime/core-js/promise');var _promise2=_interopRequireDefault(_promise);var _classCallCheck2=require('babel-runtime/helpers/classCallCheck');var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require('babel-runtime/helpers/createClass');var _createClass3=_interopRequireDefault(_createClass2);var _DataObjectReporter=require('./DataObjectReporter');var _DataObjectReporter2=_interopRequireDefault(_DataObjectReporter);var _DataObjectObserver=require('./DataObjectObserver');var _DataObjectObserver2=_interopRequireDefault(_DataObjectObserver);var _DataProvisional=require('./DataProvisional');var _DataProvisional2=_interopRequireDefault(_DataProvisional);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};} /**\n * The main class for the syncher package.\n * The Syncher is a singleton class per Hyperty/URL and it is the owner of all created Data Sync Objects according to the Reporter - Observer pattern.\n * Main functionality is to create reporters and to subscribe to existing ones.\n */var Syncher=function(){ /* private\n  _owner: URL\n  _bus: MiniBus\n\n  _subURL: URL\n\n  _reporters: <url: DataObjectReporter>\n  _observers: <url: DataObjectObserver>\n  _provisionals: <url: DataProvisional>\n\n  ----event handlers----\n  _onNotificationHandler: (event) => void\n  */ /**\n  * Constructor that should be used by the Hyperty owner\n  * @param {HypertyURL} owner - Hyperty URL owner. An URL allocated by the runtime that uniquely identifies the Hyperty.\n  * @param {MiniBus} bus - An instance of the MiniBus provided in the sandbox. When an object (Reporter or Observed) is created, the SyncherManager will add a listener in the MiniBus to receive/send Messages of that object.\n  * @param {JSON} config - Configuration data. The only required field for now is the runtimeURL.\n  */function Syncher(owner,bus,config){(0,_classCallCheck3.default)(this,Syncher);var _this=this;_this._owner=owner;_this._bus=bus;_this._subURL=config.runtimeURL+'/sm';_this._reporters={};_this._observers={};_this._provisionals={};bus.addListener(owner,function(msg){ //ignore msg sent by himself\nif(msg.from!==owner){console.log('Syncher-RCV: ',msg);switch(msg.type){case 'forward':_this._onForward(msg);break;case 'create':_this._onRemoteCreate(msg);break;case 'delete':_this._onRemoteDelete(msg);break;}}});} /**\n  * The owner of the Syncher and all created reporters.\n  * @type {HypertyURL}\n  */(0,_createClass3.default)(Syncher,[{key:'create', /**\n  * Request a DataObjectReporter creation. The URL will be be requested by the allocation mechanism.\n  * @param  {SchemaURL} schema - URL of the object descriptor\n  * @param  {HypertyURL[]} observers - List of hyperties that are pre-authorized for subscription\n  * @param  {JSON} initialData - Initial data of the reporter\n  * @return {Promise<DataObjectReporter>} Return Promise to a new Reporter. The reporter can be accepted or rejected by the PEP\n  */value:function create(schema,observers,initialData){var _this=this;initialData.reporter=_this._owner;initialData.schema=schema;var requestMsg={type:'create',from:_this._owner,to:_this._subURL,body:{schema:schema,value:initialData,authorise:observers}};return new _promise2.default(function(resolve,reject){ //request create to the Allocation system? Can be rejected by the PolicyEngine.\n_this._bus.postMessage(requestMsg,function(reply){console.log('create-response: ',reply);if(reply.body.code===200){var objURL=reply.body.resource; //reporter creation accepted\nvar newObj=new _DataObjectReporter2.default(_this,objURL,schema,'on',initialData,reply.body.childrenResources);_this._reporters[objURL]=newObj;resolve(newObj);}else { //reporter creation rejected\nreject(reply.body.desc);}});});} /**\n  * Request a subscription to an existent object.\n  * @param {SchemaURL} schema - URL of the object descriptor\n  * @param {ObjectURL} objURL - Address of the existent reporter object\n  * @return {Promise<DataObjectObserver>} Return Promise to a new observer.\n  */},{key:'subscribe',value:function subscribe(schema,objURL){var _this=this; //TODO: validate if subscription already exists ?\nvar subscribeMsg={type:'subscribe',from:_this._owner,to:_this._subURL,body:{schema:schema,resource:objURL}};return new _promise2.default(function(resolve,reject){ //request subscription\n_this._bus.postMessage(subscribeMsg,function(reply){console.log('subscribe-response: ',reply);var newProvisional=_this._provisionals[objURL];delete _this._provisionals[objURL];if(newProvisional)newProvisional._releaseListeners();if(reply.body.code<200){newProvisional=new _DataProvisional2.default(_this._owner,objURL,_this._bus,reply.body.childrenResources);_this._provisionals[objURL]=newProvisional;}else if(reply.body.code===200){var newObj=new _DataObjectObserver2.default(_this,objURL,schema,'on',reply.body.value,newProvisional.children,reply.body.version);_this._observers[objURL]=newObj;resolve(newObj);newProvisional.apply(newObj);}else {reject(reply.body.desc);}});});} /**\n  * Setup the callback to process create and delete events of remove Reporter objects.\n  * This is releated to the messagens sent by create to the observers Hyperty array.\n  * @param {function(event: MsgEvent)} callback\n  */},{key:'onNotification',value:function onNotification(callback){this._onNotificationHandler=callback;}},{key:'_onForward',value:function _onForward(msg){var _this=this;var reporter=_this._reporters[msg.body.to];reporter._onForward(msg);}},{key:'_onRemoteCreate',value:function _onRemoteCreate(msg){var _this=this; //remove \"/subscription\" from the URL\nvar resource=msg.from.slice(0,-13);var event={type:msg.type,from:msg.body.source,url:resource,schema:msg.body.schema,value:msg.body.value,identity:msg.body.identity,ack:function ack(type){var lType=200;if(type){lType=type;} //send ack response message\n_this._bus.postMessage({id:msg.id,type:'response',from:msg.to,to:msg.from,body:{code:lType}});}};if(_this._onNotificationHandler){console.log('NOTIFICATION-EVENT: ',event);_this._onNotificationHandler(event);}}},{key:'_onRemoteDelete',value:function _onRemoteDelete(msg){var _this=this; //remove \"/subscription\" from the URL\nvar resource=msg.body.resource;var object=_this._observers[resource];if(object){var event={type:msg.type,url:resource,identity:msg.body.identity,ack:function ack(type){var lType=200;if(type){lType=type;} //TODO: any other different options for the release process, like accept but nor release local?\nif(lType===200){object.delete();} //send ack response message\n_this._bus.postMessage({id:msg.id,type:'response',from:msg.to,to:msg.from,body:{code:lType,source:_this._owner}});}};if(_this._onNotificationHandler){console.log('NOTIFICATION-EVENT: ',event);_this._onNotificationHandler(event);}}else {_this._bus.postMessage({id:msg.id,type:'response',from:msg.to,to:msg.from,body:{code:404,source:_this._owner}});}}},{key:'owner',get:function get(){return this._owner;} /**\n  * All owned reporters, the ones that were created by a create\n  * @type {Object<URL, DataObjectReporter>}\n  */},{key:'reporters',get:function get(){return this._reporters;} /**\n  * All owned observers, the ones that were created by a local subscription\n  * @type {Object<URL, DataObjectObserver>}\n  */},{key:'observers',get:function get(){return this._observers;}}]);return Syncher;}(); /**\n* Copyright 2016 PT Inovao e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/exports.default=Syncher;module.exports=exports['default'];\n\n},{\"./DataObjectObserver\":95,\"./DataObjectReporter\":96,\"./DataProvisional\":97,\"babel-runtime/core-js/promise\":9,\"babel-runtime/helpers/classCallCheck\":11,\"babel-runtime/helpers/createClass\":12}],100:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,\"__esModule\",{value:true});var _stringify=require('babel-runtime/core-js/json/stringify');var _stringify2=_interopRequireDefault(_stringify);var _keys=require('babel-runtime/core-js/object/keys');var _keys2=_interopRequireDefault(_keys);exports.divideURL=divideURL;exports.divideEmail=divideEmail;exports.emptyObject=emptyObject;exports.deepClone=deepClone;exports.getUserURLFromEmail=getUserURLFromEmail;exports.getUserEmailFromURL=getUserEmailFromURL;exports.convertToUserURL=convertToUserURL;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};} /**\n* Copyright 2016 PT Inovao e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/ /**\n * Support module with some functions will be useful\n * @module utils\n */ /**\n * @typedef divideURL\n * @type Object\n * @property {string} type The type of URL\n * @property {string} domain The domain of URL\n * @property {string} identity The identity of URL\n */ /**\n * Divide an url in type, domain and identity\n * @param  {URL.URL} url - url address\n * @return {divideURL} the result of divideURL\n */function divideURL(url){if(!url)throw Error('URL is needed to split'); // let re = /([a-zA-Z-]*)?:\\/\\/(?:\\.)?([-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b)*(\\/[\\/\\d\\w\\.-]*)*(?:[\\?])*(.+)*/gi;\nvar re=/([a-zA-Z-]*):\\/\\/(?:\\.)?([-a-zA-Z0-9@:%._\\+~#=]{2,256})([-a-zA-Z0-9@:%._\\+~#=\\/]*)/gi;var subst='$1,$2,$3';var parts=url.replace(re,subst).split(','); // If the url has no protocol, the default protocol set is https\nif(parts[0]===url){parts[0]='https';parts[1]=url;}var result={type:parts[0],domain:parts[1],identity:parts[2]};return result;}function divideEmail(email){var indexOfAt=email.indexOf('@');var result={username:email.substring(0,indexOfAt),domain:email.substring(indexOfAt+1,email.length)};return result;} /**\n * Check if an Object is empty\n * @param  {Object} object Object to be checked\n * @return {Boolean}       status of Object, empty or not (true|false);\n */function emptyObject(object){return (0,_keys2.default)(object).length>0?false:true;} /**\n * Make a COPY of the original data\n * @param  {Object}  obj - object to be cloned\n * @return {Object}\n */function deepClone(obj){ //TODO: simple but inefficient JSON deep clone...\nif(obj)return JSON.parse((0,_stringify2.default)(obj));} /**\n * Obtains the user URL that corresponds to a given email\n * @param  {string} userEmail The user email\n * @return {URL.URL} userURL The user URL\n */function getUserURLFromEmail(userEmail){var indexOfAt=userEmail.indexOf('@');return 'user://'+userEmail.substring(indexOfAt+1,userEmail.length)+'/'+userEmail.substring(0,indexOfAt);} /**\n * Obtains the user email that corresponds to a given URL\n * @param  {URL.URL} userURL The user URL\n * @return {string} userEmail The user email\n */function getUserEmailFromURL(userURL){var url=divideURL(userURL);return url.identity.replace('/','')+'@'+url.domain; // identity field has '/exampleID' instead of 'exampleID'\n} /**\n * Check if the user identifier is already in the URL format, if not, convert to URL format\n * @param  {string}   identifier  user identifier\n * @return {string}   userURL    the user URL\n */function convertToUserURL(identifier){ // check if the identifier is already in the url format\nif(identifier.substring(0,7)==='user://'){var dividedURL=divideURL(identifier); //check if the url is well formated\nif(dividedURL.domain&&dividedURL.identity){return identifier;}else {throw 'userURL with wrong format';} //if not, convert the user email to URL format\n}else {return getUserURLFromEmail(identifier);}}\n\n},{\"babel-runtime/core-js/json/stringify\":2,\"babel-runtime/core-js/object/keys\":7}]},{},[92])(92)\n});"],"sourceRoot":"/source/"}