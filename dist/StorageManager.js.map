{"version":3,"sources":["StorageManager.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","StorageManager","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","default","__esModule","core-js/library/fn/object/define-property","2","instance","Constructor","TypeError","3","_interopRequireDefault","obj","_defineProperty","_defineProperty2","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","../core-js/object/define-property","4","$Object","Object","it","desc","defineProperty","../../modules/_core","../../modules/es6.object.define-property","5","6","isObject","./_is-object","7","core","version","__e","8","aFunction","fn","that","undefined","b","c","apply","arguments","./_a-function","9","get","./_fails","10","document","is","createElement","./_global","11","ctx","hide","PROTOTYPE","$export","type","name","source","own","out","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","S","IS_PROTO","P","IS_BIND","B","IS_WRAP","W","expProto","C","Function","virtual","R","U","./_core","./_ctx","./_hide","12","exec","13","Math","__g","14","dP","createDesc","object","value","./_descriptors","./_object-dp","./_property-desc","15","./_dom-create","16","17","anObject","IE8_DOM_DEFINE","toPrimitive","O","Attributes","./_an-object","./_ie8-dom-define","./_to-primitive","18","bitmap","19","val","toString","valueOf","20","./_export","21","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","db","storageName","stores","open","then","console","info","verno","error","put","_checkKey","where","equals","first","babel-runtime/helpers/classCallCheck","babel-runtime/helpers/createClass"],"mappings":"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","file":"StorageManager.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.StorageManager = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n},{\"core-js/library/fn/object/define-property\":4}],2:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n},{}],3:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n},{\"../core-js/object/define-property\":1}],4:[function(require,module,exports){\nrequire('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc){\n  return $Object.defineProperty(it, key, desc);\n};\n},{\"../../modules/_core\":7,\"../../modules/es6.object.define-property\":20}],5:[function(require,module,exports){\nmodule.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n},{}],6:[function(require,module,exports){\nvar isObject = require('./_is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n},{\"./_is-object\":16}],7:[function(require,module,exports){\nvar core = module.exports = {version: '2.4.0'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n},{}],8:[function(require,module,exports){\n// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n},{\"./_a-function\":5}],9:[function(require,module,exports){\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n},{\"./_fails\":12}],10:[function(require,module,exports){\nvar isObject = require('./_is-object')\n  , document = require('./_global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};\n},{\"./_global\":13,\"./_is-object\":16}],11:[function(require,module,exports){\nvar global    = require('./_global')\n  , core      = require('./_core')\n  , ctx       = require('./_ctx')\n  , hide      = require('./_hide')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , expProto  = exports[PROTOTYPE]\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(a, b, c){\n        if(this instanceof C){\n          switch(arguments.length){\n            case 0: return new C;\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if(IS_PROTO){\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if(type & $export.R && expProto && !expProto[key])hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library` \nmodule.exports = $export;\n},{\"./_core\":7,\"./_ctx\":8,\"./_global\":13,\"./_hide\":14}],12:[function(require,module,exports){\nmodule.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n},{}],13:[function(require,module,exports){\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n},{}],14:[function(require,module,exports){\nvar dP         = require('./_object-dp')\n  , createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function(object, key, value){\n  return dP.f(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n},{\"./_descriptors\":9,\"./_object-dp\":17,\"./_property-desc\":18}],15:[function(require,module,exports){\nmodule.exports = !require('./_descriptors') && !require('./_fails')(function(){\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', {get: function(){ return 7; }}).a != 7;\n});\n},{\"./_descriptors\":9,\"./_dom-create\":10,\"./_fails\":12}],16:[function(require,module,exports){\nmodule.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n},{}],17:[function(require,module,exports){\nvar anObject       = require('./_an-object')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , toPrimitive    = require('./_to-primitive')\n  , dP             = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes){\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if(IE8_DOM_DEFINE)try {\n    return dP(O, P, Attributes);\n  } catch(e){ /* empty */ }\n  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n  if('value' in Attributes)O[P] = Attributes.value;\n  return O;\n};\n},{\"./_an-object\":6,\"./_descriptors\":9,\"./_ie8-dom-define\":15,\"./_to-primitive\":19}],18:[function(require,module,exports){\nmodule.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n},{}],19:[function(require,module,exports){\n// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function(it, S){\n  if(!isObject(it))return it;\n  var fn, val;\n  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n},{\"./_is-object\":16}],20:[function(require,module,exports){\nvar $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', {defineProperty: require('./_object-dp').f});\n},{\"./_descriptors\":9,\"./_export\":11,\"./_object-dp\":17}],21:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar StorageManager = function () {\n  function StorageManager(db, storageName) {\n    var version = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n    (0, _classCallCheck3.default)(this, StorageManager);\n\n    if (!db) throw Error('The Storage Manager needs the database instance');\n    if (!storageName) throw Error('The Storage Manager needs the storage name');\n\n    var stores = {};\n    stores[storageName] = 'key,version,value';\n\n    db.version(version).stores(stores);\n    db.open().then(function (db) {\n      console.info('Found database name ' + db.name + ' with version no: ' + db.verno);\n\n      // db.tables.forEach((table) => {\n      //   console.log('Found table: ' + table.name);\n      //   console.log('Table Schema: ' + JSON.stringify(table.schema, null, 4));\n      // });\n    }).catch(console.error);\n\n    this.db = db;\n    this.storageName = storageName;\n  }\n\n  (0, _createClass3.default)(StorageManager, [{\n    key: '_checkKey',\n    value: function _checkKey(key) {\n      if (typeof key !== 'string') return key.toString();\n      return key;\n    }\n\n    /**\n    * Adds a new entry to the database for a given key, together with its version.\n    * If an entry for the given key is already stored in the database, it will be updated.\n    * @param {!string} key - key that can be used with {@link storageManager.get} to retrieve the value object\n    * @param {!string} version - version descriptor for the given value\n    * @param value - value stored in the database that is mapped to given key\n    * @returns {Promise} result - Promise that will be fulfilled with the key if the entry was stored successfully,\n    * otherwise it is rejected with an error.\n    */\n\n  }, {\n    key: 'set',\n    value: function set(key, version, value) {\n      console.info('[StorageManager] - set ', key);\n\n      return this.db[this.storageName].put({ key: this._checkKey(key), version: version, value: value });\n    }\n\n    /**\n     * Get a entry value from the database for a given key.\n     * If no entry is found undefined is returned.\n     * @param {!string} key - key that was stored using {@link storageManager.set}\n     * @returns {Promise} result - Promise that will be fulfilled with the value.\n     */\n\n  }, {\n    key: 'get',\n    value: function get(key) {\n      console.info('[StorageManager] - get ', key);\n      return this.db[this.storageName].where('key').equals(this._checkKey(key)).first().then(function (object) {\n        if (object) return object.value;\n      }).catch(function (error) {\n        console.info('error getting the key ', key, ' with error: ', error);\n        return undefined;\n      });\n    }\n\n    /**\n     * Get a entry version from the database for a given key.\n     * If no entry is found undefined is returned.\n     * @param {!string} key - key that was stored using {@link storageManager.set}\n     * @returns {Promise} result - Promise that will be fulfilled with the version.\n     */\n\n  }, {\n    key: 'getVersion',\n    value: function getVersion(key) {\n      console.info('[StorageManager] - getVersion for key ', key);\n      return this.db[this.storageName].where('key').equals(this._checkKey(key)).first().then(function (object) {\n        if (object) return object.version;\n      }).catch(function (error) {\n        console.info('error getting the version for ', key, ' with error: ', error);\n        return undefined;\n      });\n    }\n\n    /**\n     * Delete a entry from the database for a given key.\n     * @param {!string} key - key that was stored using {@link storageManager.set}\n     * @returns {Promise} result - Promise that will be fulfilled with the number of affected rows.\n     */\n\n  }, {\n    key: 'delete',\n    value: function _delete(key) {\n      return this.db[this.storageName].where('key').equals(this._checkKey(key)).delete();\n    }\n  }]);\n  return StorageManager;\n}();\n\nexports.default = StorageManager;\nmodule.exports = exports['default'];\n\n},{\"babel-runtime/helpers/classCallCheck\":2,\"babel-runtime/helpers/createClass\":3}]},{},[21])(21)\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9kZWZpbmUtcHJvcGVydHkuanMiLCJub2RlX21vZHVsZXMvYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrLmpzIiwibm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcy5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eS5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fYS1mdW5jdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fYW4tb2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19jb3JlLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19jdHguanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2Rlc2NyaXB0b3JzLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19kb20tY3JlYXRlLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19leHBvcnQuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2ZhaWxzLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19nbG9iYWwuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2hpZGUuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2llOC1kb20tZGVmaW5lLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19pcy1vYmplY3QuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX29iamVjdC1kcC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fcHJvcGVydHktZGVzYy5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fdG8tcHJpbWl0aXZlLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNi5vYmplY3QuZGVmaW5lLXByb3BlcnR5LmpzIiwic3JjL3N0b3JhZ2UtbWFuYWdlci9TdG9yYWdlTWFuYWdlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBOztBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBOztBQ0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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LE1BREksQ0FDRyxLQUFLLFNBQUwsQ0FBZSxHQUFmLENBREgsRUFFSixLQUZJLEdBR0osSUFISSxDQUdDLFVBQUMsTUFBRCxFQUFZO0FBQ2hCLFlBQUksTUFBSixFQUFZLE9BQU8sT0FBTyxPQUFkO0FBQ2IsT0FMSSxFQU1KLEtBTkksQ0FNRSxpQkFBUztBQUNkLGdCQUFRLElBQVIsQ0FBYSxnQ0FBYixFQUErQyxHQUEvQyxFQUFvRCxlQUFwRCxFQUFxRSxLQUFyRTtBQUNBLGVBQU8sU0FBUDtBQUNELE9BVEksQ0FBUDtBQVVEOztBQUVIOzs7Ozs7Ozs0QkFLUyxHLEVBQUs7QUFDVixhQUFPLEtBQUssRUFBTCxDQUFRLEtBQUssV0FBYixFQUNKLEtBREksQ0FDRSxLQURGLEVBRUosTUFGSSxDQUVHLEtBQUssU0FBTCxDQUFlLEdBQWYsQ0FGSCxFQUdKLE1BSEksRUFBUDtBQUlEOzs7OztrQkFJWSxjIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIm1vZHVsZS5leHBvcnRzID0geyBcImRlZmF1bHRcIjogcmVxdWlyZShcImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5XCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX2RlZmluZVByb3BlcnR5ID0gcmVxdWlyZShcIi4uL2NvcmUtanMvb2JqZWN0L2RlZmluZS1wcm9wZXJ0eVwiKTtcblxudmFyIF9kZWZpbmVQcm9wZXJ0eTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZWZpbmVQcm9wZXJ0eSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gICAgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gICAgcmV0dXJuIENvbnN0cnVjdG9yO1xuICB9O1xufSgpOyIsInJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5kZWZpbmUtcHJvcGVydHknKTtcbnZhciAkT2JqZWN0ID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9fY29yZScpLk9iamVjdDtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoaXQsIGtleSwgZGVzYyl7XG4gIHJldHVybiAkT2JqZWN0LmRlZmluZVByb3BlcnR5KGl0LCBrZXksIGRlc2MpO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgaWYodHlwZW9mIGl0ICE9ICdmdW5jdGlvbicpdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgYSBmdW5jdGlvbiEnKTtcbiAgcmV0dXJuIGl0O1xufTsiLCJ2YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICBpZighaXNPYmplY3QoaXQpKXRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGFuIG9iamVjdCEnKTtcbiAgcmV0dXJuIGl0O1xufTsiLCJ2YXIgY29yZSA9IG1vZHVsZS5leHBvcnRzID0ge3ZlcnNpb246ICcyLjQuMCd9O1xuaWYodHlwZW9mIF9fZSA9PSAnbnVtYmVyJylfX2UgPSBjb3JlOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmIiwiLy8gb3B0aW9uYWwgLyBzaW1wbGUgY29udGV4dCBiaW5kaW5nXG52YXIgYUZ1bmN0aW9uID0gcmVxdWlyZSgnLi9fYS1mdW5jdGlvbicpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmbiwgdGhhdCwgbGVuZ3RoKXtcbiAgYUZ1bmN0aW9uKGZuKTtcbiAgaWYodGhhdCA9PT0gdW5kZWZpbmVkKXJldHVybiBmbjtcbiAgc3dpdGNoKGxlbmd0aCl7XG4gICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24oYSl7XG4gICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhKTtcbiAgICB9O1xuICAgIGNhc2UgMjogcmV0dXJuIGZ1bmN0aW9uKGEsIGIpe1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYik7XG4gICAgfTtcbiAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbihhLCBiLCBjKXtcbiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEsIGIsIGMpO1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uKC8qIC4uLmFyZ3MgKi8pe1xuICAgIHJldHVybiBmbi5hcHBseSh0aGF0LCBhcmd1bWVudHMpO1xuICB9O1xufTsiLCIvLyBUaGFuaydzIElFOCBmb3IgaGlzIGZ1bm55IGRlZmluZVByb3BlcnR5XG5tb2R1bGUuZXhwb3J0cyA9ICFyZXF1aXJlKCcuL19mYWlscycpKGZ1bmN0aW9uKCl7XG4gIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdhJywge2dldDogZnVuY3Rpb24oKXsgcmV0dXJuIDc7IH19KS5hICE9IDc7XG59KTsiLCJ2YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKVxuICAsIGRvY3VtZW50ID0gcmVxdWlyZSgnLi9fZ2xvYmFsJykuZG9jdW1lbnRcbiAgLy8gaW4gb2xkIElFIHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50IGlzICdvYmplY3QnXG4gICwgaXMgPSBpc09iamVjdChkb2N1bWVudCkgJiYgaXNPYmplY3QoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIGlzID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChpdCkgOiB7fTtcbn07IiwidmFyIGdsb2JhbCAgICA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpXG4gICwgY29yZSAgICAgID0gcmVxdWlyZSgnLi9fY29yZScpXG4gICwgY3R4ICAgICAgID0gcmVxdWlyZSgnLi9fY3R4JylcbiAgLCBoaWRlICAgICAgPSByZXF1aXJlKCcuL19oaWRlJylcbiAgLCBQUk9UT1RZUEUgPSAncHJvdG90eXBlJztcblxudmFyICRleHBvcnQgPSBmdW5jdGlvbih0eXBlLCBuYW1lLCBzb3VyY2Upe1xuICB2YXIgSVNfRk9SQ0VEID0gdHlwZSAmICRleHBvcnQuRlxuICAgICwgSVNfR0xPQkFMID0gdHlwZSAmICRleHBvcnQuR1xuICAgICwgSVNfU1RBVElDID0gdHlwZSAmICRleHBvcnQuU1xuICAgICwgSVNfUFJPVE8gID0gdHlwZSAmICRleHBvcnQuUFxuICAgICwgSVNfQklORCAgID0gdHlwZSAmICRleHBvcnQuQlxuICAgICwgSVNfV1JBUCAgID0gdHlwZSAmICRleHBvcnQuV1xuICAgICwgZXhwb3J0cyAgID0gSVNfR0xPQkFMID8gY29yZSA6IGNvcmVbbmFtZV0gfHwgKGNvcmVbbmFtZV0gPSB7fSlcbiAgICAsIGV4cFByb3RvICA9IGV4cG9ydHNbUFJPVE9UWVBFXVxuICAgICwgdGFyZ2V0ICAgID0gSVNfR0xPQkFMID8gZ2xvYmFsIDogSVNfU1RBVElDID8gZ2xvYmFsW25hbWVdIDogKGdsb2JhbFtuYW1lXSB8fCB7fSlbUFJPVE9UWVBFXVxuICAgICwga2V5LCBvd24sIG91dDtcbiAgaWYoSVNfR0xPQkFMKXNvdXJjZSA9IG5hbWU7XG4gIGZvcihrZXkgaW4gc291cmNlKXtcbiAgICAvLyBjb250YWlucyBpbiBuYXRpdmVcbiAgICBvd24gPSAhSVNfRk9SQ0VEICYmIHRhcmdldCAmJiB0YXJnZXRba2V5XSAhPT0gdW5kZWZpbmVkO1xuICAgIGlmKG93biAmJiBrZXkgaW4gZXhwb3J0cyljb250aW51ZTtcbiAgICAvLyBleHBvcnQgbmF0aXZlIG9yIHBhc3NlZFxuICAgIG91dCA9IG93biA/IHRhcmdldFtrZXldIDogc291cmNlW2tleV07XG4gICAgLy8gcHJldmVudCBnbG9iYWwgcG9sbHV0aW9uIGZvciBuYW1lc3BhY2VzXG4gICAgZXhwb3J0c1trZXldID0gSVNfR0xPQkFMICYmIHR5cGVvZiB0YXJnZXRba2V5XSAhPSAnZnVuY3Rpb24nID8gc291cmNlW2tleV1cbiAgICAvLyBiaW5kIHRpbWVycyB0byBnbG9iYWwgZm9yIGNhbGwgZnJvbSBleHBvcnQgY29udGV4dFxuICAgIDogSVNfQklORCAmJiBvd24gPyBjdHgob3V0LCBnbG9iYWwpXG4gICAgLy8gd3JhcCBnbG9iYWwgY29uc3RydWN0b3JzIGZvciBwcmV2ZW50IGNoYW5nZSB0aGVtIGluIGxpYnJhcnlcbiAgICA6IElTX1dSQVAgJiYgdGFyZ2V0W2tleV0gPT0gb3V0ID8gKGZ1bmN0aW9uKEMpe1xuICAgICAgdmFyIEYgPSBmdW5jdGlvbihhLCBiLCBjKXtcbiAgICAgICAgaWYodGhpcyBpbnN0YW5jZW9mIEMpe1xuICAgICAgICAgIHN3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtcbiAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIG5ldyBDO1xuICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gbmV3IEMoYSk7XG4gICAgICAgICAgICBjYXNlIDI6IHJldHVybiBuZXcgQyhhLCBiKTtcbiAgICAgICAgICB9IHJldHVybiBuZXcgQyhhLCBiLCBjKTtcbiAgICAgICAgfSByZXR1cm4gQy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICAgIEZbUFJPVE9UWVBFXSA9IENbUFJPVE9UWVBFXTtcbiAgICAgIHJldHVybiBGO1xuICAgIC8vIG1ha2Ugc3RhdGljIHZlcnNpb25zIGZvciBwcm90b3R5cGUgbWV0aG9kc1xuICAgIH0pKG91dCkgOiBJU19QUk9UTyAmJiB0eXBlb2Ygb3V0ID09ICdmdW5jdGlvbicgPyBjdHgoRnVuY3Rpb24uY2FsbCwgb3V0KSA6IG91dDtcbiAgICAvLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUubWV0aG9kcy4lTkFNRSVcbiAgICBpZihJU19QUk9UTyl7XG4gICAgICAoZXhwb3J0cy52aXJ0dWFsIHx8IChleHBvcnRzLnZpcnR1YWwgPSB7fSkpW2tleV0gPSBvdXQ7XG4gICAgICAvLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUucHJvdG90eXBlLiVOQU1FJVxuICAgICAgaWYodHlwZSAmICRleHBvcnQuUiAmJiBleHBQcm90byAmJiAhZXhwUHJvdG9ba2V5XSloaWRlKGV4cFByb3RvLCBrZXksIG91dCk7XG4gICAgfVxuICB9XG59O1xuLy8gdHlwZSBiaXRtYXBcbiRleHBvcnQuRiA9IDE7ICAgLy8gZm9yY2VkXG4kZXhwb3J0LkcgPSAyOyAgIC8vIGdsb2JhbFxuJGV4cG9ydC5TID0gNDsgICAvLyBzdGF0aWNcbiRleHBvcnQuUCA9IDg7ICAgLy8gcHJvdG9cbiRleHBvcnQuQiA9IDE2OyAgLy8gYmluZFxuJGV4cG9ydC5XID0gMzI7ICAvLyB3cmFwXG4kZXhwb3J0LlUgPSA2NDsgIC8vIHNhZmVcbiRleHBvcnQuUiA9IDEyODsgLy8gcmVhbCBwcm90byBtZXRob2QgZm9yIGBsaWJyYXJ5YCBcbm1vZHVsZS5leHBvcnRzID0gJGV4cG9ydDsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGV4ZWMpe1xuICB0cnkge1xuICAgIHJldHVybiAhIWV4ZWMoKTtcbiAgfSBjYXRjaChlKXtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufTsiLCIvLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvODYjaXNzdWVjb21tZW50LTExNTc1OTAyOFxudmFyIGdsb2JhbCA9IG1vZHVsZS5leHBvcnRzID0gdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuTWF0aCA9PSBNYXRoXG4gID8gd2luZG93IDogdHlwZW9mIHNlbGYgIT0gJ3VuZGVmaW5lZCcgJiYgc2VsZi5NYXRoID09IE1hdGggPyBzZWxmIDogRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbmlmKHR5cGVvZiBfX2cgPT0gJ251bWJlcicpX19nID0gZ2xvYmFsOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmIiwidmFyIGRQICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZHAnKVxuICAsIGNyZWF0ZURlc2MgPSByZXF1aXJlKCcuL19wcm9wZXJ0eS1kZXNjJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJykgPyBmdW5jdGlvbihvYmplY3QsIGtleSwgdmFsdWUpe1xuICByZXR1cm4gZFAuZihvYmplY3QsIGtleSwgY3JlYXRlRGVzYygxLCB2YWx1ZSkpO1xufSA6IGZ1bmN0aW9uKG9iamVjdCwga2V5LCB2YWx1ZSl7XG4gIG9iamVjdFtrZXldID0gdmFsdWU7XG4gIHJldHVybiBvYmplY3Q7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gIXJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJykgJiYgIXJlcXVpcmUoJy4vX2ZhaWxzJykoZnVuY3Rpb24oKXtcbiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZXF1aXJlKCcuL19kb20tY3JlYXRlJykoJ2RpdicpLCAnYScsIHtnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiA3OyB9fSkuYSAhPSA3O1xufSk7IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIHJldHVybiB0eXBlb2YgaXQgPT09ICdvYmplY3QnID8gaXQgIT09IG51bGwgOiB0eXBlb2YgaXQgPT09ICdmdW5jdGlvbic7XG59OyIsInZhciBhbk9iamVjdCAgICAgICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpXG4gICwgSUU4X0RPTV9ERUZJTkUgPSByZXF1aXJlKCcuL19pZTgtZG9tLWRlZmluZScpXG4gICwgdG9QcmltaXRpdmUgICAgPSByZXF1aXJlKCcuL190by1wcmltaXRpdmUnKVxuICAsIGRQICAgICAgICAgICAgID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xuXG5leHBvcnRzLmYgPSByZXF1aXJlKCcuL19kZXNjcmlwdG9ycycpID8gT2JqZWN0LmRlZmluZVByb3BlcnR5IDogZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcyl7XG4gIGFuT2JqZWN0KE8pO1xuICBQID0gdG9QcmltaXRpdmUoUCwgdHJ1ZSk7XG4gIGFuT2JqZWN0KEF0dHJpYnV0ZXMpO1xuICBpZihJRThfRE9NX0RFRklORSl0cnkge1xuICAgIHJldHVybiBkUChPLCBQLCBBdHRyaWJ1dGVzKTtcbiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfVxuICBpZignZ2V0JyBpbiBBdHRyaWJ1dGVzIHx8ICdzZXQnIGluIEF0dHJpYnV0ZXMpdGhyb3cgVHlwZUVycm9yKCdBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCEnKTtcbiAgaWYoJ3ZhbHVlJyBpbiBBdHRyaWJ1dGVzKU9bUF0gPSBBdHRyaWJ1dGVzLnZhbHVlO1xuICByZXR1cm4gTztcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihiaXRtYXAsIHZhbHVlKXtcbiAgcmV0dXJuIHtcbiAgICBlbnVtZXJhYmxlICA6ICEoYml0bWFwICYgMSksXG4gICAgY29uZmlndXJhYmxlOiAhKGJpdG1hcCAmIDIpLFxuICAgIHdyaXRhYmxlICAgIDogIShiaXRtYXAgJiA0KSxcbiAgICB2YWx1ZSAgICAgICA6IHZhbHVlXG4gIH07XG59OyIsIi8vIDcuMS4xIFRvUHJpbWl0aXZlKGlucHV0IFssIFByZWZlcnJlZFR5cGVdKVxudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9faXMtb2JqZWN0Jyk7XG4vLyBpbnN0ZWFkIG9mIHRoZSBFUzYgc3BlYyB2ZXJzaW9uLCB3ZSBkaWRuJ3QgaW1wbGVtZW50IEBAdG9QcmltaXRpdmUgY2FzZVxuLy8gYW5kIHRoZSBzZWNvbmQgYXJndW1lbnQgLSBmbGFnIC0gcHJlZmVycmVkIHR5cGUgaXMgYSBzdHJpbmdcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQsIFMpe1xuICBpZighaXNPYmplY3QoaXQpKXJldHVybiBpdDtcbiAgdmFyIGZuLCB2YWw7XG4gIGlmKFMgJiYgdHlwZW9mIChmbiA9IGl0LnRvU3RyaW5nKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpcmV0dXJuIHZhbDtcbiAgaWYodHlwZW9mIChmbiA9IGl0LnZhbHVlT2YpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsO1xuICBpZighUyAmJiB0eXBlb2YgKGZuID0gaXQudG9TdHJpbmcpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsO1xuICB0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWVcIik7XG59OyIsInZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7XG4vLyAxOS4xLjIuNCAvIDE1LjIuMy42IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKVxuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhcmVxdWlyZSgnLi9fZGVzY3JpcHRvcnMnKSwgJ09iamVjdCcsIHtkZWZpbmVQcm9wZXJ0eTogcmVxdWlyZSgnLi9fb2JqZWN0LWRwJykuZn0pOyIsImNsYXNzIFN0b3JhZ2VNYW5hZ2VyIHtcblxuICBjb25zdHJ1Y3RvcihkYiwgc3RvcmFnZU5hbWUsIHZlcnNpb24gPSAxKSB7XG4gICAgaWYgKCFkYikgdGhyb3cgRXJyb3IoJ1RoZSBTdG9yYWdlIE1hbmFnZXIgbmVlZHMgdGhlIGRhdGFiYXNlIGluc3RhbmNlJyk7XG4gICAgaWYgKCFzdG9yYWdlTmFtZSkgdGhyb3cgRXJyb3IoJ1RoZSBTdG9yYWdlIE1hbmFnZXIgbmVlZHMgdGhlIHN0b3JhZ2UgbmFtZScpO1xuXG4gICAgbGV0IHN0b3JlcyA9ICB7fTtcbiAgICBzdG9yZXNbc3RvcmFnZU5hbWVdID0gJ2tleSx2ZXJzaW9uLHZhbHVlJztcblxuICAgIGRiLnZlcnNpb24odmVyc2lvbikuc3RvcmVzKHN0b3Jlcyk7XG4gICAgZGIub3BlbigpLnRoZW4oKGRiKSA9PiB7XG4gICAgICBjb25zb2xlLmluZm8oJ0ZvdW5kIGRhdGFiYXNlIG5hbWUgJyArIGRiLm5hbWUgKyAnIHdpdGggdmVyc2lvbiBubzogJyArIGRiLnZlcm5vKTtcblxuICAgICAgLy8gZGIudGFibGVzLmZvckVhY2goKHRhYmxlKSA9PiB7XG4gICAgICAvLyAgIGNvbnNvbGUubG9nKCdGb3VuZCB0YWJsZTogJyArIHRhYmxlLm5hbWUpO1xuICAgICAgLy8gICBjb25zb2xlLmxvZygnVGFibGUgU2NoZW1hOiAnICsgSlNPTi5zdHJpbmdpZnkodGFibGUuc2NoZW1hLCBudWxsLCA0KSk7XG4gICAgICAvLyB9KTtcblxuICAgIH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuXG4gICAgdGhpcy5kYiA9IGRiO1xuICAgIHRoaXMuc3RvcmFnZU5hbWUgPSBzdG9yYWdlTmFtZTtcbiAgfVxuXG4gIF9jaGVja0tleShrZXkpIHtcbiAgICBpZiAodHlwZW9mIGtleSAhPT0gJ3N0cmluZycpIHJldHVybiBrZXkudG9TdHJpbmcoKTtcbiAgICByZXR1cm4ga2V5O1xuICB9XG5cbiAgLyoqXG4gKiBBZGRzIGEgbmV3IGVudHJ5IHRvIHRoZSBkYXRhYmFzZSBmb3IgYSBnaXZlbiBrZXksIHRvZ2V0aGVyIHdpdGggaXRzIHZlcnNpb24uXG4gKiBJZiBhbiBlbnRyeSBmb3IgdGhlIGdpdmVuIGtleSBpcyBhbHJlYWR5IHN0b3JlZCBpbiB0aGUgZGF0YWJhc2UsIGl0IHdpbGwgYmUgdXBkYXRlZC5cbiAqIEBwYXJhbSB7IXN0cmluZ30ga2V5IC0ga2V5IHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB7QGxpbmsgc3RvcmFnZU1hbmFnZXIuZ2V0fSB0byByZXRyaWV2ZSB0aGUgdmFsdWUgb2JqZWN0XG4gKiBAcGFyYW0geyFzdHJpbmd9IHZlcnNpb24gLSB2ZXJzaW9uIGRlc2NyaXB0b3IgZm9yIHRoZSBnaXZlbiB2YWx1ZVxuICogQHBhcmFtIHZhbHVlIC0gdmFsdWUgc3RvcmVkIGluIHRoZSBkYXRhYmFzZSB0aGF0IGlzIG1hcHBlZCB0byBnaXZlbiBrZXlcbiAqIEByZXR1cm5zIHtQcm9taXNlfSByZXN1bHQgLSBQcm9taXNlIHRoYXQgd2lsbCBiZSBmdWxmaWxsZWQgd2l0aCB0aGUga2V5IGlmIHRoZSBlbnRyeSB3YXMgc3RvcmVkIHN1Y2Nlc3NmdWxseSxcbiAqIG90aGVyd2lzZSBpdCBpcyByZWplY3RlZCB3aXRoIGFuIGVycm9yLlxuICovXG4gIHNldChrZXksIHZlcnNpb24sIHZhbHVlKSB7XG4gICAgY29uc29sZS5pbmZvKCdbU3RvcmFnZU1hbmFnZXJdIC0gc2V0ICcsIGtleSk7XG5cbiAgICByZXR1cm4gdGhpcy5kYlt0aGlzLnN0b3JhZ2VOYW1lXS5wdXQoe2tleTogdGhpcy5fY2hlY2tLZXkoa2V5KSwgdmVyc2lvbjp2ZXJzaW9uLCB2YWx1ZTp2YWx1ZX0pO1xuICB9XG5cbi8qKlxuICogR2V0IGEgZW50cnkgdmFsdWUgZnJvbSB0aGUgZGF0YWJhc2UgZm9yIGEgZ2l2ZW4ga2V5LlxuICogSWYgbm8gZW50cnkgaXMgZm91bmQgdW5kZWZpbmVkIGlzIHJldHVybmVkLlxuICogQHBhcmFtIHshc3RyaW5nfSBrZXkgLSBrZXkgdGhhdCB3YXMgc3RvcmVkIHVzaW5nIHtAbGluayBzdG9yYWdlTWFuYWdlci5zZXR9XG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gcmVzdWx0IC0gUHJvbWlzZSB0aGF0IHdpbGwgYmUgZnVsZmlsbGVkIHdpdGggdGhlIHZhbHVlLlxuICovXG4gIGdldChrZXkpIHtcbiAgICBjb25zb2xlLmluZm8oJ1tTdG9yYWdlTWFuYWdlcl0gLSBnZXQgJywga2V5KTtcbiAgICByZXR1cm4gdGhpcy5kYlt0aGlzLnN0b3JhZ2VOYW1lXS53aGVyZSgna2V5JylcbiAgICAgIC5lcXVhbHModGhpcy5fY2hlY2tLZXkoa2V5KSlcbiAgICAgIC5maXJzdCgpXG4gICAgICAudGhlbihvYmplY3QgPT4ge1xuICAgICAgICBpZiAob2JqZWN0KSByZXR1cm4gb2JqZWN0LnZhbHVlO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIGNvbnNvbGUuaW5mbygnZXJyb3IgZ2V0dGluZyB0aGUga2V5ICcsIGtleSwgJyB3aXRoIGVycm9yOiAnLCBlcnJvcik7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9KTtcbiAgfVxuXG4vKipcbiAqIEdldCBhIGVudHJ5IHZlcnNpb24gZnJvbSB0aGUgZGF0YWJhc2UgZm9yIGEgZ2l2ZW4ga2V5LlxuICogSWYgbm8gZW50cnkgaXMgZm91bmQgdW5kZWZpbmVkIGlzIHJldHVybmVkLlxuICogQHBhcmFtIHshc3RyaW5nfSBrZXkgLSBrZXkgdGhhdCB3YXMgc3RvcmVkIHVzaW5nIHtAbGluayBzdG9yYWdlTWFuYWdlci5zZXR9XG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gcmVzdWx0IC0gUHJvbWlzZSB0aGF0IHdpbGwgYmUgZnVsZmlsbGVkIHdpdGggdGhlIHZlcnNpb24uXG4gKi9cbiAgZ2V0VmVyc2lvbihrZXkpIHtcbiAgICBjb25zb2xlLmluZm8oJ1tTdG9yYWdlTWFuYWdlcl0gLSBnZXRWZXJzaW9uIGZvciBrZXkgJywga2V5KTtcbiAgICByZXR1cm4gdGhpcy5kYlt0aGlzLnN0b3JhZ2VOYW1lXS53aGVyZSgna2V5JylcbiAgICAgIC5lcXVhbHModGhpcy5fY2hlY2tLZXkoa2V5KSlcbiAgICAgIC5maXJzdCgpXG4gICAgICAudGhlbigob2JqZWN0KSA9PiB7XG4gICAgICAgIGlmIChvYmplY3QpIHJldHVybiBvYmplY3QudmVyc2lvbjtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBjb25zb2xlLmluZm8oJ2Vycm9yIGdldHRpbmcgdGhlIHZlcnNpb24gZm9yICcsIGtleSwgJyB3aXRoIGVycm9yOiAnLCBlcnJvcik7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9KTtcbiAgfVxuXG4vKipcbiAqIERlbGV0ZSBhIGVudHJ5IGZyb20gdGhlIGRhdGFiYXNlIGZvciBhIGdpdmVuIGtleS5cbiAqIEBwYXJhbSB7IXN0cmluZ30ga2V5IC0ga2V5IHRoYXQgd2FzIHN0b3JlZCB1c2luZyB7QGxpbmsgc3RvcmFnZU1hbmFnZXIuc2V0fVxuICogQHJldHVybnMge1Byb21pc2V9IHJlc3VsdCAtIFByb21pc2UgdGhhdCB3aWxsIGJlIGZ1bGZpbGxlZCB3aXRoIHRoZSBudW1iZXIgb2YgYWZmZWN0ZWQgcm93cy5cbiAqL1xuICBkZWxldGUoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuZGJbdGhpcy5zdG9yYWdlTmFtZV1cbiAgICAgIC53aGVyZSgna2V5JylcbiAgICAgIC5lcXVhbHModGhpcy5fY2hlY2tLZXkoa2V5KSlcbiAgICAgIC5kZWxldGUoKTtcbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IFN0b3JhZ2VNYW5hZ2VyO1xuIl19\n"]}