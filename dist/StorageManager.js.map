{"version":3,"sources":["StorageManager.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","StorageManager","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","default","__esModule","core-js/library/fn/object/define-property","2","instance","Constructor","TypeError","3","_interopRequireDefault","obj","_defineProperty","_defineProperty2","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","../core-js/object/define-property","4","$Object","Object","it","desc","defineProperty","../../modules/_core","../../modules/es6.object.define-property","5","6","isObject","./_is-object","7","core","version","__e","8","aFunction","fn","that","undefined","b","c","apply","arguments","./_a-function","9","get","./_fails","10","document","is","createElement","./_global","11","ctx","hide","PROTOTYPE","$export","type","name","source","own","out","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","S","IS_PROTO","P","IS_BIND","B","IS_WRAP","W","expProto","C","Function","virtual","R","U","./_core","./_ctx","./_hide","12","exec","13","Math","__g","14","dP","createDesc","object","value","./_descriptors","./_object-dp","./_property-desc","15","./_dom-create","16","17","anObject","IE8_DOM_DEFINE","toPrimitive","O","Attributes","./_an-object","./_ie8-dom-define","./_to-primitive","18","bitmap","19","val","toString","valueOf","20","./_export","21","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","db","storageName","stores","open","then","console","info","verno","error","put","_checkKey","where","equals","first","babel-runtime/helpers/classCallCheck","babel-runtime/helpers/createClass"],"mappings":"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","file":"StorageManager.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.StorageManager = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n},{\"core-js/library/fn/object/define-property\":4}],2:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n},{}],3:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n},{\"../core-js/object/define-property\":1}],4:[function(require,module,exports){\nrequire('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc){\n  return $Object.defineProperty(it, key, desc);\n};\n},{\"../../modules/_core\":7,\"../../modules/es6.object.define-property\":20}],5:[function(require,module,exports){\nmodule.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n},{}],6:[function(require,module,exports){\nvar isObject = require('./_is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n},{\"./_is-object\":16}],7:[function(require,module,exports){\nvar core = module.exports = {version: '2.4.0'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n},{}],8:[function(require,module,exports){\n// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n},{\"./_a-function\":5}],9:[function(require,module,exports){\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n},{\"./_fails\":12}],10:[function(require,module,exports){\nvar isObject = require('./_is-object')\n  , document = require('./_global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};\n},{\"./_global\":13,\"./_is-object\":16}],11:[function(require,module,exports){\nvar global    = require('./_global')\n  , core      = require('./_core')\n  , ctx       = require('./_ctx')\n  , hide      = require('./_hide')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , expProto  = exports[PROTOTYPE]\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(a, b, c){\n        if(this instanceof C){\n          switch(arguments.length){\n            case 0: return new C;\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if(IS_PROTO){\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if(type & $export.R && expProto && !expProto[key])hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library` \nmodule.exports = $export;\n},{\"./_core\":7,\"./_ctx\":8,\"./_global\":13,\"./_hide\":14}],12:[function(require,module,exports){\nmodule.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n},{}],13:[function(require,module,exports){\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n},{}],14:[function(require,module,exports){\nvar dP         = require('./_object-dp')\n  , createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function(object, key, value){\n  return dP.f(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n},{\"./_descriptors\":9,\"./_object-dp\":17,\"./_property-desc\":18}],15:[function(require,module,exports){\nmodule.exports = !require('./_descriptors') && !require('./_fails')(function(){\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', {get: function(){ return 7; }}).a != 7;\n});\n},{\"./_descriptors\":9,\"./_dom-create\":10,\"./_fails\":12}],16:[function(require,module,exports){\nmodule.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n},{}],17:[function(require,module,exports){\nvar anObject       = require('./_an-object')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , toPrimitive    = require('./_to-primitive')\n  , dP             = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes){\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if(IE8_DOM_DEFINE)try {\n    return dP(O, P, Attributes);\n  } catch(e){ /* empty */ }\n  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n  if('value' in Attributes)O[P] = Attributes.value;\n  return O;\n};\n},{\"./_an-object\":6,\"./_descriptors\":9,\"./_ie8-dom-define\":15,\"./_to-primitive\":19}],18:[function(require,module,exports){\nmodule.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n},{}],19:[function(require,module,exports){\n// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function(it, S){\n  if(!isObject(it))return it;\n  var fn, val;\n  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n},{\"./_is-object\":16}],20:[function(require,module,exports){\nvar $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', {defineProperty: require('./_object-dp').f});\n},{\"./_descriptors\":9,\"./_export\":11,\"./_object-dp\":17}],21:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar StorageManager = function () {\n  function StorageManager(db, storageName) {\n    var version = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n    (0, _classCallCheck3.default)(this, StorageManager);\n\n    if (!db) throw Error('The Storage Manager needs the database instance');\n    if (!storageName) throw Error('The Storage Manager needs the storage name');\n\n    var stores = {};\n    stores[storageName] = 'key,version,value';\n\n    db.version(version).stores(stores);\n    db.open().then(function (db) {\n      console.info('Found database name ' + db.name + ' with version no: ' + db.verno);\n\n      // db.tables.forEach((table) => {\n      //   console.log('Found table: ' + table.name);\n      //   console.log('Table Schema: ' + JSON.stringify(table.schema, null, 4));\n      // });\n    }).catch(console.error);\n\n    this.db = db;\n    this.storageName = storageName;\n  }\n\n  (0, _createClass3.default)(StorageManager, [{\n    key: '_checkKey',\n    value: function _checkKey(key) {\n      if (typeof key !== 'string') return key.toString();\n      return key;\n    }\n  }, {\n    key: 'set',\n    value: function set(key, version, value) {\n      console.info('[StorageManager] - set ', key);\n\n      return this.db[this.storageName].put({ key: this._checkKey(key), version: version, value: value });\n    }\n  }, {\n    key: 'get',\n    value: function get(key) {\n      console.info('[StorageManager] - get ', key);\n      return this.db[this.storageName].where('key').equals(this._checkKey(key)).first().then(function (object) {\n        if (object) return object.value;\n      }).catch(function (error) {\n        console.info('error getting the key ', key, ' with error: ', error);\n        return undefined;\n      });\n    }\n  }, {\n    key: 'getVersion',\n    value: function getVersion(key) {\n      console.info('[StorageManager] - getVersion for key ', key);\n      return this.db[this.storageName].where('key').equals(this._checkKey(key)).first().then(function (object) {\n        if (object) return object.version;\n      }).catch(function (error) {\n        console.info('error getting the version for ', key, ' with error: ', error);\n        return undefined;\n      });\n    }\n  }, {\n    key: 'delete',\n    value: function _delete(key) {\n      return this.db[this.storageName].where('key').equals(this._checkKey(key)).delete();\n    }\n  }]);\n  return StorageManager;\n}();\n\nexports.default = StorageManager;\nmodule.exports = exports['default'];\n\n},{\"babel-runtime/helpers/classCallCheck\":2,\"babel-runtime/helpers/createClass\":3}]},{},[21])(21)\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9kZWZpbmUtcHJvcGVydHkuanMiLCJub2RlX21vZHVsZXMvYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrLmpzIiwibm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcy5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eS5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fYS1mdW5jdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fYW4tb2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19jb3JlLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19jdHguanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2Rlc2NyaXB0b3JzLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19kb20tY3JlYXRlLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19leHBvcnQuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2ZhaWxzLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19nbG9iYWwuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2hpZGUuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2llOC1kb20tZGVmaW5lLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19pcy1vYmplY3QuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX29iamVjdC1kcC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fcHJvcGVydHktZGVzYy5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fdG8tcHJpbWl0aXZlLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNi5vYmplY3QuZGVmaW5lLXByb3BlcnR5LmpzIiwic3JjL3N0b3JhZ2UtbWFuYWdlci9TdG9yYWdlTWFuYWdlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBOztBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBOztBQ0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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SixLQUZJLEdBR0osSUFISSxDQUdDLFVBQUMsTUFBRCxFQUFZO0FBQ2hCLFlBQUksTUFBSixFQUFZLE9BQU8sT0FBTyxPQUFkO0FBQ2IsT0FMSSxFQU1KLEtBTkksQ0FNRSxpQkFBUztBQUNkLGdCQUFRLElBQVIsQ0FBYSxnQ0FBYixFQUErQyxHQUEvQyxFQUFvRCxlQUFwRCxFQUFxRSxLQUFyRTtBQUNBLGVBQU8sU0FBUDtBQUNELE9BVEksQ0FBUDtBQVVEOzs7NEJBRU0sRyxFQUFLO0FBQ1YsYUFBTyxLQUFLLEVBQUwsQ0FBUSxLQUFLLFdBQWIsRUFDSixLQURJLENBQ0UsS0FERixFQUVKLE1BRkksQ0FFRyxLQUFLLFNBQUwsQ0FBZSxHQUFmLENBRkgsRUFHSixNQUhJLEVBQVA7QUFJRDs7Ozs7a0JBSVksYyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJtb2R1bGUuZXhwb3J0cyA9IHsgXCJkZWZhdWx0XCI6IHJlcXVpcmUoXCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eVwiKSwgX19lc01vZHVsZTogdHJ1ZSB9OyIsIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgfVxufTsiLCJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF9kZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoXCIuLi9jb3JlLWpzL29iamVjdC9kZWZpbmUtcHJvcGVydHlcIik7XG5cbnZhciBfZGVmaW5lUHJvcGVydHkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVmaW5lUHJvcGVydHkpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICAgIGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgfTtcbn0oKTsiLCJyZXF1aXJlKCcuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZGVmaW5lLXByb3BlcnR5Jyk7XG52YXIgJE9iamVjdCA9IHJlcXVpcmUoJy4uLy4uL21vZHVsZXMvX2NvcmUnKS5PYmplY3Q7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KGl0LCBrZXksIGRlc2Mpe1xuICByZXR1cm4gJE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpdCwga2V5LCBkZXNjKTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIGlmKHR5cGVvZiBpdCAhPSAnZnVuY3Rpb24nKXRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGEgZnVuY3Rpb24hJyk7XG4gIHJldHVybiBpdDtcbn07IiwidmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9faXMtb2JqZWN0Jyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgaWYoIWlzT2JqZWN0KGl0KSl0aHJvdyBUeXBlRXJyb3IoaXQgKyAnIGlzIG5vdCBhbiBvYmplY3QhJyk7XG4gIHJldHVybiBpdDtcbn07IiwidmFyIGNvcmUgPSBtb2R1bGUuZXhwb3J0cyA9IHt2ZXJzaW9uOiAnMi40LjAnfTtcbmlmKHR5cGVvZiBfX2UgPT0gJ251bWJlcicpX19lID0gY29yZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZiIsIi8vIG9wdGlvbmFsIC8gc2ltcGxlIGNvbnRleHQgYmluZGluZ1xudmFyIGFGdW5jdGlvbiA9IHJlcXVpcmUoJy4vX2EtZnVuY3Rpb24nKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZm4sIHRoYXQsIGxlbmd0aCl7XG4gIGFGdW5jdGlvbihmbik7XG4gIGlmKHRoYXQgPT09IHVuZGVmaW5lZClyZXR1cm4gZm47XG4gIHN3aXRjaChsZW5ndGgpe1xuICAgIGNhc2UgMTogcmV0dXJuIGZ1bmN0aW9uKGEpe1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSk7XG4gICAgfTtcbiAgICBjYXNlIDI6IHJldHVybiBmdW5jdGlvbihhLCBiKXtcbiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEsIGIpO1xuICAgIH07XG4gICAgY2FzZSAzOiByZXR1cm4gZnVuY3Rpb24oYSwgYiwgYyl7XG4gICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiLCBjKTtcbiAgICB9O1xuICB9XG4gIHJldHVybiBmdW5jdGlvbigvKiAuLi5hcmdzICovKXtcbiAgICByZXR1cm4gZm4uYXBwbHkodGhhdCwgYXJndW1lbnRzKTtcbiAgfTtcbn07IiwiLy8gVGhhbmsncyBJRTggZm9yIGhpcyBmdW5ueSBkZWZpbmVQcm9wZXJ0eVxubW9kdWxlLmV4cG9ydHMgPSAhcmVxdWlyZSgnLi9fZmFpbHMnKShmdW5jdGlvbigpe1xuICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAnYScsIHtnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiA3OyB9fSkuYSAhPSA3O1xufSk7IiwidmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9faXMtb2JqZWN0JylcbiAgLCBkb2N1bWVudCA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpLmRvY3VtZW50XG4gIC8vIGluIG9sZCBJRSB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCBpcyAnb2JqZWN0J1xuICAsIGlzID0gaXNPYmplY3QoZG9jdW1lbnQpICYmIGlzT2JqZWN0KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIHJldHVybiBpcyA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaXQpIDoge307XG59OyIsInZhciBnbG9iYWwgICAgPSByZXF1aXJlKCcuL19nbG9iYWwnKVxuICAsIGNvcmUgICAgICA9IHJlcXVpcmUoJy4vX2NvcmUnKVxuICAsIGN0eCAgICAgICA9IHJlcXVpcmUoJy4vX2N0eCcpXG4gICwgaGlkZSAgICAgID0gcmVxdWlyZSgnLi9faGlkZScpXG4gICwgUFJPVE9UWVBFID0gJ3Byb3RvdHlwZSc7XG5cbnZhciAkZXhwb3J0ID0gZnVuY3Rpb24odHlwZSwgbmFtZSwgc291cmNlKXtcbiAgdmFyIElTX0ZPUkNFRCA9IHR5cGUgJiAkZXhwb3J0LkZcbiAgICAsIElTX0dMT0JBTCA9IHR5cGUgJiAkZXhwb3J0LkdcbiAgICAsIElTX1NUQVRJQyA9IHR5cGUgJiAkZXhwb3J0LlNcbiAgICAsIElTX1BST1RPICA9IHR5cGUgJiAkZXhwb3J0LlBcbiAgICAsIElTX0JJTkQgICA9IHR5cGUgJiAkZXhwb3J0LkJcbiAgICAsIElTX1dSQVAgICA9IHR5cGUgJiAkZXhwb3J0LldcbiAgICAsIGV4cG9ydHMgICA9IElTX0dMT0JBTCA/IGNvcmUgOiBjb3JlW25hbWVdIHx8IChjb3JlW25hbWVdID0ge30pXG4gICAgLCBleHBQcm90byAgPSBleHBvcnRzW1BST1RPVFlQRV1cbiAgICAsIHRhcmdldCAgICA9IElTX0dMT0JBTCA/IGdsb2JhbCA6IElTX1NUQVRJQyA/IGdsb2JhbFtuYW1lXSA6IChnbG9iYWxbbmFtZV0gfHwge30pW1BST1RPVFlQRV1cbiAgICAsIGtleSwgb3duLCBvdXQ7XG4gIGlmKElTX0dMT0JBTClzb3VyY2UgPSBuYW1lO1xuICBmb3Ioa2V5IGluIHNvdXJjZSl7XG4gICAgLy8gY29udGFpbnMgaW4gbmF0aXZlXG4gICAgb3duID0gIUlTX0ZPUkNFRCAmJiB0YXJnZXQgJiYgdGFyZ2V0W2tleV0gIT09IHVuZGVmaW5lZDtcbiAgICBpZihvd24gJiYga2V5IGluIGV4cG9ydHMpY29udGludWU7XG4gICAgLy8gZXhwb3J0IG5hdGl2ZSBvciBwYXNzZWRcbiAgICBvdXQgPSBvd24gPyB0YXJnZXRba2V5XSA6IHNvdXJjZVtrZXldO1xuICAgIC8vIHByZXZlbnQgZ2xvYmFsIHBvbGx1dGlvbiBmb3IgbmFtZXNwYWNlc1xuICAgIGV4cG9ydHNba2V5XSA9IElTX0dMT0JBTCAmJiB0eXBlb2YgdGFyZ2V0W2tleV0gIT0gJ2Z1bmN0aW9uJyA/IHNvdXJjZVtrZXldXG4gICAgLy8gYmluZCB0aW1lcnMgdG8gZ2xvYmFsIGZvciBjYWxsIGZyb20gZXhwb3J0IGNvbnRleHRcbiAgICA6IElTX0JJTkQgJiYgb3duID8gY3R4KG91dCwgZ2xvYmFsKVxuICAgIC8vIHdyYXAgZ2xvYmFsIGNvbnN0cnVjdG9ycyBmb3IgcHJldmVudCBjaGFuZ2UgdGhlbSBpbiBsaWJyYXJ5XG4gICAgOiBJU19XUkFQICYmIHRhcmdldFtrZXldID09IG91dCA/IChmdW5jdGlvbihDKXtcbiAgICAgIHZhciBGID0gZnVuY3Rpb24oYSwgYiwgYyl7XG4gICAgICAgIGlmKHRoaXMgaW5zdGFuY2VvZiBDKXtcbiAgICAgICAgICBzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7XG4gICAgICAgICAgICBjYXNlIDA6IHJldHVybiBuZXcgQztcbiAgICAgICAgICAgIGNhc2UgMTogcmV0dXJuIG5ldyBDKGEpO1xuICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gbmV3IEMoYSwgYik7XG4gICAgICAgICAgfSByZXR1cm4gbmV3IEMoYSwgYiwgYyk7XG4gICAgICAgIH0gcmV0dXJuIEMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgICBGW1BST1RPVFlQRV0gPSBDW1BST1RPVFlQRV07XG4gICAgICByZXR1cm4gRjtcbiAgICAvLyBtYWtlIHN0YXRpYyB2ZXJzaW9ucyBmb3IgcHJvdG90eXBlIG1ldGhvZHNcbiAgICB9KShvdXQpIDogSVNfUFJPVE8gJiYgdHlwZW9mIG91dCA9PSAnZnVuY3Rpb24nID8gY3R4KEZ1bmN0aW9uLmNhbGwsIG91dCkgOiBvdXQ7XG4gICAgLy8gZXhwb3J0IHByb3RvIG1ldGhvZHMgdG8gY29yZS4lQ09OU1RSVUNUT1IlLm1ldGhvZHMuJU5BTUUlXG4gICAgaWYoSVNfUFJPVE8pe1xuICAgICAgKGV4cG9ydHMudmlydHVhbCB8fCAoZXhwb3J0cy52aXJ0dWFsID0ge30pKVtrZXldID0gb3V0O1xuICAgICAgLy8gZXhwb3J0IHByb3RvIG1ldGhvZHMgdG8gY29yZS4lQ09OU1RSVUNUT1IlLnByb3RvdHlwZS4lTkFNRSVcbiAgICAgIGlmKHR5cGUgJiAkZXhwb3J0LlIgJiYgZXhwUHJvdG8gJiYgIWV4cFByb3RvW2tleV0paGlkZShleHBQcm90bywga2V5LCBvdXQpO1xuICAgIH1cbiAgfVxufTtcbi8vIHR5cGUgYml0bWFwXG4kZXhwb3J0LkYgPSAxOyAgIC8vIGZvcmNlZFxuJGV4cG9ydC5HID0gMjsgICAvLyBnbG9iYWxcbiRleHBvcnQuUyA9IDQ7ICAgLy8gc3RhdGljXG4kZXhwb3J0LlAgPSA4OyAgIC8vIHByb3RvXG4kZXhwb3J0LkIgPSAxNjsgIC8vIGJpbmRcbiRleHBvcnQuVyA9IDMyOyAgLy8gd3JhcFxuJGV4cG9ydC5VID0gNjQ7ICAvLyBzYWZlXG4kZXhwb3J0LlIgPSAxMjg7IC8vIHJlYWwgcHJvdG8gbWV0aG9kIGZvciBgbGlicmFyeWAgXG5tb2R1bGUuZXhwb3J0cyA9ICRleHBvcnQ7IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihleGVjKXtcbiAgdHJ5IHtcbiAgICByZXR1cm4gISFleGVjKCk7XG4gIH0gY2F0Y2goZSl7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn07IiwiLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzg2I2lzc3VlY29tbWVudC0xMTU3NTkwMjhcbnZhciBnbG9iYWwgPSBtb2R1bGUuZXhwb3J0cyA9IHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lk1hdGggPT0gTWF0aFxuICA/IHdpbmRvdyA6IHR5cGVvZiBzZWxmICE9ICd1bmRlZmluZWQnICYmIHNlbGYuTWF0aCA9PSBNYXRoID8gc2VsZiA6IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5pZih0eXBlb2YgX19nID09ICdudW1iZXInKV9fZyA9IGdsb2JhbDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZiIsInZhciBkUCAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWRwJylcbiAgLCBjcmVhdGVEZXNjID0gcmVxdWlyZSgnLi9fcHJvcGVydHktZGVzYycpO1xubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL19kZXNjcmlwdG9ycycpID8gZnVuY3Rpb24ob2JqZWN0LCBrZXksIHZhbHVlKXtcbiAgcmV0dXJuIGRQLmYob2JqZWN0LCBrZXksIGNyZWF0ZURlc2MoMSwgdmFsdWUpKTtcbn0gOiBmdW5jdGlvbihvYmplY3QsIGtleSwgdmFsdWUpe1xuICBvYmplY3Rba2V5XSA9IHZhbHVlO1xuICByZXR1cm4gb2JqZWN0O1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9ICFyZXF1aXJlKCcuL19kZXNjcmlwdG9ycycpICYmICFyZXF1aXJlKCcuL19mYWlscycpKGZ1bmN0aW9uKCl7XG4gIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkocmVxdWlyZSgnLi9fZG9tLWNyZWF0ZScpKCdkaXYnKSwgJ2EnLCB7Z2V0OiBmdW5jdGlvbigpeyByZXR1cm4gNzsgfX0pLmEgIT0gNztcbn0pOyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gdHlwZW9mIGl0ID09PSAnb2JqZWN0JyA/IGl0ICE9PSBudWxsIDogdHlwZW9mIGl0ID09PSAnZnVuY3Rpb24nO1xufTsiLCJ2YXIgYW5PYmplY3QgICAgICAgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKVxuICAsIElFOF9ET01fREVGSU5FID0gcmVxdWlyZSgnLi9faWU4LWRvbS1kZWZpbmUnKVxuICAsIHRvUHJpbWl0aXZlICAgID0gcmVxdWlyZSgnLi9fdG8tcHJpbWl0aXZlJylcbiAgLCBkUCAgICAgICAgICAgICA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcblxuZXhwb3J0cy5mID0gcmVxdWlyZSgnLi9fZGVzY3JpcHRvcnMnKSA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSA6IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpe1xuICBhbk9iamVjdChPKTtcbiAgUCA9IHRvUHJpbWl0aXZlKFAsIHRydWUpO1xuICBhbk9iamVjdChBdHRyaWJ1dGVzKTtcbiAgaWYoSUU4X0RPTV9ERUZJTkUpdHJ5IHtcbiAgICByZXR1cm4gZFAoTywgUCwgQXR0cmlidXRlcyk7XG4gIH0gY2F0Y2goZSl7IC8qIGVtcHR5ICovIH1cbiAgaWYoJ2dldCcgaW4gQXR0cmlidXRlcyB8fCAnc2V0JyBpbiBBdHRyaWJ1dGVzKXRocm93IFR5cGVFcnJvcignQWNjZXNzb3JzIG5vdCBzdXBwb3J0ZWQhJyk7XG4gIGlmKCd2YWx1ZScgaW4gQXR0cmlidXRlcylPW1BdID0gQXR0cmlidXRlcy52YWx1ZTtcbiAgcmV0dXJuIE87XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYml0bWFwLCB2YWx1ZSl7XG4gIHJldHVybiB7XG4gICAgZW51bWVyYWJsZSAgOiAhKGJpdG1hcCAmIDEpLFxuICAgIGNvbmZpZ3VyYWJsZTogIShiaXRtYXAgJiAyKSxcbiAgICB3cml0YWJsZSAgICA6ICEoYml0bWFwICYgNCksXG4gICAgdmFsdWUgICAgICAgOiB2YWx1ZVxuICB9O1xufTsiLCIvLyA3LjEuMSBUb1ByaW1pdGl2ZShpbnB1dCBbLCBQcmVmZXJyZWRUeXBlXSlcbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpO1xuLy8gaW5zdGVhZCBvZiB0aGUgRVM2IHNwZWMgdmVyc2lvbiwgd2UgZGlkbid0IGltcGxlbWVudCBAQHRvUHJpbWl0aXZlIGNhc2Vcbi8vIGFuZCB0aGUgc2Vjb25kIGFyZ3VtZW50IC0gZmxhZyAtIHByZWZlcnJlZCB0eXBlIGlzIGEgc3RyaW5nXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCBTKXtcbiAgaWYoIWlzT2JqZWN0KGl0KSlyZXR1cm4gaXQ7XG4gIHZhciBmbiwgdmFsO1xuICBpZihTICYmIHR5cGVvZiAoZm4gPSBpdC50b1N0cmluZykgPT0gJ2Z1bmN0aW9uJyAmJiAhaXNPYmplY3QodmFsID0gZm4uY2FsbChpdCkpKXJldHVybiB2YWw7XG4gIGlmKHR5cGVvZiAoZm4gPSBpdC52YWx1ZU9mKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpcmV0dXJuIHZhbDtcbiAgaWYoIVMgJiYgdHlwZW9mIChmbiA9IGl0LnRvU3RyaW5nKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpcmV0dXJuIHZhbDtcbiAgdGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlXCIpO1xufTsiLCJ2YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpO1xuLy8gMTkuMS4yLjQgLyAxNS4yLjMuNiBPYmplY3QuZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcylcbiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIXJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJyksICdPYmplY3QnLCB7ZGVmaW5lUHJvcGVydHk6IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpLmZ9KTsiLCJjbGFzcyBTdG9yYWdlTWFuYWdlciB7XG5cbiAgY29uc3RydWN0b3IoZGIsIHN0b3JhZ2VOYW1lLCB2ZXJzaW9uID0gMSkge1xuICAgIGlmICghZGIpIHRocm93IEVycm9yKCdUaGUgU3RvcmFnZSBNYW5hZ2VyIG5lZWRzIHRoZSBkYXRhYmFzZSBpbnN0YW5jZScpO1xuICAgIGlmICghc3RvcmFnZU5hbWUpIHRocm93IEVycm9yKCdUaGUgU3RvcmFnZSBNYW5hZ2VyIG5lZWRzIHRoZSBzdG9yYWdlIG5hbWUnKTtcblxuICAgIGxldCBzdG9yZXMgPSAge307XG4gICAgc3RvcmVzW3N0b3JhZ2VOYW1lXSA9ICdrZXksdmVyc2lvbix2YWx1ZSc7XG5cbiAgICBkYi52ZXJzaW9uKHZlcnNpb24pLnN0b3JlcyhzdG9yZXMpO1xuICAgIGRiLm9wZW4oKS50aGVuKChkYikgPT4ge1xuICAgICAgY29uc29sZS5pbmZvKCdGb3VuZCBkYXRhYmFzZSBuYW1lICcgKyBkYi5uYW1lICsgJyB3aXRoIHZlcnNpb24gbm86ICcgKyBkYi52ZXJubyk7XG5cbiAgICAgIC8vIGRiLnRhYmxlcy5mb3JFYWNoKCh0YWJsZSkgPT4ge1xuICAgICAgLy8gICBjb25zb2xlLmxvZygnRm91bmQgdGFibGU6ICcgKyB0YWJsZS5uYW1lKTtcbiAgICAgIC8vICAgY29uc29sZS5sb2coJ1RhYmxlIFNjaGVtYTogJyArIEpTT04uc3RyaW5naWZ5KHRhYmxlLnNjaGVtYSwgbnVsbCwgNCkpO1xuICAgICAgLy8gfSk7XG5cbiAgICB9KS5jYXRjaChjb25zb2xlLmVycm9yKTtcblxuICAgIHRoaXMuZGIgPSBkYjtcbiAgICB0aGlzLnN0b3JhZ2VOYW1lID0gc3RvcmFnZU5hbWU7XG4gIH1cblxuICBfY2hlY2tLZXkoa2V5KSB7XG4gICAgaWYgKHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKSByZXR1cm4ga2V5LnRvU3RyaW5nKCk7XG4gICAgcmV0dXJuIGtleTtcbiAgfVxuXG4gIHNldChrZXksIHZlcnNpb24sIHZhbHVlKSB7XG4gICAgY29uc29sZS5pbmZvKCdbU3RvcmFnZU1hbmFnZXJdIC0gc2V0ICcsIGtleSk7XG5cbiAgICByZXR1cm4gdGhpcy5kYlt0aGlzLnN0b3JhZ2VOYW1lXS5wdXQoe2tleTogdGhpcy5fY2hlY2tLZXkoa2V5KSwgdmVyc2lvbjp2ZXJzaW9uLCB2YWx1ZTp2YWx1ZX0pO1xuICB9XG5cbiAgZ2V0KGtleSkge1xuICAgIGNvbnNvbGUuaW5mbygnW1N0b3JhZ2VNYW5hZ2VyXSAtIGdldCAnLCBrZXkpO1xuICAgIHJldHVybiB0aGlzLmRiW3RoaXMuc3RvcmFnZU5hbWVdLndoZXJlKCdrZXknKVxuICAgICAgLmVxdWFscyh0aGlzLl9jaGVja0tleShrZXkpKVxuICAgICAgLmZpcnN0KClcbiAgICAgIC50aGVuKG9iamVjdCA9PiB7XG4gICAgICAgIGlmIChvYmplY3QpIHJldHVybiBvYmplY3QudmFsdWU7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgY29uc29sZS5pbmZvKCdlcnJvciBnZXR0aW5nIHRoZSBrZXkgJywga2V5LCAnIHdpdGggZXJyb3I6ICcsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH0pO1xuICB9XG5cbiAgZ2V0VmVyc2lvbihrZXkpIHtcbiAgICBjb25zb2xlLmluZm8oJ1tTdG9yYWdlTWFuYWdlcl0gLSBnZXRWZXJzaW9uIGZvciBrZXkgJywga2V5KTtcbiAgICByZXR1cm4gdGhpcy5kYlt0aGlzLnN0b3JhZ2VOYW1lXS53aGVyZSgna2V5JylcbiAgICAgIC5lcXVhbHModGhpcy5fY2hlY2tLZXkoa2V5KSlcbiAgICAgIC5maXJzdCgpXG4gICAgICAudGhlbigob2JqZWN0KSA9PiB7XG4gICAgICAgIGlmIChvYmplY3QpIHJldHVybiBvYmplY3QudmVyc2lvbjtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBjb25zb2xlLmluZm8oJ2Vycm9yIGdldHRpbmcgdGhlIHZlcnNpb24gZm9yICcsIGtleSwgJyB3aXRoIGVycm9yOiAnLCBlcnJvcik7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9KTtcbiAgfVxuXG4gIGRlbGV0ZShrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5kYlt0aGlzLnN0b3JhZ2VOYW1lXVxuICAgICAgLndoZXJlKCdrZXknKVxuICAgICAgLmVxdWFscyh0aGlzLl9jaGVja0tleShrZXkpKVxuICAgICAgLmRlbGV0ZSgpO1xuICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgU3RvcmFnZU1hbmFnZXI7XG4iXX0=\n"]}