{"version":3,"sources":["/MessageFactory.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","MessageFactory","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","default","__esModule","core-js/library/fn/json/stringify","2","core-js/library/fn/object/create","3","core-js/library/fn/object/define-property","4","core-js/library/fn/object/freeze","5","core-js/library/fn/object/get-prototype-of","6","core-js/library/fn/object/keys","7","core-js/library/fn/object/set-prototype-of","8","core-js/library/fn/symbol","9","core-js/library/fn/symbol/iterator","10","instance","Constructor","TypeError","11","_interopRequireDefault","obj","_defineProperty","_defineProperty2","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","../core-js/object/define-property","12","_setPrototypeOf","_setPrototypeOf2","_create","_create2","_typeof2","_typeof3","subClass","superClass","constructor","value","__proto__","../core-js/object/create","../core-js/object/set-prototype-of","../helpers/typeof","13","ReferenceError","14","_iterator","_iterator2","_symbol","_symbol2","_typeof","../core-js/symbol","../core-js/symbol/iterator","15","regenerator-runtime","16","core","$JSON","JSON","stringify","it","apply","arguments","../../modules/_core","17","$Object","Object","P","D","create","../../modules/es6.object.create","18","desc","defineProperty","../../modules/es6.object.define-property","19","freeze","../../modules/es6.object.freeze","20","getPrototypeOf","../../modules/es6.object.get-prototype-of","21","keys","../../modules/es6.object.keys","22","setPrototypeOf","../../modules/es6.object.set-prototype-of","23","Symbol","../../modules/es6.object.to-string","../../modules/es6.symbol","../../modules/es7.symbol.async-iterator","../../modules/es7.symbol.observable","24","../../modules/_wks-ext","../../modules/es6.string.iterator","../../modules/web.dom.iterable","25","26","27","isObject","./_is-object","28","toIObject","toLength","toIndex","IS_INCLUDES","$this","el","fromIndex","O","index","./_to-index","./_to-iobject","./_to-length","29","toString","slice","30","version","__e","31","aFunction","fn","that","undefined","b","c","./_a-function","32","33","get","./_fails","34","document","is","createElement","./_global","35","split","36","getKeys","gOPS","pIE","result","getSymbols","symbols","isEnum","push","./_object-gops","./_object-keys","./_object-pie","37","ctx","hide","PROTOTYPE","$export","type","name","source","own","out","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","S","IS_PROTO","IS_BIND","B","IS_WRAP","W","expProto","C","Function","virtual","R","U","./_core","./_ctx","./_hide","38","exec","39","Math","__g","40","hasOwnProperty","41","dP","createDesc","object","./_descriptors","./_object-dp","./_property-desc","42","documentElement","43","./_dom-create","44","cof","propertyIsEnumerable","./_cof","45","Array","isArray","arg","46","47","setToStringTag","IteratorPrototype","NAME","next","./_object-create","./_set-to-string-tag","./_wks","48","LIBRARY","redefine","has","Iterators","$iterCreate","ITERATOR","BUGGY","FF_ITERATOR","KEYS","VALUES","returnThis","Base","DEFAULT","IS_SET","FORCED","methods","getMethod","kind","proto","TAG","DEF_VALUES","VALUES_BUG","$native","$default","$entries","$anyNative","entries","values","./_export","./_has","./_iter-create","./_iterators","./_library","./_object-gpo","./_redefine","49","done","50","51","52","53","META","setDesc","id","isExtensible","FREEZE","preventExtensions","setMeta","w","fastKey","getWeak","onFreeze","meta","NEED","KEY","./_uid","54","anObject","dPs","enumBugKeys","IE_PROTO","Empty","createDict","iframeDocument","iframe","lt","gt","style","display","appendChild","src","contentWindow","open","write","close","Properties","./_an-object","./_enum-bug-keys","./_html","./_object-dps","./_shared-key","55","IE8_DOM_DEFINE","toPrimitive","Attributes","./_ie8-dom-define","./_to-primitive","56","57","gOPD","getOwnPropertyDescriptor","58","gOPN","windowNames","getOwnPropertyNames","getWindowNames","./_object-gopn","59","$keys","hiddenKeys","concat","./_object-keys-internal","60","getOwnPropertySymbols","61","toObject","ObjectProto","./_to-object","62","arrayIndexOf","names","./_array-includes","63","64","65","fails","exp","66","bitmap","67","68","check","set","test","buggy","./_object-gopd","69","def","tag","stat","70","shared","uid","./_shared","71","SHARED","store","72","toInteger","defined","TO_STRING","pos","String","charCodeAt","charAt","./_defined","./_to-integer","73","max","min","74","ceil","floor","isNaN","75","IObject","./_iobject","76","77","78","val","valueOf","79","px","random","80","wksExt","$Symbol","./_wks-ext","81","82","USE_SYMBOL","$exports","83","addToUnscopables","step","iterated","_t","_i","_k","Arguments","./_add-to-unscopables","./_iter-define","./_iter-step","84","85","86","$freeze","./_meta","./_object-sap","87","$getPrototypeOf","88","89","./_set-proto","90","91","$at","point","./_string-at","92","DESCRIPTORS","$fails","wks","wksDefine","keyOf","enumKeys","gOPNExt","$GOPD","$DP","_stringify","HIDDEN","TO_PRIMITIVE","SymbolRegistry","AllSymbols","OPSymbols","USE_NATIVE","QObject","setter","findChild","setSymbolDesc","protoDesc","wrap","sym","isSymbol","iterator","$defineProperty","$defineProperties","$create","$propertyIsEnumerable","E","$getOwnPropertyDescriptor","$getOwnPropertyNames","$getOwnPropertySymbols","IS_OP","$set","for","keyFor","useSetter","useSimple","replacer","$replacer","args","./_enum-keys","./_is-array","./_keyof","./_object-gopn-ext","./_wks-define","93","94","95","TO_STRING_TAG","collections","Collection","./es6.array.iterator","96","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","setTimeout","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","queue","queueIndex","drainQueue","timeout","len","run","Item","array","noop","process","nextTick","title","browser","env","argv","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","cwd","chdir","dir","umask","97","hadRuntime","regeneratorRuntime","indexOf","oldRuntime","./runtime","98","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","makeInvokeMethod","tryCatch","err","GeneratorFunction","GeneratorFunctionPrototype","defineIteratorMethods","forEach","method","AsyncIterator","invoke","resolve","reject","record","hasOwn","Promise","__await","then","unwrapped","enqueue","callInvokeWithMethodAndArg","previousPromise","domain","bind","state","GenStateSuspendedStart","GenStateExecuting","GenStateCompleted","doneResult","delegate","returnMethod","info","GenStateSuspendedYield","resultName","nextLoc","sent","_sent","dispatchException","abrupt","ContinueSentinel","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","iteratorSymbol","Op","toStringTagSymbol","toStringTag","inModule","runtime","getProto","NativeIteratorPrototype","Gp","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","async","iter","reverse","pop","skipTempReset","prev","stop","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","_process","99","factory","tv4","notReallyPercentEncode","string","encodeURI","replace","doubleEncoded","substring","uriTemplateSubstitution","spec","modifier","uriTemplateGlobalModifiers","separator","prefix","shouldEscape","showVariables","trimEmptyString","varNames","varList","varSpecs","varSpecMap","varName","truncate","parts","parseInt","suffices","uriTemplateSuffices","varSpec","subFunction","valueFunction","startIndex","j","encodeURIComponent","first","substitution","UriTemplate","template","textParts","shift","prefixes","substitutions","part","remainder","funcs","fill","recursiveCompare","A","parseURI","url","m","match","href","protocol","authority","host","hostname","port","pathname","search","hash","resolveUrl","base","removeDotSegments","input","output","p","join","lastIndexOf","getDocumentUri","uri","normSchema","schema","baseUri","defaultErrorReporter","language","errorMessages","languages","error","messageTemplate","ErrorMessagesDefault","messageParams","params","whole","subValue","ValidationError","dataPath","schemaPath","subErrors","message","stack","stacktrace","isTrustedUrl","baseUrl","testUrl","createApi","currentLanguage","customErrorReporter","globalContext","ValidatorContext","api","setErrorReporter","reporter","addFormat","addLanguage","messageMap","ErrorCodes","rootCode","freshApi","validate","data","checkRecursive","banUnknownProperties","errorReporter","$ref","addSchema","validateAll","missing","valid","validateResult","validateMultiple","errors","getSchema","getSchemaMap","getSchemaUris","getMissingUris","dropSchemas","defineKeyword","defineError","codeName","codeNumber","defaultMessage","ErrorCodeLookup","langCode","errorCodes","hasDontEnumBug","dontEnums","dontEnumsLength","prop","vArg","searchElement","Number","Infinity","abs","k","isFrozen","+","#",".","/",";","?","&","*","fillFromObject","parent","collectMultiple","trackUnknownProperties","missingMap","formatValidators","schemas","handleError","collectError","returnError","scanned","scannedFrozen","scannedFrozenSchemas","scannedFrozenValidationErrors","validatedSchemasKey","validationErrorsKey","knownPropertyPaths","unknownPropertyPaths","definedKeywords","keyword","keywordFunction","createError","prefixErrors","prefixWith","unknownPath","UNKNOWN_PROPERTY","path","format","validator","resolveRefs","urlHistory","CIRCULAR_REFERENCE","urls","fragment","pointerPath","decodeURIComponent","component","searchSchemas","map","filterRegExp","list","dataPathParts","schemaPathParts","dataPointerPath","topLevel","frozenIndex","startErrorCount","scannedFrozenSchemaIndex","scannedSchemasIndex","schemaIndex","frozenSchemaIndex","errorCount","validateBasic","validateNumeric","validateString","validateArray","validateObject","validateCombinations","validateHypermedia","validateFormat","validateDefinedKeywords","item","dataPart","schemaPart","errorMessage","FORMAT_CUSTOM","validationFunctions","func","KEYWORD_CUSTOM","validateType","validateEnum","dataType","allowedTypes","INVALID_TYPE","expected","enumVal","ENUM_MISMATCH","validateMultipleOf","validateMinMax","validateNaN","CLOSE_ENOUGH_LOW","pow","CLOSE_ENOUGH_HIGH","multipleOf","divisibleBy","NUMBER_MULTIPLE_OF","minimum","NUMBER_MINIMUM","exclusiveMinimum","NUMBER_MINIMUM_EXCLUSIVE","maximum","NUMBER_MAXIMUM","exclusiveMaximum","NUMBER_MAXIMUM_EXCLUSIVE","NUMBER_NOT_A_NUMBER","validateStringLength","validateStringPattern","minLength","STRING_LENGTH_SHORT","maxLength","STRING_LENGTH_LONG","pattern","RegExp","regexp","body","flags","literal","STRING_PATTERN","validateArrayLength","validateArrayUniqueItems","validateArrayItems","minItems","ARRAY_LENGTH_SHORT","maxItems","ARRAY_LENGTH_LONG","uniqueItems","ARRAY_UNIQUE","match1","match2","items","additionalItems","ARRAY_ADDITIONAL_ITEMS","validateObjectMinMaxProperties","validateObjectRequiredProperties","validateObjectProperties","validateObjectDependencies","minProperties","OBJECT_PROPERTIES_MINIMUM","propertyCount","maxProperties","OBJECT_PROPERTIES_MAXIMUM","required","OBJECT_REQUIRED","keyPointerPath","foundMatch","properties","patternProperties","patternKey","additionalProperties","OBJECT_ADDITIONAL_PROPERTIES","dependencies","depKey","dep","OBJECT_DEPENDENCY_KEY","requiredKey","validateAllOf","validateAnyOf","validateOneOf","validateNot","allOf","subSchema","anyOf","oldUnknownPropertyPaths","oldKnownPropertyPaths","errorAtEnd","knownKey","unknownKey","ANY_OF_MISSING","oneOf","validIndex","ONE_OF_MULTIPLE","index1","index2","ONE_OF_MISSING","not","oldErrorCount","notErrors","NOT_PASSED","links","ldo","rel","allPresent","schemaUrl","dataPrefix","schemaPrefix","100","_MessageFactory","_MessageFactory2","./message-factory/MessageFactory","101","MessageType","Message","_getPrototypeOf","_getPrototypeOf2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_RethinkObject2","_RethinkObject3","_RethinkObject","from","toList","_this","to","token","identity","newBody","idToken","assertedIdentity","accessToken","CREATE","READ","UPDATE","DELETE","SUBSCRIBE","UNSUBSCRIBE","RESPONSE","FORWARD","EXECUTE","../reTHINKObject/RethinkObject.js","babel-runtime/core-js/object/get-prototype-of","babel-runtime/helpers/classCallCheck","babel-runtime/helpers/createClass","babel-runtime/helpers/inherits","babel-runtime/helpers/possibleConstructorReturn","102","Enum","_keys2","reduce","_freeze2","v","UPDATE_OPERATION","ATTRIBUTE_TYPE","REASON_PHRASE","RESPONSE_CODE","ExecuteMessageBody","ResponseMessageBody","ForwardMessageBody","UpdateMessageBody","DeleteMessageBody","ReadMessageBody","CreateMessageBody","MessageBody","_freeze","_keys","resource","viaURL","via","_MessageBody","policy","_this2","_MessageBody2","attribute","criteriaSyntax","criteria","_this3","_MessageBody3","_this4","childrenResources","_MessageBody4","_this5","attributeType","operation","_MessageBody5","_this6","_MessageBody6","_this7","description","_MessageBody7","_this8","200","201","202","203","204","205","206","300","301","302","303","304","305","307","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","426","500","501","502","503","504","505","OBJECT","ARRAY","ADD","REMOVE","babel-runtime/core-js/object/freeze","babel-runtime/core-js/object/keys","103","IdGenerator","_regenerator","_regenerator2","_Message","_Message2","myGenerator","idMaker","messageBody","forwardMessage","executeMessage","response","previousBody","_context","./Message.js","./MessageBody.js","babel-runtime/regenerator","104","RethinkObject","_stringify2","_tv","_tv2","parse","console","warn","log","babel-runtime/core-js/json/stringify"],"mappings":"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","file":"MessageFactory.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.MessageFactory = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n},{\"core-js/library/fn/json/stringify\":16}],2:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };\n},{\"core-js/library/fn/object/create\":17}],3:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n},{\"core-js/library/fn/object/define-property\":18}],4:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/freeze\"), __esModule: true };\n},{\"core-js/library/fn/object/freeze\":19}],5:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/get-prototype-of\"), __esModule: true };\n},{\"core-js/library/fn/object/get-prototype-of\":20}],6:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };\n},{\"core-js/library/fn/object/keys\":21}],7:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };\n},{\"core-js/library/fn/object/set-prototype-of\":22}],8:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };\n},{\"core-js/library/fn/symbol\":23}],9:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/symbol/iterator\"), __esModule: true };\n},{\"core-js/library/fn/symbol/iterator\":24}],10:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n},{}],11:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n},{\"../core-js/object/define-property\":3}],12:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = require(\"../core-js/object/set-prototype-of\");\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = require(\"../core-js/object/create\");\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};\n},{\"../core-js/object/create\":2,\"../core-js/object/set-prototype-of\":7,\"../helpers/typeof\":14}],13:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};\n},{\"../helpers/typeof\":14}],14:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nvar _iterator = require(\"../core-js/symbol/iterator\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = require(\"../core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};\n},{\"../core-js/symbol\":8,\"../core-js/symbol/iterator\":9}],15:[function(require,module,exports){\nmodule.exports = require(\"regenerator-runtime\");\n\n},{\"regenerator-runtime\":97}],16:[function(require,module,exports){\nvar core  = require('../../modules/_core')\n  , $JSON = core.JSON || (core.JSON = {stringify: JSON.stringify});\nmodule.exports = function stringify(it){ // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n},{\"../../modules/_core\":30}],17:[function(require,module,exports){\nrequire('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D){\n  return $Object.create(P, D);\n};\n},{\"../../modules/_core\":30,\"../../modules/es6.object.create\":84}],18:[function(require,module,exports){\nrequire('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc){\n  return $Object.defineProperty(it, key, desc);\n};\n},{\"../../modules/_core\":30,\"../../modules/es6.object.define-property\":85}],19:[function(require,module,exports){\nrequire('../../modules/es6.object.freeze');\nmodule.exports = require('../../modules/_core').Object.freeze;\n},{\"../../modules/_core\":30,\"../../modules/es6.object.freeze\":86}],20:[function(require,module,exports){\nrequire('../../modules/es6.object.get-prototype-of');\nmodule.exports = require('../../modules/_core').Object.getPrototypeOf;\n},{\"../../modules/_core\":30,\"../../modules/es6.object.get-prototype-of\":87}],21:[function(require,module,exports){\nrequire('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/_core').Object.keys;\n},{\"../../modules/_core\":30,\"../../modules/es6.object.keys\":88}],22:[function(require,module,exports){\nrequire('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/_core').Object.setPrototypeOf;\n},{\"../../modules/_core\":30,\"../../modules/es6.object.set-prototype-of\":89}],23:[function(require,module,exports){\nrequire('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.symbol.async-iterator');\nrequire('../../modules/es7.symbol.observable');\nmodule.exports = require('../../modules/_core').Symbol;\n},{\"../../modules/_core\":30,\"../../modules/es6.object.to-string\":90,\"../../modules/es6.symbol\":92,\"../../modules/es7.symbol.async-iterator\":93,\"../../modules/es7.symbol.observable\":94}],24:[function(require,module,exports){\nrequire('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks-ext').f('iterator');\n},{\"../../modules/_wks-ext\":81,\"../../modules/es6.string.iterator\":91,\"../../modules/web.dom.iterable\":95}],25:[function(require,module,exports){\nmodule.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n},{}],26:[function(require,module,exports){\nmodule.exports = function(){ /* empty */ };\n},{}],27:[function(require,module,exports){\nvar isObject = require('./_is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n},{\"./_is-object\":46}],28:[function(require,module,exports){\n// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject')\n  , toLength  = require('./_to-length')\n  , toIndex   = require('./_to-index');\nmodule.exports = function(IS_INCLUDES){\n  return function($this, el, fromIndex){\n    var O      = toIObject($this)\n      , length = toLength(O.length)\n      , index  = toIndex(fromIndex, length)\n      , value;\n    // Array#includes uses SameValueZero equality algorithm\n    if(IS_INCLUDES && el != el)while(length > index){\n      value = O[index++];\n      if(value != value)return true;\n    // Array#toIndex ignores holes, Array#includes - not\n    } else for(;length > index; index++)if(IS_INCLUDES || index in O){\n      if(O[index] === el)return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n},{\"./_to-index\":73,\"./_to-iobject\":75,\"./_to-length\":76}],29:[function(require,module,exports){\nvar toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};\n},{}],30:[function(require,module,exports){\nvar core = module.exports = {version: '2.4.0'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n},{}],31:[function(require,module,exports){\n// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n},{\"./_a-function\":25}],32:[function(require,module,exports){\n// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n},{}],33:[function(require,module,exports){\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n},{\"./_fails\":38}],34:[function(require,module,exports){\nvar isObject = require('./_is-object')\n  , document = require('./_global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};\n},{\"./_global\":39,\"./_is-object\":46}],35:[function(require,module,exports){\n// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n},{}],36:[function(require,module,exports){\n// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys')\n  , gOPS    = require('./_object-gops')\n  , pIE     = require('./_object-pie');\nmodule.exports = function(it){\n  var result     = getKeys(it)\n    , getSymbols = gOPS.f;\n  if(getSymbols){\n    var symbols = getSymbols(it)\n      , isEnum  = pIE.f\n      , i       = 0\n      , key;\n    while(symbols.length > i)if(isEnum.call(it, key = symbols[i++]))result.push(key);\n  } return result;\n};\n},{\"./_object-gops\":60,\"./_object-keys\":63,\"./_object-pie\":64}],37:[function(require,module,exports){\nvar global    = require('./_global')\n  , core      = require('./_core')\n  , ctx       = require('./_ctx')\n  , hide      = require('./_hide')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , expProto  = exports[PROTOTYPE]\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(a, b, c){\n        if(this instanceof C){\n          switch(arguments.length){\n            case 0: return new C;\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if(IS_PROTO){\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if(type & $export.R && expProto && !expProto[key])hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library` \nmodule.exports = $export;\n},{\"./_core\":30,\"./_ctx\":31,\"./_global\":39,\"./_hide\":41}],38:[function(require,module,exports){\nmodule.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n},{}],39:[function(require,module,exports){\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n},{}],40:[function(require,module,exports){\nvar hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};\n},{}],41:[function(require,module,exports){\nvar dP         = require('./_object-dp')\n  , createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function(object, key, value){\n  return dP.f(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n},{\"./_descriptors\":33,\"./_object-dp\":55,\"./_property-desc\":66}],42:[function(require,module,exports){\nmodule.exports = require('./_global').document && document.documentElement;\n},{\"./_global\":39}],43:[function(require,module,exports){\nmodule.exports = !require('./_descriptors') && !require('./_fails')(function(){\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', {get: function(){ return 7; }}).a != 7;\n});\n},{\"./_descriptors\":33,\"./_dom-create\":34,\"./_fails\":38}],44:[function(require,module,exports){\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n},{\"./_cof\":29}],45:[function(require,module,exports){\n// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg){\n  return cof(arg) == 'Array';\n};\n},{\"./_cof\":29}],46:[function(require,module,exports){\nmodule.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n},{}],47:[function(require,module,exports){\n'use strict';\nvar create         = require('./_object-create')\n  , descriptor     = require('./_property-desc')\n  , setToStringTag = require('./_set-to-string-tag')\n  , IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function(){ return this; });\n\nmodule.exports = function(Constructor, NAME, next){\n  Constructor.prototype = create(IteratorPrototype, {next: descriptor(1, next)});\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n},{\"./_hide\":41,\"./_object-create\":54,\"./_property-desc\":66,\"./_set-to-string-tag\":69,\"./_wks\":82}],48:[function(require,module,exports){\n'use strict';\nvar LIBRARY        = require('./_library')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , hide           = require('./_hide')\n  , has            = require('./_has')\n  , Iterators      = require('./_iterators')\n  , $iterCreate    = require('./_iter-create')\n  , setToStringTag = require('./_set-to-string-tag')\n  , getPrototypeOf = require('./_object-gpo')\n  , ITERATOR       = require('./_wks')('iterator')\n  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n  , FF_ITERATOR    = '@@iterator'\n  , KEYS           = 'keys'\n  , VALUES         = 'values';\n\nvar returnThis = function(){ return this; };\n\nmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function(kind){\n    if(!BUGGY && kind in proto)return proto[kind];\n    switch(kind){\n      case KEYS: return function keys(){ return new Constructor(this, kind); };\n      case VALUES: return function values(){ return new Constructor(this, kind); };\n    } return function entries(){ return new Constructor(this, kind); };\n  };\n  var TAG        = NAME + ' Iterator'\n    , DEF_VALUES = DEFAULT == VALUES\n    , VALUES_BUG = false\n    , proto      = Base.prototype\n    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n    , $default   = $native || getMethod(DEFAULT)\n    , $entries   = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined\n    , $anyNative = NAME == 'Array' ? proto.entries || $native : $native\n    , methods, key, IteratorPrototype;\n  // Fix native\n  if($anyNative){\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base));\n    if(IteratorPrototype !== Object.prototype){\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if(!LIBRARY && !has(IteratorPrototype, ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if(DEF_VALUES && $native && $native.name !== VALUES){\n    VALUES_BUG = true;\n    $default = function values(){ return $native.call(this); };\n  }\n  // Define iterator\n  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG]  = returnThis;\n  if(DEFAULT){\n    methods = {\n      values:  DEF_VALUES ? $default : getMethod(VALUES),\n      keys:    IS_SET     ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if(FORCED)for(key in methods){\n      if(!(key in proto))redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n},{\"./_export\":37,\"./_has\":40,\"./_hide\":41,\"./_iter-create\":47,\"./_iterators\":50,\"./_library\":52,\"./_object-gpo\":61,\"./_redefine\":67,\"./_set-to-string-tag\":69,\"./_wks\":82}],49:[function(require,module,exports){\nmodule.exports = function(done, value){\n  return {value: value, done: !!done};\n};\n},{}],50:[function(require,module,exports){\nmodule.exports = {};\n},{}],51:[function(require,module,exports){\nvar getKeys   = require('./_object-keys')\n  , toIObject = require('./_to-iobject');\nmodule.exports = function(object, el){\n  var O      = toIObject(object)\n    , keys   = getKeys(O)\n    , length = keys.length\n    , index  = 0\n    , key;\n  while(length > index)if(O[key = keys[index++]] === el)return key;\n};\n},{\"./_object-keys\":63,\"./_to-iobject\":75}],52:[function(require,module,exports){\nmodule.exports = true;\n},{}],53:[function(require,module,exports){\nvar META     = require('./_uid')('meta')\n  , isObject = require('./_is-object')\n  , has      = require('./_has')\n  , setDesc  = require('./_object-dp').f\n  , id       = 0;\nvar isExtensible = Object.isExtensible || function(){\n  return true;\n};\nvar FREEZE = !require('./_fails')(function(){\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function(it){\n  setDesc(it, META, {value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  }});\n};\nvar fastKey = function(it, create){\n  // return primitive with prefix\n  if(!isObject(it))return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return 'F';\n    // not necessary to add metadata\n    if(!create)return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function(it, create){\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return true;\n    // not necessary to add metadata\n    if(!create)return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function(it){\n  if(FREEZE && meta.NEED && isExtensible(it) && !has(it, META))setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY:      META,\n  NEED:     false,\n  fastKey:  fastKey,\n  getWeak:  getWeak,\n  onFreeze: onFreeze\n};\n},{\"./_fails\":38,\"./_has\":40,\"./_is-object\":46,\"./_object-dp\":55,\"./_uid\":79}],54:[function(require,module,exports){\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject    = require('./_an-object')\n  , dPs         = require('./_object-dps')\n  , enumBugKeys = require('./_enum-bug-keys')\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\n  , Empty       = function(){ /* empty */ }\n  , PROTOTYPE   = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function(){\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe')\n    , i      = enumBugKeys.length\n    , lt     = '<'\n    , gt     = '>'\n    , iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties){\n  var result;\n  if(O !== null){\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty;\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n},{\"./_an-object\":27,\"./_dom-create\":34,\"./_enum-bug-keys\":35,\"./_html\":42,\"./_object-dps\":56,\"./_shared-key\":70}],55:[function(require,module,exports){\nvar anObject       = require('./_an-object')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , toPrimitive    = require('./_to-primitive')\n  , dP             = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes){\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if(IE8_DOM_DEFINE)try {\n    return dP(O, P, Attributes);\n  } catch(e){ /* empty */ }\n  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n  if('value' in Attributes)O[P] = Attributes.value;\n  return O;\n};\n},{\"./_an-object\":27,\"./_descriptors\":33,\"./_ie8-dom-define\":43,\"./_to-primitive\":78}],56:[function(require,module,exports){\nvar dP       = require('./_object-dp')\n  , anObject = require('./_an-object')\n  , getKeys  = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties){\n  anObject(O);\n  var keys   = getKeys(Properties)\n    , length = keys.length\n    , i = 0\n    , P;\n  while(length > i)dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n},{\"./_an-object\":27,\"./_descriptors\":33,\"./_object-dp\":55,\"./_object-keys\":63}],57:[function(require,module,exports){\nvar pIE            = require('./_object-pie')\n  , createDesc     = require('./_property-desc')\n  , toIObject      = require('./_to-iobject')\n  , toPrimitive    = require('./_to-primitive')\n  , has            = require('./_has')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , gOPD           = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P){\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if(IE8_DOM_DEFINE)try {\n    return gOPD(O, P);\n  } catch(e){ /* empty */ }\n  if(has(O, P))return createDesc(!pIE.f.call(O, P), O[P]);\n};\n},{\"./_descriptors\":33,\"./_has\":40,\"./_ie8-dom-define\":43,\"./_object-pie\":64,\"./_property-desc\":66,\"./_to-iobject\":75,\"./_to-primitive\":78}],58:[function(require,module,exports){\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject')\n  , gOPN      = require('./_object-gopn').f\n  , toString  = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function(it){\n  try {\n    return gOPN(it);\n  } catch(e){\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it){\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n\n},{\"./_object-gopn\":59,\"./_to-iobject\":75}],59:[function(require,module,exports){\n// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys      = require('./_object-keys-internal')\n  , hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O){\n  return $keys(O, hiddenKeys);\n};\n},{\"./_enum-bug-keys\":35,\"./_object-keys-internal\":62}],60:[function(require,module,exports){\nexports.f = Object.getOwnPropertySymbols;\n},{}],61:[function(require,module,exports){\n// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has         = require('./_has')\n  , toObject    = require('./_to-object')\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\n  , ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function(O){\n  O = toObject(O);\n  if(has(O, IE_PROTO))return O[IE_PROTO];\n  if(typeof O.constructor == 'function' && O instanceof O.constructor){\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n},{\"./_has\":40,\"./_shared-key\":70,\"./_to-object\":77}],62:[function(require,module,exports){\nvar has          = require('./_has')\n  , toIObject    = require('./_to-iobject')\n  , arrayIndexOf = require('./_array-includes')(false)\n  , IE_PROTO     = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function(object, names){\n  var O      = toIObject(object)\n    , i      = 0\n    , result = []\n    , key;\n  for(key in O)if(key != IE_PROTO)has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while(names.length > i)if(has(O, key = names[i++])){\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n},{\"./_array-includes\":28,\"./_has\":40,\"./_shared-key\":70,\"./_to-iobject\":75}],63:[function(require,module,exports){\n// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys       = require('./_object-keys-internal')\n  , enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O){\n  return $keys(O, enumBugKeys);\n};\n},{\"./_enum-bug-keys\":35,\"./_object-keys-internal\":62}],64:[function(require,module,exports){\nexports.f = {}.propertyIsEnumerable;\n},{}],65:[function(require,module,exports){\n// most Object methods by ES6 should accept primitives\nvar $export = require('./_export')\n  , core    = require('./_core')\n  , fails   = require('./_fails');\nmodule.exports = function(KEY, exec){\n  var fn  = (core.Object || {})[KEY] || Object[KEY]\n    , exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);\n};\n},{\"./_core\":30,\"./_export\":37,\"./_fails\":38}],66:[function(require,module,exports){\nmodule.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n},{}],67:[function(require,module,exports){\nmodule.exports = require('./_hide');\n},{\"./_hide\":41}],68:[function(require,module,exports){\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object')\n  , anObject = require('./_an-object');\nvar check = function(O, proto){\n  anObject(O);\n  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function(test, buggy, set){\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch(e){ buggy = true; }\n      return function setPrototypeOf(O, proto){\n        check(O, proto);\n        if(buggy)O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n},{\"./_an-object\":27,\"./_ctx\":31,\"./_is-object\":46,\"./_object-gopd\":57}],69:[function(require,module,exports){\nvar def = require('./_object-dp').f\n  , has = require('./_has')\n  , TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};\n},{\"./_has\":40,\"./_object-dp\":55,\"./_wks\":82}],70:[function(require,module,exports){\nvar shared = require('./_shared')('keys')\n  , uid    = require('./_uid');\nmodule.exports = function(key){\n  return shared[key] || (shared[key] = uid(key));\n};\n},{\"./_shared\":71,\"./_uid\":79}],71:[function(require,module,exports){\nvar global = require('./_global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};\n},{\"./_global\":39}],72:[function(require,module,exports){\nvar toInteger = require('./_to-integer')\n  , defined   = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function(TO_STRING){\n  return function(that, pos){\n    var s = String(defined(that))\n      , i = toInteger(pos)\n      , l = s.length\n      , a, b;\n    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n},{\"./_defined\":32,\"./_to-integer\":74}],73:[function(require,module,exports){\nvar toInteger = require('./_to-integer')\n  , max       = Math.max\n  , min       = Math.min;\nmodule.exports = function(index, length){\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n},{\"./_to-integer\":74}],74:[function(require,module,exports){\n// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n},{}],75:[function(require,module,exports){\n// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject')\n  , defined = require('./_defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};\n},{\"./_defined\":32,\"./_iobject\":44}],76:[function(require,module,exports){\n// 7.1.15 ToLength\nvar toInteger = require('./_to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n},{\"./_to-integer\":74}],77:[function(require,module,exports){\n// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};\n},{\"./_defined\":32}],78:[function(require,module,exports){\n// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function(it, S){\n  if(!isObject(it))return it;\n  var fn, val;\n  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n},{\"./_is-object\":46}],79:[function(require,module,exports){\nvar id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n},{}],80:[function(require,module,exports){\nvar global         = require('./_global')\n  , core           = require('./_core')\n  , LIBRARY        = require('./_library')\n  , wksExt         = require('./_wks-ext')\n  , defineProperty = require('./_object-dp').f;\nmodule.exports = function(name){\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if(name.charAt(0) != '_' && !(name in $Symbol))defineProperty($Symbol, name, {value: wksExt.f(name)});\n};\n},{\"./_core\":30,\"./_global\":39,\"./_library\":52,\"./_object-dp\":55,\"./_wks-ext\":81}],81:[function(require,module,exports){\nexports.f = require('./_wks');\n},{\"./_wks\":82}],82:[function(require,module,exports){\nvar store      = require('./_shared')('wks')\n  , uid        = require('./_uid')\n  , Symbol     = require('./_global').Symbol\n  , USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function(name){\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n},{\"./_global\":39,\"./_shared\":71,\"./_uid\":79}],83:[function(require,module,exports){\n'use strict';\nvar addToUnscopables = require('./_add-to-unscopables')\n  , step             = require('./_iter-step')\n  , Iterators        = require('./_iterators')\n  , toIObject        = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function(iterated, kind){\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , kind  = this._k\n    , index = this._i++;\n  if(!O || index >= O.length){\n    this._t = undefined;\n    return step(1);\n  }\n  if(kind == 'keys'  )return step(0, index);\n  if(kind == 'values')return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n},{\"./_add-to-unscopables\":26,\"./_iter-define\":48,\"./_iter-step\":49,\"./_iterators\":50,\"./_to-iobject\":75}],84:[function(require,module,exports){\nvar $export = require('./_export')\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', {create: require('./_object-create')});\n},{\"./_export\":37,\"./_object-create\":54}],85:[function(require,module,exports){\nvar $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', {defineProperty: require('./_object-dp').f});\n},{\"./_descriptors\":33,\"./_export\":37,\"./_object-dp\":55}],86:[function(require,module,exports){\n// 19.1.2.5 Object.freeze(O)\nvar isObject = require('./_is-object')\n  , meta     = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('freeze', function($freeze){\n  return function freeze(it){\n    return $freeze && isObject(it) ? $freeze(meta(it)) : it;\n  };\n});\n},{\"./_is-object\":46,\"./_meta\":53,\"./_object-sap\":65}],87:[function(require,module,exports){\n// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject        = require('./_to-object')\n  , $getPrototypeOf = require('./_object-gpo');\n\nrequire('./_object-sap')('getPrototypeOf', function(){\n  return function getPrototypeOf(it){\n    return $getPrototypeOf(toObject(it));\n  };\n});\n},{\"./_object-gpo\":61,\"./_object-sap\":65,\"./_to-object\":77}],88:[function(require,module,exports){\n// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object')\n  , $keys    = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function(){\n  return function keys(it){\n    return $keys(toObject(it));\n  };\n});\n},{\"./_object-keys\":63,\"./_object-sap\":65,\"./_to-object\":77}],89:[function(require,module,exports){\n// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', {setPrototypeOf: require('./_set-proto').set});\n},{\"./_export\":37,\"./_set-proto\":68}],90:[function(require,module,exports){\n\n},{}],91:[function(require,module,exports){\n'use strict';\nvar $at  = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function(iterated){\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , index = this._i\n    , point;\n  if(index >= O.length)return {value: undefined, done: true};\n  point = $at(O, index);\n  this._i += point.length;\n  return {value: point, done: false};\n});\n},{\"./_iter-define\":48,\"./_string-at\":72}],92:[function(require,module,exports){\n'use strict';\n// ECMAScript 6 symbols shim\nvar global         = require('./_global')\n  , has            = require('./_has')\n  , DESCRIPTORS    = require('./_descriptors')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , META           = require('./_meta').KEY\n  , $fails         = require('./_fails')\n  , shared         = require('./_shared')\n  , setToStringTag = require('./_set-to-string-tag')\n  , uid            = require('./_uid')\n  , wks            = require('./_wks')\n  , wksExt         = require('./_wks-ext')\n  , wksDefine      = require('./_wks-define')\n  , keyOf          = require('./_keyof')\n  , enumKeys       = require('./_enum-keys')\n  , isArray        = require('./_is-array')\n  , anObject       = require('./_an-object')\n  , toIObject      = require('./_to-iobject')\n  , toPrimitive    = require('./_to-primitive')\n  , createDesc     = require('./_property-desc')\n  , _create        = require('./_object-create')\n  , gOPNExt        = require('./_object-gopn-ext')\n  , $GOPD          = require('./_object-gopd')\n  , $DP            = require('./_object-dp')\n  , $keys          = require('./_object-keys')\n  , gOPD           = $GOPD.f\n  , dP             = $DP.f\n  , gOPN           = gOPNExt.f\n  , $Symbol        = global.Symbol\n  , $JSON          = global.JSON\n  , _stringify     = $JSON && $JSON.stringify\n  , PROTOTYPE      = 'prototype'\n  , HIDDEN         = wks('_hidden')\n  , TO_PRIMITIVE   = wks('toPrimitive')\n  , isEnum         = {}.propertyIsEnumerable\n  , SymbolRegistry = shared('symbol-registry')\n  , AllSymbols     = shared('symbols')\n  , OPSymbols      = shared('op-symbols')\n  , ObjectProto    = Object[PROTOTYPE]\n  , USE_NATIVE     = typeof $Symbol == 'function'\n  , QObject        = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function(){\n  return _create(dP({}, 'a', {\n    get: function(){ return dP(this, 'a', {value: 7}).a; }\n  })).a != 7;\n}) ? function(it, key, D){\n  var protoDesc = gOPD(ObjectProto, key);\n  if(protoDesc)delete ObjectProto[key];\n  dP(it, key, D);\n  if(protoDesc && it !== ObjectProto)dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function(tag){\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function(it){\n  return typeof it == 'symbol';\n} : function(it){\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D){\n  if(it === ObjectProto)$defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if(has(AllSymbols, key)){\n    if(!D.enumerable){\n      if(!has(it, HIDDEN))dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if(has(it, HIDDEN) && it[HIDDEN][key])it[HIDDEN][key] = false;\n      D = _create(D, {enumerable: createDesc(0, false)});\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P){\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P))\n    , i    = 0\n    , l = keys.length\n    , key;\n  while(l > i)$defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P){\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key){\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if(this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key){\n  it  = toIObject(it);\n  key = toPrimitive(key, true);\n  if(it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return;\n  var D = gOPD(it, key);\n  if(D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key]))D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it){\n  var names  = gOPN(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i){\n    if(!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META)result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it){\n  var IS_OP  = it === ObjectProto\n    , names  = gOPN(IS_OP ? OPSymbols : toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i){\n    if(has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true))result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif(!USE_NATIVE){\n  $Symbol = function Symbol(){\n    if(this instanceof $Symbol)throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function(value){\n      if(this === ObjectProto)$set.call(OPSymbols, value);\n      if(has(this, HIDDEN) && has(this[HIDDEN], tag))this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if(DESCRIPTORS && setter)setSymbolDesc(ObjectProto, tag, {configurable: true, set: $set});\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString(){\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f   = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f  = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if(DESCRIPTORS && !require('./_library')){\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function(name){\n    return wrap(wks(name));\n  }\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Symbol: $Symbol});\n\nfor(var symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), i = 0; symbols.length > i; )wks(symbols[i++]);\n\nfor(var symbols = $keys(wks.store), i = 0; symbols.length > i; )wksDefine(symbols[i++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function(key){\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(key){\n    if(isSymbol(key))return keyOf(SymbolRegistry, key);\n    throw TypeError(key + ' is not a symbol!');\n  },\n  useSetter: function(){ setter = true; },\n  useSimple: function(){ setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function(){\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({a: S}) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it){\n    if(it === undefined || isSymbol(it))return; // IE8 returns string on undefined\n    var args = [it]\n      , i    = 1\n      , replacer, $replacer;\n    while(arguments.length > i)args.push(arguments[i++]);\n    replacer = args[1];\n    if(typeof replacer == 'function')$replacer = replacer;\n    if($replacer || !isArray(replacer))replacer = function(key, value){\n      if($replacer)value = $replacer.call(this, key, value);\n      if(!isSymbol(value))return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n},{\"./_an-object\":27,\"./_descriptors\":33,\"./_enum-keys\":36,\"./_export\":37,\"./_fails\":38,\"./_global\":39,\"./_has\":40,\"./_hide\":41,\"./_is-array\":45,\"./_keyof\":51,\"./_library\":52,\"./_meta\":53,\"./_object-create\":54,\"./_object-dp\":55,\"./_object-gopd\":57,\"./_object-gopn\":59,\"./_object-gopn-ext\":58,\"./_object-gops\":60,\"./_object-keys\":63,\"./_object-pie\":64,\"./_property-desc\":66,\"./_redefine\":67,\"./_set-to-string-tag\":69,\"./_shared\":71,\"./_to-iobject\":75,\"./_to-primitive\":78,\"./_uid\":79,\"./_wks\":82,\"./_wks-define\":80,\"./_wks-ext\":81}],93:[function(require,module,exports){\nrequire('./_wks-define')('asyncIterator');\n},{\"./_wks-define\":80}],94:[function(require,module,exports){\nrequire('./_wks-define')('observable');\n},{\"./_wks-define\":80}],95:[function(require,module,exports){\nrequire('./es6.array.iterator');\nvar global        = require('./_global')\n  , hide          = require('./_hide')\n  , Iterators     = require('./_iterators')\n  , TO_STRING_TAG = require('./_wks')('toStringTag');\n\nfor(var collections = ['NodeList', 'DOMTokenList', 'MediaList', 'StyleSheetList', 'CSSRuleList'], i = 0; i < 5; i++){\n  var NAME       = collections[i]\n    , Collection = global[NAME]\n    , proto      = Collection && Collection.prototype;\n  if(proto && !proto[TO_STRING_TAG])hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n},{\"./_global\":39,\"./_hide\":41,\"./_iterators\":50,\"./_wks\":82,\"./es6.array.iterator\":83}],96:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],97:[function(require,module,exports){\n(function (global){\n// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g =\n  typeof global === \"object\" ? global :\n  typeof window === \"object\" ? window :\n  typeof self === \"object\" ? self : this;\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime &&\n  Object.getOwnPropertyNames(g).indexOf(\"regeneratorRuntime\") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = require(\"./runtime\");\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch(e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./runtime\":98}],98:[function(require,module,exports){\n(function (process,global){\n/**\n * Copyright (c) 2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * https://raw.github.com/facebook/regenerator/master/LICENSE file. An\n * additional grant of patent rights can be found in the PATENTS file in\n * the same directory.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    if (typeof process === \"object\" && process.domain) {\n      invoke = process.domain.bind(invoke);\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          if (method === \"return\" ||\n              (method === \"throw\" && delegate.iterator[method] === undefined)) {\n            // A return or throw (when the delegate iterator has no throw\n            // method) always terminates the yield* loop.\n            context.delegate = null;\n\n            // If the delegate iterator has a return method, give it a\n            // chance to clean up.\n            var returnMethod = delegate.iterator[\"return\"];\n            if (returnMethod) {\n              var record = tryCatch(returnMethod, delegate.iterator, arg);\n              if (record.type === \"throw\") {\n                // If the return method threw an exception, let that\n                // exception prevail over the original return or throw.\n                method = \"throw\";\n                arg = record.arg;\n                continue;\n              }\n            }\n\n            if (method === \"return\") {\n              // Continue with the outer return, now that the delegate\n              // iterator has been terminated.\n              continue;\n            }\n          }\n\n          var record = tryCatch(\n            delegate.iterator[method],\n            delegate.iterator,\n            arg\n          );\n\n          if (record.type === \"throw\") {\n            context.delegate = null;\n\n            // Like returning generator.throw(uncaught), but without the\n            // overhead of an extra function call.\n            method = \"throw\";\n            arg = record.arg;\n            continue;\n          }\n\n          // Delegate generator ran and handled its own exceptions so\n          // regardless of what the method was, we continue as if it is\n          // \"next\" with an undefined arg.\n          method = \"next\";\n          arg = undefined;\n\n          var info = record.arg;\n          if (info.done) {\n            context[delegate.resultName] = info.value;\n            context.next = delegate.nextLoc;\n          } else {\n            state = GenStateSuspendedYield;\n            return info;\n          }\n\n          context.delegate = null;\n        }\n\n        if (method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = arg;\n\n        } else if (method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw arg;\n          }\n\n          if (context.dispatchException(arg)) {\n            // If the dispatched exception was caught by a catch block,\n            // then let that catch block handle the exception normally.\n            method = \"next\";\n            arg = undefined;\n          }\n\n        } else if (method === \"return\") {\n          context.abrupt(\"return\", arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          var info = {\n            value: record.arg,\n            done: context.done\n          };\n\n          if (record.arg === ContinueSentinel) {\n            if (context.delegate && method === \"next\") {\n              // Deliberately forget the last sent value so that we don't\n              // accidentally pass it on to the delegate.\n              arg = undefined;\n            }\n          } else {\n            return info;\n          }\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(arg) call above.\n          method = \"throw\";\n          arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n        return !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.next = finallyEntry.finallyLoc;\n      } else {\n        this.complete(record);\n      }\n\n      return ContinueSentinel;\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = record.arg;\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // Among the various tricks for obtaining a reference to the global\n  // object, this seems to be the most reliable technique that does not\n  // use indirect eval (which violates Content Security Policy).\n  typeof global === \"object\" ? global :\n  typeof window === \"object\" ? window :\n  typeof self === \"object\" ? self : this\n);\n\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"_process\":96}],99:[function(require,module,exports){\n/*\nAuthor: Geraint Luff and others\nYear: 2013\n\nThis code is released into the \"public domain\" by its author(s).  Anybody may use, alter and distribute the code without restriction.  The author makes no guarantees, and takes no liability of any kind for use of this code.\n\nIf you find a bug or make an improvement, it would be courteous to let the author know, but it is not compulsory.\n*/\n(function (global, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([], factory);\n  } else if (typeof module !== 'undefined' && module.exports){\n    // CommonJS. Define export.\n    module.exports = factory();\n  } else {\n    // Browser globals\n    global.tv4 = factory();\n  }\n}(this, function () {\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FGlobal_Objects%2FObject%2Fkeys\nif (!Object.keys) {\n\tObject.keys = (function () {\n\t\tvar hasOwnProperty = Object.prototype.hasOwnProperty,\n\t\t\thasDontEnumBug = !({toString: null}).propertyIsEnumerable('toString'),\n\t\t\tdontEnums = [\n\t\t\t\t'toString',\n\t\t\t\t'toLocaleString',\n\t\t\t\t'valueOf',\n\t\t\t\t'hasOwnProperty',\n\t\t\t\t'isPrototypeOf',\n\t\t\t\t'propertyIsEnumerable',\n\t\t\t\t'constructor'\n\t\t\t],\n\t\t\tdontEnumsLength = dontEnums.length;\n\n\t\treturn function (obj) {\n\t\t\tif (typeof obj !== 'object' && typeof obj !== 'function' || obj === null) {\n\t\t\t\tthrow new TypeError('Object.keys called on non-object');\n\t\t\t}\n\n\t\t\tvar result = [];\n\n\t\t\tfor (var prop in obj) {\n\t\t\t\tif (hasOwnProperty.call(obj, prop)) {\n\t\t\t\t\tresult.push(prop);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (hasDontEnumBug) {\n\t\t\t\tfor (var i=0; i < dontEnumsLength; i++) {\n\t\t\t\t\tif (hasOwnProperty.call(obj, dontEnums[i])) {\n\t\t\t\t\t\tresult.push(dontEnums[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t};\n\t})();\n}\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create\nif (!Object.create) {\n\tObject.create = (function(){\n\t\tfunction F(){}\n\n\t\treturn function(o){\n\t\t\tif (arguments.length !== 1) {\n\t\t\t\tthrow new Error('Object.create implementation only accepts one parameter.');\n\t\t\t}\n\t\t\tF.prototype = o;\n\t\t\treturn new F();\n\t\t};\n\t})();\n}\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FGlobal_Objects%2FArray%2FisArray\nif(!Array.isArray) {\n\tArray.isArray = function (vArg) {\n\t\treturn Object.prototype.toString.call(vArg) === \"[object Array]\";\n\t};\n}\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FGlobal_Objects%2FArray%2FindexOf\nif (!Array.prototype.indexOf) {\n\tArray.prototype.indexOf = function (searchElement /*, fromIndex */ ) {\n\t\tif (this === null) {\n\t\t\tthrow new TypeError();\n\t\t}\n\t\tvar t = Object(this);\n\t\tvar len = t.length >>> 0;\n\n\t\tif (len === 0) {\n\t\t\treturn -1;\n\t\t}\n\t\tvar n = 0;\n\t\tif (arguments.length > 1) {\n\t\t\tn = Number(arguments[1]);\n\t\t\tif (n !== n) { // shortcut for verifying if it's NaN\n\t\t\t\tn = 0;\n\t\t\t} else if (n !== 0 && n !== Infinity && n !== -Infinity) {\n\t\t\t\tn = (n > 0 || -1) * Math.floor(Math.abs(n));\n\t\t\t}\n\t\t}\n\t\tif (n >= len) {\n\t\t\treturn -1;\n\t\t}\n\t\tvar k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);\n\t\tfor (; k < len; k++) {\n\t\t\tif (k in t && t[k] === searchElement) {\n\t\t\t\treturn k;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t};\n}\n\n// Grungey Object.isFrozen hack\nif (!Object.isFrozen) {\n\tObject.isFrozen = function (obj) {\n\t\tvar key = \"tv4_test_frozen_key\";\n\t\twhile (obj.hasOwnProperty(key)) {\n\t\t\tkey += Math.random();\n\t\t}\n\t\ttry {\n\t\t\tobj[key] = true;\n\t\t\tdelete obj[key];\n\t\t\treturn false;\n\t\t} catch (e) {\n\t\t\treturn true;\n\t\t}\n\t};\n}\n// Based on: https://github.com/geraintluff/uri-templates, but with all the de-substitution stuff removed\n\nvar uriTemplateGlobalModifiers = {\n\t\"+\": true,\n\t\"#\": true,\n\t\".\": true,\n\t\"/\": true,\n\t\";\": true,\n\t\"?\": true,\n\t\"&\": true\n};\nvar uriTemplateSuffices = {\n\t\"*\": true\n};\n\nfunction notReallyPercentEncode(string) {\n\treturn encodeURI(string).replace(/%25[0-9][0-9]/g, function (doubleEncoded) {\n\t\treturn \"%\" + doubleEncoded.substring(3);\n\t});\n}\n\nfunction uriTemplateSubstitution(spec) {\n\tvar modifier = \"\";\n\tif (uriTemplateGlobalModifiers[spec.charAt(0)]) {\n\t\tmodifier = spec.charAt(0);\n\t\tspec = spec.substring(1);\n\t}\n\tvar separator = \"\";\n\tvar prefix = \"\";\n\tvar shouldEscape = true;\n\tvar showVariables = false;\n\tvar trimEmptyString = false;\n\tif (modifier === '+') {\n\t\tshouldEscape = false;\n\t} else if (modifier === \".\") {\n\t\tprefix = \".\";\n\t\tseparator = \".\";\n\t} else if (modifier === \"/\") {\n\t\tprefix = \"/\";\n\t\tseparator = \"/\";\n\t} else if (modifier === '#') {\n\t\tprefix = \"#\";\n\t\tshouldEscape = false;\n\t} else if (modifier === ';') {\n\t\tprefix = \";\";\n\t\tseparator = \";\";\n\t\tshowVariables = true;\n\t\ttrimEmptyString = true;\n\t} else if (modifier === '?') {\n\t\tprefix = \"?\";\n\t\tseparator = \"&\";\n\t\tshowVariables = true;\n\t} else if (modifier === '&') {\n\t\tprefix = \"&\";\n\t\tseparator = \"&\";\n\t\tshowVariables = true;\n\t}\n\n\tvar varNames = [];\n\tvar varList = spec.split(\",\");\n\tvar varSpecs = [];\n\tvar varSpecMap = {};\n\tfor (var i = 0; i < varList.length; i++) {\n\t\tvar varName = varList[i];\n\t\tvar truncate = null;\n\t\tif (varName.indexOf(\":\") !== -1) {\n\t\t\tvar parts = varName.split(\":\");\n\t\t\tvarName = parts[0];\n\t\t\ttruncate = parseInt(parts[1], 10);\n\t\t}\n\t\tvar suffices = {};\n\t\twhile (uriTemplateSuffices[varName.charAt(varName.length - 1)]) {\n\t\t\tsuffices[varName.charAt(varName.length - 1)] = true;\n\t\t\tvarName = varName.substring(0, varName.length - 1);\n\t\t}\n\t\tvar varSpec = {\n\t\t\ttruncate: truncate,\n\t\t\tname: varName,\n\t\t\tsuffices: suffices\n\t\t};\n\t\tvarSpecs.push(varSpec);\n\t\tvarSpecMap[varName] = varSpec;\n\t\tvarNames.push(varName);\n\t}\n\tvar subFunction = function (valueFunction) {\n\t\tvar result = \"\";\n\t\tvar startIndex = 0;\n\t\tfor (var i = 0; i < varSpecs.length; i++) {\n\t\t\tvar varSpec = varSpecs[i];\n\t\t\tvar value = valueFunction(varSpec.name);\n\t\t\tif (value === null || value === undefined || (Array.isArray(value) && value.length === 0) || (typeof value === 'object' && Object.keys(value).length === 0)) {\n\t\t\t\tstartIndex++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (i === startIndex) {\n\t\t\t\tresult += prefix;\n\t\t\t} else {\n\t\t\t\tresult += (separator || \",\");\n\t\t\t}\n\t\t\tif (Array.isArray(value)) {\n\t\t\t\tif (showVariables) {\n\t\t\t\t\tresult += varSpec.name + \"=\";\n\t\t\t\t}\n\t\t\t\tfor (var j = 0; j < value.length; j++) {\n\t\t\t\t\tif (j > 0) {\n\t\t\t\t\t\tresult += varSpec.suffices['*'] ? (separator || \",\") : \",\";\n\t\t\t\t\t\tif (varSpec.suffices['*'] && showVariables) {\n\t\t\t\t\t\t\tresult += varSpec.name + \"=\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tresult += shouldEscape ? encodeURIComponent(value[j]).replace(/!/g, \"%21\") : notReallyPercentEncode(value[j]);\n\t\t\t\t}\n\t\t\t} else if (typeof value === \"object\") {\n\t\t\t\tif (showVariables && !varSpec.suffices['*']) {\n\t\t\t\t\tresult += varSpec.name + \"=\";\n\t\t\t\t}\n\t\t\t\tvar first = true;\n\t\t\t\tfor (var key in value) {\n\t\t\t\t\tif (!first) {\n\t\t\t\t\t\tresult += varSpec.suffices['*'] ? (separator || \",\") : \",\";\n\t\t\t\t\t}\n\t\t\t\t\tfirst = false;\n\t\t\t\t\tresult += shouldEscape ? encodeURIComponent(key).replace(/!/g, \"%21\") : notReallyPercentEncode(key);\n\t\t\t\t\tresult += varSpec.suffices['*'] ? '=' : \",\";\n\t\t\t\t\tresult += shouldEscape ? encodeURIComponent(value[key]).replace(/!/g, \"%21\") : notReallyPercentEncode(value[key]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (showVariables) {\n\t\t\t\t\tresult += varSpec.name;\n\t\t\t\t\tif (!trimEmptyString || value !== \"\") {\n\t\t\t\t\t\tresult += \"=\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (varSpec.truncate != null) {\n\t\t\t\t\tvalue = value.substring(0, varSpec.truncate);\n\t\t\t\t}\n\t\t\t\tresult += shouldEscape ? encodeURIComponent(value).replace(/!/g, \"%21\"): notReallyPercentEncode(value);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t};\n\tsubFunction.varNames = varNames;\n\treturn {\n\t\tprefix: prefix,\n\t\tsubstitution: subFunction\n\t};\n}\n\nfunction UriTemplate(template) {\n\tif (!(this instanceof UriTemplate)) {\n\t\treturn new UriTemplate(template);\n\t}\n\tvar parts = template.split(\"{\");\n\tvar textParts = [parts.shift()];\n\tvar prefixes = [];\n\tvar substitutions = [];\n\tvar varNames = [];\n\twhile (parts.length > 0) {\n\t\tvar part = parts.shift();\n\t\tvar spec = part.split(\"}\")[0];\n\t\tvar remainder = part.substring(spec.length + 1);\n\t\tvar funcs = uriTemplateSubstitution(spec);\n\t\tsubstitutions.push(funcs.substitution);\n\t\tprefixes.push(funcs.prefix);\n\t\ttextParts.push(remainder);\n\t\tvarNames = varNames.concat(funcs.substitution.varNames);\n\t}\n\tthis.fill = function (valueFunction) {\n\t\tvar result = textParts[0];\n\t\tfor (var i = 0; i < substitutions.length; i++) {\n\t\t\tvar substitution = substitutions[i];\n\t\t\tresult += substitution(valueFunction);\n\t\t\tresult += textParts[i + 1];\n\t\t}\n\t\treturn result;\n\t};\n\tthis.varNames = varNames;\n\tthis.template = template;\n}\nUriTemplate.prototype = {\n\ttoString: function () {\n\t\treturn this.template;\n\t},\n\tfillFromObject: function (obj) {\n\t\treturn this.fill(function (varName) {\n\t\t\treturn obj[varName];\n\t\t});\n\t}\n};\nvar ValidatorContext = function ValidatorContext(parent, collectMultiple, errorReporter, checkRecursive, trackUnknownProperties) {\n\tthis.missing = [];\n\tthis.missingMap = {};\n\tthis.formatValidators = parent ? Object.create(parent.formatValidators) : {};\n\tthis.schemas = parent ? Object.create(parent.schemas) : {};\n\tthis.collectMultiple = collectMultiple;\n\tthis.errors = [];\n\tthis.handleError = collectMultiple ? this.collectError : this.returnError;\n\tif (checkRecursive) {\n\t\tthis.checkRecursive = true;\n\t\tthis.scanned = [];\n\t\tthis.scannedFrozen = [];\n\t\tthis.scannedFrozenSchemas = [];\n\t\tthis.scannedFrozenValidationErrors = [];\n\t\tthis.validatedSchemasKey = 'tv4_validation_id';\n\t\tthis.validationErrorsKey = 'tv4_validation_errors_id';\n\t}\n\tif (trackUnknownProperties) {\n\t\tthis.trackUnknownProperties = true;\n\t\tthis.knownPropertyPaths = {};\n\t\tthis.unknownPropertyPaths = {};\n\t}\n\tthis.errorReporter = errorReporter || defaultErrorReporter('en');\n\tif (typeof this.errorReporter === 'string') {\n\t\tthrow new Error('debug');\n\t}\n\tthis.definedKeywords = {};\n\tif (parent) {\n\t\tfor (var key in parent.definedKeywords) {\n\t\t\tthis.definedKeywords[key] = parent.definedKeywords[key].slice(0);\n\t\t}\n\t}\n};\nValidatorContext.prototype.defineKeyword = function (keyword, keywordFunction) {\n\tthis.definedKeywords[keyword] = this.definedKeywords[keyword] || [];\n\tthis.definedKeywords[keyword].push(keywordFunction);\n};\nValidatorContext.prototype.createError = function (code, messageParams, dataPath, schemaPath, subErrors, data, schema) {\n\tvar error = new ValidationError(code, messageParams, dataPath, schemaPath, subErrors);\n\terror.message = this.errorReporter(error, data, schema);\n\treturn error;\n};\nValidatorContext.prototype.returnError = function (error) {\n\treturn error;\n};\nValidatorContext.prototype.collectError = function (error) {\n\tif (error) {\n\t\tthis.errors.push(error);\n\t}\n\treturn null;\n};\nValidatorContext.prototype.prefixErrors = function (startIndex, dataPath, schemaPath) {\n\tfor (var i = startIndex; i < this.errors.length; i++) {\n\t\tthis.errors[i] = this.errors[i].prefixWith(dataPath, schemaPath);\n\t}\n\treturn this;\n};\nValidatorContext.prototype.banUnknownProperties = function (data, schema) {\n\tfor (var unknownPath in this.unknownPropertyPaths) {\n\t\tvar error = this.createError(ErrorCodes.UNKNOWN_PROPERTY, {path: unknownPath}, unknownPath, \"\", null, data, schema);\n\t\tvar result = this.handleError(error);\n\t\tif (result) {\n\t\t\treturn result;\n\t\t}\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.addFormat = function (format, validator) {\n\tif (typeof format === 'object') {\n\t\tfor (var key in format) {\n\t\t\tthis.addFormat(key, format[key]);\n\t\t}\n\t\treturn this;\n\t}\n\tthis.formatValidators[format] = validator;\n};\nValidatorContext.prototype.resolveRefs = function (schema, urlHistory) {\n\tif (schema['$ref'] !== undefined) {\n\t\turlHistory = urlHistory || {};\n\t\tif (urlHistory[schema['$ref']]) {\n\t\t\treturn this.createError(ErrorCodes.CIRCULAR_REFERENCE, {urls: Object.keys(urlHistory).join(', ')}, '', '', null, undefined, schema);\n\t\t}\n\t\turlHistory[schema['$ref']] = true;\n\t\tschema = this.getSchema(schema['$ref'], urlHistory);\n\t}\n\treturn schema;\n};\nValidatorContext.prototype.getSchema = function (url, urlHistory) {\n\tvar schema;\n\tif (this.schemas[url] !== undefined) {\n\t\tschema = this.schemas[url];\n\t\treturn this.resolveRefs(schema, urlHistory);\n\t}\n\tvar baseUrl = url;\n\tvar fragment = \"\";\n\tif (url.indexOf('#') !== -1) {\n\t\tfragment = url.substring(url.indexOf(\"#\") + 1);\n\t\tbaseUrl = url.substring(0, url.indexOf(\"#\"));\n\t}\n\tif (typeof this.schemas[baseUrl] === 'object') {\n\t\tschema = this.schemas[baseUrl];\n\t\tvar pointerPath = decodeURIComponent(fragment);\n\t\tif (pointerPath === \"\") {\n\t\t\treturn this.resolveRefs(schema, urlHistory);\n\t\t} else if (pointerPath.charAt(0) !== \"/\") {\n\t\t\treturn undefined;\n\t\t}\n\t\tvar parts = pointerPath.split(\"/\").slice(1);\n\t\tfor (var i = 0; i < parts.length; i++) {\n\t\t\tvar component = parts[i].replace(/~1/g, \"/\").replace(/~0/g, \"~\");\n\t\t\tif (schema[component] === undefined) {\n\t\t\t\tschema = undefined;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tschema = schema[component];\n\t\t}\n\t\tif (schema !== undefined) {\n\t\t\treturn this.resolveRefs(schema, urlHistory);\n\t\t}\n\t}\n\tif (this.missing[baseUrl] === undefined) {\n\t\tthis.missing.push(baseUrl);\n\t\tthis.missing[baseUrl] = baseUrl;\n\t\tthis.missingMap[baseUrl] = baseUrl;\n\t}\n};\nValidatorContext.prototype.searchSchemas = function (schema, url) {\n\tif (Array.isArray(schema)) {\n\t\tfor (var i = 0; i < schema.length; i++) {\n\t\t\tthis.searchSchemas(schema[i], url);\n\t\t}\n\t} else if (schema && typeof schema === \"object\") {\n\t\tif (typeof schema.id === \"string\") {\n\t\t\tif (isTrustedUrl(url, schema.id)) {\n\t\t\t\tif (this.schemas[schema.id] === undefined) {\n\t\t\t\t\tthis.schemas[schema.id] = schema;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor (var key in schema) {\n\t\t\tif (key !== \"enum\") {\n\t\t\t\tif (typeof schema[key] === \"object\") {\n\t\t\t\t\tthis.searchSchemas(schema[key], url);\n\t\t\t\t} else if (key === \"$ref\") {\n\t\t\t\t\tvar uri = getDocumentUri(schema[key]);\n\t\t\t\t\tif (uri && this.schemas[uri] === undefined && this.missingMap[uri] === undefined) {\n\t\t\t\t\t\tthis.missingMap[uri] = uri;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\nValidatorContext.prototype.addSchema = function (url, schema) {\n\t//overload\n\tif (typeof url !== 'string' || typeof schema === 'undefined') {\n\t\tif (typeof url === 'object' && typeof url.id === 'string') {\n\t\t\tschema = url;\n\t\t\turl = schema.id;\n\t\t}\n\t\telse {\n\t\t\treturn;\n\t\t}\n\t}\n\tif (url === getDocumentUri(url) + \"#\") {\n\t\t// Remove empty fragment\n\t\turl = getDocumentUri(url);\n\t}\n\tthis.schemas[url] = schema;\n\tdelete this.missingMap[url];\n\tnormSchema(schema, url);\n\tthis.searchSchemas(schema, url);\n};\n\nValidatorContext.prototype.getSchemaMap = function () {\n\tvar map = {};\n\tfor (var key in this.schemas) {\n\t\tmap[key] = this.schemas[key];\n\t}\n\treturn map;\n};\n\nValidatorContext.prototype.getSchemaUris = function (filterRegExp) {\n\tvar list = [];\n\tfor (var key in this.schemas) {\n\t\tif (!filterRegExp || filterRegExp.test(key)) {\n\t\t\tlist.push(key);\n\t\t}\n\t}\n\treturn list;\n};\n\nValidatorContext.prototype.getMissingUris = function (filterRegExp) {\n\tvar list = [];\n\tfor (var key in this.missingMap) {\n\t\tif (!filterRegExp || filterRegExp.test(key)) {\n\t\t\tlist.push(key);\n\t\t}\n\t}\n\treturn list;\n};\n\nValidatorContext.prototype.dropSchemas = function () {\n\tthis.schemas = {};\n\tthis.reset();\n};\nValidatorContext.prototype.reset = function () {\n\tthis.missing = [];\n\tthis.missingMap = {};\n\tthis.errors = [];\n};\n\nValidatorContext.prototype.validateAll = function (data, schema, dataPathParts, schemaPathParts, dataPointerPath) {\n\tvar topLevel;\n\tschema = this.resolveRefs(schema);\n\tif (!schema) {\n\t\treturn null;\n\t} else if (schema instanceof ValidationError) {\n\t\tthis.errors.push(schema);\n\t\treturn schema;\n\t}\n\n\tvar startErrorCount = this.errors.length;\n\tvar frozenIndex, scannedFrozenSchemaIndex = null, scannedSchemasIndex = null;\n\tif (this.checkRecursive && data && typeof data === 'object') {\n\t\ttopLevel = !this.scanned.length;\n\t\tif (data[this.validatedSchemasKey]) {\n\t\t\tvar schemaIndex = data[this.validatedSchemasKey].indexOf(schema);\n\t\t\tif (schemaIndex !== -1) {\n\t\t\t\tthis.errors = this.errors.concat(data[this.validationErrorsKey][schemaIndex]);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\tif (Object.isFrozen(data)) {\n\t\t\tfrozenIndex = this.scannedFrozen.indexOf(data);\n\t\t\tif (frozenIndex !== -1) {\n\t\t\t\tvar frozenSchemaIndex = this.scannedFrozenSchemas[frozenIndex].indexOf(schema);\n\t\t\t\tif (frozenSchemaIndex !== -1) {\n\t\t\t\t\tthis.errors = this.errors.concat(this.scannedFrozenValidationErrors[frozenIndex][frozenSchemaIndex]);\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.scanned.push(data);\n\t\tif (Object.isFrozen(data)) {\n\t\t\tif (frozenIndex === -1) {\n\t\t\t\tfrozenIndex = this.scannedFrozen.length;\n\t\t\t\tthis.scannedFrozen.push(data);\n\t\t\t\tthis.scannedFrozenSchemas.push([]);\n\t\t\t}\n\t\t\tscannedFrozenSchemaIndex = this.scannedFrozenSchemas[frozenIndex].length;\n\t\t\tthis.scannedFrozenSchemas[frozenIndex][scannedFrozenSchemaIndex] = schema;\n\t\t\tthis.scannedFrozenValidationErrors[frozenIndex][scannedFrozenSchemaIndex] = [];\n\t\t} else {\n\t\t\tif (!data[this.validatedSchemasKey]) {\n\t\t\t\ttry {\n\t\t\t\t\tObject.defineProperty(data, this.validatedSchemasKey, {\n\t\t\t\t\t\tvalue: [],\n\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t});\n\t\t\t\t\tObject.defineProperty(data, this.validationErrorsKey, {\n\t\t\t\t\t\tvalue: [],\n\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t});\n\t\t\t\t} catch (e) {\n\t\t\t\t\t//IE 7/8 workaround\n\t\t\t\t\tdata[this.validatedSchemasKey] = [];\n\t\t\t\t\tdata[this.validationErrorsKey] = [];\n\t\t\t\t}\n\t\t\t}\n\t\t\tscannedSchemasIndex = data[this.validatedSchemasKey].length;\n\t\t\tdata[this.validatedSchemasKey][scannedSchemasIndex] = schema;\n\t\t\tdata[this.validationErrorsKey][scannedSchemasIndex] = [];\n\t\t}\n\t}\n\n\tvar errorCount = this.errors.length;\n\tvar error = this.validateBasic(data, schema, dataPointerPath)\n\t\t|| this.validateNumeric(data, schema, dataPointerPath)\n\t\t|| this.validateString(data, schema, dataPointerPath)\n\t\t|| this.validateArray(data, schema, dataPointerPath)\n\t\t|| this.validateObject(data, schema, dataPointerPath)\n\t\t|| this.validateCombinations(data, schema, dataPointerPath)\n\t\t|| this.validateHypermedia(data, schema, dataPointerPath)\n\t\t|| this.validateFormat(data, schema, dataPointerPath)\n\t\t|| this.validateDefinedKeywords(data, schema, dataPointerPath)\n\t\t|| null;\n\n\tif (topLevel) {\n\t\twhile (this.scanned.length) {\n\t\t\tvar item = this.scanned.pop();\n\t\t\tdelete item[this.validatedSchemasKey];\n\t\t}\n\t\tthis.scannedFrozen = [];\n\t\tthis.scannedFrozenSchemas = [];\n\t}\n\n\tif (error || errorCount !== this.errors.length) {\n\t\twhile ((dataPathParts && dataPathParts.length) || (schemaPathParts && schemaPathParts.length)) {\n\t\t\tvar dataPart = (dataPathParts && dataPathParts.length) ? \"\" + dataPathParts.pop() : null;\n\t\t\tvar schemaPart = (schemaPathParts && schemaPathParts.length) ? \"\" + schemaPathParts.pop() : null;\n\t\t\tif (error) {\n\t\t\t\terror = error.prefixWith(dataPart, schemaPart);\n\t\t\t}\n\t\t\tthis.prefixErrors(errorCount, dataPart, schemaPart);\n\t\t}\n\t}\n\n\tif (scannedFrozenSchemaIndex !== null) {\n\t\tthis.scannedFrozenValidationErrors[frozenIndex][scannedFrozenSchemaIndex] = this.errors.slice(startErrorCount);\n\t} else if (scannedSchemasIndex !== null) {\n\t\tdata[this.validationErrorsKey][scannedSchemasIndex] = this.errors.slice(startErrorCount);\n\t}\n\n\treturn this.handleError(error);\n};\nValidatorContext.prototype.validateFormat = function (data, schema) {\n\tif (typeof schema.format !== 'string' || !this.formatValidators[schema.format]) {\n\t\treturn null;\n\t}\n\tvar errorMessage = this.formatValidators[schema.format].call(null, data, schema);\n\tif (typeof errorMessage === 'string' || typeof errorMessage === 'number') {\n\t\treturn this.createError(ErrorCodes.FORMAT_CUSTOM, {message: errorMessage}, '', '/format', null, data, schema);\n\t} else if (errorMessage && typeof errorMessage === 'object') {\n\t\treturn this.createError(ErrorCodes.FORMAT_CUSTOM, {message: errorMessage.message || \"?\"}, errorMessage.dataPath || '', errorMessage.schemaPath || \"/format\", null, data, schema);\n\t}\n\treturn null;\n};\nValidatorContext.prototype.validateDefinedKeywords = function (data, schema, dataPointerPath) {\n\tfor (var key in this.definedKeywords) {\n\t\tif (typeof schema[key] === 'undefined') {\n\t\t\tcontinue;\n\t\t}\n\t\tvar validationFunctions = this.definedKeywords[key];\n\t\tfor (var i = 0; i < validationFunctions.length; i++) {\n\t\t\tvar func = validationFunctions[i];\n\t\t\tvar result = func(data, schema[key], schema, dataPointerPath);\n\t\t\tif (typeof result === 'string' || typeof result === 'number') {\n\t\t\t\treturn this.createError(ErrorCodes.KEYWORD_CUSTOM, {key: key, message: result}, '', '', null, data, schema).prefixWith(null, key);\n\t\t\t} else if (result && typeof result === 'object') {\n\t\t\t\tvar code = result.code;\n\t\t\t\tif (typeof code === 'string') {\n\t\t\t\t\tif (!ErrorCodes[code]) {\n\t\t\t\t\t\tthrow new Error('Undefined error code (use defineError): ' + code);\n\t\t\t\t\t}\n\t\t\t\t\tcode = ErrorCodes[code];\n\t\t\t\t} else if (typeof code !== 'number') {\n\t\t\t\t\tcode = ErrorCodes.KEYWORD_CUSTOM;\n\t\t\t\t}\n\t\t\t\tvar messageParams = (typeof result.message === 'object') ? result.message : {key: key, message: result.message || \"?\"};\n\t\t\t\tvar schemaPath = result.schemaPath || (\"/\" + key.replace(/~/g, '~0').replace(/\\//g, '~1'));\n\t\t\t\treturn this.createError(code, messageParams, result.dataPath || null, schemaPath, null, data, schema);\n\t\t\t}\n\t\t}\n\t}\n\treturn null;\n};\n\nfunction recursiveCompare(A, B) {\n\tif (A === B) {\n\t\treturn true;\n\t}\n\tif (A && B && typeof A === \"object\" && typeof B === \"object\") {\n\t\tif (Array.isArray(A) !== Array.isArray(B)) {\n\t\t\treturn false;\n\t\t} else if (Array.isArray(A)) {\n\t\t\tif (A.length !== B.length) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tfor (var i = 0; i < A.length; i++) {\n\t\t\t\tif (!recursiveCompare(A[i], B[i])) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tvar key;\n\t\t\tfor (key in A) {\n\t\t\t\tif (B[key] === undefined && A[key] !== undefined) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (key in B) {\n\t\t\t\tif (A[key] === undefined && B[key] !== undefined) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (key in A) {\n\t\t\t\tif (!recursiveCompare(A[key], B[key])) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nValidatorContext.prototype.validateBasic = function validateBasic(data, schema, dataPointerPath) {\n\tvar error;\n\tif (error = this.validateType(data, schema, dataPointerPath)) {\n\t\treturn error.prefixWith(null, \"type\");\n\t}\n\tif (error = this.validateEnum(data, schema, dataPointerPath)) {\n\t\treturn error.prefixWith(null, \"type\");\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateType = function validateType(data, schema) {\n\tif (schema.type === undefined) {\n\t\treturn null;\n\t}\n\tvar dataType = typeof data;\n\tif (data === null) {\n\t\tdataType = \"null\";\n\t} else if (Array.isArray(data)) {\n\t\tdataType = \"array\";\n\t}\n\tvar allowedTypes = schema.type;\n\tif (!Array.isArray(allowedTypes)) {\n\t\tallowedTypes = [allowedTypes];\n\t}\n\n\tfor (var i = 0; i < allowedTypes.length; i++) {\n\t\tvar type = allowedTypes[i];\n\t\tif (type === dataType || (type === \"integer\" && dataType === \"number\" && (data % 1 === 0))) {\n\t\t\treturn null;\n\t\t}\n\t}\n\treturn this.createError(ErrorCodes.INVALID_TYPE, {type: dataType, expected: allowedTypes.join(\"/\")}, '', '', null, data, schema);\n};\n\nValidatorContext.prototype.validateEnum = function validateEnum(data, schema) {\n\tif (schema[\"enum\"] === undefined) {\n\t\treturn null;\n\t}\n\tfor (var i = 0; i < schema[\"enum\"].length; i++) {\n\t\tvar enumVal = schema[\"enum\"][i];\n\t\tif (recursiveCompare(data, enumVal)) {\n\t\t\treturn null;\n\t\t}\n\t}\n\treturn this.createError(ErrorCodes.ENUM_MISMATCH, {value: (typeof JSON !== 'undefined') ? JSON.stringify(data) : data}, '', '', null, data, schema);\n};\n\nValidatorContext.prototype.validateNumeric = function validateNumeric(data, schema, dataPointerPath) {\n\treturn this.validateMultipleOf(data, schema, dataPointerPath)\n\t\t|| this.validateMinMax(data, schema, dataPointerPath)\n\t\t|| this.validateNaN(data, schema, dataPointerPath)\n\t\t|| null;\n};\n\nvar CLOSE_ENOUGH_LOW = Math.pow(2, -51);\nvar CLOSE_ENOUGH_HIGH = 1 - CLOSE_ENOUGH_LOW;\nValidatorContext.prototype.validateMultipleOf = function validateMultipleOf(data, schema) {\n\tvar multipleOf = schema.multipleOf || schema.divisibleBy;\n\tif (multipleOf === undefined) {\n\t\treturn null;\n\t}\n\tif (typeof data === \"number\") {\n\t\tvar remainder = (data/multipleOf)%1;\n\t\tif (remainder >= CLOSE_ENOUGH_LOW && remainder < CLOSE_ENOUGH_HIGH) {\n\t\t\treturn this.createError(ErrorCodes.NUMBER_MULTIPLE_OF, {value: data, multipleOf: multipleOf}, '', '', null, data, schema);\n\t\t}\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateMinMax = function validateMinMax(data, schema) {\n\tif (typeof data !== \"number\") {\n\t\treturn null;\n\t}\n\tif (schema.minimum !== undefined) {\n\t\tif (data < schema.minimum) {\n\t\t\treturn this.createError(ErrorCodes.NUMBER_MINIMUM, {value: data, minimum: schema.minimum}, '', '/minimum', null, data, schema);\n\t\t}\n\t\tif (schema.exclusiveMinimum && data === schema.minimum) {\n\t\t\treturn this.createError(ErrorCodes.NUMBER_MINIMUM_EXCLUSIVE, {value: data, minimum: schema.minimum}, '', '/exclusiveMinimum', null, data, schema);\n\t\t}\n\t}\n\tif (schema.maximum !== undefined) {\n\t\tif (data > schema.maximum) {\n\t\t\treturn this.createError(ErrorCodes.NUMBER_MAXIMUM, {value: data, maximum: schema.maximum}, '', '/maximum', null, data, schema);\n\t\t}\n\t\tif (schema.exclusiveMaximum && data === schema.maximum) {\n\t\t\treturn this.createError(ErrorCodes.NUMBER_MAXIMUM_EXCLUSIVE, {value: data, maximum: schema.maximum}, '', '/exclusiveMaximum', null, data, schema);\n\t\t}\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateNaN = function validateNaN(data, schema) {\n\tif (typeof data !== \"number\") {\n\t\treturn null;\n\t}\n\tif (isNaN(data) === true || data === Infinity || data === -Infinity) {\n\t\treturn this.createError(ErrorCodes.NUMBER_NOT_A_NUMBER, {value: data}, '', '/type', null, data, schema);\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateString = function validateString(data, schema, dataPointerPath) {\n\treturn this.validateStringLength(data, schema, dataPointerPath)\n\t\t|| this.validateStringPattern(data, schema, dataPointerPath)\n\t\t|| null;\n};\n\nValidatorContext.prototype.validateStringLength = function validateStringLength(data, schema) {\n\tif (typeof data !== \"string\") {\n\t\treturn null;\n\t}\n\tif (schema.minLength !== undefined) {\n\t\tif (data.length < schema.minLength) {\n\t\t\treturn this.createError(ErrorCodes.STRING_LENGTH_SHORT, {length: data.length, minimum: schema.minLength}, '', '/minLength', null, data, schema);\n\t\t}\n\t}\n\tif (schema.maxLength !== undefined) {\n\t\tif (data.length > schema.maxLength) {\n\t\t\treturn this.createError(ErrorCodes.STRING_LENGTH_LONG, {length: data.length, maximum: schema.maxLength}, '', '/maxLength', null, data, schema);\n\t\t}\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateStringPattern = function validateStringPattern(data, schema) {\n\tif (typeof data !== \"string\" || (typeof schema.pattern !== \"string\" && !(schema.pattern instanceof RegExp))) {\n\t\treturn null;\n\t}\n\tvar regexp;\n\tif (schema.pattern instanceof RegExp) {\n\t  regexp = schema.pattern;\n\t}\n\telse {\n\t  var body, flags = '';\n\t  // Check for regular expression literals\n\t  // @see http://www.ecma-international.org/ecma-262/5.1/#sec-7.8.5\n\t  var literal = schema.pattern.match(/^\\/(.+)\\/([img]*)$/);\n\t  if (literal) {\n\t    body = literal[1];\n\t    flags = literal[2];\n\t  }\n\t  else {\n\t    body = schema.pattern;\n\t  }\n\t  regexp = new RegExp(body, flags);\n\t}\n\tif (!regexp.test(data)) {\n\t\treturn this.createError(ErrorCodes.STRING_PATTERN, {pattern: schema.pattern}, '', '/pattern', null, data, schema);\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateArray = function validateArray(data, schema, dataPointerPath) {\n\tif (!Array.isArray(data)) {\n\t\treturn null;\n\t}\n\treturn this.validateArrayLength(data, schema, dataPointerPath)\n\t\t|| this.validateArrayUniqueItems(data, schema, dataPointerPath)\n\t\t|| this.validateArrayItems(data, schema, dataPointerPath)\n\t\t|| null;\n};\n\nValidatorContext.prototype.validateArrayLength = function validateArrayLength(data, schema) {\n\tvar error;\n\tif (schema.minItems !== undefined) {\n\t\tif (data.length < schema.minItems) {\n\t\t\terror = this.createError(ErrorCodes.ARRAY_LENGTH_SHORT, {length: data.length, minimum: schema.minItems}, '', '/minItems', null, data, schema);\n\t\t\tif (this.handleError(error)) {\n\t\t\t\treturn error;\n\t\t\t}\n\t\t}\n\t}\n\tif (schema.maxItems !== undefined) {\n\t\tif (data.length > schema.maxItems) {\n\t\t\terror = this.createError(ErrorCodes.ARRAY_LENGTH_LONG, {length: data.length, maximum: schema.maxItems}, '', '/maxItems', null, data, schema);\n\t\t\tif (this.handleError(error)) {\n\t\t\t\treturn error;\n\t\t\t}\n\t\t}\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateArrayUniqueItems = function validateArrayUniqueItems(data, schema) {\n\tif (schema.uniqueItems) {\n\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\tfor (var j = i + 1; j < data.length; j++) {\n\t\t\t\tif (recursiveCompare(data[i], data[j])) {\n\t\t\t\t\tvar error = this.createError(ErrorCodes.ARRAY_UNIQUE, {match1: i, match2: j}, '', '/uniqueItems', null, data, schema);\n\t\t\t\t\tif (this.handleError(error)) {\n\t\t\t\t\t\treturn error;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateArrayItems = function validateArrayItems(data, schema, dataPointerPath) {\n\tif (schema.items === undefined) {\n\t\treturn null;\n\t}\n\tvar error, i;\n\tif (Array.isArray(schema.items)) {\n\t\tfor (i = 0; i < data.length; i++) {\n\t\t\tif (i < schema.items.length) {\n\t\t\t\tif (error = this.validateAll(data[i], schema.items[i], [i], [\"items\", i], dataPointerPath + \"/\" + i)) {\n\t\t\t\t\treturn error;\n\t\t\t\t}\n\t\t\t} else if (schema.additionalItems !== undefined) {\n\t\t\t\tif (typeof schema.additionalItems === \"boolean\") {\n\t\t\t\t\tif (!schema.additionalItems) {\n\t\t\t\t\t\terror = (this.createError(ErrorCodes.ARRAY_ADDITIONAL_ITEMS, {}, '/' + i, '/additionalItems', null, data, schema));\n\t\t\t\t\t\tif (this.handleError(error)) {\n\t\t\t\t\t\t\treturn error;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (error = this.validateAll(data[i], schema.additionalItems, [i], [\"additionalItems\"], dataPointerPath + \"/\" + i)) {\n\t\t\t\t\treturn error;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tfor (i = 0; i < data.length; i++) {\n\t\t\tif (error = this.validateAll(data[i], schema.items, [i], [\"items\"], dataPointerPath + \"/\" + i)) {\n\t\t\t\treturn error;\n\t\t\t}\n\t\t}\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateObject = function validateObject(data, schema, dataPointerPath) {\n\tif (typeof data !== \"object\" || data === null || Array.isArray(data)) {\n\t\treturn null;\n\t}\n\treturn this.validateObjectMinMaxProperties(data, schema, dataPointerPath)\n\t\t|| this.validateObjectRequiredProperties(data, schema, dataPointerPath)\n\t\t|| this.validateObjectProperties(data, schema, dataPointerPath)\n\t\t|| this.validateObjectDependencies(data, schema, dataPointerPath)\n\t\t|| null;\n};\n\nValidatorContext.prototype.validateObjectMinMaxProperties = function validateObjectMinMaxProperties(data, schema) {\n\tvar keys = Object.keys(data);\n\tvar error;\n\tif (schema.minProperties !== undefined) {\n\t\tif (keys.length < schema.minProperties) {\n\t\t\terror = this.createError(ErrorCodes.OBJECT_PROPERTIES_MINIMUM, {propertyCount: keys.length, minimum: schema.minProperties}, '', '/minProperties', null, data, schema);\n\t\t\tif (this.handleError(error)) {\n\t\t\t\treturn error;\n\t\t\t}\n\t\t}\n\t}\n\tif (schema.maxProperties !== undefined) {\n\t\tif (keys.length > schema.maxProperties) {\n\t\t\terror = this.createError(ErrorCodes.OBJECT_PROPERTIES_MAXIMUM, {propertyCount: keys.length, maximum: schema.maxProperties}, '', '/maxProperties', null, data, schema);\n\t\t\tif (this.handleError(error)) {\n\t\t\t\treturn error;\n\t\t\t}\n\t\t}\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateObjectRequiredProperties = function validateObjectRequiredProperties(data, schema) {\n\tif (schema.required !== undefined) {\n\t\tfor (var i = 0; i < schema.required.length; i++) {\n\t\t\tvar key = schema.required[i];\n\t\t\tif (data[key] === undefined) {\n\t\t\t\tvar error = this.createError(ErrorCodes.OBJECT_REQUIRED, {key: key}, '', '/required/' + i, null, data, schema);\n\t\t\t\tif (this.handleError(error)) {\n\t\t\t\t\treturn error;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateObjectProperties = function validateObjectProperties(data, schema, dataPointerPath) {\n\tvar error;\n\tfor (var key in data) {\n\t\tvar keyPointerPath = dataPointerPath + \"/\" + key.replace(/~/g, '~0').replace(/\\//g, '~1');\n\t\tvar foundMatch = false;\n\t\tif (schema.properties !== undefined && schema.properties[key] !== undefined) {\n\t\t\tfoundMatch = true;\n\t\t\tif (error = this.validateAll(data[key], schema.properties[key], [key], [\"properties\", key], keyPointerPath)) {\n\t\t\t\treturn error;\n\t\t\t}\n\t\t}\n\t\tif (schema.patternProperties !== undefined) {\n\t\t\tfor (var patternKey in schema.patternProperties) {\n\t\t\t\tvar regexp = new RegExp(patternKey);\n\t\t\t\tif (regexp.test(key)) {\n\t\t\t\t\tfoundMatch = true;\n\t\t\t\t\tif (error = this.validateAll(data[key], schema.patternProperties[patternKey], [key], [\"patternProperties\", patternKey], keyPointerPath)) {\n\t\t\t\t\t\treturn error;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!foundMatch) {\n\t\t\tif (schema.additionalProperties !== undefined) {\n\t\t\t\tif (this.trackUnknownProperties) {\n\t\t\t\t\tthis.knownPropertyPaths[keyPointerPath] = true;\n\t\t\t\t\tdelete this.unknownPropertyPaths[keyPointerPath];\n\t\t\t\t}\n\t\t\t\tif (typeof schema.additionalProperties === \"boolean\") {\n\t\t\t\t\tif (!schema.additionalProperties) {\n\t\t\t\t\t\terror = this.createError(ErrorCodes.OBJECT_ADDITIONAL_PROPERTIES, {key: key}, '', '/additionalProperties', null, data, schema).prefixWith(key, null);\n\t\t\t\t\t\tif (this.handleError(error)) {\n\t\t\t\t\t\t\treturn error;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (error = this.validateAll(data[key], schema.additionalProperties, [key], [\"additionalProperties\"], keyPointerPath)) {\n\t\t\t\t\t\treturn error;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (this.trackUnknownProperties && !this.knownPropertyPaths[keyPointerPath]) {\n\t\t\t\tthis.unknownPropertyPaths[keyPointerPath] = true;\n\t\t\t}\n\t\t} else if (this.trackUnknownProperties) {\n\t\t\tthis.knownPropertyPaths[keyPointerPath] = true;\n\t\t\tdelete this.unknownPropertyPaths[keyPointerPath];\n\t\t}\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateObjectDependencies = function validateObjectDependencies(data, schema, dataPointerPath) {\n\tvar error;\n\tif (schema.dependencies !== undefined) {\n\t\tfor (var depKey in schema.dependencies) {\n\t\t\tif (data[depKey] !== undefined) {\n\t\t\t\tvar dep = schema.dependencies[depKey];\n\t\t\t\tif (typeof dep === \"string\") {\n\t\t\t\t\tif (data[dep] === undefined) {\n\t\t\t\t\t\terror = this.createError(ErrorCodes.OBJECT_DEPENDENCY_KEY, {key: depKey, missing: dep}, '', '', null, data, schema).prefixWith(null, depKey).prefixWith(null, \"dependencies\");\n\t\t\t\t\t\tif (this.handleError(error)) {\n\t\t\t\t\t\t\treturn error;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (Array.isArray(dep)) {\n\t\t\t\t\tfor (var i = 0; i < dep.length; i++) {\n\t\t\t\t\t\tvar requiredKey = dep[i];\n\t\t\t\t\t\tif (data[requiredKey] === undefined) {\n\t\t\t\t\t\t\terror = this.createError(ErrorCodes.OBJECT_DEPENDENCY_KEY, {key: depKey, missing: requiredKey}, '', '/' + i, null, data, schema).prefixWith(null, depKey).prefixWith(null, \"dependencies\");\n\t\t\t\t\t\t\tif (this.handleError(error)) {\n\t\t\t\t\t\t\t\treturn error;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (error = this.validateAll(data, dep, [], [\"dependencies\", depKey], dataPointerPath)) {\n\t\t\t\t\t\treturn error;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateCombinations = function validateCombinations(data, schema, dataPointerPath) {\n\treturn this.validateAllOf(data, schema, dataPointerPath)\n\t\t|| this.validateAnyOf(data, schema, dataPointerPath)\n\t\t|| this.validateOneOf(data, schema, dataPointerPath)\n\t\t|| this.validateNot(data, schema, dataPointerPath)\n\t\t|| null;\n};\n\nValidatorContext.prototype.validateAllOf = function validateAllOf(data, schema, dataPointerPath) {\n\tif (schema.allOf === undefined) {\n\t\treturn null;\n\t}\n\tvar error;\n\tfor (var i = 0; i < schema.allOf.length; i++) {\n\t\tvar subSchema = schema.allOf[i];\n\t\tif (error = this.validateAll(data, subSchema, [], [\"allOf\", i], dataPointerPath)) {\n\t\t\treturn error;\n\t\t}\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateAnyOf = function validateAnyOf(data, schema, dataPointerPath) {\n\tif (schema.anyOf === undefined) {\n\t\treturn null;\n\t}\n\tvar errors = [];\n\tvar startErrorCount = this.errors.length;\n\tvar oldUnknownPropertyPaths, oldKnownPropertyPaths;\n\tif (this.trackUnknownProperties) {\n\t\toldUnknownPropertyPaths = this.unknownPropertyPaths;\n\t\toldKnownPropertyPaths = this.knownPropertyPaths;\n\t}\n\tvar errorAtEnd = true;\n\tfor (var i = 0; i < schema.anyOf.length; i++) {\n\t\tif (this.trackUnknownProperties) {\n\t\t\tthis.unknownPropertyPaths = {};\n\t\t\tthis.knownPropertyPaths = {};\n\t\t}\n\t\tvar subSchema = schema.anyOf[i];\n\n\t\tvar errorCount = this.errors.length;\n\t\tvar error = this.validateAll(data, subSchema, [], [\"anyOf\", i], dataPointerPath);\n\n\t\tif (error === null && errorCount === this.errors.length) {\n\t\t\tthis.errors = this.errors.slice(0, startErrorCount);\n\n\t\t\tif (this.trackUnknownProperties) {\n\t\t\t\tfor (var knownKey in this.knownPropertyPaths) {\n\t\t\t\t\toldKnownPropertyPaths[knownKey] = true;\n\t\t\t\t\tdelete oldUnknownPropertyPaths[knownKey];\n\t\t\t\t}\n\t\t\t\tfor (var unknownKey in this.unknownPropertyPaths) {\n\t\t\t\t\tif (!oldKnownPropertyPaths[unknownKey]) {\n\t\t\t\t\t\toldUnknownPropertyPaths[unknownKey] = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// We need to continue looping so we catch all the property definitions, but we don't want to return an error\n\t\t\t\terrorAtEnd = false;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\t\tif (error) {\n\t\t\terrors.push(error.prefixWith(null, \"\" + i).prefixWith(null, \"anyOf\"));\n\t\t}\n\t}\n\tif (this.trackUnknownProperties) {\n\t\tthis.unknownPropertyPaths = oldUnknownPropertyPaths;\n\t\tthis.knownPropertyPaths = oldKnownPropertyPaths;\n\t}\n\tif (errorAtEnd) {\n\t\terrors = errors.concat(this.errors.slice(startErrorCount));\n\t\tthis.errors = this.errors.slice(0, startErrorCount);\n\t\treturn this.createError(ErrorCodes.ANY_OF_MISSING, {}, \"\", \"/anyOf\", errors, data, schema);\n\t}\n};\n\nValidatorContext.prototype.validateOneOf = function validateOneOf(data, schema, dataPointerPath) {\n\tif (schema.oneOf === undefined) {\n\t\treturn null;\n\t}\n\tvar validIndex = null;\n\tvar errors = [];\n\tvar startErrorCount = this.errors.length;\n\tvar oldUnknownPropertyPaths, oldKnownPropertyPaths;\n\tif (this.trackUnknownProperties) {\n\t\toldUnknownPropertyPaths = this.unknownPropertyPaths;\n\t\toldKnownPropertyPaths = this.knownPropertyPaths;\n\t}\n\tfor (var i = 0; i < schema.oneOf.length; i++) {\n\t\tif (this.trackUnknownProperties) {\n\t\t\tthis.unknownPropertyPaths = {};\n\t\t\tthis.knownPropertyPaths = {};\n\t\t}\n\t\tvar subSchema = schema.oneOf[i];\n\n\t\tvar errorCount = this.errors.length;\n\t\tvar error = this.validateAll(data, subSchema, [], [\"oneOf\", i], dataPointerPath);\n\n\t\tif (error === null && errorCount === this.errors.length) {\n\t\t\tif (validIndex === null) {\n\t\t\t\tvalidIndex = i;\n\t\t\t} else {\n\t\t\t\tthis.errors = this.errors.slice(0, startErrorCount);\n\t\t\t\treturn this.createError(ErrorCodes.ONE_OF_MULTIPLE, {index1: validIndex, index2: i}, \"\", \"/oneOf\", null, data, schema);\n\t\t\t}\n\t\t\tif (this.trackUnknownProperties) {\n\t\t\t\tfor (var knownKey in this.knownPropertyPaths) {\n\t\t\t\t\toldKnownPropertyPaths[knownKey] = true;\n\t\t\t\t\tdelete oldUnknownPropertyPaths[knownKey];\n\t\t\t\t}\n\t\t\t\tfor (var unknownKey in this.unknownPropertyPaths) {\n\t\t\t\t\tif (!oldKnownPropertyPaths[unknownKey]) {\n\t\t\t\t\t\toldUnknownPropertyPaths[unknownKey] = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (error) {\n\t\t\terrors.push(error);\n\t\t}\n\t}\n\tif (this.trackUnknownProperties) {\n\t\tthis.unknownPropertyPaths = oldUnknownPropertyPaths;\n\t\tthis.knownPropertyPaths = oldKnownPropertyPaths;\n\t}\n\tif (validIndex === null) {\n\t\terrors = errors.concat(this.errors.slice(startErrorCount));\n\t\tthis.errors = this.errors.slice(0, startErrorCount);\n\t\treturn this.createError(ErrorCodes.ONE_OF_MISSING, {}, \"\", \"/oneOf\", errors, data, schema);\n\t} else {\n\t\tthis.errors = this.errors.slice(0, startErrorCount);\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateNot = function validateNot(data, schema, dataPointerPath) {\n\tif (schema.not === undefined) {\n\t\treturn null;\n\t}\n\tvar oldErrorCount = this.errors.length;\n\tvar oldUnknownPropertyPaths, oldKnownPropertyPaths;\n\tif (this.trackUnknownProperties) {\n\t\toldUnknownPropertyPaths = this.unknownPropertyPaths;\n\t\toldKnownPropertyPaths = this.knownPropertyPaths;\n\t\tthis.unknownPropertyPaths = {};\n\t\tthis.knownPropertyPaths = {};\n\t}\n\tvar error = this.validateAll(data, schema.not, null, null, dataPointerPath);\n\tvar notErrors = this.errors.slice(oldErrorCount);\n\tthis.errors = this.errors.slice(0, oldErrorCount);\n\tif (this.trackUnknownProperties) {\n\t\tthis.unknownPropertyPaths = oldUnknownPropertyPaths;\n\t\tthis.knownPropertyPaths = oldKnownPropertyPaths;\n\t}\n\tif (error === null && notErrors.length === 0) {\n\t\treturn this.createError(ErrorCodes.NOT_PASSED, {}, \"\", \"/not\", null, data, schema);\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateHypermedia = function validateCombinations(data, schema, dataPointerPath) {\n\tif (!schema.links) {\n\t\treturn null;\n\t}\n\tvar error;\n\tfor (var i = 0; i < schema.links.length; i++) {\n\t\tvar ldo = schema.links[i];\n\t\tif (ldo.rel === \"describedby\") {\n\t\t\tvar template = new UriTemplate(ldo.href);\n\t\t\tvar allPresent = true;\n\t\t\tfor (var j = 0; j < template.varNames.length; j++) {\n\t\t\t\tif (!(template.varNames[j] in data)) {\n\t\t\t\t\tallPresent = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (allPresent) {\n\t\t\t\tvar schemaUrl = template.fillFromObject(data);\n\t\t\t\tvar subSchema = {\"$ref\": schemaUrl};\n\t\t\t\tif (error = this.validateAll(data, subSchema, [], [\"links\", i], dataPointerPath)) {\n\t\t\t\t\treturn error;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n// parseURI() and resolveUrl() are from https://gist.github.com/1088850\n//   -  released as public domain by author (\"Yaffle\") - see comments on gist\n\nfunction parseURI(url) {\n\tvar m = String(url).replace(/^\\s+|\\s+$/g, '').match(/^([^:\\/?#]+:)?(\\/\\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\\/?#]*)(?::(\\d*))?))?([^?#]*)(\\?[^#]*)?(#[\\s\\S]*)?/);\n\t// authority = '//' + user + ':' + pass '@' + hostname + ':' port\n\treturn (m ? {\n\t\thref     : m[0] || '',\n\t\tprotocol : m[1] || '',\n\t\tauthority: m[2] || '',\n\t\thost     : m[3] || '',\n\t\thostname : m[4] || '',\n\t\tport     : m[5] || '',\n\t\tpathname : m[6] || '',\n\t\tsearch   : m[7] || '',\n\t\thash     : m[8] || ''\n\t} : null);\n}\n\nfunction resolveUrl(base, href) {// RFC 3986\n\n\tfunction removeDotSegments(input) {\n\t\tvar output = [];\n\t\tinput.replace(/^(\\.\\.?(\\/|$))+/, '')\n\t\t\t.replace(/\\/(\\.(\\/|$))+/g, '/')\n\t\t\t.replace(/\\/\\.\\.$/, '/../')\n\t\t\t.replace(/\\/?[^\\/]*/g, function (p) {\n\t\t\t\tif (p === '/..') {\n\t\t\t\t\toutput.pop();\n\t\t\t\t} else {\n\t\t\t\t\toutput.push(p);\n\t\t\t\t}\n\t\t});\n\t\treturn output.join('').replace(/^\\//, input.charAt(0) === '/' ? '/' : '');\n\t}\n\n\thref = parseURI(href || '');\n\tbase = parseURI(base || '');\n\n\treturn !href || !base ? null : (href.protocol || base.protocol) +\n\t\t(href.protocol || href.authority ? href.authority : base.authority) +\n\t\tremoveDotSegments(href.protocol || href.authority || href.pathname.charAt(0) === '/' ? href.pathname : (href.pathname ? ((base.authority && !base.pathname ? '/' : '') + base.pathname.slice(0, base.pathname.lastIndexOf('/') + 1) + href.pathname) : base.pathname)) +\n\t\t(href.protocol || href.authority || href.pathname ? href.search : (href.search || base.search)) +\n\t\thref.hash;\n}\n\nfunction getDocumentUri(uri) {\n\treturn uri.split('#')[0];\n}\nfunction normSchema(schema, baseUri) {\n\tif (schema && typeof schema === \"object\") {\n\t\tif (baseUri === undefined) {\n\t\t\tbaseUri = schema.id;\n\t\t} else if (typeof schema.id === \"string\") {\n\t\t\tbaseUri = resolveUrl(baseUri, schema.id);\n\t\t\tschema.id = baseUri;\n\t\t}\n\t\tif (Array.isArray(schema)) {\n\t\t\tfor (var i = 0; i < schema.length; i++) {\n\t\t\t\tnormSchema(schema[i], baseUri);\n\t\t\t}\n\t\t} else {\n\t\t\tif (typeof schema['$ref'] === \"string\") {\n\t\t\t\tschema['$ref'] = resolveUrl(baseUri, schema['$ref']);\n\t\t\t}\n\t\t\tfor (var key in schema) {\n\t\t\t\tif (key !== \"enum\") {\n\t\t\t\t\tnormSchema(schema[key], baseUri);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction defaultErrorReporter(language) {\n\tlanguage = language || 'en';\n\n\tvar errorMessages = languages[language];\n\n\treturn function (error) {\n\t\tvar messageTemplate = errorMessages[error.code] || ErrorMessagesDefault[error.code];\n\t\tif (typeof messageTemplate !== 'string') {\n\t\t\treturn \"Unknown error code \" + error.code + \": \" + JSON.stringify(error.messageParams);\n\t\t}\n\t\tvar messageParams = error.params;\n\t\t// Adapted from Crockford's supplant()\n\t\treturn messageTemplate.replace(/\\{([^{}]*)\\}/g, function (whole, varName) {\n\t\t\tvar subValue = messageParams[varName];\n\t\t\treturn typeof subValue === 'string' || typeof subValue === 'number' ? subValue : whole;\n\t\t});\n\t};\n}\n\nvar ErrorCodes = {\n\tINVALID_TYPE: 0,\n\tENUM_MISMATCH: 1,\n\tANY_OF_MISSING: 10,\n\tONE_OF_MISSING: 11,\n\tONE_OF_MULTIPLE: 12,\n\tNOT_PASSED: 13,\n\t// Numeric errors\n\tNUMBER_MULTIPLE_OF: 100,\n\tNUMBER_MINIMUM: 101,\n\tNUMBER_MINIMUM_EXCLUSIVE: 102,\n\tNUMBER_MAXIMUM: 103,\n\tNUMBER_MAXIMUM_EXCLUSIVE: 104,\n\tNUMBER_NOT_A_NUMBER: 105,\n\t// String errors\n\tSTRING_LENGTH_SHORT: 200,\n\tSTRING_LENGTH_LONG: 201,\n\tSTRING_PATTERN: 202,\n\t// Object errors\n\tOBJECT_PROPERTIES_MINIMUM: 300,\n\tOBJECT_PROPERTIES_MAXIMUM: 301,\n\tOBJECT_REQUIRED: 302,\n\tOBJECT_ADDITIONAL_PROPERTIES: 303,\n\tOBJECT_DEPENDENCY_KEY: 304,\n\t// Array errors\n\tARRAY_LENGTH_SHORT: 400,\n\tARRAY_LENGTH_LONG: 401,\n\tARRAY_UNIQUE: 402,\n\tARRAY_ADDITIONAL_ITEMS: 403,\n\t// Custom/user-defined errors\n\tFORMAT_CUSTOM: 500,\n\tKEYWORD_CUSTOM: 501,\n\t// Schema structure\n\tCIRCULAR_REFERENCE: 600,\n\t// Non-standard validation options\n\tUNKNOWN_PROPERTY: 1000\n};\nvar ErrorCodeLookup = {};\nfor (var key in ErrorCodes) {\n\tErrorCodeLookup[ErrorCodes[key]] = key;\n}\nvar ErrorMessagesDefault = {\n\tINVALID_TYPE: \"Invalid type: {type} (expected {expected})\",\n\tENUM_MISMATCH: \"No enum match for: {value}\",\n\tANY_OF_MISSING: \"Data does not match any schemas from \\\"anyOf\\\"\",\n\tONE_OF_MISSING: \"Data does not match any schemas from \\\"oneOf\\\"\",\n\tONE_OF_MULTIPLE: \"Data is valid against more than one schema from \\\"oneOf\\\": indices {index1} and {index2}\",\n\tNOT_PASSED: \"Data matches schema from \\\"not\\\"\",\n\t// Numeric errors\n\tNUMBER_MULTIPLE_OF: \"Value {value} is not a multiple of {multipleOf}\",\n\tNUMBER_MINIMUM: \"Value {value} is less than minimum {minimum}\",\n\tNUMBER_MINIMUM_EXCLUSIVE: \"Value {value} is equal to exclusive minimum {minimum}\",\n\tNUMBER_MAXIMUM: \"Value {value} is greater than maximum {maximum}\",\n\tNUMBER_MAXIMUM_EXCLUSIVE: \"Value {value} is equal to exclusive maximum {maximum}\",\n\tNUMBER_NOT_A_NUMBER: \"Value {value} is not a valid number\",\n\t// String errors\n\tSTRING_LENGTH_SHORT: \"String is too short ({length} chars), minimum {minimum}\",\n\tSTRING_LENGTH_LONG: \"String is too long ({length} chars), maximum {maximum}\",\n\tSTRING_PATTERN: \"String does not match pattern: {pattern}\",\n\t// Object errors\n\tOBJECT_PROPERTIES_MINIMUM: \"Too few properties defined ({propertyCount}), minimum {minimum}\",\n\tOBJECT_PROPERTIES_MAXIMUM: \"Too many properties defined ({propertyCount}), maximum {maximum}\",\n\tOBJECT_REQUIRED: \"Missing required property: {key}\",\n\tOBJECT_ADDITIONAL_PROPERTIES: \"Additional properties not allowed\",\n\tOBJECT_DEPENDENCY_KEY: \"Dependency failed - key must exist: {missing} (due to key: {key})\",\n\t// Array errors\n\tARRAY_LENGTH_SHORT: \"Array is too short ({length}), minimum {minimum}\",\n\tARRAY_LENGTH_LONG: \"Array is too long ({length}), maximum {maximum}\",\n\tARRAY_UNIQUE: \"Array items are not unique (indices {match1} and {match2})\",\n\tARRAY_ADDITIONAL_ITEMS: \"Additional items not allowed\",\n\t// Format errors\n\tFORMAT_CUSTOM: \"Format validation failed ({message})\",\n\tKEYWORD_CUSTOM: \"Keyword failed: {key} ({message})\",\n\t// Schema structure\n\tCIRCULAR_REFERENCE: \"Circular $refs: {urls}\",\n\t// Non-standard validation options\n\tUNKNOWN_PROPERTY: \"Unknown property (not in schema)\"\n};\n\nfunction ValidationError(code, params, dataPath, schemaPath, subErrors) {\n\tError.call(this);\n\tif (code === undefined) {\n\t\tthrow new Error (\"No error code supplied: \" + schemaPath);\n\t}\n\tthis.message = '';\n\tthis.params = params;\n\tthis.code = code;\n\tthis.dataPath = dataPath || \"\";\n\tthis.schemaPath = schemaPath || \"\";\n\tthis.subErrors = subErrors || null;\n\n\tvar err = new Error(this.message);\n\tthis.stack = err.stack || err.stacktrace;\n\tif (!this.stack) {\n\t\ttry {\n\t\t\tthrow err;\n\t\t}\n\t\tcatch(err) {\n\t\t\tthis.stack = err.stack || err.stacktrace;\n\t\t}\n\t}\n}\nValidationError.prototype = Object.create(Error.prototype);\nValidationError.prototype.constructor = ValidationError;\nValidationError.prototype.name = 'ValidationError';\n\nValidationError.prototype.prefixWith = function (dataPrefix, schemaPrefix) {\n\tif (dataPrefix !== null) {\n\t\tdataPrefix = dataPrefix.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n\t\tthis.dataPath = \"/\" + dataPrefix + this.dataPath;\n\t}\n\tif (schemaPrefix !== null) {\n\t\tschemaPrefix = schemaPrefix.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n\t\tthis.schemaPath = \"/\" + schemaPrefix + this.schemaPath;\n\t}\n\tif (this.subErrors !== null) {\n\t\tfor (var i = 0; i < this.subErrors.length; i++) {\n\t\t\tthis.subErrors[i].prefixWith(dataPrefix, schemaPrefix);\n\t\t}\n\t}\n\treturn this;\n};\n\nfunction isTrustedUrl(baseUrl, testUrl) {\n\tif(testUrl.substring(0, baseUrl.length) === baseUrl){\n\t\tvar remainder = testUrl.substring(baseUrl.length);\n\t\tif ((testUrl.length > 0 && testUrl.charAt(baseUrl.length - 1) === \"/\")\n\t\t\t|| remainder.charAt(0) === \"#\"\n\t\t\t|| remainder.charAt(0) === \"?\") {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nvar languages = {};\nfunction createApi(language) {\n\tvar globalContext = new ValidatorContext();\n\tvar currentLanguage;\n\tvar customErrorReporter;\n\tvar api = {\n\t\tsetErrorReporter: function (reporter) {\n\t\t\tif (typeof reporter === 'string') {\n\t\t\t\treturn this.language(reporter);\n\t\t\t}\n\t\t\tcustomErrorReporter = reporter;\n\t\t\treturn true;\n\t\t},\n\t\taddFormat: function () {\n\t\t\tglobalContext.addFormat.apply(globalContext, arguments);\n\t\t},\n\t\tlanguage: function (code) {\n\t\t\tif (!code) {\n\t\t\t\treturn currentLanguage;\n\t\t\t}\n\t\t\tif (!languages[code]) {\n\t\t\t\tcode = code.split('-')[0]; // fall back to base language\n\t\t\t}\n\t\t\tif (languages[code]) {\n\t\t\t\tcurrentLanguage = code;\n\t\t\t\treturn code; // so you can tell if fall-back has happened\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\taddLanguage: function (code, messageMap) {\n\t\t\tvar key;\n\t\t\tfor (key in ErrorCodes) {\n\t\t\t\tif (messageMap[key] && !messageMap[ErrorCodes[key]]) {\n\t\t\t\t\tmessageMap[ErrorCodes[key]] = messageMap[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar rootCode = code.split('-')[0];\n\t\t\tif (!languages[rootCode]) { // use for base language if not yet defined\n\t\t\t\tlanguages[code] = messageMap;\n\t\t\t\tlanguages[rootCode] = messageMap;\n\t\t\t} else {\n\t\t\t\tlanguages[code] = Object.create(languages[rootCode]);\n\t\t\t\tfor (key in messageMap) {\n\t\t\t\t\tif (typeof languages[rootCode][key] === 'undefined') {\n\t\t\t\t\t\tlanguages[rootCode][key] = messageMap[key];\n\t\t\t\t\t}\n\t\t\t\t\tlanguages[code][key] = messageMap[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\t\tfreshApi: function (language) {\n\t\t\tvar result = createApi();\n\t\t\tif (language) {\n\t\t\t\tresult.language(language);\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\tvalidate: function (data, schema, checkRecursive, banUnknownProperties) {\n\t\t\tvar def = defaultErrorReporter(currentLanguage);\n\t\t\tvar errorReporter = customErrorReporter ? function (error, data, schema) {\n\t\t\t\treturn customErrorReporter(error, data, schema) || def(error, data, schema);\n\t\t\t} : def;\n\t\t\tvar context = new ValidatorContext(globalContext, false, errorReporter, checkRecursive, banUnknownProperties);\n\t\t\tif (typeof schema === \"string\") {\n\t\t\t\tschema = {\"$ref\": schema};\n\t\t\t}\n\t\t\tcontext.addSchema(\"\", schema);\n\t\t\tvar error = context.validateAll(data, schema, null, null, \"\");\n\t\t\tif (!error && banUnknownProperties) {\n\t\t\t\terror = context.banUnknownProperties(data, schema);\n\t\t\t}\n\t\t\tthis.error = error;\n\t\t\tthis.missing = context.missing;\n\t\t\tthis.valid = (error === null);\n\t\t\treturn this.valid;\n\t\t},\n\t\tvalidateResult: function () {\n\t\t\tvar result = {};\n\t\t\tthis.validate.apply(result, arguments);\n\t\t\treturn result;\n\t\t},\n\t\tvalidateMultiple: function (data, schema, checkRecursive, banUnknownProperties) {\n\t\t\tvar def = defaultErrorReporter(currentLanguage);\n\t\t\tvar errorReporter = customErrorReporter ? function (error, data, schema) {\n\t\t\t\treturn customErrorReporter(error, data, schema) || def(error, data, schema);\n\t\t\t} : def;\n\t\t\tvar context = new ValidatorContext(globalContext, true, errorReporter, checkRecursive, banUnknownProperties);\n\t\t\tif (typeof schema === \"string\") {\n\t\t\t\tschema = {\"$ref\": schema};\n\t\t\t}\n\t\t\tcontext.addSchema(\"\", schema);\n\t\t\tcontext.validateAll(data, schema, null, null, \"\");\n\t\t\tif (banUnknownProperties) {\n\t\t\t\tcontext.banUnknownProperties(data, schema);\n\t\t\t}\n\t\t\tvar result = {};\n\t\t\tresult.errors = context.errors;\n\t\t\tresult.missing = context.missing;\n\t\t\tresult.valid = (result.errors.length === 0);\n\t\t\treturn result;\n\t\t},\n\t\taddSchema: function () {\n\t\t\treturn globalContext.addSchema.apply(globalContext, arguments);\n\t\t},\n\t\tgetSchema: function () {\n\t\t\treturn globalContext.getSchema.apply(globalContext, arguments);\n\t\t},\n\t\tgetSchemaMap: function () {\n\t\t\treturn globalContext.getSchemaMap.apply(globalContext, arguments);\n\t\t},\n\t\tgetSchemaUris: function () {\n\t\t\treturn globalContext.getSchemaUris.apply(globalContext, arguments);\n\t\t},\n\t\tgetMissingUris: function () {\n\t\t\treturn globalContext.getMissingUris.apply(globalContext, arguments);\n\t\t},\n\t\tdropSchemas: function () {\n\t\t\tglobalContext.dropSchemas.apply(globalContext, arguments);\n\t\t},\n\t\tdefineKeyword: function () {\n\t\t\tglobalContext.defineKeyword.apply(globalContext, arguments);\n\t\t},\n\t\tdefineError: function (codeName, codeNumber, defaultMessage) {\n\t\t\tif (typeof codeName !== 'string' || !/^[A-Z]+(_[A-Z]+)*$/.test(codeName)) {\n\t\t\t\tthrow new Error('Code name must be a string in UPPER_CASE_WITH_UNDERSCORES');\n\t\t\t}\n\t\t\tif (typeof codeNumber !== 'number' || codeNumber%1 !== 0 || codeNumber < 10000) {\n\t\t\t\tthrow new Error('Code number must be an integer > 10000');\n\t\t\t}\n\t\t\tif (typeof ErrorCodes[codeName] !== 'undefined') {\n\t\t\t\tthrow new Error('Error already defined: ' + codeName + ' as ' + ErrorCodes[codeName]);\n\t\t\t}\n\t\t\tif (typeof ErrorCodeLookup[codeNumber] !== 'undefined') {\n\t\t\t\tthrow new Error('Error code already used: ' + ErrorCodeLookup[codeNumber] + ' as ' + codeNumber);\n\t\t\t}\n\t\t\tErrorCodes[codeName] = codeNumber;\n\t\t\tErrorCodeLookup[codeNumber] = codeName;\n\t\t\tErrorMessagesDefault[codeName] = ErrorMessagesDefault[codeNumber] = defaultMessage;\n\t\t\tfor (var langCode in languages) {\n\t\t\t\tvar language = languages[langCode];\n\t\t\t\tif (language[codeName]) {\n\t\t\t\t\tlanguage[codeNumber] = language[codeNumber] || language[codeName];\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\treset: function () {\n\t\t\tglobalContext.reset();\n\t\t\tthis.error = null;\n\t\t\tthis.missing = [];\n\t\t\tthis.valid = true;\n\t\t},\n\t\tmissing: [],\n\t\terror: null,\n\t\tvalid: true,\n\t\tnormSchema: normSchema,\n\t\tresolveUrl: resolveUrl,\n\t\tgetDocumentUri: getDocumentUri,\n\t\terrorCodes: ErrorCodes\n\t};\n\tapi.language(language || 'en');\n\treturn api;\n}\n\nvar tv4 = createApi();\ntv4.addLanguage('en-gb', ErrorMessagesDefault);\n\n//legacy property\ntv4.tv4 = tv4;\n\nreturn tv4; // used by _header.js to globalise.\n\n}));\n},{}],100:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MessageFactory = undefined;\n\nvar _MessageFactory = require('./message-factory/MessageFactory');\n\nvar _MessageFactory2 = _interopRequireDefault(_MessageFactory);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.MessageFactory = _MessageFactory2.default;\n\n},{\"./message-factory/MessageFactory\":103}],101:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.MessageType = exports.Message = undefined;\n\nvar _getPrototypeOf = require(\"babel-runtime/core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _RethinkObject2 = require(\"../reTHINKObject/RethinkObject.js\");\n\nvar _RethinkObject3 = _interopRequireDefault(_RethinkObject2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n *\r\n * @author alice.cheambe[at]fokus.fraunhofer.de\r\n * The Message class is the representation of the reTHINK Message Data Model\r\n *\r\n */\nvar Message = exports.Message = function (_RethinkObject) {\n    (0, _inherits3.default)(Message, _RethinkObject);\n\n    /**\r\n     * Generates a message data object\r\n     *\r\n     * @param {number} id - To be used to associate Response messages to the initial request message.\r\n     * @param {URL.URL} from - URL of Hyperty instance or User associated with it\r\n     * @param {URL.URLList} toList - One or more URLs of Message recipients. According to the URL scheme it may be\r\n     * handled in different ways\r\n     * @param {MessageType} type - The URL of the reTHINK Data Object Resource associated with the message that can be\r\n     * used for routing purposes\r\n     * @param {MessageBody} body - Optionally, all message bodies exchanged between different Runtime Messge BUS can\r\n     * contain JWT tokens for Access Control for Identity Assertion purposes that are inserted by the Identity Module\r\n     * before the message is routed to proto stubs\r\n     */\n    function Message(id, from, toList, type, body) {\n        (0, _classCallCheck3.default)(this, Message);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (Message.__proto__ || (0, _getPrototypeOf2.default)(Message)).call(this));\n\n        _this.id = id;\n        _this.from = from;\n        _this.to = toList;\n        _this.type = type;\n        _this.body = body;\n        return _this;\n    }\n\n    /**\r\n     * Adds the asserted identity to the message body and removes the given token from the message\r\n     * @param {Identity.JWT} token - idToken to remove from message\r\n     * @param {Identity.Identity} identity - asserted identity to include\r\n     * @return {Message.Message} message - updated message\r\n     */\n\n\n    (0, _createClass3.default)(Message, [{\n        key: \"assertIdentity\",\n        value: function assertIdentity(token, identity) {\n            if (!token || !identity) throw new Error(\"message, token to be removed, and assertedIdentity must be provided\");\n            //console.log('given message', message);\n            var newBody = this.body;\n\n            newBody.idToken = null;\n\n            newBody.assertedIdentity = identity;\n            this.body = newBody;\n            return this;\n        }\n\n        /**\r\n         * Adds an Id token to the given message\r\n         * @param {Identity.JWT} token - identity token to include in the message\r\n         * @return {Message.Message} - the updated message\r\n         */\n\n    }, {\n        key: \"addIdToken\",\n        value: function addIdToken(token) {\n            if (!token) throw new Error(\"message, token to be added, must be provided\");\n            var newBody = this.body;\n            newBody.idToken = token;\n            this.body = newBody;\n            return this;\n        }\n\n        /**\r\n         * Add an access token to the given message\r\n         * @param {Identity.JWT} token - token to be added to the given message\r\n         * @return {Message.Message} -  the updated Message\r\n         */\n\n    }, {\n        key: \"addAccessToken\",\n        value: function addAccessToken(token) {\n            if (!token) throw new Error(\"message, token to be added, must be provided\");\n            var newBody = this.body;\n            newBody.accessToken = token;\n            this.body = newBody;\n            return this;\n        }\n    }]);\n    return Message;\n}(_RethinkObject3.default);\n\n/**\r\n * MessageType representing the type of message\r\n * @type {{CREATE: string, READ: string, UPDATE: string, DELETE: string, SUBSCRIBE: string, UNSUBSCRIBE: string, RESPONSE: string, FORWARD: string}}\r\n */\n/**\r\n * Copyright 2016 PT Inovação e Sistemas SA\r\n * Copyright 2016 INESC-ID\r\n * Copyright 2016 QUOBIS NETWORKS SL\r\n * Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\r\n * Copyright 2016 ORANGE SA\r\n * Copyright 2016 Deutsche Telekom AG\r\n * Copyright 2016 Apizee\r\n * Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n **/\n\n\nvar MessageType = exports.MessageType = {\n    CREATE: 'create', READ: 'read', UPDATE: 'update', DELETE: 'delete', SUBSCRIBE: 'subscribe',\n    UNSUBSCRIBE: 'unsubscribe', RESPONSE: 'response', FORWARD: 'forward', EXECUTE: 'execute'\n};\n\nexports.default = Message;\n\n},{\"../reTHINKObject/RethinkObject.js\":104,\"babel-runtime/core-js/object/get-prototype-of\":5,\"babel-runtime/helpers/classCallCheck\":10,\"babel-runtime/helpers/createClass\":11,\"babel-runtime/helpers/inherits\":12,\"babel-runtime/helpers/possibleConstructorReturn\":13}],102:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.UPDATE_OPERATION = exports.ATTRIBUTE_TYPE = exports.REASON_PHRASE = exports.RESPONSE_CODE = exports.ExecuteMessageBody = exports.ResponseMessageBody = exports.ForwardMessageBody = exports.UpdateMessageBody = exports.DeleteMessageBody = exports.ReadMessageBody = exports.CreateMessageBody = exports.MessageBody = undefined;\n\nvar _freeze = require(\"babel-runtime/core-js/object/freeze\");\n\nvar _freeze2 = _interopRequireDefault(_freeze);\n\nvar _keys = require(\"babel-runtime/core-js/object/keys\");\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _getPrototypeOf = require(\"babel-runtime/core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nexports.Enum = Enum;\n\nvar _RethinkObject2 = require(\"../reTHINKObject/RethinkObject.js\");\n\nvar _RethinkObject3 = _interopRequireDefault(_RethinkObject2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n * @author alice.cheambe[at]fokus.fraunhofer.de\r\n * The MessageBody class is the base implementation of the Message Body Data Model from which the other body types extend.\r\n *\r\n */\nvar MessageBody = exports.MessageBody = function (_RethinkObject) {\n    (0, _inherits3.default)(MessageBody, _RethinkObject);\n\n    /**\r\n     *\r\n     * @param {Identity.JWT} idToken - token for Identity assertion purpose\r\n     * @param {Identity.JWT} accessToken - token for access control\r\n     * @param {URL.URL} resource - URL of the object\r\n     * @param {URL.HypertyCatalogueURL} schema - URL of the Data object schema stored in the Catalogue\r\n     * @param {Identity.Identity} assertedIdentity - AssertedIdentity is compliant with User Identity Data Model\r\n     *\r\n     */\n    function MessageBody(idToken, accessToken, resource, schema, assertedIdentity) {\n        (0, _classCallCheck3.default)(this, MessageBody);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (MessageBody.__proto__ || (0, _getPrototypeOf2.default)(MessageBody)).call(this));\n\n        _this.idToken = idToken;\n        _this.accessToken = accessToken;\n        _this.resource = resource;\n        _this.schema = schema;\n        _this.assertedIdentity = assertedIdentity;\n        return _this;\n    }\n\n    /**\r\n     * Adds a via URL to the given message body. The \"MessageBody.via\" attribute contains a list of all Protostub\r\n     * addresses (Protostub) that the message has been passed through. It is used to prevent infinite cycles in the\r\n     * Hyperty Messaging Framework.\r\n     * @param {Identity.JWT} token - identity token to include in the message\r\n     * @return {MessageBody} - the updated message body\r\n     */\n\n\n    (0, _createClass3.default)(MessageBody, [{\n        key: \"addVia\",\n        value: function addVia(viaURL) {\n            if (!viaURL) throw new Error(\"via URL to be added, must be provided\");\n            this.via = viaURL;\n            return this;\n        }\n    }]);\n    return MessageBody;\n}(_RethinkObject3.default);\n\n/**\r\n * Class representation of the CreateMessageBody object\r\n */\n/**\r\n * Copyright 2016 PT Inovação e Sistemas SA\r\n * Copyright 2016 INESC-ID\r\n * Copyright 2016 QUOBIS NETWORKS SL\r\n * Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\r\n * Copyright 2016 ORANGE SA\r\n * Copyright 2016 Deutsche Telekom AG\r\n * Copyright 2016 Apizee\r\n * Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n **/\n\n\nvar CreateMessageBody = exports.CreateMessageBody = function (_MessageBody) {\n    (0, _inherits3.default)(CreateMessageBody, _MessageBody);\n\n    /**\r\n     *\r\n     * @param {String} value - Contains the created object in JSON format.\r\n     * @param {URL.URL} policy - URL from where access policy control can be downloaded\r\n     * @param {Identity.JWT} idToken -\r\n     * @param {Identity.JWT} accessToken\r\n     * @param {URL.URL} resource - URL of the object\r\n     * @param {URL.HypertyCatalogueURL} schema - URL of the Data object schema stored in the Catalogue\r\n     * @param {Identity.Identity} assertedIdentity - AssertedIdentity is compliant with User Identity Data Model\r\n     */\n    function CreateMessageBody(value, policy, idToken, accessToken, resource, schema, assertedIdentity) {\n        (0, _classCallCheck3.default)(this, CreateMessageBody);\n\n        if (!value) throw new Error(\"The value parameter is null\");\n\n        var _this2 = (0, _possibleConstructorReturn3.default)(this, (CreateMessageBody.__proto__ || (0, _getPrototypeOf2.default)(CreateMessageBody)).call(this, idToken, accessToken, resource, schema, assertedIdentity, schema, assertedIdentity));\n\n        _this2.value = value;\n        if (policy) _this2.policy = policy;\n        return _this2;\n    }\n\n    return CreateMessageBody;\n}(MessageBody);\n\n/**\r\n * Class representation of the ReadMessageBody data object\r\n */\n\n\nvar ReadMessageBody = exports.ReadMessageBody = function (_MessageBody2) {\n    (0, _inherits3.default)(ReadMessageBody, _MessageBody2);\n\n    /**\r\n     *\r\n     * @param {Identity.JWT} idToken -\r\n     * @param {Identity.JWT} accessToken\r\n     * @param {URL.URL} resource - URL of the objec\r\n     * @param {URL.HypertyCatalogueURL} schema - URL of the Data object schema stored in the Catalogue\r\n     * @param {Identity.Identity} assertedIdentity - AssertedIdentity is compliant with User Identity Data Model\r\n     * @param {String} attribute - Identifies the attribute in the Object to be read (optional)\r\n     * @param {String} criteriaSyntax - Defines the criteria syntax used in criteria field. To be used for search purposes.\r\n     * Valid criteria Syntax are: \"key-value\", \"mongodb\", \"sql\"(?), ...\r\n     * @param {String} criteria -Defines the criteria to be used for search purposes. Syntax used to define the criteria\r\n     * is set in the criteriaSyntax.\r\n     */\n    function ReadMessageBody(idToken, accessToken, resource, schema, assertedIdentity, attribute, criteriaSyntax, criteria) {\n        (0, _classCallCheck3.default)(this, ReadMessageBody);\n\n        var _this3 = (0, _possibleConstructorReturn3.default)(this, (ReadMessageBody.__proto__ || (0, _getPrototypeOf2.default)(ReadMessageBody)).call(this, idToken, accessToken, resource, schema, assertedIdentity));\n\n        if (attribute) _this3.attribute = attribute;\n\n        if (criteriaSyntax) _this3.criteriaSyntax = criteriaSyntax;\n\n        if (criteria) _this3.criteria = criteria;\n        return _this3;\n    }\n\n    return ReadMessageBody;\n}(MessageBody);\n\n/**\r\n * Class representation of the DeleteMessageBody data object\r\n */\n\n\nvar DeleteMessageBody = exports.DeleteMessageBody = function (_MessageBody3) {\n    (0, _inherits3.default)(DeleteMessageBody, _MessageBody3);\n\n    /**\r\n     *\r\n     * @param {Identity.JWT} idToken -\r\n     * @param {Identity.JWT} accessToken\r\n     * @param {URL.URLList} resource - One or more URLs of objects to be deleted\r\n     * @param {URL.HypertyCatalogueURL} schema - URL of the Data object schema stored in the Catalogue\r\n     * @param {Identity.Identity} assertedIdentity - AssertedIdentity is compliant with User Identity Data Model\r\n     * @param {String} attribute - Identifies the attribute in the Object to be deleted (optional)\r\n     */\n    function DeleteMessageBody(idToken, accessToken, resource, schema, assertedIdentity, attribute) {\n        (0, _classCallCheck3.default)(this, DeleteMessageBody);\n\n\n        if (resource instanceof Array) {\n            var _this4 = (0, _possibleConstructorReturn3.default)(this, (DeleteMessageBody.__proto__ || (0, _getPrototypeOf2.default)(DeleteMessageBody)).call(this, idToken, accessToken, null, schema, assertedIdentity));\n\n            _this4.childrenResources = resource;\n        } else {\n            var _this4 = (0, _possibleConstructorReturn3.default)(this, (DeleteMessageBody.__proto__ || (0, _getPrototypeOf2.default)(DeleteMessageBody)).call(this, idToken, accessToken, resource, schema, assertedIdentity));\n        }\n\n        if (attribute) {\n            _this4.attribute = attribute;\n        }\n        return (0, _possibleConstructorReturn3.default)(_this4);\n    }\n\n    return DeleteMessageBody;\n}(MessageBody);\n\n/**\r\n * Class representation of the UpdateMessageBody data object\r\n */\n\n\nvar UpdateMessageBody = exports.UpdateMessageBody = function (_MessageBody4) {\n    (0, _inherits3.default)(UpdateMessageBody, _MessageBody4);\n\n    /**\r\n     * Constructor to create the object\r\n     * @param {Identity.JWT} idToken -\r\n     * @param {Identity.JWT} accessToken\r\n     * @param {URL.URL} resource - URL of the object\r\n     * @param {URL.HypertyCatalogueURL} schema - URL of the Data object schema stored in the Catalogue\r\n     * @param {Identity.Identity} assertedIdentity - AssertedIdentity is compliant with User Identity Data Model\r\n     * @param {String} attribute - Identifies the attribute in the Object to be updated (optional)\r\n     * @param {String} value - Contains the updated value object in JSON format.\r\n     */\n    function UpdateMessageBody(idToken, accessToken, resource, schema, assertedIdentity, attribute, value) {\n        (0, _classCallCheck3.default)(this, UpdateMessageBody);\n\n        var _this5 = (0, _possibleConstructorReturn3.default)(this, (UpdateMessageBody.__proto__ || (0, _getPrototypeOf2.default)(UpdateMessageBody)).call(this, idToken, accessToken, resource, schema, assertedIdentity));\n\n        _this5.attribute = attribute;\n        _this5.value = value;\n        return _this5;\n    }\n\n    (0, _createClass3.default)(UpdateMessageBody, [{\n        key: \"addAttributeType\",\n        value: function addAttributeType(attributeType) {\n            if (attributeType) this.attributeType = attributeType;\n        }\n    }, {\n        key: \"addOperation\",\n        value: function addOperation(operation) {\n            if (operation) this.operation = operation;\n        }\n    }]);\n    return UpdateMessageBody;\n}(MessageBody);\n\n/**\r\n * Class representation of the ForwardMessageBody data object\r\n */\n\n\nvar ForwardMessageBody = exports.ForwardMessageBody = function (_MessageBody5) {\n    (0, _inherits3.default)(ForwardMessageBody, _MessageBody5);\n\n    /**\r\n     * Constructor to create the object\r\n     *\r\n     * @param {Identity.JWT} idToken -\r\n     * @param {Identity.JWT} accessToken\r\n     * @param {URL.URL} resource - URL of the object\r\n     * @param {URL.HypertyCatalogueURL} schema - URL of the Data object schema stored in the Catalogue\r\n     * @param {Identity.Identity} assertedIdentity - AssertedIdentity is compliant with User Identity Data Model\r\n     * @param {Message} message - Message to be forwarded\r\n     */\n    function ForwardMessageBody(idToken, accessToken, resource, schema, assertedIdentity, message) {\n        (0, _classCallCheck3.default)(this, ForwardMessageBody);\n\n        var _this6 = (0, _possibleConstructorReturn3.default)(this, (ForwardMessageBody.__proto__ || (0, _getPrototypeOf2.default)(ForwardMessageBody)).call(this, idToken, accessToken, resource, schema, assertedIdentity));\n\n        _this6.message = message;\n        return _this6;\n    }\n\n    return ForwardMessageBody;\n}(MessageBody);\n\n/**\r\n * Class representation of the ResponseMessageBody data object\r\n */\n\n\nvar ResponseMessageBody = exports.ResponseMessageBody = function (_MessageBody6) {\n    (0, _inherits3.default)(ResponseMessageBody, _MessageBody6);\n\n    /**\r\n     * Constructor to create the object\r\n     *\r\n     * @param {Identity.JWT} idToken -\r\n     * @param {Identity.JWT} accessToken\r\n     * @param {URL.URL} resource - URL of the object\r\n     * @param code - A response code compliant with HTTP response codes (RFC7231)\r\n     * @param value - Contains a data value in JSON format. Applicable to Responses to READ MessageType.\r\n     */\n    function ResponseMessageBody(idToken, accessToken, resource, code, value) {\n        (0, _classCallCheck3.default)(this, ResponseMessageBody);\n\n        var _this7 = (0, _possibleConstructorReturn3.default)(this, (ResponseMessageBody.__proto__ || (0, _getPrototypeOf2.default)(ResponseMessageBody)).call(this, idToken, accessToken, resource));\n\n        if (code) {\n            _this7.code = code;\n            _this7.description = REASON_PHRASE[code];\n        }\n        if (value) _this7.value = value;\n\n        return _this7;\n    }\n\n    return ResponseMessageBody;\n}(MessageBody);\n\n/**\r\n * Class representation of the ExecuteMessageBoday data Object. Contains the name of method to be invoked and an array\r\n * and an Array of objects to be passed as parameters to the defined method. This is compliant with JSON-RPC Spec.\r\n */\n\n\nvar ExecuteMessageBody = exports.ExecuteMessageBody = function (_MessageBody7) {\n    (0, _inherits3.default)(ExecuteMessageBody, _MessageBody7);\n\n    /**\r\n     * Constructor to create the object\r\n     *\r\n     * @param {Identity.JWT} idToken -\r\n     * @param {Identity.JWT} accessToken\r\n     * @param {URL.URL} resource - URL of the object\r\n     * @param {URL.HypertyCatalogueURL} schema - URL of the Data object schema stored in the Catalogue\r\n     * @param {Identity.Identity} assertedIdentity - AssertedIdentity is compliant with User Identity Data Model\r\n     * @param {Message} message - Message to be forwarded\r\n     */\n    function ExecuteMessageBody(idToken, accessToken, resource, schema, assertedIdentity, method, params) {\n        (0, _classCallCheck3.default)(this, ExecuteMessageBody);\n\n        var _this8 = (0, _possibleConstructorReturn3.default)(this, (ExecuteMessageBody.__proto__ || (0, _getPrototypeOf2.default)(ExecuteMessageBody)).call(this, idToken, accessToken, resource, schema, assertedIdentity));\n\n        _this8.method = method;\n        if (params) {\n            if (params instanceof Array) _this8.params = params;else _this8.params = [params];\n        }\n        return _this8;\n    }\n\n    return ExecuteMessageBody;\n}(MessageBody);\n\nfunction Enum(a) {\n    var i = (0, _keys2.default)(a).reduce(function (o, k) {\n        return o[a[k]] = k, o;\n    }, {});\n\n    return (0, _freeze2.default)((0, _keys2.default)(a).reduce(function (o, k) {\n        return o[k] = a[k], o;\n    }, function (v) {\n        return i[v];\n    }));\n}\n\n/**\r\n * Represents response code compliant with HTTP response codes (RFC7231).\r\n */\nvar RESPONSE_CODE = exports.RESPONSE_CODE = Enum({\n    100: '100',\n    101: '101',\n    200: '200',\n    201: '201',\n    202: '202',\n    203: '203',\n    204: '204',\n    205: '205',\n    206: '206',\n    300: '300',\n    301: '301',\n    302: '302',\n    303: '303',\n    304: '304',\n    305: '305',\n    307: '307',\n    400: '400',\n    401: '401',\n    402: '402',\n    403: '403',\n    404: '404',\n    405: '405',\n    406: '406',\n    407: '407',\n    408: '408',\n    409: '409',\n    410: '410',\n    411: '411',\n    412: '412',\n    413: '413',\n    414: '414',\n    415: '415',\n    416: '416',\n    417: '417',\n    426: '426',\n    500: '500',\n    501: '501',\n    502: '502',\n    503: '503',\n    504: '504',\n    505: '505'\n});\n\n/**\r\n * Represents response phrases to response code compliant with HTTP response codes (RFC7231).\r\n */\nvar REASON_PHRASE = exports.REASON_PHRASE = Enum({\n    100: 'Continue',\n    101: 'Switching Protocols',\n    200: 'OK',\n    201: 'Created',\n    202: 'Accepted',\n    203: 'Non-Authoritative Information',\n    204: 'No Content',\n    205: 'Reset Content',\n    206: 'Partial Content',\n    300: 'Multiple Choices',\n    301: 'Moved Permanently',\n    302: 'Found',\n    303: 'See Other',\n    304: 'Not Modified',\n    305: 'Use Proxy',\n    307: 'Temporary Redirect',\n    400: 'Bad Request',\n    401: 'Unauthorized',\n    402: 'Payment Required',\n    403: 'Forbidden',\n    404: 'Not Found',\n    405: 'Method Not Allowed',\n    406: 'Not Acceptable',\n    407: 'Proxy Authentication Required',\n    408: 'Request Timeout',\n    409: 'Conflict',\n    410: 'Gone',\n    411: 'Length Required',\n    412: 'Precondition Failed',\n    413: 'Payload Too Large',\n    414: 'Request-URI Too Long',\n    415: 'Unsupported Media Type',\n    416: 'Range Not Satisfiable',\n    417: 'Expectation Failed',\n    426: 'Upgrade Required',\n    500: 'Internal Server Error',\n    501: 'Not Implemented',\n    502: 'Bad Gateway',\n    503: 'Service Unavailable',\n    504: 'Gateway Time-out',\n    505: 'HTTP Version Not Supported'\n});\n\nvar ATTRIBUTE_TYPE = exports.ATTRIBUTE_TYPE = Enum({\n    OBJECT: 'OBJECT',\n    ARRAY: 'ARRAY'\n});\n\nvar UPDATE_OPERATION = exports.UPDATE_OPERATION = Enum({\n    ADD: 'ADD',\n    REMOVE: 'REMOVE'\n});\n\nexports.default = MessageBody;\n\n},{\"../reTHINKObject/RethinkObject.js\":104,\"babel-runtime/core-js/object/freeze\":4,\"babel-runtime/core-js/object/get-prototype-of\":5,\"babel-runtime/core-js/object/keys\":6,\"babel-runtime/helpers/classCallCheck\":10,\"babel-runtime/helpers/createClass\":11,\"babel-runtime/helpers/inherits\":12,\"babel-runtime/helpers/possibleConstructorReturn\":13}],103:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.IdGenerator = undefined;\n\nvar _regenerator = require(\"babel-runtime/regenerator\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _Message = require(\"./Message.js\");\n\nvar _Message2 = _interopRequireDefault(_Message);\n\nvar _MessageBody = require(\"./MessageBody.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n * @author alice.cheambe[at]fokus.fraunhofer.de\r\n * The MessageFactory creates messages according to the reTHINK Message Data Model to be sent through the Runtime\r\n * Message Bus.\r\n */\n/**\r\n * Copyright 2016 PT Inovação e Sistemas SA\r\n * Copyright 2016 INESC-ID\r\n * Copyright 2016 QUOBIS NETWORKS SL\r\n * Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\r\n * Copyright 2016 ORANGE SA\r\n * Copyright 2016 Deutsche Telekom AG\r\n * Copyright 2016 Apizee\r\n * Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n **/\nvar MessageFactory = function () {\n\n    /**\r\n     * Constructor to be used to instantiate an object of the Message Factory\r\n     */\n    function MessageFactory() {\n        (0, _classCallCheck3.default)(this, MessageFactory);\n\n        this.myGenerator = new IdGenerator().idMaker();\n    }\n\n    /**\r\n     * Creates a Message of TYPE CREATE and Create Message Body\r\n     *\r\n     * @param {URL.URL} from - the sender of this message\r\n     * @param {URL.URLList} to-  One or more URLs of Message recipients. According to the URL scheme it may be handled\r\n     * in different ways\r\n     * @param {String} value - Contains the created object in JSON format\r\n     * @param {URL.URL} policy - the sender of this message\r\n     */\n\n\n    (0, _createClass3.default)(MessageFactory, [{\n        key: \"createCreateMessageRequest\",\n        value: function createCreateMessageRequest(from, to, value, policy) {\n            if (!from || !to || !value) throw new Error(\"from, to, and value of object to be created MUST be specified\");\n\n            var id = this.myGenerator.next().value;\n            var messageBody = new _MessageBody.CreateMessageBody(value, policy, undefined, undefined, undefined, undefined, undefined);\n            var message = new _Message2.default(id, from, to, _Message.MessageType.CREATE, messageBody);\n            return message;\n        }\n\n        /**\r\n         * Creates a Message of TYPE FORWARD and Forward Message Body, which contains the message to be forwarded\r\n         *\r\n         * @param {URL.URL} from - the sender of this message\r\n         * @param {URL.URLList} to-  One or more URLs of Message recipients. According to the URL scheme it may be handled\r\n         * in different ways\r\n         * @param message {Message.Message} message - the message to be forwarded\r\n         * @return {Message.Message} Message - the Forward Message Request\r\n         */\n\n    }, {\n        key: \"createForwardMessageRequest\",\n        value: function createForwardMessageRequest(from, to, message) {\n            if (!from || !to || !message) throw new Error(\"from, to, and message to forward MUST be specified\");\n\n            var id = this.myGenerator.next().value;\n            var messageBody = new _MessageBody.ForwardMessageBody(undefined, undefined, undefined, undefined, undefined, message);\n            var forwardMessage = new _Message2.default(id, from, to, _Message.MessageType.FORWARD, messageBody);\n            return forwardMessage;\n        }\n\n        /**\r\n         *  Create Delete Message of Type DELETE and delete message body\r\n         *\r\n         * @param {URL.URL} from - the sender of this message\r\n         * @param {URL.URLList} to - One or more URLs of Message recipients. According to the URL scheme it may be handled\r\n         * in different ways\r\n         * @param {URL.URl} resource - URL of Data Object Resource associated with the message\r\n         * @param attribute - Identifies the attribute in the Object to be deleted\r\n         * @return {Message.Message} Message - the Delete Message Request\r\n         */\n\n    }, {\n        key: \"createDeleteMessageRequest\",\n        value: function createDeleteMessageRequest(from, to, resource, attribute) {\n            if (!from || !to) throw new Error(\"from and to parameters MUST be specified\");\n\n            var id = this.myGenerator.next().value;\n            var messageBody = new _MessageBody.DeleteMessageBody(undefined, undefined, resource, attribute, undefined, undefined);\n            var message = new _Message2.default(id, from, to, _Message.MessageType.DELETE, messageBody);\n            return message;\n        }\n\n        /**\r\n         * Creates an Update Message Request\r\n         *\r\n         * @param {URL.URL} from - the sender of this message\r\n         * @param {URL.URLList}to - One or more URLs of Message recipients. According to the URL scheme it may be handled in\r\n         * different ways\r\n         * @param value - The new value of the attribute to be updated\r\n         * @param {URL.URL} resource - URL of Data Object Resource associated with the message\r\n         * @param attribute - Identifies the attribute in the Object to be updated\r\n         * @return {Message.Message} Message - the Update message request\r\n         */\n\n    }, {\n        key: \"createUpdateMessageRequest\",\n        value: function createUpdateMessageRequest(from, to, value, resource, attribute) {\n            if (!from || !to || !value) throw new Error(\"from, and to and value MUST be specified\");\n\n            var id = this.myGenerator.next().value;\n            var messageBody = new _MessageBody.UpdateMessageBody(undefined, undefined, resource, undefined, undefined, attribute, value);\n            var message = new _Message2.default(id, from, to, _Message.MessageType.UPDATE, messageBody);\n            return message;\n        }\n\n        /**\r\n         * Creates a Message of type READ\r\n         * @param {URL.URL} from - the sender of this message\r\n         * @param {URL.URLList} to- One or more URLs of Message recipients. According to the URL scheme it may be handled in\r\n         * different ways\r\n         * @param {URL.URl} resource - URL of Data Object Resource associated with the message\r\n         * @param attribute - Identifies the attribute in the Object to be read\r\n         * @return {Message.Message} Message - the Read message request\r\n         */\n\n    }, {\n        key: \"createReadMessageRequest\",\n        value: function createReadMessageRequest(from, to, resource, attribute) {\n            if (!from || !to || !resource) throw new Error(\"from, to and the resource to read from MUST be specified\");\n\n            var id = this.myGenerator.next().value;\n            var messageBody = new _MessageBody.ReadMessageBody(undefined, undefined, resource, undefined, undefined, attribute, undefined, undefined);\n            var message = new _Message2.default(id, from, to, _Message.MessageType.READ, messageBody);\n            return message;\n        }\n\n        /**\r\n         * Creates a Message of type SUBSCRIBE\r\n         * @param {URL.URL} from - the sender of this message\r\n         * @param {URL.URLList} to- One or more URLs of Message recipients. According to the URL scheme it may be handled in\r\n         * different ways\r\n         * @param {URL.URL} resource - URL of the object\r\n         */\n\n    }, {\n        key: \"createSubscribeMessageRequest\",\n        value: function createSubscribeMessageRequest(from, to, resource) {\n            if (!from || !to || !resource) throw new Error(\"from, to and the resource to subscribe to MUST be specified\");\n\n            var id = this.myGenerator.next().value;\n            var messageBody = new _MessageBody.MessageBody(undefined, undefined, resource, undefined, undefined);\n            var message = new _Message2.default(id, from, to, _Message.MessageType.SUBSCRIBE, messageBody);\n            return message;\n        }\n\n        /**\r\n         * Creates a Message of type UNSUBSCRIBE\r\n         * @param {URL.URL} from - the sender of this message\r\n         * @param {URL.URLList} to- One or more URLs of Message recipients. According to the URL scheme it may be handled in\r\n         * different ways\r\n         * @param {URL.URL} resource - URL of the object\r\n         */\n\n    }, {\n        key: \"createUnsubscribeMessageRequest\",\n        value: function createUnsubscribeMessageRequest(from, to, resource) {\n            if (!from || !to || !resource) throw new Error(\"from, to and the resource to subscribe to MUST be specified\");\n\n            var id = this.myGenerator.next().value;\n            var messageBody = new _MessageBody.MessageBody(undefined, undefined, resource, undefined, undefined);\n            var message = new _Message2.default(id, from, to, _Message.MessageType.UNSUBSCRIBE, messageBody);\n            return message;\n        }\n\n        /**\r\n         * Creates a Message of type EXECUTE\r\n         * @param {URL.URL} from - the sender of this message\r\n         * @param {URL.URLList} to- One or more URLs of Message recipients. According to the URL scheme it may be handled in\r\n         * different ways\r\n         * @param {string} method -\r\n         * @param {Array} params -\r\n         */\n\n    }, {\n        key: \"createExecuteMessageRequest\",\n        value: function createExecuteMessageRequest(from, to, method, params) {\n            if (!from || !to || !method) throw new Error(\"from, to and the method to execute MUST be specified\");\n\n            var id = this.myGenerator.next().value;\n            var messageBody = new _MessageBody.ExecuteMessageBody(undefined, undefined, undefined, undefined, undefined, method, params);\n            var executeMessage = new _Message2.default(id, from, to, _Message.MessageType.EXECUTE, messageBody);\n            return executeMessage;\n        }\n\n        /**\r\n         * Creates the response to the Message\r\n         * @param message - the message request from which the response should be generated\r\n         * @param code - the response code compliant with HTTP response codes (RFC7231).\r\n         * @param value - contains a data value in JSON format. Applicable to Responses to READ MessageType.\r\n         * @param source - Contains the original creator of the response. Useful to identify the real source of the\r\n         * response to a one-to-many message delivery ie multiple responses coming coming from different sources.\r\n         */\n\n    }, {\n        key: \"createMessageResponse\",\n        value: function createMessageResponse(message, code, value, source) {\n            if (!code) throw new Error(\"response Code MUST be specified\");\n            var response = new _MessageBody.ResponseMessageBody(undefined, undefined, undefined, code, value, source);\n            return new _Message2.default(message.id, message.to, message.from, _Message.MessageType.RESPONSE, response);\n        }\n\n        /**\r\n         * Generate a response to the given Message\r\n         * Request - Response transactions\r\n         * A Response to a Request message should follow this rule:\r\n         * Response.from = Request.to\r\n         * Response.to = Request.from\r\n         * Response.id = Request.id\r\n         * It should be note, the Request.id MUST be incremented every time a new Request message is created.\r\n         *\r\n         * @param {Message} data - Message to be updated\r\n         * @param {ResponseCode} code - response code compliant with HTTP response codes (RFC7231).\r\n         * @param {String} value - Contains a data value in JSON format.\r\n         *\r\n         */\n\n    }, {\n        key: \"generateMessageResponse\",\n        value: function generateMessageResponse(data, code, value) {\n            if (!data || !code) throw new Error(\"message and response code MUST be specified\");\n\n            var previousBody = data.body;\n            var idToken = previousBody.idToken;\n            var accessToken = previousBody.accessToken;\n            var resource = previousBody.resource;\n\n            var response = new _MessageBody.ResponseMessageBody(idToken, accessToken, resource, code, value);\n            var id = this.myGenerator.next().value;\n            return new _Message2.default(id, data.to, data.from, _Message.MessageType.RESPONSE, response);\n        }\n    }]);\n    return MessageFactory;\n}();\n\n/**\r\n * Message Identifier Generator that generates the id used to identifier message transactions\r\n */\n\n\nvar IdGenerator = exports.IdGenerator = function () {\n    function IdGenerator() {\n        (0, _classCallCheck3.default)(this, IdGenerator);\n    }\n\n    (0, _createClass3.default)(IdGenerator, [{\n        key: \"idMaker\",\n        value: _regenerator2.default.mark(function idMaker() {\n            var index;\n            return _regenerator2.default.wrap(function idMaker$(_context) {\n                while (1) {\n                    switch (_context.prev = _context.next) {\n                        case 0:\n                            index = 1;\n\n                        case 1:\n                            if (!(index < 1000000)) {\n                                _context.next = 6;\n                                break;\n                            }\n\n                            _context.next = 4;\n                            return index++;\n\n                        case 4:\n                            _context.next = 1;\n                            break;\n\n                        case 6:\n                        case \"end\":\n                            return _context.stop();\n                    }\n                }\n            }, idMaker, this);\n        })\n    }]);\n    return IdGenerator;\n}();\n\nexports.default = MessageFactory;\n\n},{\"./Message.js\":101,\"./MessageBody.js\":102,\"babel-runtime/helpers/classCallCheck\":10,\"babel-runtime/helpers/createClass\":11,\"babel-runtime/regenerator\":15}],104:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.RethinkObject = undefined;\n\nvar _stringify = require(\"babel-runtime/core-js/json/stringify\");\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _tv = require(\"tv4\");\n\nvar _tv2 = _interopRequireDefault(_tv);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar RethinkObject = exports.RethinkObject = function () {\n    function RethinkObject() {\n        (0, _classCallCheck3.default)(this, RethinkObject);\n    }\n\n    (0, _createClass3.default)(RethinkObject, [{\n        key: \"validate\",\n\n\n        /**\r\n         * Validates this RethinkObject against the provided schema.\r\n         *\r\n         * LIMITATIONS: The provided schema cannot contain references to other schemas, since they can't be resolved.\r\n         * @param schema - schema to validate against\r\n         * @returns {boolean} true if valid, false otherwise\r\n         */\n        value: function validate(schema) {\n            // add schema itself so local references work\n            _tv2.default.addSchema(schema.id, schema);\n\n            // JSON stringify -> parse needed to have proper validation\n            var result = _tv2.default.validateMultiple(JSON.parse((0, _stringify2.default)(this)), schema);\n\n            // delete error stacks to improve logging\n            result.errors.forEach(function (error) {\n                delete error.stack;\n            });\n\n            // print more details about validation if it fails or schema contains $refs\n            if (!result.valid || result.missing.length > 0) {\n                console.warn(\"Object validation \" + (result.valid ? \"succeeded, but schema contained references:\" : \"failed:\"), (0, _stringify2.default)(result, null, 2));\n                console.log(\"Object:\", (0, _stringify2.default)(this, null, 2));\n            }\n            return result.valid;\n        }\n    }]);\n    return RethinkObject;\n}(); /**\r\n      * Copyright 2016 PT Inovação e Sistemas SA\r\n      * Copyright 2016 INESC-ID\r\n      * Copyright 2016 QUOBIS NETWORKS SL\r\n      * Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\r\n      * Copyright 2016 ORANGE SA\r\n      * Copyright 2016 Deutsche Telekom AG\r\n      * Copyright 2016 Apizee\r\n      * Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\r\n      *\r\n      * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n      * you may not use this file except in compliance with the License.\r\n      * You may obtain a copy of the License at\r\n      *\r\n      *   http://www.apache.org/licenses/LICENSE-2.0\r\n      *\r\n      * Unless required by applicable law or agreed to in writing, software\r\n      * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n      * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n      * See the License for the specific language governing permissions and\r\n      * limitations under the License.\r\n      **/\n\n\nexports.default = RethinkObject;\n\n},{\"babel-runtime/core-js/json/stringify\":1,\"babel-runtime/helpers/classCallCheck\":10,\"babel-runtime/helpers/createClass\":11,\"tv4\":99}]},{},[100])(100)\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5LmpzIiwibm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvY3JlYXRlLmpzIiwibm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5LmpzIiwibm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZnJlZXplLmpzIiwibm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZi5qcyIsIm5vZGVfbW9kdWxlcy9iYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMuanMiLCJub2RlX21vZHVsZXMvYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9zZXQtcHJvdG90eXBlLW9mLmpzIiwibm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9zeW1ib2wuanMiLCJub2RlX21vZHVsZXMvYmFiZWwtcnVudGltZS9jb3JlLWpzL3N5bWJvbC9pdGVyYXRvci5qcyIsIm5vZGVfbW9kdWxlcy9iYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2suanMiLCJub2RlX21vZHVsZXMvYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzLmpzIiwibm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cy5qcyIsIm5vZGVfbW9kdWxlcy9iYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybi5qcyIsIm5vZGVfbW9kdWxlcy9iYWJlbC1ydW50aW1lL2hlbHBlcnMvdHlwZW9mLmpzIiwibm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvY3JlYXRlLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZnJlZXplLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZi5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2tleXMuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9zZXQtcHJvdG90eXBlLW9mLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9mbi9zeW1ib2wvaW5kZXguanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbC9pdGVyYXRvci5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fYS1mdW5jdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fYWRkLXRvLXVuc2NvcGFibGVzLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19hbi1vYmplY3QuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2FycmF5LWluY2x1ZGVzLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19jb2YuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2NvcmUuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2N0eC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fZGVmaW5lZC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fZGVzY3JpcHRvcnMuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2RvbS1jcmVhdGUuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2VudW0tYnVnLWtleXMuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2VudW0ta2V5cy5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fZXhwb3J0LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19mYWlscy5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fZ2xvYmFsLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19oYXMuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2hpZGUuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2h0bWwuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2llOC1kb20tZGVmaW5lLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19pb2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19pcy1hcnJheS5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9faXMtb2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19pdGVyLWNyZWF0ZS5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9faXRlci1kZWZpbmUuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2l0ZXItc3RlcC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9faXRlcmF0b3JzLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19rZXlvZi5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fbGlicmFyeS5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fbWV0YS5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fb2JqZWN0LWNyZWF0ZS5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fb2JqZWN0LWRwLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19vYmplY3QtZHBzLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19vYmplY3QtZ29wZC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fb2JqZWN0LWdvcG4tZXh0LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19vYmplY3QtZ29wbi5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fb2JqZWN0LWdvcHMuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX29iamVjdC1ncG8uanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX29iamVjdC1rZXlzLWludGVybmFsLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19vYmplY3Qta2V5cy5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fb2JqZWN0LXBpZS5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fb2JqZWN0LXNhcC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fcHJvcGVydHktZGVzYy5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fcmVkZWZpbmUuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX3NldC1wcm90by5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fc2V0LXRvLXN0cmluZy10YWcuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX3NoYXJlZC1rZXkuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX3NoYXJlZC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fc3RyaW5nLWF0LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL190by1pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fdG8taW50ZWdlci5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fdG8taW9iamVjdC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fdG8tbGVuZ3RoLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL190by1vYmplY3QuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX3RvLXByaW1pdGl2ZS5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fdWlkLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL193a3MtZGVmaW5lLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL193a3MtZXh0LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL193a3MuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2LmFycmF5Lml0ZXJhdG9yLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNi5vYmplY3QuY3JlYXRlLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNi5vYmplY3QuZGVmaW5lLXByb3BlcnR5LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNi5vYmplY3QuZnJlZXplLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LXByb3RvdHlwZS1vZi5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9lczYub2JqZWN0LmtleXMuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2Lm9iamVjdC5zZXQtcHJvdG90eXBlLW9mLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2LnN5bWJvbC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9lczcuc3ltYm9sLmFzeW5jLWl0ZXJhdG9yLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNy5zeW1ib2wub2JzZXJ2YWJsZS5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlLmpzIiwibm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9yZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUtbW9kdWxlLmpzIiwibm9kZV9tb2R1bGVzL3JlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyIsIm5vZGVfbW9kdWxlcy90djQvdHY0LmpzIiwic3JjXFxNZXNzYWdlRmFjdG9yeS5qcyIsInNyY1xcbWVzc2FnZS1mYWN0b3J5XFxNZXNzYWdlLmpzIiwic3JjXFxtZXNzYWdlLWZhY3RvcnlcXE1lc3NhZ2VCb2R5LmpzIiwic3JjXFxtZXNzYWdlLWZhY3RvcnlcXE1lc3NhZ2VGYWN0b3J5LmpzIiwic3JjXFxyZVRISU5LT2JqZWN0XFxSZXRoaW5rT2JqZWN0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEJBO0FBQ0E7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTs7QUNEQTtBQUNBOztBQ0RBO0FBQ0E7O0FDREE7QUFDQTs7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTs7QUNGQTtBQUNBO0FBQ0E7QUFDQTs7QUNIQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBOztBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTs7QUNIQTtBQUNBO0FBQ0E7QUFDQTs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBOztBQ0FBO0FBQ0E7QUFDQTs7QUNGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBOztBQ0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JFQTtBQUNBO0FBQ0E7O0FDRkE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pDQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBOztBQ0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTs7QUNGQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxT0E7O0FDQUE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3BMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQy9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUMzcUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7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LGFBRkQ7O0FBSUE7QUFDQSxnQkFBSSxDQUFDLE9BQU8sS0FBUixJQUFrQixPQUFPLE9BQVAsQ0FBZSxNQUFmLEdBQXdCLENBQTlDLEVBQWtEO0FBQzlDLHdCQUFRLElBQVIsQ0FBYSx3QkFBd0IsT0FBTyxLQUFQLEdBQWUsNkNBQWYsR0FBK0QsU0FBdkYsQ0FBYixFQUFnSCx5QkFBZSxNQUFmLEVBQXVCLElBQXZCLEVBQTZCLENBQTdCLENBQWhIO0FBQ0Esd0JBQVEsR0FBUixDQUFZLFNBQVosRUFBdUIseUJBQWUsSUFBZixFQUFxQixJQUFyQixFQUEyQixDQUEzQixDQUF2QjtBQUNIO0FBQ0QsbUJBQU8sT0FBTyxLQUFkO0FBQ0g7OztLQW5ETDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2tCQXVEZSxhIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIm1vZHVsZS5leHBvcnRzID0geyBcImRlZmF1bHRcIjogcmVxdWlyZShcImNvcmUtanMvbGlicmFyeS9mbi9qc29uL3N0cmluZ2lmeVwiKSwgX19lc01vZHVsZTogdHJ1ZSB9OyIsIm1vZHVsZS5leHBvcnRzID0geyBcImRlZmF1bHRcIjogcmVxdWlyZShcImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvY3JlYXRlXCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07IiwibW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9kZWZpbmUtcHJvcGVydHlcIiksIF9fZXNNb2R1bGU6IHRydWUgfTsiLCJtb2R1bGUuZXhwb3J0cyA9IHsgXCJkZWZhdWx0XCI6IHJlcXVpcmUoXCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2ZyZWV6ZVwiKSwgX19lc01vZHVsZTogdHJ1ZSB9OyIsIm1vZHVsZS5leHBvcnRzID0geyBcImRlZmF1bHRcIjogcmVxdWlyZShcImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZlwiKSwgX19lc01vZHVsZTogdHJ1ZSB9OyIsIm1vZHVsZS5leHBvcnRzID0geyBcImRlZmF1bHRcIjogcmVxdWlyZShcImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5c1wiKSwgX19lc01vZHVsZTogdHJ1ZSB9OyIsIm1vZHVsZS5leHBvcnRzID0geyBcImRlZmF1bHRcIjogcmVxdWlyZShcImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZlwiKSwgX19lc01vZHVsZTogdHJ1ZSB9OyIsIm1vZHVsZS5leHBvcnRzID0geyBcImRlZmF1bHRcIjogcmVxdWlyZShcImNvcmUtanMvbGlicmFyeS9mbi9zeW1ib2xcIiksIF9fZXNNb2R1bGU6IHRydWUgfTsiLCJtb2R1bGUuZXhwb3J0cyA9IHsgXCJkZWZhdWx0XCI6IHJlcXVpcmUoXCJjb3JlLWpzL2xpYnJhcnkvZm4vc3ltYm9sL2l0ZXJhdG9yXCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX2RlZmluZVByb3BlcnR5ID0gcmVxdWlyZShcIi4uL2NvcmUtanMvb2JqZWN0L2RlZmluZS1wcm9wZXJ0eVwiKTtcblxudmFyIF9kZWZpbmVQcm9wZXJ0eTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZWZpbmVQcm9wZXJ0eSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gICAgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gICAgcmV0dXJuIENvbnN0cnVjdG9yO1xuICB9O1xufSgpOyIsIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX3NldFByb3RvdHlwZU9mID0gcmVxdWlyZShcIi4uL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2ZcIik7XG5cbnZhciBfc2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2V0UHJvdG90eXBlT2YpO1xuXG52YXIgX2NyZWF0ZSA9IHJlcXVpcmUoXCIuLi9jb3JlLWpzL29iamVjdC9jcmVhdGVcIik7XG5cbnZhciBfY3JlYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZSk7XG5cbnZhciBfdHlwZW9mMiA9IHJlcXVpcmUoXCIuLi9oZWxwZXJzL3R5cGVvZlwiKTtcblxudmFyIF90eXBlb2YzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHlwZW9mMik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyAodHlwZW9mIHN1cGVyQ2xhc3MgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogKDAsIF90eXBlb2YzLmRlZmF1bHQpKHN1cGVyQ2xhc3MpKSk7XG4gIH1cblxuICBzdWJDbGFzcy5wcm90b3R5cGUgPSAoMCwgX2NyZWF0ZTIuZGVmYXVsdCkoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwge1xuICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICB2YWx1ZTogc3ViQ2xhc3MsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfVxuICB9KTtcbiAgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZjIuZGVmYXVsdCA/ICgwLCBfc2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX3R5cGVvZjIgPSByZXF1aXJlKFwiLi4vaGVscGVycy90eXBlb2ZcIik7XG5cbnZhciBfdHlwZW9mMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3R5cGVvZjIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoc2VsZiwgY2FsbCkge1xuICBpZiAoIXNlbGYpIHtcbiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG4gIH1cblxuICByZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6ICgwLCBfdHlwZW9mMy5kZWZhdWx0KShjYWxsKSkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbnZhciBfaXRlcmF0b3IgPSByZXF1aXJlKFwiLi4vY29yZS1qcy9zeW1ib2wvaXRlcmF0b3JcIik7XG5cbnZhciBfaXRlcmF0b3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaXRlcmF0b3IpO1xuXG52YXIgX3N5bWJvbCA9IHJlcXVpcmUoXCIuLi9jb3JlLWpzL3N5bWJvbFwiKTtcblxudmFyIF9zeW1ib2wyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3ltYm9sKTtcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgX3N5bWJvbDIuZGVmYXVsdCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBfaXRlcmF0b3IyLmRlZmF1bHQgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBfc3ltYm9sMi5kZWZhdWx0ID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBfc3ltYm9sMi5kZWZhdWx0ICYmIG9iaiAhPT0gX3N5bWJvbDIuZGVmYXVsdC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZXhwb3J0cy5kZWZhdWx0ID0gdHlwZW9mIF9zeW1ib2wyLmRlZmF1bHQgPT09IFwiZnVuY3Rpb25cIiAmJiBfdHlwZW9mKF9pdGVyYXRvcjIuZGVmYXVsdCkgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiB0eXBlb2Ygb2JqID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2Yob2JqKTtcbn0gOiBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiBvYmogJiYgdHlwZW9mIF9zeW1ib2wyLmRlZmF1bHQgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IF9zeW1ib2wyLmRlZmF1bHQgJiYgb2JqICE9PSBfc3ltYm9sMi5kZWZhdWx0LnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2Yob2JqKTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicmVnZW5lcmF0b3ItcnVudGltZVwiKTtcbiIsInZhciBjb3JlICA9IHJlcXVpcmUoJy4uLy4uL21vZHVsZXMvX2NvcmUnKVxuICAsICRKU09OID0gY29yZS5KU09OIHx8IChjb3JlLkpTT04gPSB7c3RyaW5naWZ5OiBKU09OLnN0cmluZ2lmeX0pO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzdHJpbmdpZnkoaXQpeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gIHJldHVybiAkSlNPTi5zdHJpbmdpZnkuYXBwbHkoJEpTT04sIGFyZ3VtZW50cyk7XG59OyIsInJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5jcmVhdGUnKTtcbnZhciAkT2JqZWN0ID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9fY29yZScpLk9iamVjdDtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY3JlYXRlKFAsIEQpe1xuICByZXR1cm4gJE9iamVjdC5jcmVhdGUoUCwgRCk7XG59OyIsInJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5kZWZpbmUtcHJvcGVydHknKTtcbnZhciAkT2JqZWN0ID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9fY29yZScpLk9iamVjdDtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoaXQsIGtleSwgZGVzYyl7XG4gIHJldHVybiAkT2JqZWN0LmRlZmluZVByb3BlcnR5KGl0LCBrZXksIGRlc2MpO1xufTsiLCJyZXF1aXJlKCcuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZnJlZXplJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4uLy4uL21vZHVsZXMvX2NvcmUnKS5PYmplY3QuZnJlZXplOyIsInJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtcHJvdG90eXBlLW9mJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4uLy4uL21vZHVsZXMvX2NvcmUnKS5PYmplY3QuZ2V0UHJvdG90eXBlT2Y7IiwicmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmtleXMnKTtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9fY29yZScpLk9iamVjdC5rZXlzOyIsInJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5zZXQtcHJvdG90eXBlLW9mJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4uLy4uL21vZHVsZXMvX2NvcmUnKS5PYmplY3Quc2V0UHJvdG90eXBlT2Y7IiwicmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9lczYuc3ltYm9sJyk7XG5yZXF1aXJlKCcuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nJyk7XG5yZXF1aXJlKCcuLi8uLi9tb2R1bGVzL2VzNy5zeW1ib2wuYXN5bmMtaXRlcmF0b3InKTtcbnJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM3LnN5bWJvbC5vYnNlcnZhYmxlJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4uLy4uL21vZHVsZXMvX2NvcmUnKS5TeW1ib2w7IiwicmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yJyk7XG5yZXF1aXJlKCcuLi8uLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUnKTtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9fd2tzLWV4dCcpLmYoJ2l0ZXJhdG9yJyk7IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIGlmKHR5cGVvZiBpdCAhPSAnZnVuY3Rpb24nKXRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGEgZnVuY3Rpb24hJyk7XG4gIHJldHVybiBpdDtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpeyAvKiBlbXB0eSAqLyB9OyIsInZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIGlmKCFpc09iamVjdChpdCkpdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgYW4gb2JqZWN0IScpO1xuICByZXR1cm4gaXQ7XG59OyIsIi8vIGZhbHNlIC0+IEFycmF5I2luZGV4T2Zcbi8vIHRydWUgIC0+IEFycmF5I2luY2x1ZGVzXG52YXIgdG9JT2JqZWN0ID0gcmVxdWlyZSgnLi9fdG8taW9iamVjdCcpXG4gICwgdG9MZW5ndGggID0gcmVxdWlyZSgnLi9fdG8tbGVuZ3RoJylcbiAgLCB0b0luZGV4ICAgPSByZXF1aXJlKCcuL190by1pbmRleCcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihJU19JTkNMVURFUyl7XG4gIHJldHVybiBmdW5jdGlvbigkdGhpcywgZWwsIGZyb21JbmRleCl7XG4gICAgdmFyIE8gICAgICA9IHRvSU9iamVjdCgkdGhpcylcbiAgICAgICwgbGVuZ3RoID0gdG9MZW5ndGgoTy5sZW5ndGgpXG4gICAgICAsIGluZGV4ICA9IHRvSW5kZXgoZnJvbUluZGV4LCBsZW5ndGgpXG4gICAgICAsIHZhbHVlO1xuICAgIC8vIEFycmF5I2luY2x1ZGVzIHVzZXMgU2FtZVZhbHVlWmVybyBlcXVhbGl0eSBhbGdvcml0aG1cbiAgICBpZihJU19JTkNMVURFUyAmJiBlbCAhPSBlbCl3aGlsZShsZW5ndGggPiBpbmRleCl7XG4gICAgICB2YWx1ZSA9IE9baW5kZXgrK107XG4gICAgICBpZih2YWx1ZSAhPSB2YWx1ZSlyZXR1cm4gdHJ1ZTtcbiAgICAvLyBBcnJheSN0b0luZGV4IGlnbm9yZXMgaG9sZXMsIEFycmF5I2luY2x1ZGVzIC0gbm90XG4gICAgfSBlbHNlIGZvcig7bGVuZ3RoID4gaW5kZXg7IGluZGV4KyspaWYoSVNfSU5DTFVERVMgfHwgaW5kZXggaW4gTyl7XG4gICAgICBpZihPW2luZGV4XSA9PT0gZWwpcmV0dXJuIElTX0lOQ0xVREVTIHx8IGluZGV4IHx8IDA7XG4gICAgfSByZXR1cm4gIUlTX0lOQ0xVREVTICYmIC0xO1xuICB9O1xufTsiLCJ2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKGl0KS5zbGljZSg4LCAtMSk7XG59OyIsInZhciBjb3JlID0gbW9kdWxlLmV4cG9ydHMgPSB7dmVyc2lvbjogJzIuNC4wJ307XG5pZih0eXBlb2YgX19lID09ICdudW1iZXInKV9fZSA9IGNvcmU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWYiLCIvLyBvcHRpb25hbCAvIHNpbXBsZSBjb250ZXh0IGJpbmRpbmdcbnZhciBhRnVuY3Rpb24gPSByZXF1aXJlKCcuL19hLWZ1bmN0aW9uJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZuLCB0aGF0LCBsZW5ndGgpe1xuICBhRnVuY3Rpb24oZm4pO1xuICBpZih0aGF0ID09PSB1bmRlZmluZWQpcmV0dXJuIGZuO1xuICBzd2l0Y2gobGVuZ3RoKXtcbiAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbihhKXtcbiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEpO1xuICAgIH07XG4gICAgY2FzZSAyOiByZXR1cm4gZnVuY3Rpb24oYSwgYil7XG4gICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiKTtcbiAgICB9O1xuICAgIGNhc2UgMzogcmV0dXJuIGZ1bmN0aW9uKGEsIGIsIGMpe1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYiwgYyk7XG4gICAgfTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24oLyogLi4uYXJncyAqLyl7XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7XG4gIH07XG59OyIsIi8vIDcuMi4xIFJlcXVpcmVPYmplY3RDb2VyY2libGUoYXJndW1lbnQpXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgaWYoaXQgPT0gdW5kZWZpbmVkKXRocm93IFR5cGVFcnJvcihcIkNhbid0IGNhbGwgbWV0aG9kIG9uICBcIiArIGl0KTtcbiAgcmV0dXJuIGl0O1xufTsiLCIvLyBUaGFuaydzIElFOCBmb3IgaGlzIGZ1bm55IGRlZmluZVByb3BlcnR5XG5tb2R1bGUuZXhwb3J0cyA9ICFyZXF1aXJlKCcuL19mYWlscycpKGZ1bmN0aW9uKCl7XG4gIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdhJywge2dldDogZnVuY3Rpb24oKXsgcmV0dXJuIDc7IH19KS5hICE9IDc7XG59KTsiLCJ2YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKVxuICAsIGRvY3VtZW50ID0gcmVxdWlyZSgnLi9fZ2xvYmFsJykuZG9jdW1lbnRcbiAgLy8gaW4gb2xkIElFIHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50IGlzICdvYmplY3QnXG4gICwgaXMgPSBpc09iamVjdChkb2N1bWVudCkgJiYgaXNPYmplY3QoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIGlzID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChpdCkgOiB7fTtcbn07IiwiLy8gSUUgOC0gZG9uJ3QgZW51bSBidWcga2V5c1xubW9kdWxlLmV4cG9ydHMgPSAoXG4gICdjb25zdHJ1Y3RvcixoYXNPd25Qcm9wZXJ0eSxpc1Byb3RvdHlwZU9mLHByb3BlcnR5SXNFbnVtZXJhYmxlLHRvTG9jYWxlU3RyaW5nLHRvU3RyaW5nLHZhbHVlT2YnXG4pLnNwbGl0KCcsJyk7IiwiLy8gYWxsIGVudW1lcmFibGUgb2JqZWN0IGtleXMsIGluY2x1ZGVzIHN5bWJvbHNcbnZhciBnZXRLZXlzID0gcmVxdWlyZSgnLi9fb2JqZWN0LWtleXMnKVxuICAsIGdPUFMgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZ29wcycpXG4gICwgcElFICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1waWUnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICB2YXIgcmVzdWx0ICAgICA9IGdldEtleXMoaXQpXG4gICAgLCBnZXRTeW1ib2xzID0gZ09QUy5mO1xuICBpZihnZXRTeW1ib2xzKXtcbiAgICB2YXIgc3ltYm9scyA9IGdldFN5bWJvbHMoaXQpXG4gICAgICAsIGlzRW51bSAgPSBwSUUuZlxuICAgICAgLCBpICAgICAgID0gMFxuICAgICAgLCBrZXk7XG4gICAgd2hpbGUoc3ltYm9scy5sZW5ndGggPiBpKWlmKGlzRW51bS5jYWxsKGl0LCBrZXkgPSBzeW1ib2xzW2krK10pKXJlc3VsdC5wdXNoKGtleSk7XG4gIH0gcmV0dXJuIHJlc3VsdDtcbn07IiwidmFyIGdsb2JhbCAgICA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpXG4gICwgY29yZSAgICAgID0gcmVxdWlyZSgnLi9fY29yZScpXG4gICwgY3R4ICAgICAgID0gcmVxdWlyZSgnLi9fY3R4JylcbiAgLCBoaWRlICAgICAgPSByZXF1aXJlKCcuL19oaWRlJylcbiAgLCBQUk9UT1RZUEUgPSAncHJvdG90eXBlJztcblxudmFyICRleHBvcnQgPSBmdW5jdGlvbih0eXBlLCBuYW1lLCBzb3VyY2Upe1xuICB2YXIgSVNfRk9SQ0VEID0gdHlwZSAmICRleHBvcnQuRlxuICAgICwgSVNfR0xPQkFMID0gdHlwZSAmICRleHBvcnQuR1xuICAgICwgSVNfU1RBVElDID0gdHlwZSAmICRleHBvcnQuU1xuICAgICwgSVNfUFJPVE8gID0gdHlwZSAmICRleHBvcnQuUFxuICAgICwgSVNfQklORCAgID0gdHlwZSAmICRleHBvcnQuQlxuICAgICwgSVNfV1JBUCAgID0gdHlwZSAmICRleHBvcnQuV1xuICAgICwgZXhwb3J0cyAgID0gSVNfR0xPQkFMID8gY29yZSA6IGNvcmVbbmFtZV0gfHwgKGNvcmVbbmFtZV0gPSB7fSlcbiAgICAsIGV4cFByb3RvICA9IGV4cG9ydHNbUFJPVE9UWVBFXVxuICAgICwgdGFyZ2V0ICAgID0gSVNfR0xPQkFMID8gZ2xvYmFsIDogSVNfU1RBVElDID8gZ2xvYmFsW25hbWVdIDogKGdsb2JhbFtuYW1lXSB8fCB7fSlbUFJPVE9UWVBFXVxuICAgICwga2V5LCBvd24sIG91dDtcbiAgaWYoSVNfR0xPQkFMKXNvdXJjZSA9IG5hbWU7XG4gIGZvcihrZXkgaW4gc291cmNlKXtcbiAgICAvLyBjb250YWlucyBpbiBuYXRpdmVcbiAgICBvd24gPSAhSVNfRk9SQ0VEICYmIHRhcmdldCAmJiB0YXJnZXRba2V5XSAhPT0gdW5kZWZpbmVkO1xuICAgIGlmKG93biAmJiBrZXkgaW4gZXhwb3J0cyljb250aW51ZTtcbiAgICAvLyBleHBvcnQgbmF0aXZlIG9yIHBhc3NlZFxuICAgIG91dCA9IG93biA/IHRhcmdldFtrZXldIDogc291cmNlW2tleV07XG4gICAgLy8gcHJldmVudCBnbG9iYWwgcG9sbHV0aW9uIGZvciBuYW1lc3BhY2VzXG4gICAgZXhwb3J0c1trZXldID0gSVNfR0xPQkFMICYmIHR5cGVvZiB0YXJnZXRba2V5XSAhPSAnZnVuY3Rpb24nID8gc291cmNlW2tleV1cbiAgICAvLyBiaW5kIHRpbWVycyB0byBnbG9iYWwgZm9yIGNhbGwgZnJvbSBleHBvcnQgY29udGV4dFxuICAgIDogSVNfQklORCAmJiBvd24gPyBjdHgob3V0LCBnbG9iYWwpXG4gICAgLy8gd3JhcCBnbG9iYWwgY29uc3RydWN0b3JzIGZvciBwcmV2ZW50IGNoYW5nZSB0aGVtIGluIGxpYnJhcnlcbiAgICA6IElTX1dSQVAgJiYgdGFyZ2V0W2tleV0gPT0gb3V0ID8gKGZ1bmN0aW9uKEMpe1xuICAgICAgdmFyIEYgPSBmdW5jdGlvbihhLCBiLCBjKXtcbiAgICAgICAgaWYodGhpcyBpbnN0YW5jZW9mIEMpe1xuICAgICAgICAgIHN3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtcbiAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIG5ldyBDO1xuICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gbmV3IEMoYSk7XG4gICAgICAgICAgICBjYXNlIDI6IHJldHVybiBuZXcgQyhhLCBiKTtcbiAgICAgICAgICB9IHJldHVybiBuZXcgQyhhLCBiLCBjKTtcbiAgICAgICAgfSByZXR1cm4gQy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICAgIEZbUFJPVE9UWVBFXSA9IENbUFJPVE9UWVBFXTtcbiAgICAgIHJldHVybiBGO1xuICAgIC8vIG1ha2Ugc3RhdGljIHZlcnNpb25zIGZvciBwcm90b3R5cGUgbWV0aG9kc1xuICAgIH0pKG91dCkgOiBJU19QUk9UTyAmJiB0eXBlb2Ygb3V0ID09ICdmdW5jdGlvbicgPyBjdHgoRnVuY3Rpb24uY2FsbCwgb3V0KSA6IG91dDtcbiAgICAvLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUubWV0aG9kcy4lTkFNRSVcbiAgICBpZihJU19QUk9UTyl7XG4gICAgICAoZXhwb3J0cy52aXJ0dWFsIHx8IChleHBvcnRzLnZpcnR1YWwgPSB7fSkpW2tleV0gPSBvdXQ7XG4gICAgICAvLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUucHJvdG90eXBlLiVOQU1FJVxuICAgICAgaWYodHlwZSAmICRleHBvcnQuUiAmJiBleHBQcm90byAmJiAhZXhwUHJvdG9ba2V5XSloaWRlKGV4cFByb3RvLCBrZXksIG91dCk7XG4gICAgfVxuICB9XG59O1xuLy8gdHlwZSBiaXRtYXBcbiRleHBvcnQuRiA9IDE7ICAgLy8gZm9yY2VkXG4kZXhwb3J0LkcgPSAyOyAgIC8vIGdsb2JhbFxuJGV4cG9ydC5TID0gNDsgICAvLyBzdGF0aWNcbiRleHBvcnQuUCA9IDg7ICAgLy8gcHJvdG9cbiRleHBvcnQuQiA9IDE2OyAgLy8gYmluZFxuJGV4cG9ydC5XID0gMzI7ICAvLyB3cmFwXG4kZXhwb3J0LlUgPSA2NDsgIC8vIHNhZmVcbiRleHBvcnQuUiA9IDEyODsgLy8gcmVhbCBwcm90byBtZXRob2QgZm9yIGBsaWJyYXJ5YCBcbm1vZHVsZS5leHBvcnRzID0gJGV4cG9ydDsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGV4ZWMpe1xuICB0cnkge1xuICAgIHJldHVybiAhIWV4ZWMoKTtcbiAgfSBjYXRjaChlKXtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufTsiLCIvLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvODYjaXNzdWVjb21tZW50LTExNTc1OTAyOFxudmFyIGdsb2JhbCA9IG1vZHVsZS5leHBvcnRzID0gdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuTWF0aCA9PSBNYXRoXG4gID8gd2luZG93IDogdHlwZW9mIHNlbGYgIT0gJ3VuZGVmaW5lZCcgJiYgc2VsZi5NYXRoID09IE1hdGggPyBzZWxmIDogRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbmlmKHR5cGVvZiBfX2cgPT0gJ251bWJlcicpX19nID0gZ2xvYmFsOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmIiwidmFyIGhhc093blByb3BlcnR5ID0ge30uaGFzT3duUHJvcGVydHk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCBrZXkpe1xuICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChpdCwga2V5KTtcbn07IiwidmFyIGRQICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZHAnKVxuICAsIGNyZWF0ZURlc2MgPSByZXF1aXJlKCcuL19wcm9wZXJ0eS1kZXNjJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJykgPyBmdW5jdGlvbihvYmplY3QsIGtleSwgdmFsdWUpe1xuICByZXR1cm4gZFAuZihvYmplY3QsIGtleSwgY3JlYXRlRGVzYygxLCB2YWx1ZSkpO1xufSA6IGZ1bmN0aW9uKG9iamVjdCwga2V5LCB2YWx1ZSl7XG4gIG9iamVjdFtrZXldID0gdmFsdWU7XG4gIHJldHVybiBvYmplY3Q7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9fZ2xvYmFsJykuZG9jdW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OyIsIm1vZHVsZS5leHBvcnRzID0gIXJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJykgJiYgIXJlcXVpcmUoJy4vX2ZhaWxzJykoZnVuY3Rpb24oKXtcbiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZXF1aXJlKCcuL19kb20tY3JlYXRlJykoJ2RpdicpLCAnYScsIHtnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiA3OyB9fSkuYSAhPSA3O1xufSk7IiwiLy8gZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBhbmQgbm9uLWVudW1lcmFibGUgb2xkIFY4IHN0cmluZ3NcbnZhciBjb2YgPSByZXF1aXJlKCcuL19jb2YnKTtcbm1vZHVsZS5leHBvcnRzID0gT2JqZWN0KCd6JykucHJvcGVydHlJc0VudW1lcmFibGUoMCkgPyBPYmplY3QgOiBmdW5jdGlvbihpdCl7XG4gIHJldHVybiBjb2YoaXQpID09ICdTdHJpbmcnID8gaXQuc3BsaXQoJycpIDogT2JqZWN0KGl0KTtcbn07IiwiLy8gNy4yLjIgSXNBcnJheShhcmd1bWVudClcbnZhciBjb2YgPSByZXF1aXJlKCcuL19jb2YnKTtcbm1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiBpc0FycmF5KGFyZyl7XG4gIHJldHVybiBjb2YoYXJnKSA9PSAnQXJyYXknO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIHR5cGVvZiBpdCA9PT0gJ29iamVjdCcgPyBpdCAhPT0gbnVsbCA6IHR5cGVvZiBpdCA9PT0gJ2Z1bmN0aW9uJztcbn07IiwiJ3VzZSBzdHJpY3QnO1xudmFyIGNyZWF0ZSAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWNyZWF0ZScpXG4gICwgZGVzY3JpcHRvciAgICAgPSByZXF1aXJlKCcuL19wcm9wZXJ0eS1kZXNjJylcbiAgLCBzZXRUb1N0cmluZ1RhZyA9IHJlcXVpcmUoJy4vX3NldC10by1zdHJpbmctdGFnJylcbiAgLCBJdGVyYXRvclByb3RvdHlwZSA9IHt9O1xuXG4vLyAyNS4xLjIuMS4xICVJdGVyYXRvclByb3RvdHlwZSVbQEBpdGVyYXRvcl0oKVxucmVxdWlyZSgnLi9faGlkZScpKEl0ZXJhdG9yUHJvdG90eXBlLCByZXF1aXJlKCcuL193a3MnKSgnaXRlcmF0b3InKSwgZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXM7IH0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKENvbnN0cnVjdG9yLCBOQU1FLCBuZXh0KXtcbiAgQ29uc3RydWN0b3IucHJvdG90eXBlID0gY3JlYXRlKEl0ZXJhdG9yUHJvdG90eXBlLCB7bmV4dDogZGVzY3JpcHRvcigxLCBuZXh0KX0pO1xuICBzZXRUb1N0cmluZ1RhZyhDb25zdHJ1Y3RvciwgTkFNRSArICcgSXRlcmF0b3InKTtcbn07IiwiJ3VzZSBzdHJpY3QnO1xudmFyIExJQlJBUlkgICAgICAgID0gcmVxdWlyZSgnLi9fbGlicmFyeScpXG4gICwgJGV4cG9ydCAgICAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsIHJlZGVmaW5lICAgICAgID0gcmVxdWlyZSgnLi9fcmVkZWZpbmUnKVxuICAsIGhpZGUgICAgICAgICAgID0gcmVxdWlyZSgnLi9faGlkZScpXG4gICwgaGFzICAgICAgICAgICAgPSByZXF1aXJlKCcuL19oYXMnKVxuICAsIEl0ZXJhdG9ycyAgICAgID0gcmVxdWlyZSgnLi9faXRlcmF0b3JzJylcbiAgLCAkaXRlckNyZWF0ZSAgICA9IHJlcXVpcmUoJy4vX2l0ZXItY3JlYXRlJylcbiAgLCBzZXRUb1N0cmluZ1RhZyA9IHJlcXVpcmUoJy4vX3NldC10by1zdHJpbmctdGFnJylcbiAgLCBnZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoJy4vX29iamVjdC1ncG8nKVxuICAsIElURVJBVE9SICAgICAgID0gcmVxdWlyZSgnLi9fd2tzJykoJ2l0ZXJhdG9yJylcbiAgLCBCVUdHWSAgICAgICAgICA9ICEoW10ua2V5cyAmJiAnbmV4dCcgaW4gW10ua2V5cygpKSAvLyBTYWZhcmkgaGFzIGJ1Z2d5IGl0ZXJhdG9ycyB3L28gYG5leHRgXG4gICwgRkZfSVRFUkFUT1IgICAgPSAnQEBpdGVyYXRvcidcbiAgLCBLRVlTICAgICAgICAgICA9ICdrZXlzJ1xuICAsIFZBTFVFUyAgICAgICAgID0gJ3ZhbHVlcyc7XG5cbnZhciByZXR1cm5UaGlzID0gZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXM7IH07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oQmFzZSwgTkFNRSwgQ29uc3RydWN0b3IsIG5leHQsIERFRkFVTFQsIElTX1NFVCwgRk9SQ0VEKXtcbiAgJGl0ZXJDcmVhdGUoQ29uc3RydWN0b3IsIE5BTUUsIG5leHQpO1xuICB2YXIgZ2V0TWV0aG9kID0gZnVuY3Rpb24oa2luZCl7XG4gICAgaWYoIUJVR0dZICYmIGtpbmQgaW4gcHJvdG8pcmV0dXJuIHByb3RvW2tpbmRdO1xuICAgIHN3aXRjaChraW5kKXtcbiAgICAgIGNhc2UgS0VZUzogcmV0dXJuIGZ1bmN0aW9uIGtleXMoKXsgcmV0dXJuIG5ldyBDb25zdHJ1Y3Rvcih0aGlzLCBraW5kKTsgfTtcbiAgICAgIGNhc2UgVkFMVUVTOiByZXR1cm4gZnVuY3Rpb24gdmFsdWVzKCl7IHJldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcywga2luZCk7IH07XG4gICAgfSByZXR1cm4gZnVuY3Rpb24gZW50cmllcygpeyByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsIGtpbmQpOyB9O1xuICB9O1xuICB2YXIgVEFHICAgICAgICA9IE5BTUUgKyAnIEl0ZXJhdG9yJ1xuICAgICwgREVGX1ZBTFVFUyA9IERFRkFVTFQgPT0gVkFMVUVTXG4gICAgLCBWQUxVRVNfQlVHID0gZmFsc2VcbiAgICAsIHByb3RvICAgICAgPSBCYXNlLnByb3RvdHlwZVxuICAgICwgJG5hdGl2ZSAgICA9IHByb3RvW0lURVJBVE9SXSB8fCBwcm90b1tGRl9JVEVSQVRPUl0gfHwgREVGQVVMVCAmJiBwcm90b1tERUZBVUxUXVxuICAgICwgJGRlZmF1bHQgICA9ICRuYXRpdmUgfHwgZ2V0TWV0aG9kKERFRkFVTFQpXG4gICAgLCAkZW50cmllcyAgID0gREVGQVVMVCA/ICFERUZfVkFMVUVTID8gJGRlZmF1bHQgOiBnZXRNZXRob2QoJ2VudHJpZXMnKSA6IHVuZGVmaW5lZFxuICAgICwgJGFueU5hdGl2ZSA9IE5BTUUgPT0gJ0FycmF5JyA/IHByb3RvLmVudHJpZXMgfHwgJG5hdGl2ZSA6ICRuYXRpdmVcbiAgICAsIG1ldGhvZHMsIGtleSwgSXRlcmF0b3JQcm90b3R5cGU7XG4gIC8vIEZpeCBuYXRpdmVcbiAgaWYoJGFueU5hdGl2ZSl7XG4gICAgSXRlcmF0b3JQcm90b3R5cGUgPSBnZXRQcm90b3R5cGVPZigkYW55TmF0aXZlLmNhbGwobmV3IEJhc2UpKTtcbiAgICBpZihJdGVyYXRvclByb3RvdHlwZSAhPT0gT2JqZWN0LnByb3RvdHlwZSl7XG4gICAgICAvLyBTZXQgQEB0b1N0cmluZ1RhZyB0byBuYXRpdmUgaXRlcmF0b3JzXG4gICAgICBzZXRUb1N0cmluZ1RhZyhJdGVyYXRvclByb3RvdHlwZSwgVEFHLCB0cnVlKTtcbiAgICAgIC8vIGZpeCBmb3Igc29tZSBvbGQgZW5naW5lc1xuICAgICAgaWYoIUxJQlJBUlkgJiYgIWhhcyhJdGVyYXRvclByb3RvdHlwZSwgSVRFUkFUT1IpKWhpZGUoSXRlcmF0b3JQcm90b3R5cGUsIElURVJBVE9SLCByZXR1cm5UaGlzKTtcbiAgICB9XG4gIH1cbiAgLy8gZml4IEFycmF5I3t2YWx1ZXMsIEBAaXRlcmF0b3J9Lm5hbWUgaW4gVjggLyBGRlxuICBpZihERUZfVkFMVUVTICYmICRuYXRpdmUgJiYgJG5hdGl2ZS5uYW1lICE9PSBWQUxVRVMpe1xuICAgIFZBTFVFU19CVUcgPSB0cnVlO1xuICAgICRkZWZhdWx0ID0gZnVuY3Rpb24gdmFsdWVzKCl7IHJldHVybiAkbmF0aXZlLmNhbGwodGhpcyk7IH07XG4gIH1cbiAgLy8gRGVmaW5lIGl0ZXJhdG9yXG4gIGlmKCghTElCUkFSWSB8fCBGT1JDRUQpICYmIChCVUdHWSB8fCBWQUxVRVNfQlVHIHx8ICFwcm90b1tJVEVSQVRPUl0pKXtcbiAgICBoaWRlKHByb3RvLCBJVEVSQVRPUiwgJGRlZmF1bHQpO1xuICB9XG4gIC8vIFBsdWcgZm9yIGxpYnJhcnlcbiAgSXRlcmF0b3JzW05BTUVdID0gJGRlZmF1bHQ7XG4gIEl0ZXJhdG9yc1tUQUddICA9IHJldHVyblRoaXM7XG4gIGlmKERFRkFVTFQpe1xuICAgIG1ldGhvZHMgPSB7XG4gICAgICB2YWx1ZXM6ICBERUZfVkFMVUVTID8gJGRlZmF1bHQgOiBnZXRNZXRob2QoVkFMVUVTKSxcbiAgICAgIGtleXM6ICAgIElTX1NFVCAgICAgPyAkZGVmYXVsdCA6IGdldE1ldGhvZChLRVlTKSxcbiAgICAgIGVudHJpZXM6ICRlbnRyaWVzXG4gICAgfTtcbiAgICBpZihGT1JDRUQpZm9yKGtleSBpbiBtZXRob2RzKXtcbiAgICAgIGlmKCEoa2V5IGluIHByb3RvKSlyZWRlZmluZShwcm90bywga2V5LCBtZXRob2RzW2tleV0pO1xuICAgIH0gZWxzZSAkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIChCVUdHWSB8fCBWQUxVRVNfQlVHKSwgTkFNRSwgbWV0aG9kcyk7XG4gIH1cbiAgcmV0dXJuIG1ldGhvZHM7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZG9uZSwgdmFsdWUpe1xuICByZXR1cm4ge3ZhbHVlOiB2YWx1ZSwgZG9uZTogISFkb25lfTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSB7fTsiLCJ2YXIgZ2V0S2V5cyAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWtleXMnKVxuICAsIHRvSU9iamVjdCA9IHJlcXVpcmUoJy4vX3RvLWlvYmplY3QnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqZWN0LCBlbCl7XG4gIHZhciBPICAgICAgPSB0b0lPYmplY3Qob2JqZWN0KVxuICAgICwga2V5cyAgID0gZ2V0S2V5cyhPKVxuICAgICwgbGVuZ3RoID0ga2V5cy5sZW5ndGhcbiAgICAsIGluZGV4ICA9IDBcbiAgICAsIGtleTtcbiAgd2hpbGUobGVuZ3RoID4gaW5kZXgpaWYoT1trZXkgPSBrZXlzW2luZGV4KytdXSA9PT0gZWwpcmV0dXJuIGtleTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSB0cnVlOyIsInZhciBNRVRBICAgICA9IHJlcXVpcmUoJy4vX3VpZCcpKCdtZXRhJylcbiAgLCBpc09iamVjdCA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpXG4gICwgaGFzICAgICAgPSByZXF1aXJlKCcuL19oYXMnKVxuICAsIHNldERlc2MgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWRwJykuZlxuICAsIGlkICAgICAgID0gMDtcbnZhciBpc0V4dGVuc2libGUgPSBPYmplY3QuaXNFeHRlbnNpYmxlIHx8IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB0cnVlO1xufTtcbnZhciBGUkVFWkUgPSAhcmVxdWlyZSgnLi9fZmFpbHMnKShmdW5jdGlvbigpe1xuICByZXR1cm4gaXNFeHRlbnNpYmxlKE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyh7fSkpO1xufSk7XG52YXIgc2V0TWV0YSA9IGZ1bmN0aW9uKGl0KXtcbiAgc2V0RGVzYyhpdCwgTUVUQSwge3ZhbHVlOiB7XG4gICAgaTogJ08nICsgKytpZCwgLy8gb2JqZWN0IElEXG4gICAgdzoge30gICAgICAgICAgLy8gd2VhayBjb2xsZWN0aW9ucyBJRHNcbiAgfX0pO1xufTtcbnZhciBmYXN0S2V5ID0gZnVuY3Rpb24oaXQsIGNyZWF0ZSl7XG4gIC8vIHJldHVybiBwcmltaXRpdmUgd2l0aCBwcmVmaXhcbiAgaWYoIWlzT2JqZWN0KGl0KSlyZXR1cm4gdHlwZW9mIGl0ID09ICdzeW1ib2wnID8gaXQgOiAodHlwZW9mIGl0ID09ICdzdHJpbmcnID8gJ1MnIDogJ1AnKSArIGl0O1xuICBpZighaGFzKGl0LCBNRVRBKSl7XG4gICAgLy8gY2FuJ3Qgc2V0IG1ldGFkYXRhIHRvIHVuY2F1Z2h0IGZyb3plbiBvYmplY3RcbiAgICBpZighaXNFeHRlbnNpYmxlKGl0KSlyZXR1cm4gJ0YnO1xuICAgIC8vIG5vdCBuZWNlc3NhcnkgdG8gYWRkIG1ldGFkYXRhXG4gICAgaWYoIWNyZWF0ZSlyZXR1cm4gJ0UnO1xuICAgIC8vIGFkZCBtaXNzaW5nIG1ldGFkYXRhXG4gICAgc2V0TWV0YShpdCk7XG4gIC8vIHJldHVybiBvYmplY3QgSURcbiAgfSByZXR1cm4gaXRbTUVUQV0uaTtcbn07XG52YXIgZ2V0V2VhayA9IGZ1bmN0aW9uKGl0LCBjcmVhdGUpe1xuICBpZighaGFzKGl0LCBNRVRBKSl7XG4gICAgLy8gY2FuJ3Qgc2V0IG1ldGFkYXRhIHRvIHVuY2F1Z2h0IGZyb3plbiBvYmplY3RcbiAgICBpZighaXNFeHRlbnNpYmxlKGl0KSlyZXR1cm4gdHJ1ZTtcbiAgICAvLyBub3QgbmVjZXNzYXJ5IHRvIGFkZCBtZXRhZGF0YVxuICAgIGlmKCFjcmVhdGUpcmV0dXJuIGZhbHNlO1xuICAgIC8vIGFkZCBtaXNzaW5nIG1ldGFkYXRhXG4gICAgc2V0TWV0YShpdCk7XG4gIC8vIHJldHVybiBoYXNoIHdlYWsgY29sbGVjdGlvbnMgSURzXG4gIH0gcmV0dXJuIGl0W01FVEFdLnc7XG59O1xuLy8gYWRkIG1ldGFkYXRhIG9uIGZyZWV6ZS1mYW1pbHkgbWV0aG9kcyBjYWxsaW5nXG52YXIgb25GcmVlemUgPSBmdW5jdGlvbihpdCl7XG4gIGlmKEZSRUVaRSAmJiBtZXRhLk5FRUQgJiYgaXNFeHRlbnNpYmxlKGl0KSAmJiAhaGFzKGl0LCBNRVRBKSlzZXRNZXRhKGl0KTtcbiAgcmV0dXJuIGl0O1xufTtcbnZhciBtZXRhID0gbW9kdWxlLmV4cG9ydHMgPSB7XG4gIEtFWTogICAgICBNRVRBLFxuICBORUVEOiAgICAgZmFsc2UsXG4gIGZhc3RLZXk6ICBmYXN0S2V5LFxuICBnZXRXZWFrOiAgZ2V0V2VhayxcbiAgb25GcmVlemU6IG9uRnJlZXplXG59OyIsIi8vIDE5LjEuMi4yIC8gMTUuMi4zLjUgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKVxudmFyIGFuT2JqZWN0ICAgID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0JylcbiAgLCBkUHMgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1kcHMnKVxuICAsIGVudW1CdWdLZXlzID0gcmVxdWlyZSgnLi9fZW51bS1idWcta2V5cycpXG4gICwgSUVfUFJPVE8gICAgPSByZXF1aXJlKCcuL19zaGFyZWQta2V5JykoJ0lFX1BST1RPJylcbiAgLCBFbXB0eSAgICAgICA9IGZ1bmN0aW9uKCl7IC8qIGVtcHR5ICovIH1cbiAgLCBQUk9UT1RZUEUgICA9ICdwcm90b3R5cGUnO1xuXG4vLyBDcmVhdGUgb2JqZWN0IHdpdGggZmFrZSBgbnVsbGAgcHJvdG90eXBlOiB1c2UgaWZyYW1lIE9iamVjdCB3aXRoIGNsZWFyZWQgcHJvdG90eXBlXG52YXIgY3JlYXRlRGljdCA9IGZ1bmN0aW9uKCl7XG4gIC8vIFRocmFzaCwgd2FzdGUgYW5kIHNvZG9teTogSUUgR0MgYnVnXG4gIHZhciBpZnJhbWUgPSByZXF1aXJlKCcuL19kb20tY3JlYXRlJykoJ2lmcmFtZScpXG4gICAgLCBpICAgICAgPSBlbnVtQnVnS2V5cy5sZW5ndGhcbiAgICAsIGx0ICAgICA9ICc8J1xuICAgICwgZ3QgICAgID0gJz4nXG4gICAgLCBpZnJhbWVEb2N1bWVudDtcbiAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIHJlcXVpcmUoJy4vX2h0bWwnKS5hcHBlbmRDaGlsZChpZnJhbWUpO1xuICBpZnJhbWUuc3JjID0gJ2phdmFzY3JpcHQ6JzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zY3JpcHQtdXJsXG4gIC8vIGNyZWF0ZURpY3QgPSBpZnJhbWUuY29udGVudFdpbmRvdy5PYmplY3Q7XG4gIC8vIGh0bWwucmVtb3ZlQ2hpbGQoaWZyYW1lKTtcbiAgaWZyYW1lRG9jdW1lbnQgPSBpZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudDtcbiAgaWZyYW1lRG9jdW1lbnQub3BlbigpO1xuICBpZnJhbWVEb2N1bWVudC53cml0ZShsdCArICdzY3JpcHQnICsgZ3QgKyAnZG9jdW1lbnQuRj1PYmplY3QnICsgbHQgKyAnL3NjcmlwdCcgKyBndCk7XG4gIGlmcmFtZURvY3VtZW50LmNsb3NlKCk7XG4gIGNyZWF0ZURpY3QgPSBpZnJhbWVEb2N1bWVudC5GO1xuICB3aGlsZShpLS0pZGVsZXRlIGNyZWF0ZURpY3RbUFJPVE9UWVBFXVtlbnVtQnVnS2V5c1tpXV07XG4gIHJldHVybiBjcmVhdGVEaWN0KCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5jcmVhdGUgfHwgZnVuY3Rpb24gY3JlYXRlKE8sIFByb3BlcnRpZXMpe1xuICB2YXIgcmVzdWx0O1xuICBpZihPICE9PSBudWxsKXtcbiAgICBFbXB0eVtQUk9UT1RZUEVdID0gYW5PYmplY3QoTyk7XG4gICAgcmVzdWx0ID0gbmV3IEVtcHR5O1xuICAgIEVtcHR5W1BST1RPVFlQRV0gPSBudWxsO1xuICAgIC8vIGFkZCBcIl9fcHJvdG9fX1wiIGZvciBPYmplY3QuZ2V0UHJvdG90eXBlT2YgcG9seWZpbGxcbiAgICByZXN1bHRbSUVfUFJPVE9dID0gTztcbiAgfSBlbHNlIHJlc3VsdCA9IGNyZWF0ZURpY3QoKTtcbiAgcmV0dXJuIFByb3BlcnRpZXMgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IGRQcyhyZXN1bHQsIFByb3BlcnRpZXMpO1xufTtcbiIsInZhciBhbk9iamVjdCAgICAgICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpXG4gICwgSUU4X0RPTV9ERUZJTkUgPSByZXF1aXJlKCcuL19pZTgtZG9tLWRlZmluZScpXG4gICwgdG9QcmltaXRpdmUgICAgPSByZXF1aXJlKCcuL190by1wcmltaXRpdmUnKVxuICAsIGRQICAgICAgICAgICAgID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xuXG5leHBvcnRzLmYgPSByZXF1aXJlKCcuL19kZXNjcmlwdG9ycycpID8gT2JqZWN0LmRlZmluZVByb3BlcnR5IDogZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcyl7XG4gIGFuT2JqZWN0KE8pO1xuICBQID0gdG9QcmltaXRpdmUoUCwgdHJ1ZSk7XG4gIGFuT2JqZWN0KEF0dHJpYnV0ZXMpO1xuICBpZihJRThfRE9NX0RFRklORSl0cnkge1xuICAgIHJldHVybiBkUChPLCBQLCBBdHRyaWJ1dGVzKTtcbiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfVxuICBpZignZ2V0JyBpbiBBdHRyaWJ1dGVzIHx8ICdzZXQnIGluIEF0dHJpYnV0ZXMpdGhyb3cgVHlwZUVycm9yKCdBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCEnKTtcbiAgaWYoJ3ZhbHVlJyBpbiBBdHRyaWJ1dGVzKU9bUF0gPSBBdHRyaWJ1dGVzLnZhbHVlO1xuICByZXR1cm4gTztcbn07IiwidmFyIGRQICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWRwJylcbiAgLCBhbk9iamVjdCA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpXG4gICwgZ2V0S2V5cyAgPSByZXF1aXJlKCcuL19vYmplY3Qta2V5cycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJykgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyA6IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXMoTywgUHJvcGVydGllcyl7XG4gIGFuT2JqZWN0KE8pO1xuICB2YXIga2V5cyAgID0gZ2V0S2V5cyhQcm9wZXJ0aWVzKVxuICAgICwgbGVuZ3RoID0ga2V5cy5sZW5ndGhcbiAgICAsIGkgPSAwXG4gICAgLCBQO1xuICB3aGlsZShsZW5ndGggPiBpKWRQLmYoTywgUCA9IGtleXNbaSsrXSwgUHJvcGVydGllc1tQXSk7XG4gIHJldHVybiBPO1xufTsiLCJ2YXIgcElFICAgICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtcGllJylcbiAgLCBjcmVhdGVEZXNjICAgICA9IHJlcXVpcmUoJy4vX3Byb3BlcnR5LWRlc2MnKVxuICAsIHRvSU9iamVjdCAgICAgID0gcmVxdWlyZSgnLi9fdG8taW9iamVjdCcpXG4gICwgdG9QcmltaXRpdmUgICAgPSByZXF1aXJlKCcuL190by1wcmltaXRpdmUnKVxuICAsIGhhcyAgICAgICAgICAgID0gcmVxdWlyZSgnLi9faGFzJylcbiAgLCBJRThfRE9NX0RFRklORSA9IHJlcXVpcmUoJy4vX2llOC1kb20tZGVmaW5lJylcbiAgLCBnT1BEICAgICAgICAgICA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG5cbmV4cG9ydHMuZiA9IHJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJykgPyBnT1BEIDogZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApe1xuICBPID0gdG9JT2JqZWN0KE8pO1xuICBQID0gdG9QcmltaXRpdmUoUCwgdHJ1ZSk7XG4gIGlmKElFOF9ET01fREVGSU5FKXRyeSB7XG4gICAgcmV0dXJuIGdPUEQoTywgUCk7XG4gIH0gY2F0Y2goZSl7IC8qIGVtcHR5ICovIH1cbiAgaWYoaGFzKE8sIFApKXJldHVybiBjcmVhdGVEZXNjKCFwSUUuZi5jYWxsKE8sIFApLCBPW1BdKTtcbn07IiwiLy8gZmFsbGJhY2sgZm9yIElFMTEgYnVnZ3kgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgd2l0aCBpZnJhbWUgYW5kIHdpbmRvd1xudmFyIHRvSU9iamVjdCA9IHJlcXVpcmUoJy4vX3RvLWlvYmplY3QnKVxuICAsIGdPUE4gICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1nb3BuJykuZlxuICAsIHRvU3RyaW5nICA9IHt9LnRvU3RyaW5nO1xuXG52YXIgd2luZG93TmFtZXMgPSB0eXBlb2Ygd2luZG93ID09ICdvYmplY3QnICYmIHdpbmRvdyAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lc1xuICA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHdpbmRvdykgOiBbXTtcblxudmFyIGdldFdpbmRvd05hbWVzID0gZnVuY3Rpb24oaXQpe1xuICB0cnkge1xuICAgIHJldHVybiBnT1BOKGl0KTtcbiAgfSBjYXRjaChlKXtcbiAgICByZXR1cm4gd2luZG93TmFtZXMuc2xpY2UoKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMuZiA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5TmFtZXMoaXQpe1xuICByZXR1cm4gd2luZG93TmFtZXMgJiYgdG9TdHJpbmcuY2FsbChpdCkgPT0gJ1tvYmplY3QgV2luZG93XScgPyBnZXRXaW5kb3dOYW1lcyhpdCkgOiBnT1BOKHRvSU9iamVjdChpdCkpO1xufTtcbiIsIi8vIDE5LjEuMi43IC8gMTUuMi4zLjQgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTylcbnZhciAka2V5cyAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWtleXMtaW50ZXJuYWwnKVxuICAsIGhpZGRlbktleXMgPSByZXF1aXJlKCcuL19lbnVtLWJ1Zy1rZXlzJykuY29uY2F0KCdsZW5ndGgnLCAncHJvdG90eXBlJyk7XG5cbmV4cG9ydHMuZiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIHx8IGZ1bmN0aW9uIGdldE93blByb3BlcnR5TmFtZXMoTyl7XG4gIHJldHVybiAka2V5cyhPLCBoaWRkZW5LZXlzKTtcbn07IiwiZXhwb3J0cy5mID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9sczsiLCIvLyAxOS4xLjIuOSAvIDE1LjIuMy4yIE9iamVjdC5nZXRQcm90b3R5cGVPZihPKVxudmFyIGhhcyAgICAgICAgID0gcmVxdWlyZSgnLi9faGFzJylcbiAgLCB0b09iamVjdCAgICA9IHJlcXVpcmUoJy4vX3RvLW9iamVjdCcpXG4gICwgSUVfUFJPVE8gICAgPSByZXF1aXJlKCcuL19zaGFyZWQta2V5JykoJ0lFX1BST1RPJylcbiAgLCBPYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmdldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uKE8pe1xuICBPID0gdG9PYmplY3QoTyk7XG4gIGlmKGhhcyhPLCBJRV9QUk9UTykpcmV0dXJuIE9bSUVfUFJPVE9dO1xuICBpZih0eXBlb2YgTy5jb25zdHJ1Y3RvciA9PSAnZnVuY3Rpb24nICYmIE8gaW5zdGFuY2VvZiBPLmNvbnN0cnVjdG9yKXtcbiAgICByZXR1cm4gTy5jb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG4gIH0gcmV0dXJuIE8gaW5zdGFuY2VvZiBPYmplY3QgPyBPYmplY3RQcm90byA6IG51bGw7XG59OyIsInZhciBoYXMgICAgICAgICAgPSByZXF1aXJlKCcuL19oYXMnKVxuICAsIHRvSU9iamVjdCAgICA9IHJlcXVpcmUoJy4vX3RvLWlvYmplY3QnKVxuICAsIGFycmF5SW5kZXhPZiA9IHJlcXVpcmUoJy4vX2FycmF5LWluY2x1ZGVzJykoZmFsc2UpXG4gICwgSUVfUFJPVE8gICAgID0gcmVxdWlyZSgnLi9fc2hhcmVkLWtleScpKCdJRV9QUk9UTycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iamVjdCwgbmFtZXMpe1xuICB2YXIgTyAgICAgID0gdG9JT2JqZWN0KG9iamVjdClcbiAgICAsIGkgICAgICA9IDBcbiAgICAsIHJlc3VsdCA9IFtdXG4gICAgLCBrZXk7XG4gIGZvcihrZXkgaW4gTylpZihrZXkgIT0gSUVfUFJPVE8paGFzKE8sIGtleSkgJiYgcmVzdWx0LnB1c2goa2V5KTtcbiAgLy8gRG9uJ3QgZW51bSBidWcgJiBoaWRkZW4ga2V5c1xuICB3aGlsZShuYW1lcy5sZW5ndGggPiBpKWlmKGhhcyhPLCBrZXkgPSBuYW1lc1tpKytdKSl7XG4gICAgfmFycmF5SW5kZXhPZihyZXN1bHQsIGtleSkgfHwgcmVzdWx0LnB1c2goa2V5KTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufTsiLCIvLyAxOS4xLjIuMTQgLyAxNS4yLjMuMTQgT2JqZWN0LmtleXMoTylcbnZhciAka2V5cyAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1rZXlzLWludGVybmFsJylcbiAgLCBlbnVtQnVnS2V5cyA9IHJlcXVpcmUoJy4vX2VudW0tYnVnLWtleXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiBrZXlzKE8pe1xuICByZXR1cm4gJGtleXMoTywgZW51bUJ1Z0tleXMpO1xufTsiLCJleHBvcnRzLmYgPSB7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZTsiLCIvLyBtb3N0IE9iamVjdCBtZXRob2RzIGJ5IEVTNiBzaG91bGQgYWNjZXB0IHByaW1pdGl2ZXNcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCBjb3JlICAgID0gcmVxdWlyZSgnLi9fY29yZScpXG4gICwgZmFpbHMgICA9IHJlcXVpcmUoJy4vX2ZhaWxzJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKEtFWSwgZXhlYyl7XG4gIHZhciBmbiAgPSAoY29yZS5PYmplY3QgfHwge30pW0tFWV0gfHwgT2JqZWN0W0tFWV1cbiAgICAsIGV4cCA9IHt9O1xuICBleHBbS0VZXSA9IGV4ZWMoZm4pO1xuICAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqIGZhaWxzKGZ1bmN0aW9uKCl7IGZuKDEpOyB9KSwgJ09iamVjdCcsIGV4cCk7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYml0bWFwLCB2YWx1ZSl7XG4gIHJldHVybiB7XG4gICAgZW51bWVyYWJsZSAgOiAhKGJpdG1hcCAmIDEpLFxuICAgIGNvbmZpZ3VyYWJsZTogIShiaXRtYXAgJiAyKSxcbiAgICB3cml0YWJsZSAgICA6ICEoYml0bWFwICYgNCksXG4gICAgdmFsdWUgICAgICAgOiB2YWx1ZVxuICB9O1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vX2hpZGUnKTsiLCIvLyBXb3JrcyB3aXRoIF9fcHJvdG9fXyBvbmx5LiBPbGQgdjggY2FuJ3Qgd29yayB3aXRoIG51bGwgcHJvdG8gb2JqZWN0cy5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG52YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKVxuICAsIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0Jyk7XG52YXIgY2hlY2sgPSBmdW5jdGlvbihPLCBwcm90byl7XG4gIGFuT2JqZWN0KE8pO1xuICBpZighaXNPYmplY3QocHJvdG8pICYmIHByb3RvICE9PSBudWxsKXRocm93IFR5cGVFcnJvcihwcm90byArIFwiOiBjYW4ndCBzZXQgYXMgcHJvdG90eXBlIVwiKTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgc2V0OiBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgKCdfX3Byb3RvX18nIGluIHt9ID8gLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgIGZ1bmN0aW9uKHRlc3QsIGJ1Z2d5LCBzZXQpe1xuICAgICAgdHJ5IHtcbiAgICAgICAgc2V0ID0gcmVxdWlyZSgnLi9fY3R4JykoRnVuY3Rpb24uY2FsbCwgcmVxdWlyZSgnLi9fb2JqZWN0LWdvcGQnKS5mKE9iamVjdC5wcm90b3R5cGUsICdfX3Byb3RvX18nKS5zZXQsIDIpO1xuICAgICAgICBzZXQodGVzdCwgW10pO1xuICAgICAgICBidWdneSA9ICEodGVzdCBpbnN0YW5jZW9mIEFycmF5KTtcbiAgICAgIH0gY2F0Y2goZSl7IGJ1Z2d5ID0gdHJ1ZTsgfVxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mKE8sIHByb3RvKXtcbiAgICAgICAgY2hlY2soTywgcHJvdG8pO1xuICAgICAgICBpZihidWdneSlPLl9fcHJvdG9fXyA9IHByb3RvO1xuICAgICAgICBlbHNlIHNldChPLCBwcm90byk7XG4gICAgICAgIHJldHVybiBPO1xuICAgICAgfTtcbiAgICB9KHt9LCBmYWxzZSkgOiB1bmRlZmluZWQpLFxuICBjaGVjazogY2hlY2tcbn07IiwidmFyIGRlZiA9IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpLmZcbiAgLCBoYXMgPSByZXF1aXJlKCcuL19oYXMnKVxuICAsIFRBRyA9IHJlcXVpcmUoJy4vX3drcycpKCd0b1N0cmluZ1RhZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCB0YWcsIHN0YXQpe1xuICBpZihpdCAmJiAhaGFzKGl0ID0gc3RhdCA/IGl0IDogaXQucHJvdG90eXBlLCBUQUcpKWRlZihpdCwgVEFHLCB7Y29uZmlndXJhYmxlOiB0cnVlLCB2YWx1ZTogdGFnfSk7XG59OyIsInZhciBzaGFyZWQgPSByZXF1aXJlKCcuL19zaGFyZWQnKSgna2V5cycpXG4gICwgdWlkICAgID0gcmVxdWlyZSgnLi9fdWlkJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGtleSl7XG4gIHJldHVybiBzaGFyZWRba2V5XSB8fCAoc2hhcmVkW2tleV0gPSB1aWQoa2V5KSk7XG59OyIsInZhciBnbG9iYWwgPSByZXF1aXJlKCcuL19nbG9iYWwnKVxuICAsIFNIQVJFRCA9ICdfX2NvcmUtanNfc2hhcmVkX18nXG4gICwgc3RvcmUgID0gZ2xvYmFsW1NIQVJFRF0gfHwgKGdsb2JhbFtTSEFSRURdID0ge30pO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihrZXkpe1xuICByZXR1cm4gc3RvcmVba2V5XSB8fCAoc3RvcmVba2V5XSA9IHt9KTtcbn07IiwidmFyIHRvSW50ZWdlciA9IHJlcXVpcmUoJy4vX3RvLWludGVnZXInKVxuICAsIGRlZmluZWQgICA9IHJlcXVpcmUoJy4vX2RlZmluZWQnKTtcbi8vIHRydWUgIC0+IFN0cmluZyNhdFxuLy8gZmFsc2UgLT4gU3RyaW5nI2NvZGVQb2ludEF0XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFRPX1NUUklORyl7XG4gIHJldHVybiBmdW5jdGlvbih0aGF0LCBwb3Mpe1xuICAgIHZhciBzID0gU3RyaW5nKGRlZmluZWQodGhhdCkpXG4gICAgICAsIGkgPSB0b0ludGVnZXIocG9zKVxuICAgICAgLCBsID0gcy5sZW5ndGhcbiAgICAgICwgYSwgYjtcbiAgICBpZihpIDwgMCB8fCBpID49IGwpcmV0dXJuIFRPX1NUUklORyA/ICcnIDogdW5kZWZpbmVkO1xuICAgIGEgPSBzLmNoYXJDb2RlQXQoaSk7XG4gICAgcmV0dXJuIGEgPCAweGQ4MDAgfHwgYSA+IDB4ZGJmZiB8fCBpICsgMSA9PT0gbCB8fCAoYiA9IHMuY2hhckNvZGVBdChpICsgMSkpIDwgMHhkYzAwIHx8IGIgPiAweGRmZmZcbiAgICAgID8gVE9fU1RSSU5HID8gcy5jaGFyQXQoaSkgOiBhXG4gICAgICA6IFRPX1NUUklORyA/IHMuc2xpY2UoaSwgaSArIDIpIDogKGEgLSAweGQ4MDAgPDwgMTApICsgKGIgLSAweGRjMDApICsgMHgxMDAwMDtcbiAgfTtcbn07IiwidmFyIHRvSW50ZWdlciA9IHJlcXVpcmUoJy4vX3RvLWludGVnZXInKVxuICAsIG1heCAgICAgICA9IE1hdGgubWF4XG4gICwgbWluICAgICAgID0gTWF0aC5taW47XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGluZGV4LCBsZW5ndGgpe1xuICBpbmRleCA9IHRvSW50ZWdlcihpbmRleCk7XG4gIHJldHVybiBpbmRleCA8IDAgPyBtYXgoaW5kZXggKyBsZW5ndGgsIDApIDogbWluKGluZGV4LCBsZW5ndGgpO1xufTsiLCIvLyA3LjEuNCBUb0ludGVnZXJcbnZhciBjZWlsICA9IE1hdGguY2VpbFxuICAsIGZsb29yID0gTWF0aC5mbG9vcjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gaXNOYU4oaXQgPSAraXQpID8gMCA6IChpdCA+IDAgPyBmbG9vciA6IGNlaWwpKGl0KTtcbn07IiwiLy8gdG8gaW5kZXhlZCBvYmplY3QsIHRvT2JqZWN0IHdpdGggZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBzdHJpbmdzXG52YXIgSU9iamVjdCA9IHJlcXVpcmUoJy4vX2lvYmplY3QnKVxuICAsIGRlZmluZWQgPSByZXF1aXJlKCcuL19kZWZpbmVkJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIElPYmplY3QoZGVmaW5lZChpdCkpO1xufTsiLCIvLyA3LjEuMTUgVG9MZW5ndGhcbnZhciB0b0ludGVnZXIgPSByZXF1aXJlKCcuL190by1pbnRlZ2VyJylcbiAgLCBtaW4gICAgICAgPSBNYXRoLm1pbjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gaXQgPiAwID8gbWluKHRvSW50ZWdlcihpdCksIDB4MWZmZmZmZmZmZmZmZmYpIDogMDsgLy8gcG93KDIsIDUzKSAtIDEgPT0gOTAwNzE5OTI1NDc0MDk5MVxufTsiLCIvLyA3LjEuMTMgVG9PYmplY3QoYXJndW1lbnQpXG52YXIgZGVmaW5lZCA9IHJlcXVpcmUoJy4vX2RlZmluZWQnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gT2JqZWN0KGRlZmluZWQoaXQpKTtcbn07IiwiLy8gNy4xLjEgVG9QcmltaXRpdmUoaW5wdXQgWywgUHJlZmVycmVkVHlwZV0pXG52YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKTtcbi8vIGluc3RlYWQgb2YgdGhlIEVTNiBzcGVjIHZlcnNpb24sIHdlIGRpZG4ndCBpbXBsZW1lbnQgQEB0b1ByaW1pdGl2ZSBjYXNlXG4vLyBhbmQgdGhlIHNlY29uZCBhcmd1bWVudCAtIGZsYWcgLSBwcmVmZXJyZWQgdHlwZSBpcyBhIHN0cmluZ1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCwgUyl7XG4gIGlmKCFpc09iamVjdChpdCkpcmV0dXJuIGl0O1xuICB2YXIgZm4sIHZhbDtcbiAgaWYoUyAmJiB0eXBlb2YgKGZuID0gaXQudG9TdHJpbmcpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsO1xuICBpZih0eXBlb2YgKGZuID0gaXQudmFsdWVPZikgPT0gJ2Z1bmN0aW9uJyAmJiAhaXNPYmplY3QodmFsID0gZm4uY2FsbChpdCkpKXJldHVybiB2YWw7XG4gIGlmKCFTICYmIHR5cGVvZiAoZm4gPSBpdC50b1N0cmluZykgPT0gJ2Z1bmN0aW9uJyAmJiAhaXNPYmplY3QodmFsID0gZm4uY2FsbChpdCkpKXJldHVybiB2YWw7XG4gIHRocm93IFR5cGVFcnJvcihcIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZVwiKTtcbn07IiwidmFyIGlkID0gMFxuICAsIHB4ID0gTWF0aC5yYW5kb20oKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oa2V5KXtcbiAgcmV0dXJuICdTeW1ib2woJy5jb25jYXQoa2V5ID09PSB1bmRlZmluZWQgPyAnJyA6IGtleSwgJylfJywgKCsraWQgKyBweCkudG9TdHJpbmcoMzYpKTtcbn07IiwidmFyIGdsb2JhbCAgICAgICAgID0gcmVxdWlyZSgnLi9fZ2xvYmFsJylcbiAgLCBjb3JlICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2NvcmUnKVxuICAsIExJQlJBUlkgICAgICAgID0gcmVxdWlyZSgnLi9fbGlicmFyeScpXG4gICwgd2tzRXh0ICAgICAgICAgPSByZXF1aXJlKCcuL193a3MtZXh0JylcbiAgLCBkZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpLmY7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG5hbWUpe1xuICB2YXIgJFN5bWJvbCA9IGNvcmUuU3ltYm9sIHx8IChjb3JlLlN5bWJvbCA9IExJQlJBUlkgPyB7fSA6IGdsb2JhbC5TeW1ib2wgfHwge30pO1xuICBpZihuYW1lLmNoYXJBdCgwKSAhPSAnXycgJiYgIShuYW1lIGluICRTeW1ib2wpKWRlZmluZVByb3BlcnR5KCRTeW1ib2wsIG5hbWUsIHt2YWx1ZTogd2tzRXh0LmYobmFtZSl9KTtcbn07IiwiZXhwb3J0cy5mID0gcmVxdWlyZSgnLi9fd2tzJyk7IiwidmFyIHN0b3JlICAgICAgPSByZXF1aXJlKCcuL19zaGFyZWQnKSgnd2tzJylcbiAgLCB1aWQgICAgICAgID0gcmVxdWlyZSgnLi9fdWlkJylcbiAgLCBTeW1ib2wgICAgID0gcmVxdWlyZSgnLi9fZ2xvYmFsJykuU3ltYm9sXG4gICwgVVNFX1NZTUJPTCA9IHR5cGVvZiBTeW1ib2wgPT0gJ2Z1bmN0aW9uJztcblxudmFyICRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihuYW1lKXtcbiAgcmV0dXJuIHN0b3JlW25hbWVdIHx8IChzdG9yZVtuYW1lXSA9XG4gICAgVVNFX1NZTUJPTCAmJiBTeW1ib2xbbmFtZV0gfHwgKFVTRV9TWU1CT0wgPyBTeW1ib2wgOiB1aWQpKCdTeW1ib2wuJyArIG5hbWUpKTtcbn07XG5cbiRleHBvcnRzLnN0b3JlID0gc3RvcmU7IiwiJ3VzZSBzdHJpY3QnO1xudmFyIGFkZFRvVW5zY29wYWJsZXMgPSByZXF1aXJlKCcuL19hZGQtdG8tdW5zY29wYWJsZXMnKVxuICAsIHN0ZXAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19pdGVyLXN0ZXAnKVxuICAsIEl0ZXJhdG9ycyAgICAgICAgPSByZXF1aXJlKCcuL19pdGVyYXRvcnMnKVxuICAsIHRvSU9iamVjdCAgICAgICAgPSByZXF1aXJlKCcuL190by1pb2JqZWN0Jyk7XG5cbi8vIDIyLjEuMy40IEFycmF5LnByb3RvdHlwZS5lbnRyaWVzKClcbi8vIDIyLjEuMy4xMyBBcnJheS5wcm90b3R5cGUua2V5cygpXG4vLyAyMi4xLjMuMjkgQXJyYXkucHJvdG90eXBlLnZhbHVlcygpXG4vLyAyMi4xLjMuMzAgQXJyYXkucHJvdG90eXBlW0BAaXRlcmF0b3JdKClcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9faXRlci1kZWZpbmUnKShBcnJheSwgJ0FycmF5JywgZnVuY3Rpb24oaXRlcmF0ZWQsIGtpbmQpe1xuICB0aGlzLl90ID0gdG9JT2JqZWN0KGl0ZXJhdGVkKTsgLy8gdGFyZ2V0XG4gIHRoaXMuX2kgPSAwOyAgICAgICAgICAgICAgICAgICAvLyBuZXh0IGluZGV4XG4gIHRoaXMuX2sgPSBraW5kOyAgICAgICAgICAgICAgICAvLyBraW5kXG4vLyAyMi4xLjUuMi4xICVBcnJheUl0ZXJhdG9yUHJvdG90eXBlJS5uZXh0KClcbn0sIGZ1bmN0aW9uKCl7XG4gIHZhciBPICAgICA9IHRoaXMuX3RcbiAgICAsIGtpbmQgID0gdGhpcy5fa1xuICAgICwgaW5kZXggPSB0aGlzLl9pKys7XG4gIGlmKCFPIHx8IGluZGV4ID49IE8ubGVuZ3RoKXtcbiAgICB0aGlzLl90ID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiBzdGVwKDEpO1xuICB9XG4gIGlmKGtpbmQgPT0gJ2tleXMnICApcmV0dXJuIHN0ZXAoMCwgaW5kZXgpO1xuICBpZihraW5kID09ICd2YWx1ZXMnKXJldHVybiBzdGVwKDAsIE9baW5kZXhdKTtcbiAgcmV0dXJuIHN0ZXAoMCwgW2luZGV4LCBPW2luZGV4XV0pO1xufSwgJ3ZhbHVlcycpO1xuXG4vLyBhcmd1bWVudHNMaXN0W0BAaXRlcmF0b3JdIGlzICVBcnJheVByb3RvX3ZhbHVlcyUgKDkuNC40LjYsIDkuNC40LjcpXG5JdGVyYXRvcnMuQXJndW1lbnRzID0gSXRlcmF0b3JzLkFycmF5O1xuXG5hZGRUb1Vuc2NvcGFibGVzKCdrZXlzJyk7XG5hZGRUb1Vuc2NvcGFibGVzKCd2YWx1ZXMnKTtcbmFkZFRvVW5zY29wYWJsZXMoJ2VudHJpZXMnKTsiLCJ2YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4vLyAxOS4xLjIuMiAvIDE1LjIuMy41IE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSlcbiRleHBvcnQoJGV4cG9ydC5TLCAnT2JqZWN0Jywge2NyZWF0ZTogcmVxdWlyZSgnLi9fb2JqZWN0LWNyZWF0ZScpfSk7IiwidmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTtcbi8vIDE5LjEuMi40IC8gMTUuMi4zLjYgT2JqZWN0LmRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpXG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFyZXF1aXJlKCcuL19kZXNjcmlwdG9ycycpLCAnT2JqZWN0Jywge2RlZmluZVByb3BlcnR5OiByZXF1aXJlKCcuL19vYmplY3QtZHAnKS5mfSk7IiwiLy8gMTkuMS4yLjUgT2JqZWN0LmZyZWV6ZShPKVxudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9faXMtb2JqZWN0JylcbiAgLCBtZXRhICAgICA9IHJlcXVpcmUoJy4vX21ldGEnKS5vbkZyZWV6ZTtcblxucmVxdWlyZSgnLi9fb2JqZWN0LXNhcCcpKCdmcmVlemUnLCBmdW5jdGlvbigkZnJlZXplKXtcbiAgcmV0dXJuIGZ1bmN0aW9uIGZyZWV6ZShpdCl7XG4gICAgcmV0dXJuICRmcmVlemUgJiYgaXNPYmplY3QoaXQpID8gJGZyZWV6ZShtZXRhKGl0KSkgOiBpdDtcbiAgfTtcbn0pOyIsIi8vIDE5LjEuMi45IE9iamVjdC5nZXRQcm90b3R5cGVPZihPKVxudmFyIHRvT2JqZWN0ICAgICAgICA9IHJlcXVpcmUoJy4vX3RvLW9iamVjdCcpXG4gICwgJGdldFByb3RvdHlwZU9mID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdwbycpO1xuXG5yZXF1aXJlKCcuL19vYmplY3Qtc2FwJykoJ2dldFByb3RvdHlwZU9mJywgZnVuY3Rpb24oKXtcbiAgcmV0dXJuIGZ1bmN0aW9uIGdldFByb3RvdHlwZU9mKGl0KXtcbiAgICByZXR1cm4gJGdldFByb3RvdHlwZU9mKHRvT2JqZWN0KGl0KSk7XG4gIH07XG59KTsiLCIvLyAxOS4xLjIuMTQgT2JqZWN0LmtleXMoTylcbnZhciB0b09iamVjdCA9IHJlcXVpcmUoJy4vX3RvLW9iamVjdCcpXG4gICwgJGtleXMgICAgPSByZXF1aXJlKCcuL19vYmplY3Qta2V5cycpO1xuXG5yZXF1aXJlKCcuL19vYmplY3Qtc2FwJykoJ2tleXMnLCBmdW5jdGlvbigpe1xuICByZXR1cm4gZnVuY3Rpb24ga2V5cyhpdCl7XG4gICAgcmV0dXJuICRrZXlzKHRvT2JqZWN0KGl0KSk7XG4gIH07XG59KTsiLCIvLyAxOS4xLjMuMTkgT2JqZWN0LnNldFByb3RvdHlwZU9mKE8sIHByb3RvKVxudmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTtcbiRleHBvcnQoJGV4cG9ydC5TLCAnT2JqZWN0Jywge3NldFByb3RvdHlwZU9mOiByZXF1aXJlKCcuL19zZXQtcHJvdG8nKS5zZXR9KTsiLCIiLCIndXNlIHN0cmljdCc7XG52YXIgJGF0ICA9IHJlcXVpcmUoJy4vX3N0cmluZy1hdCcpKHRydWUpO1xuXG4vLyAyMS4xLjMuMjcgU3RyaW5nLnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpXG5yZXF1aXJlKCcuL19pdGVyLWRlZmluZScpKFN0cmluZywgJ1N0cmluZycsIGZ1bmN0aW9uKGl0ZXJhdGVkKXtcbiAgdGhpcy5fdCA9IFN0cmluZyhpdGVyYXRlZCk7IC8vIHRhcmdldFxuICB0aGlzLl9pID0gMDsgICAgICAgICAgICAgICAgLy8gbmV4dCBpbmRleFxuLy8gMjEuMS41LjIuMSAlU3RyaW5nSXRlcmF0b3JQcm90b3R5cGUlLm5leHQoKVxufSwgZnVuY3Rpb24oKXtcbiAgdmFyIE8gICAgID0gdGhpcy5fdFxuICAgICwgaW5kZXggPSB0aGlzLl9pXG4gICAgLCBwb2ludDtcbiAgaWYoaW5kZXggPj0gTy5sZW5ndGgpcmV0dXJuIHt2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlfTtcbiAgcG9pbnQgPSAkYXQoTywgaW5kZXgpO1xuICB0aGlzLl9pICs9IHBvaW50Lmxlbmd0aDtcbiAgcmV0dXJuIHt2YWx1ZTogcG9pbnQsIGRvbmU6IGZhbHNlfTtcbn0pOyIsIid1c2Ugc3RyaWN0Jztcbi8vIEVDTUFTY3JpcHQgNiBzeW1ib2xzIHNoaW1cbnZhciBnbG9iYWwgICAgICAgICA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpXG4gICwgaGFzICAgICAgICAgICAgPSByZXF1aXJlKCcuL19oYXMnKVxuICAsIERFU0NSSVBUT1JTICAgID0gcmVxdWlyZSgnLi9fZGVzY3JpcHRvcnMnKVxuICAsICRleHBvcnQgICAgICAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCByZWRlZmluZSAgICAgICA9IHJlcXVpcmUoJy4vX3JlZGVmaW5lJylcbiAgLCBNRVRBICAgICAgICAgICA9IHJlcXVpcmUoJy4vX21ldGEnKS5LRVlcbiAgLCAkZmFpbHMgICAgICAgICA9IHJlcXVpcmUoJy4vX2ZhaWxzJylcbiAgLCBzaGFyZWQgICAgICAgICA9IHJlcXVpcmUoJy4vX3NoYXJlZCcpXG4gICwgc2V0VG9TdHJpbmdUYWcgPSByZXF1aXJlKCcuL19zZXQtdG8tc3RyaW5nLXRhZycpXG4gICwgdWlkICAgICAgICAgICAgPSByZXF1aXJlKCcuL191aWQnKVxuICAsIHdrcyAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fd2tzJylcbiAgLCB3a3NFeHQgICAgICAgICA9IHJlcXVpcmUoJy4vX3drcy1leHQnKVxuICAsIHdrc0RlZmluZSAgICAgID0gcmVxdWlyZSgnLi9fd2tzLWRlZmluZScpXG4gICwga2V5T2YgICAgICAgICAgPSByZXF1aXJlKCcuL19rZXlvZicpXG4gICwgZW51bUtleXMgICAgICAgPSByZXF1aXJlKCcuL19lbnVtLWtleXMnKVxuICAsIGlzQXJyYXkgICAgICAgID0gcmVxdWlyZSgnLi9faXMtYXJyYXknKVxuICAsIGFuT2JqZWN0ICAgICAgID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0JylcbiAgLCB0b0lPYmplY3QgICAgICA9IHJlcXVpcmUoJy4vX3RvLWlvYmplY3QnKVxuICAsIHRvUHJpbWl0aXZlICAgID0gcmVxdWlyZSgnLi9fdG8tcHJpbWl0aXZlJylcbiAgLCBjcmVhdGVEZXNjICAgICA9IHJlcXVpcmUoJy4vX3Byb3BlcnR5LWRlc2MnKVxuICAsIF9jcmVhdGUgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWNyZWF0ZScpXG4gICwgZ09QTkV4dCAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZ29wbi1leHQnKVxuICAsICRHT1BEICAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdvcGQnKVxuICAsICREUCAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWRwJylcbiAgLCAka2V5cyAgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1rZXlzJylcbiAgLCBnT1BEICAgICAgICAgICA9ICRHT1BELmZcbiAgLCBkUCAgICAgICAgICAgICA9ICREUC5mXG4gICwgZ09QTiAgICAgICAgICAgPSBnT1BORXh0LmZcbiAgLCAkU3ltYm9sICAgICAgICA9IGdsb2JhbC5TeW1ib2xcbiAgLCAkSlNPTiAgICAgICAgICA9IGdsb2JhbC5KU09OXG4gICwgX3N0cmluZ2lmeSAgICAgPSAkSlNPTiAmJiAkSlNPTi5zdHJpbmdpZnlcbiAgLCBQUk9UT1RZUEUgICAgICA9ICdwcm90b3R5cGUnXG4gICwgSElEREVOICAgICAgICAgPSB3a3MoJ19oaWRkZW4nKVxuICAsIFRPX1BSSU1JVElWRSAgID0gd2tzKCd0b1ByaW1pdGl2ZScpXG4gICwgaXNFbnVtICAgICAgICAgPSB7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZVxuICAsIFN5bWJvbFJlZ2lzdHJ5ID0gc2hhcmVkKCdzeW1ib2wtcmVnaXN0cnknKVxuICAsIEFsbFN5bWJvbHMgICAgID0gc2hhcmVkKCdzeW1ib2xzJylcbiAgLCBPUFN5bWJvbHMgICAgICA9IHNoYXJlZCgnb3Atc3ltYm9scycpXG4gICwgT2JqZWN0UHJvdG8gICAgPSBPYmplY3RbUFJPVE9UWVBFXVxuICAsIFVTRV9OQVRJVkUgICAgID0gdHlwZW9mICRTeW1ib2wgPT0gJ2Z1bmN0aW9uJ1xuICAsIFFPYmplY3QgICAgICAgID0gZ2xvYmFsLlFPYmplY3Q7XG4vLyBEb24ndCB1c2Ugc2V0dGVycyBpbiBRdCBTY3JpcHQsIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy8xNzNcbnZhciBzZXR0ZXIgPSAhUU9iamVjdCB8fCAhUU9iamVjdFtQUk9UT1RZUEVdIHx8ICFRT2JqZWN0W1BST1RPVFlQRV0uZmluZENoaWxkO1xuXG4vLyBmYWxsYmFjayBmb3Igb2xkIEFuZHJvaWQsIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD02ODdcbnZhciBzZXRTeW1ib2xEZXNjID0gREVTQ1JJUFRPUlMgJiYgJGZhaWxzKGZ1bmN0aW9uKCl7XG4gIHJldHVybiBfY3JlYXRlKGRQKHt9LCAnYScsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiBkUCh0aGlzLCAnYScsIHt2YWx1ZTogN30pLmE7IH1cbiAgfSkpLmEgIT0gNztcbn0pID8gZnVuY3Rpb24oaXQsIGtleSwgRCl7XG4gIHZhciBwcm90b0Rlc2MgPSBnT1BEKE9iamVjdFByb3RvLCBrZXkpO1xuICBpZihwcm90b0Rlc2MpZGVsZXRlIE9iamVjdFByb3RvW2tleV07XG4gIGRQKGl0LCBrZXksIEQpO1xuICBpZihwcm90b0Rlc2MgJiYgaXQgIT09IE9iamVjdFByb3RvKWRQKE9iamVjdFByb3RvLCBrZXksIHByb3RvRGVzYyk7XG59IDogZFA7XG5cbnZhciB3cmFwID0gZnVuY3Rpb24odGFnKXtcbiAgdmFyIHN5bSA9IEFsbFN5bWJvbHNbdGFnXSA9IF9jcmVhdGUoJFN5bWJvbFtQUk9UT1RZUEVdKTtcbiAgc3ltLl9rID0gdGFnO1xuICByZXR1cm4gc3ltO1xufTtcblxudmFyIGlzU3ltYm9sID0gVVNFX05BVElWRSAmJiB0eXBlb2YgJFN5bWJvbC5pdGVyYXRvciA9PSAnc3ltYm9sJyA/IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIHR5cGVvZiBpdCA9PSAnc3ltYm9sJztcbn0gOiBmdW5jdGlvbihpdCl7XG4gIHJldHVybiBpdCBpbnN0YW5jZW9mICRTeW1ib2w7XG59O1xuXG52YXIgJGRlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoaXQsIGtleSwgRCl7XG4gIGlmKGl0ID09PSBPYmplY3RQcm90bykkZGVmaW5lUHJvcGVydHkoT1BTeW1ib2xzLCBrZXksIEQpO1xuICBhbk9iamVjdChpdCk7XG4gIGtleSA9IHRvUHJpbWl0aXZlKGtleSwgdHJ1ZSk7XG4gIGFuT2JqZWN0KEQpO1xuICBpZihoYXMoQWxsU3ltYm9scywga2V5KSl7XG4gICAgaWYoIUQuZW51bWVyYWJsZSl7XG4gICAgICBpZighaGFzKGl0LCBISURERU4pKWRQKGl0LCBISURERU4sIGNyZWF0ZURlc2MoMSwge30pKTtcbiAgICAgIGl0W0hJRERFTl1ba2V5XSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmKGhhcyhpdCwgSElEREVOKSAmJiBpdFtISURERU5dW2tleV0paXRbSElEREVOXVtrZXldID0gZmFsc2U7XG4gICAgICBEID0gX2NyZWF0ZShELCB7ZW51bWVyYWJsZTogY3JlYXRlRGVzYygwLCBmYWxzZSl9KTtcbiAgICB9IHJldHVybiBzZXRTeW1ib2xEZXNjKGl0LCBrZXksIEQpO1xuICB9IHJldHVybiBkUChpdCwga2V5LCBEKTtcbn07XG52YXIgJGRlZmluZVByb3BlcnRpZXMgPSBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKGl0LCBQKXtcbiAgYW5PYmplY3QoaXQpO1xuICB2YXIga2V5cyA9IGVudW1LZXlzKFAgPSB0b0lPYmplY3QoUCkpXG4gICAgLCBpICAgID0gMFxuICAgICwgbCA9IGtleXMubGVuZ3RoXG4gICAgLCBrZXk7XG4gIHdoaWxlKGwgPiBpKSRkZWZpbmVQcm9wZXJ0eShpdCwga2V5ID0ga2V5c1tpKytdLCBQW2tleV0pO1xuICByZXR1cm4gaXQ7XG59O1xudmFyICRjcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoaXQsIFApe1xuICByZXR1cm4gUCA9PT0gdW5kZWZpbmVkID8gX2NyZWF0ZShpdCkgOiAkZGVmaW5lUHJvcGVydGllcyhfY3JlYXRlKGl0KSwgUCk7XG59O1xudmFyICRwcm9wZXJ0eUlzRW51bWVyYWJsZSA9IGZ1bmN0aW9uIHByb3BlcnR5SXNFbnVtZXJhYmxlKGtleSl7XG4gIHZhciBFID0gaXNFbnVtLmNhbGwodGhpcywga2V5ID0gdG9QcmltaXRpdmUoa2V5LCB0cnVlKSk7XG4gIGlmKHRoaXMgPT09IE9iamVjdFByb3RvICYmIGhhcyhBbGxTeW1ib2xzLCBrZXkpICYmICFoYXMoT1BTeW1ib2xzLCBrZXkpKXJldHVybiBmYWxzZTtcbiAgcmV0dXJuIEUgfHwgIWhhcyh0aGlzLCBrZXkpIHx8ICFoYXMoQWxsU3ltYm9scywga2V5KSB8fCBoYXModGhpcywgSElEREVOKSAmJiB0aGlzW0hJRERFTl1ba2V5XSA/IEUgOiB0cnVlO1xufTtcbnZhciAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGl0LCBrZXkpe1xuICBpdCAgPSB0b0lPYmplY3QoaXQpO1xuICBrZXkgPSB0b1ByaW1pdGl2ZShrZXksIHRydWUpO1xuICBpZihpdCA9PT0gT2JqZWN0UHJvdG8gJiYgaGFzKEFsbFN5bWJvbHMsIGtleSkgJiYgIWhhcyhPUFN5bWJvbHMsIGtleSkpcmV0dXJuO1xuICB2YXIgRCA9IGdPUEQoaXQsIGtleSk7XG4gIGlmKEQgJiYgaGFzKEFsbFN5bWJvbHMsIGtleSkgJiYgIShoYXMoaXQsIEhJRERFTikgJiYgaXRbSElEREVOXVtrZXldKSlELmVudW1lcmFibGUgPSB0cnVlO1xuICByZXR1cm4gRDtcbn07XG52YXIgJGdldE93blByb3BlcnR5TmFtZXMgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKGl0KXtcbiAgdmFyIG5hbWVzICA9IGdPUE4odG9JT2JqZWN0KGl0KSlcbiAgICAsIHJlc3VsdCA9IFtdXG4gICAgLCBpICAgICAgPSAwXG4gICAgLCBrZXk7XG4gIHdoaWxlKG5hbWVzLmxlbmd0aCA+IGkpe1xuICAgIGlmKCFoYXMoQWxsU3ltYm9scywga2V5ID0gbmFtZXNbaSsrXSkgJiYga2V5ICE9IEhJRERFTiAmJiBrZXkgIT0gTUVUQSlyZXN1bHQucHVzaChrZXkpO1xuICB9IHJldHVybiByZXN1bHQ7XG59O1xudmFyICRnZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMoaXQpe1xuICB2YXIgSVNfT1AgID0gaXQgPT09IE9iamVjdFByb3RvXG4gICAgLCBuYW1lcyAgPSBnT1BOKElTX09QID8gT1BTeW1ib2xzIDogdG9JT2JqZWN0KGl0KSlcbiAgICAsIHJlc3VsdCA9IFtdXG4gICAgLCBpICAgICAgPSAwXG4gICAgLCBrZXk7XG4gIHdoaWxlKG5hbWVzLmxlbmd0aCA+IGkpe1xuICAgIGlmKGhhcyhBbGxTeW1ib2xzLCBrZXkgPSBuYW1lc1tpKytdKSAmJiAoSVNfT1AgPyBoYXMoT2JqZWN0UHJvdG8sIGtleSkgOiB0cnVlKSlyZXN1bHQucHVzaChBbGxTeW1ib2xzW2tleV0pO1xuICB9IHJldHVybiByZXN1bHQ7XG59O1xuXG4vLyAxOS40LjEuMSBTeW1ib2woW2Rlc2NyaXB0aW9uXSlcbmlmKCFVU0VfTkFUSVZFKXtcbiAgJFN5bWJvbCA9IGZ1bmN0aW9uIFN5bWJvbCgpe1xuICAgIGlmKHRoaXMgaW5zdGFuY2VvZiAkU3ltYm9sKXRocm93IFR5cGVFcnJvcignU3ltYm9sIGlzIG5vdCBhIGNvbnN0cnVjdG9yIScpO1xuICAgIHZhciB0YWcgPSB1aWQoYXJndW1lbnRzLmxlbmd0aCA+IDAgPyBhcmd1bWVudHNbMF0gOiB1bmRlZmluZWQpO1xuICAgIHZhciAkc2V0ID0gZnVuY3Rpb24odmFsdWUpe1xuICAgICAgaWYodGhpcyA9PT0gT2JqZWN0UHJvdG8pJHNldC5jYWxsKE9QU3ltYm9scywgdmFsdWUpO1xuICAgICAgaWYoaGFzKHRoaXMsIEhJRERFTikgJiYgaGFzKHRoaXNbSElEREVOXSwgdGFnKSl0aGlzW0hJRERFTl1bdGFnXSA9IGZhbHNlO1xuICAgICAgc2V0U3ltYm9sRGVzYyh0aGlzLCB0YWcsIGNyZWF0ZURlc2MoMSwgdmFsdWUpKTtcbiAgICB9O1xuICAgIGlmKERFU0NSSVBUT1JTICYmIHNldHRlcilzZXRTeW1ib2xEZXNjKE9iamVjdFByb3RvLCB0YWcsIHtjb25maWd1cmFibGU6IHRydWUsIHNldDogJHNldH0pO1xuICAgIHJldHVybiB3cmFwKHRhZyk7XG4gIH07XG4gIHJlZGVmaW5lKCRTeW1ib2xbUFJPVE9UWVBFXSwgJ3RvU3RyaW5nJywgZnVuY3Rpb24gdG9TdHJpbmcoKXtcbiAgICByZXR1cm4gdGhpcy5faztcbiAgfSk7XG5cbiAgJEdPUEQuZiA9ICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG4gICREUC5mICAgPSAkZGVmaW5lUHJvcGVydHk7XG4gIHJlcXVpcmUoJy4vX29iamVjdC1nb3BuJykuZiA9IGdPUE5FeHQuZiA9ICRnZXRPd25Qcm9wZXJ0eU5hbWVzO1xuICByZXF1aXJlKCcuL19vYmplY3QtcGllJykuZiAgPSAkcHJvcGVydHlJc0VudW1lcmFibGU7XG4gIHJlcXVpcmUoJy4vX29iamVjdC1nb3BzJykuZiA9ICRnZXRPd25Qcm9wZXJ0eVN5bWJvbHM7XG5cbiAgaWYoREVTQ1JJUFRPUlMgJiYgIXJlcXVpcmUoJy4vX2xpYnJhcnknKSl7XG4gICAgcmVkZWZpbmUoT2JqZWN0UHJvdG8sICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsICRwcm9wZXJ0eUlzRW51bWVyYWJsZSwgdHJ1ZSk7XG4gIH1cblxuICB3a3NFeHQuZiA9IGZ1bmN0aW9uKG5hbWUpe1xuICAgIHJldHVybiB3cmFwKHdrcyhuYW1lKSk7XG4gIH1cbn1cblxuJGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LlcgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwge1N5bWJvbDogJFN5bWJvbH0pO1xuXG5mb3IodmFyIHN5bWJvbHMgPSAoXG4gIC8vIDE5LjQuMi4yLCAxOS40LjIuMywgMTkuNC4yLjQsIDE5LjQuMi42LCAxOS40LjIuOCwgMTkuNC4yLjksIDE5LjQuMi4xMCwgMTkuNC4yLjExLCAxOS40LjIuMTIsIDE5LjQuMi4xMywgMTkuNC4yLjE0XG4gICdoYXNJbnN0YW5jZSxpc0NvbmNhdFNwcmVhZGFibGUsaXRlcmF0b3IsbWF0Y2gscmVwbGFjZSxzZWFyY2gsc3BlY2llcyxzcGxpdCx0b1ByaW1pdGl2ZSx0b1N0cmluZ1RhZyx1bnNjb3BhYmxlcydcbikuc3BsaXQoJywnKSwgaSA9IDA7IHN5bWJvbHMubGVuZ3RoID4gaTsgKXdrcyhzeW1ib2xzW2krK10pO1xuXG5mb3IodmFyIHN5bWJvbHMgPSAka2V5cyh3a3Muc3RvcmUpLCBpID0gMDsgc3ltYm9scy5sZW5ndGggPiBpOyApd2tzRGVmaW5lKHN5bWJvbHNbaSsrXSk7XG5cbiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsICdTeW1ib2wnLCB7XG4gIC8vIDE5LjQuMi4xIFN5bWJvbC5mb3Ioa2V5KVxuICAnZm9yJzogZnVuY3Rpb24oa2V5KXtcbiAgICByZXR1cm4gaGFzKFN5bWJvbFJlZ2lzdHJ5LCBrZXkgKz0gJycpXG4gICAgICA/IFN5bWJvbFJlZ2lzdHJ5W2tleV1cbiAgICAgIDogU3ltYm9sUmVnaXN0cnlba2V5XSA9ICRTeW1ib2woa2V5KTtcbiAgfSxcbiAgLy8gMTkuNC4yLjUgU3ltYm9sLmtleUZvcihzeW0pXG4gIGtleUZvcjogZnVuY3Rpb24ga2V5Rm9yKGtleSl7XG4gICAgaWYoaXNTeW1ib2woa2V5KSlyZXR1cm4ga2V5T2YoU3ltYm9sUmVnaXN0cnksIGtleSk7XG4gICAgdGhyb3cgVHlwZUVycm9yKGtleSArICcgaXMgbm90IGEgc3ltYm9sIScpO1xuICB9LFxuICB1c2VTZXR0ZXI6IGZ1bmN0aW9uKCl7IHNldHRlciA9IHRydWU7IH0sXG4gIHVzZVNpbXBsZTogZnVuY3Rpb24oKXsgc2V0dGVyID0gZmFsc2U7IH1cbn0pO1xuXG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCAnT2JqZWN0Jywge1xuICAvLyAxOS4xLjIuMiBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pXG4gIGNyZWF0ZTogJGNyZWF0ZSxcbiAgLy8gMTkuMS4yLjQgT2JqZWN0LmRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpXG4gIGRlZmluZVByb3BlcnR5OiAkZGVmaW5lUHJvcGVydHksXG4gIC8vIDE5LjEuMi4zIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKE8sIFByb3BlcnRpZXMpXG4gIGRlZmluZVByb3BlcnRpZXM6ICRkZWZpbmVQcm9wZXJ0aWVzLFxuICAvLyAxOS4xLjIuNiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApXG4gIGdldE93blByb3BlcnR5RGVzY3JpcHRvcjogJGdldE93blByb3BlcnR5RGVzY3JpcHRvcixcbiAgLy8gMTkuMS4yLjcgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTylcbiAgZ2V0T3duUHJvcGVydHlOYW1lczogJGdldE93blByb3BlcnR5TmFtZXMsXG4gIC8vIDE5LjEuMi44IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoTylcbiAgZ2V0T3duUHJvcGVydHlTeW1ib2xzOiAkZ2V0T3duUHJvcGVydHlTeW1ib2xzXG59KTtcblxuLy8gMjQuMy4yIEpTT04uc3RyaW5naWZ5KHZhbHVlIFssIHJlcGxhY2VyIFssIHNwYWNlXV0pXG4kSlNPTiAmJiAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICghVVNFX05BVElWRSB8fCAkZmFpbHMoZnVuY3Rpb24oKXtcbiAgdmFyIFMgPSAkU3ltYm9sKCk7XG4gIC8vIE1TIEVkZ2UgY29udmVydHMgc3ltYm9sIHZhbHVlcyB0byBKU09OIGFzIHt9XG4gIC8vIFdlYktpdCBjb252ZXJ0cyBzeW1ib2wgdmFsdWVzIHRvIEpTT04gYXMgbnVsbFxuICAvLyBWOCB0aHJvd3Mgb24gYm94ZWQgc3ltYm9sc1xuICByZXR1cm4gX3N0cmluZ2lmeShbU10pICE9ICdbbnVsbF0nIHx8IF9zdHJpbmdpZnkoe2E6IFN9KSAhPSAne30nIHx8IF9zdHJpbmdpZnkoT2JqZWN0KFMpKSAhPSAne30nO1xufSkpLCAnSlNPTicsIHtcbiAgc3RyaW5naWZ5OiBmdW5jdGlvbiBzdHJpbmdpZnkoaXQpe1xuICAgIGlmKGl0ID09PSB1bmRlZmluZWQgfHwgaXNTeW1ib2woaXQpKXJldHVybjsgLy8gSUU4IHJldHVybnMgc3RyaW5nIG9uIHVuZGVmaW5lZFxuICAgIHZhciBhcmdzID0gW2l0XVxuICAgICAgLCBpICAgID0gMVxuICAgICAgLCByZXBsYWNlciwgJHJlcGxhY2VyO1xuICAgIHdoaWxlKGFyZ3VtZW50cy5sZW5ndGggPiBpKWFyZ3MucHVzaChhcmd1bWVudHNbaSsrXSk7XG4gICAgcmVwbGFjZXIgPSBhcmdzWzFdO1xuICAgIGlmKHR5cGVvZiByZXBsYWNlciA9PSAnZnVuY3Rpb24nKSRyZXBsYWNlciA9IHJlcGxhY2VyO1xuICAgIGlmKCRyZXBsYWNlciB8fCAhaXNBcnJheShyZXBsYWNlcikpcmVwbGFjZXIgPSBmdW5jdGlvbihrZXksIHZhbHVlKXtcbiAgICAgIGlmKCRyZXBsYWNlcil2YWx1ZSA9ICRyZXBsYWNlci5jYWxsKHRoaXMsIGtleSwgdmFsdWUpO1xuICAgICAgaWYoIWlzU3ltYm9sKHZhbHVlKSlyZXR1cm4gdmFsdWU7XG4gICAgfTtcbiAgICBhcmdzWzFdID0gcmVwbGFjZXI7XG4gICAgcmV0dXJuIF9zdHJpbmdpZnkuYXBwbHkoJEpTT04sIGFyZ3MpO1xuICB9XG59KTtcblxuLy8gMTkuNC4zLjQgU3ltYm9sLnByb3RvdHlwZVtAQHRvUHJpbWl0aXZlXShoaW50KVxuJFN5bWJvbFtQUk9UT1RZUEVdW1RPX1BSSU1JVElWRV0gfHwgcmVxdWlyZSgnLi9faGlkZScpKCRTeW1ib2xbUFJPVE9UWVBFXSwgVE9fUFJJTUlUSVZFLCAkU3ltYm9sW1BST1RPVFlQRV0udmFsdWVPZik7XG4vLyAxOS40LjMuNSBTeW1ib2wucHJvdG90eXBlW0BAdG9TdHJpbmdUYWddXG5zZXRUb1N0cmluZ1RhZygkU3ltYm9sLCAnU3ltYm9sJyk7XG4vLyAyMC4yLjEuOSBNYXRoW0BAdG9TdHJpbmdUYWddXG5zZXRUb1N0cmluZ1RhZyhNYXRoLCAnTWF0aCcsIHRydWUpO1xuLy8gMjQuMy4zIEpTT05bQEB0b1N0cmluZ1RhZ11cbnNldFRvU3RyaW5nVGFnKGdsb2JhbC5KU09OLCAnSlNPTicsIHRydWUpOyIsInJlcXVpcmUoJy4vX3drcy1kZWZpbmUnKSgnYXN5bmNJdGVyYXRvcicpOyIsInJlcXVpcmUoJy4vX3drcy1kZWZpbmUnKSgnb2JzZXJ2YWJsZScpOyIsInJlcXVpcmUoJy4vZXM2LmFycmF5Lml0ZXJhdG9yJyk7XG52YXIgZ2xvYmFsICAgICAgICA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpXG4gICwgaGlkZSAgICAgICAgICA9IHJlcXVpcmUoJy4vX2hpZGUnKVxuICAsIEl0ZXJhdG9ycyAgICAgPSByZXF1aXJlKCcuL19pdGVyYXRvcnMnKVxuICAsIFRPX1NUUklOR19UQUcgPSByZXF1aXJlKCcuL193a3MnKSgndG9TdHJpbmdUYWcnKTtcblxuZm9yKHZhciBjb2xsZWN0aW9ucyA9IFsnTm9kZUxpc3QnLCAnRE9NVG9rZW5MaXN0JywgJ01lZGlhTGlzdCcsICdTdHlsZVNoZWV0TGlzdCcsICdDU1NSdWxlTGlzdCddLCBpID0gMDsgaSA8IDU7IGkrKyl7XG4gIHZhciBOQU1FICAgICAgID0gY29sbGVjdGlvbnNbaV1cbiAgICAsIENvbGxlY3Rpb24gPSBnbG9iYWxbTkFNRV1cbiAgICAsIHByb3RvICAgICAgPSBDb2xsZWN0aW9uICYmIENvbGxlY3Rpb24ucHJvdG90eXBlO1xuICBpZihwcm90byAmJiAhcHJvdG9bVE9fU1RSSU5HX1RBR10paGlkZShwcm90bywgVE9fU1RSSU5HX1RBRywgTkFNRSk7XG4gIEl0ZXJhdG9yc1tOQU1FXSA9IEl0ZXJhdG9ycy5BcnJheTtcbn0iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiLy8gVGhpcyBtZXRob2Qgb2Ygb2J0YWluaW5nIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0IG5lZWRzIHRvIGJlXG4vLyBrZXB0IGlkZW50aWNhbCB0byB0aGUgd2F5IGl0IGlzIG9idGFpbmVkIGluIHJ1bnRpbWUuanNcbnZhciBnID1cbiAgdHlwZW9mIGdsb2JhbCA9PT0gXCJvYmplY3RcIiA/IGdsb2JhbCA6XG4gIHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIgPyB3aW5kb3cgOlxuICB0eXBlb2Ygc2VsZiA9PT0gXCJvYmplY3RcIiA/IHNlbGYgOiB0aGlzO1xuXG4vLyBVc2UgYGdldE93blByb3BlcnR5TmFtZXNgIGJlY2F1c2Ugbm90IGFsbCBicm93c2VycyBzdXBwb3J0IGNhbGxpbmdcbi8vIGBoYXNPd25Qcm9wZXJ0eWAgb24gdGhlIGdsb2JhbCBgc2VsZmAgb2JqZWN0IGluIGEgd29ya2VyLiBTZWUgIzE4My5cbnZhciBoYWRSdW50aW1lID0gZy5yZWdlbmVyYXRvclJ1bnRpbWUgJiZcbiAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZykuaW5kZXhPZihcInJlZ2VuZXJhdG9yUnVudGltZVwiKSA+PSAwO1xuXG4vLyBTYXZlIHRoZSBvbGQgcmVnZW5lcmF0b3JSdW50aW1lIGluIGNhc2UgaXQgbmVlZHMgdG8gYmUgcmVzdG9yZWQgbGF0ZXIuXG52YXIgb2xkUnVudGltZSA9IGhhZFJ1bnRpbWUgJiYgZy5yZWdlbmVyYXRvclJ1bnRpbWU7XG5cbi8vIEZvcmNlIHJlZXZhbHV0YXRpb24gb2YgcnVudGltZS5qcy5cbmcucmVnZW5lcmF0b3JSdW50aW1lID0gdW5kZWZpbmVkO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuL3J1bnRpbWVcIik7XG5cbmlmIChoYWRSdW50aW1lKSB7XG4gIC8vIFJlc3RvcmUgdGhlIG9yaWdpbmFsIHJ1bnRpbWUuXG4gIGcucmVnZW5lcmF0b3JSdW50aW1lID0gb2xkUnVudGltZTtcbn0gZWxzZSB7XG4gIC8vIFJlbW92ZSB0aGUgZ2xvYmFsIHByb3BlcnR5IGFkZGVkIGJ5IHJ1bnRpbWUuanMuXG4gIHRyeSB7XG4gICAgZGVsZXRlIGcucmVnZW5lcmF0b3JSdW50aW1lO1xuICB9IGNhdGNoKGUpIHtcbiAgICBnLnJlZ2VuZXJhdG9yUnVudGltZSA9IHVuZGVmaW5lZDtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogaHR0cHM6Ly9yYXcuZ2l0aHViLmNvbS9mYWNlYm9vay9yZWdlbmVyYXRvci9tYXN0ZXIvTElDRU5TRSBmaWxlLiBBblxuICogYWRkaXRpb25hbCBncmFudCBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluXG4gKiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKi9cblxuIShmdW5jdGlvbihnbG9iYWwpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIE9wID0gT2JqZWN0LnByb3RvdHlwZTtcbiAgdmFyIGhhc093biA9IE9wLmhhc093blByb3BlcnR5O1xuICB2YXIgdW5kZWZpbmVkOyAvLyBNb3JlIGNvbXByZXNzaWJsZSB0aGFuIHZvaWQgMC5cbiAgdmFyICRTeW1ib2wgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgPyBTeW1ib2wgOiB7fTtcbiAgdmFyIGl0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5pdGVyYXRvciB8fCBcIkBAaXRlcmF0b3JcIjtcbiAgdmFyIHRvU3RyaW5nVGFnU3ltYm9sID0gJFN5bWJvbC50b1N0cmluZ1RhZyB8fCBcIkBAdG9TdHJpbmdUYWdcIjtcblxuICB2YXIgaW5Nb2R1bGUgPSB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiO1xuICB2YXIgcnVudGltZSA9IGdsb2JhbC5yZWdlbmVyYXRvclJ1bnRpbWU7XG4gIGlmIChydW50aW1lKSB7XG4gICAgaWYgKGluTW9kdWxlKSB7XG4gICAgICAvLyBJZiByZWdlbmVyYXRvclJ1bnRpbWUgaXMgZGVmaW5lZCBnbG9iYWxseSBhbmQgd2UncmUgaW4gYSBtb2R1bGUsXG4gICAgICAvLyBtYWtlIHRoZSBleHBvcnRzIG9iamVjdCBpZGVudGljYWwgdG8gcmVnZW5lcmF0b3JSdW50aW1lLlxuICAgICAgbW9kdWxlLmV4cG9ydHMgPSBydW50aW1lO1xuICAgIH1cbiAgICAvLyBEb24ndCBib3RoZXIgZXZhbHVhdGluZyB0aGUgcmVzdCBvZiB0aGlzIGZpbGUgaWYgdGhlIHJ1bnRpbWUgd2FzXG4gICAgLy8gYWxyZWFkeSBkZWZpbmVkIGdsb2JhbGx5LlxuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIERlZmluZSB0aGUgcnVudGltZSBnbG9iYWxseSAoYXMgZXhwZWN0ZWQgYnkgZ2VuZXJhdGVkIGNvZGUpIGFzIGVpdGhlclxuICAvLyBtb2R1bGUuZXhwb3J0cyAoaWYgd2UncmUgaW4gYSBtb2R1bGUpIG9yIGEgbmV3LCBlbXB0eSBvYmplY3QuXG4gIHJ1bnRpbWUgPSBnbG9iYWwucmVnZW5lcmF0b3JSdW50aW1lID0gaW5Nb2R1bGUgPyBtb2R1bGUuZXhwb3J0cyA6IHt9O1xuXG4gIGZ1bmN0aW9uIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpIHtcbiAgICAvLyBJZiBvdXRlckZuIHByb3ZpZGVkIGFuZCBvdXRlckZuLnByb3RvdHlwZSBpcyBhIEdlbmVyYXRvciwgdGhlbiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvci5cbiAgICB2YXIgcHJvdG9HZW5lcmF0b3IgPSBvdXRlckZuICYmIG91dGVyRm4ucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yID8gb3V0ZXJGbiA6IEdlbmVyYXRvcjtcbiAgICB2YXIgZ2VuZXJhdG9yID0gT2JqZWN0LmNyZWF0ZShwcm90b0dlbmVyYXRvci5wcm90b3R5cGUpO1xuICAgIHZhciBjb250ZXh0ID0gbmV3IENvbnRleHQodHJ5TG9jc0xpc3QgfHwgW10pO1xuXG4gICAgLy8gVGhlIC5faW52b2tlIG1ldGhvZCB1bmlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlIC5uZXh0LFxuICAgIC8vIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcy5cbiAgICBnZW5lcmF0b3IuX2ludm9rZSA9IG1ha2VJbnZva2VNZXRob2QoaW5uZXJGbiwgc2VsZiwgY29udGV4dCk7XG5cbiAgICByZXR1cm4gZ2VuZXJhdG9yO1xuICB9XG4gIHJ1bnRpbWUud3JhcCA9IHdyYXA7XG5cbiAgLy8gVHJ5L2NhdGNoIGhlbHBlciB0byBtaW5pbWl6ZSBkZW9wdGltaXphdGlvbnMuIFJldHVybnMgYSBjb21wbGV0aW9uXG4gIC8vIHJlY29yZCBsaWtlIGNvbnRleHQudHJ5RW50cmllc1tpXS5jb21wbGV0aW9uLiBUaGlzIGludGVyZmFjZSBjb3VsZFxuICAvLyBoYXZlIGJlZW4gKGFuZCB3YXMgcHJldmlvdXNseSkgZGVzaWduZWQgdG8gdGFrZSBhIGNsb3N1cmUgdG8gYmVcbiAgLy8gaW52b2tlZCB3aXRob3V0IGFyZ3VtZW50cywgYnV0IGluIGFsbCB0aGUgY2FzZXMgd2UgY2FyZSBhYm91dCB3ZVxuICAvLyBhbHJlYWR5IGhhdmUgYW4gZXhpc3RpbmcgbWV0aG9kIHdlIHdhbnQgdG8gY2FsbCwgc28gdGhlcmUncyBubyBuZWVkXG4gIC8vIHRvIGNyZWF0ZSBhIG5ldyBmdW5jdGlvbiBvYmplY3QuIFdlIGNhbiBldmVuIGdldCBhd2F5IHdpdGggYXNzdW1pbmdcbiAgLy8gdGhlIG1ldGhvZCB0YWtlcyBleGFjdGx5IG9uZSBhcmd1bWVudCwgc2luY2UgdGhhdCBoYXBwZW5zIHRvIGJlIHRydWVcbiAgLy8gaW4gZXZlcnkgY2FzZSwgc28gd2UgZG9uJ3QgaGF2ZSB0byB0b3VjaCB0aGUgYXJndW1lbnRzIG9iamVjdC4gVGhlXG4gIC8vIG9ubHkgYWRkaXRpb25hbCBhbGxvY2F0aW9uIHJlcXVpcmVkIGlzIHRoZSBjb21wbGV0aW9uIHJlY29yZCwgd2hpY2hcbiAgLy8gaGFzIGEgc3RhYmxlIHNoYXBlIGFuZCBzbyBob3BlZnVsbHkgc2hvdWxkIGJlIGNoZWFwIHRvIGFsbG9jYXRlLlxuICBmdW5jdGlvbiB0cnlDYXRjaChmbiwgb2JqLCBhcmcpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJub3JtYWxcIiwgYXJnOiBmbi5jYWxsKG9iaiwgYXJnKSB9O1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJ0aHJvd1wiLCBhcmc6IGVyciB9O1xuICAgIH1cbiAgfVxuXG4gIHZhciBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0ID0gXCJzdXNwZW5kZWRTdGFydFwiO1xuICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRZaWVsZCA9IFwic3VzcGVuZGVkWWllbGRcIjtcbiAgdmFyIEdlblN0YXRlRXhlY3V0aW5nID0gXCJleGVjdXRpbmdcIjtcbiAgdmFyIEdlblN0YXRlQ29tcGxldGVkID0gXCJjb21wbGV0ZWRcIjtcblxuICAvLyBSZXR1cm5pbmcgdGhpcyBvYmplY3QgZnJvbSB0aGUgaW5uZXJGbiBoYXMgdGhlIHNhbWUgZWZmZWN0IGFzXG4gIC8vIGJyZWFraW5nIG91dCBvZiB0aGUgZGlzcGF0Y2ggc3dpdGNoIHN0YXRlbWVudC5cbiAgdmFyIENvbnRpbnVlU2VudGluZWwgPSB7fTtcblxuICAvLyBEdW1teSBjb25zdHJ1Y3RvciBmdW5jdGlvbnMgdGhhdCB3ZSB1c2UgYXMgdGhlIC5jb25zdHJ1Y3RvciBhbmRcbiAgLy8gLmNvbnN0cnVjdG9yLnByb3RvdHlwZSBwcm9wZXJ0aWVzIGZvciBmdW5jdGlvbnMgdGhhdCByZXR1cm4gR2VuZXJhdG9yXG4gIC8vIG9iamVjdHMuIEZvciBmdWxsIHNwZWMgY29tcGxpYW5jZSwgeW91IG1heSB3aXNoIHRvIGNvbmZpZ3VyZSB5b3VyXG4gIC8vIG1pbmlmaWVyIG5vdCB0byBtYW5nbGUgdGhlIG5hbWVzIG9mIHRoZXNlIHR3byBmdW5jdGlvbnMuXG4gIGZ1bmN0aW9uIEdlbmVyYXRvcigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uKCkge31cbiAgZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUoKSB7fVxuXG4gIC8vIFRoaXMgaXMgYSBwb2x5ZmlsbCBmb3IgJUl0ZXJhdG9yUHJvdG90eXBlJSBmb3IgZW52aXJvbm1lbnRzIHRoYXRcbiAgLy8gZG9uJ3QgbmF0aXZlbHkgc3VwcG9ydCBpdC5cbiAgdmFyIEl0ZXJhdG9yUHJvdG90eXBlID0ge307XG4gIEl0ZXJhdG9yUHJvdG90eXBlW2l0ZXJhdG9yU3ltYm9sXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICB2YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG4gIHZhciBOYXRpdmVJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvICYmIGdldFByb3RvKGdldFByb3RvKHZhbHVlcyhbXSkpKTtcbiAgaWYgKE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlICYmXG4gICAgICBOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAhPT0gT3AgJiZcbiAgICAgIGhhc093bi5jYWxsKE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlLCBpdGVyYXRvclN5bWJvbCkpIHtcbiAgICAvLyBUaGlzIGVudmlyb25tZW50IGhhcyBhIG5hdGl2ZSAlSXRlcmF0b3JQcm90b3R5cGUlOyB1c2UgaXQgaW5zdGVhZFxuICAgIC8vIG9mIHRoZSBwb2x5ZmlsbC5cbiAgICBJdGVyYXRvclByb3RvdHlwZSA9IE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlO1xuICB9XG5cbiAgdmFyIEdwID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUucHJvdG90eXBlID1cbiAgICBHZW5lcmF0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShJdGVyYXRvclByb3RvdHlwZSk7XG4gIEdlbmVyYXRvckZ1bmN0aW9uLnByb3RvdHlwZSA9IEdwLmNvbnN0cnVjdG9yID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGU7XG4gIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLmNvbnN0cnVjdG9yID0gR2VuZXJhdG9yRnVuY3Rpb247XG4gIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlW3RvU3RyaW5nVGFnU3ltYm9sXSA9XG4gICAgR2VuZXJhdG9yRnVuY3Rpb24uZGlzcGxheU5hbWUgPSBcIkdlbmVyYXRvckZ1bmN0aW9uXCI7XG5cbiAgLy8gSGVscGVyIGZvciBkZWZpbmluZyB0aGUgLm5leHQsIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcyBvZiB0aGVcbiAgLy8gSXRlcmF0b3IgaW50ZXJmYWNlIGluIHRlcm1zIG9mIGEgc2luZ2xlIC5faW52b2tlIG1ldGhvZC5cbiAgZnVuY3Rpb24gZGVmaW5lSXRlcmF0b3JNZXRob2RzKHByb3RvdHlwZSkge1xuICAgIFtcIm5leHRcIiwgXCJ0aHJvd1wiLCBcInJldHVyblwiXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgcHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludm9rZShtZXRob2QsIGFyZyk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgcnVudGltZS5pc0dlbmVyYXRvckZ1bmN0aW9uID0gZnVuY3Rpb24oZ2VuRnVuKSB7XG4gICAgdmFyIGN0b3IgPSB0eXBlb2YgZ2VuRnVuID09PSBcImZ1bmN0aW9uXCIgJiYgZ2VuRnVuLmNvbnN0cnVjdG9yO1xuICAgIHJldHVybiBjdG9yXG4gICAgICA/IGN0b3IgPT09IEdlbmVyYXRvckZ1bmN0aW9uIHx8XG4gICAgICAgIC8vIEZvciB0aGUgbmF0aXZlIEdlbmVyYXRvckZ1bmN0aW9uIGNvbnN0cnVjdG9yLCB0aGUgYmVzdCB3ZSBjYW5cbiAgICAgICAgLy8gZG8gaXMgdG8gY2hlY2sgaXRzIC5uYW1lIHByb3BlcnR5LlxuICAgICAgICAoY3Rvci5kaXNwbGF5TmFtZSB8fCBjdG9yLm5hbWUpID09PSBcIkdlbmVyYXRvckZ1bmN0aW9uXCJcbiAgICAgIDogZmFsc2U7XG4gIH07XG5cbiAgcnVudGltZS5tYXJrID0gZnVuY3Rpb24oZ2VuRnVuKSB7XG4gICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGdlbkZ1biwgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBnZW5GdW4uX19wcm90b19fID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGU7XG4gICAgICBpZiAoISh0b1N0cmluZ1RhZ1N5bWJvbCBpbiBnZW5GdW4pKSB7XG4gICAgICAgIGdlbkZ1blt0b1N0cmluZ1RhZ1N5bWJvbF0gPSBcIkdlbmVyYXRvckZ1bmN0aW9uXCI7XG4gICAgICB9XG4gICAgfVxuICAgIGdlbkZ1bi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEdwKTtcbiAgICByZXR1cm4gZ2VuRnVuO1xuICB9O1xuXG4gIC8vIFdpdGhpbiB0aGUgYm9keSBvZiBhbnkgYXN5bmMgZnVuY3Rpb24sIGBhd2FpdCB4YCBpcyB0cmFuc2Zvcm1lZCB0b1xuICAvLyBgeWllbGQgcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHgpYCwgc28gdGhhdCB0aGUgcnVudGltZSBjYW4gdGVzdFxuICAvLyBgaGFzT3duLmNhbGwodmFsdWUsIFwiX19hd2FpdFwiKWAgdG8gZGV0ZXJtaW5lIGlmIHRoZSB5aWVsZGVkIHZhbHVlIGlzXG4gIC8vIG1lYW50IHRvIGJlIGF3YWl0ZWQuXG4gIHJ1bnRpbWUuYXdyYXAgPSBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4geyBfX2F3YWl0OiBhcmcgfTtcbiAgfTtcblxuICBmdW5jdGlvbiBBc3luY0l0ZXJhdG9yKGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGludm9rZShtZXRob2QsIGFyZywgcmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2goZ2VuZXJhdG9yW21ldGhvZF0sIGdlbmVyYXRvciwgYXJnKTtcbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHJlamVjdChyZWNvcmQuYXJnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciByZXN1bHQgPSByZWNvcmQuYXJnO1xuICAgICAgICB2YXIgdmFsdWUgPSByZXN1bHQudmFsdWU7XG4gICAgICAgIGlmICh2YWx1ZSAmJlxuICAgICAgICAgICAgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICBoYXNPd24uY2FsbCh2YWx1ZSwgXCJfX2F3YWl0XCIpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2YWx1ZS5fX2F3YWl0KS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBpbnZva2UoXCJuZXh0XCIsIHZhbHVlLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgaW52b2tlKFwidGhyb3dcIiwgZXJyLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihmdW5jdGlvbih1bndyYXBwZWQpIHtcbiAgICAgICAgICAvLyBXaGVuIGEgeWllbGRlZCBQcm9taXNlIGlzIHJlc29sdmVkLCBpdHMgZmluYWwgdmFsdWUgYmVjb21lc1xuICAgICAgICAgIC8vIHRoZSAudmFsdWUgb2YgdGhlIFByb21pc2U8e3ZhbHVlLGRvbmV9PiByZXN1bHQgZm9yIHRoZVxuICAgICAgICAgIC8vIGN1cnJlbnQgaXRlcmF0aW9uLiBJZiB0aGUgUHJvbWlzZSBpcyByZWplY3RlZCwgaG93ZXZlciwgdGhlXG4gICAgICAgICAgLy8gcmVzdWx0IGZvciB0aGlzIGl0ZXJhdGlvbiB3aWxsIGJlIHJlamVjdGVkIHdpdGggdGhlIHNhbWVcbiAgICAgICAgICAvLyByZWFzb24uIE5vdGUgdGhhdCByZWplY3Rpb25zIG9mIHlpZWxkZWQgUHJvbWlzZXMgYXJlIG5vdFxuICAgICAgICAgIC8vIHRocm93biBiYWNrIGludG8gdGhlIGdlbmVyYXRvciBmdW5jdGlvbiwgYXMgaXMgdGhlIGNhc2VcbiAgICAgICAgICAvLyB3aGVuIGFuIGF3YWl0ZWQgUHJvbWlzZSBpcyByZWplY3RlZC4gVGhpcyBkaWZmZXJlbmNlIGluXG4gICAgICAgICAgLy8gYmVoYXZpb3IgYmV0d2VlbiB5aWVsZCBhbmQgYXdhaXQgaXMgaW1wb3J0YW50LCBiZWNhdXNlIGl0XG4gICAgICAgICAgLy8gYWxsb3dzIHRoZSBjb25zdW1lciB0byBkZWNpZGUgd2hhdCB0byBkbyB3aXRoIHRoZSB5aWVsZGVkXG4gICAgICAgICAgLy8gcmVqZWN0aW9uIChzd2FsbG93IGl0IGFuZCBjb250aW51ZSwgbWFudWFsbHkgLnRocm93IGl0IGJhY2tcbiAgICAgICAgICAvLyBpbnRvIHRoZSBnZW5lcmF0b3IsIGFiYW5kb24gaXRlcmF0aW9uLCB3aGF0ZXZlcikuIFdpdGhcbiAgICAgICAgICAvLyBhd2FpdCwgYnkgY29udHJhc3QsIHRoZXJlIGlzIG5vIG9wcG9ydHVuaXR5IHRvIGV4YW1pbmUgdGhlXG4gICAgICAgICAgLy8gcmVqZWN0aW9uIHJlYXNvbiBvdXRzaWRlIHRoZSBnZW5lcmF0b3IgZnVuY3Rpb24sIHNvIHRoZVxuICAgICAgICAgIC8vIG9ubHkgb3B0aW9uIGlzIHRvIHRocm93IGl0IGZyb20gdGhlIGF3YWl0IGV4cHJlc3Npb24sIGFuZFxuICAgICAgICAgIC8vIGxldCB0aGUgZ2VuZXJhdG9yIGZ1bmN0aW9uIGhhbmRsZSB0aGUgZXhjZXB0aW9uLlxuICAgICAgICAgIHJlc3VsdC52YWx1ZSA9IHVud3JhcHBlZDtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgIH0sIHJlamVjdCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSBcIm9iamVjdFwiICYmIHByb2Nlc3MuZG9tYWluKSB7XG4gICAgICBpbnZva2UgPSBwcm9jZXNzLmRvbWFpbi5iaW5kKGludm9rZSk7XG4gICAgfVxuXG4gICAgdmFyIHByZXZpb3VzUHJvbWlzZTtcblxuICAgIGZ1bmN0aW9uIGVucXVldWUobWV0aG9kLCBhcmcpIHtcbiAgICAgIGZ1bmN0aW9uIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByZXZpb3VzUHJvbWlzZSA9XG4gICAgICAgIC8vIElmIGVucXVldWUgaGFzIGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiB3ZSB3YW50IHRvIHdhaXQgdW50aWxcbiAgICAgICAgLy8gYWxsIHByZXZpb3VzIFByb21pc2VzIGhhdmUgYmVlbiByZXNvbHZlZCBiZWZvcmUgY2FsbGluZyBpbnZva2UsXG4gICAgICAgIC8vIHNvIHRoYXQgcmVzdWx0cyBhcmUgYWx3YXlzIGRlbGl2ZXJlZCBpbiB0aGUgY29ycmVjdCBvcmRlci4gSWZcbiAgICAgICAgLy8gZW5xdWV1ZSBoYXMgbm90IGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiBpdCBpcyBpbXBvcnRhbnQgdG9cbiAgICAgICAgLy8gY2FsbCBpbnZva2UgaW1tZWRpYXRlbHksIHdpdGhvdXQgd2FpdGluZyBvbiBhIGNhbGxiYWNrIHRvIGZpcmUsXG4gICAgICAgIC8vIHNvIHRoYXQgdGhlIGFzeW5jIGdlbmVyYXRvciBmdW5jdGlvbiBoYXMgdGhlIG9wcG9ydHVuaXR5IHRvIGRvXG4gICAgICAgIC8vIGFueSBuZWNlc3Nhcnkgc2V0dXAgaW4gYSBwcmVkaWN0YWJsZSB3YXkuIFRoaXMgcHJlZGljdGFiaWxpdHlcbiAgICAgICAgLy8gaXMgd2h5IHRoZSBQcm9taXNlIGNvbnN0cnVjdG9yIHN5bmNocm9ub3VzbHkgaW52b2tlcyBpdHNcbiAgICAgICAgLy8gZXhlY3V0b3IgY2FsbGJhY2ssIGFuZCB3aHkgYXN5bmMgZnVuY3Rpb25zIHN5bmNocm9ub3VzbHlcbiAgICAgICAgLy8gZXhlY3V0ZSBjb2RlIGJlZm9yZSB0aGUgZmlyc3QgYXdhaXQuIFNpbmNlIHdlIGltcGxlbWVudCBzaW1wbGVcbiAgICAgICAgLy8gYXN5bmMgZnVuY3Rpb25zIGluIHRlcm1zIG9mIGFzeW5jIGdlbmVyYXRvcnMsIGl0IGlzIGVzcGVjaWFsbHlcbiAgICAgICAgLy8gaW1wb3J0YW50IHRvIGdldCB0aGlzIHJpZ2h0LCBldmVuIHRob3VnaCBpdCByZXF1aXJlcyBjYXJlLlxuICAgICAgICBwcmV2aW91c1Byb21pc2UgPyBwcmV2aW91c1Byb21pc2UudGhlbihcbiAgICAgICAgICBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZyxcbiAgICAgICAgICAvLyBBdm9pZCBwcm9wYWdhdGluZyBmYWlsdXJlcyB0byBQcm9taXNlcyByZXR1cm5lZCBieSBsYXRlclxuICAgICAgICAgIC8vIGludm9jYXRpb25zIG9mIHRoZSBpdGVyYXRvci5cbiAgICAgICAgICBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZ1xuICAgICAgICApIDogY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKTtcbiAgICB9XG5cbiAgICAvLyBEZWZpbmUgdGhlIHVuaWZpZWQgaGVscGVyIG1ldGhvZCB0aGF0IGlzIHVzZWQgdG8gaW1wbGVtZW50IC5uZXh0LFxuICAgIC8vIC50aHJvdywgYW5kIC5yZXR1cm4gKHNlZSBkZWZpbmVJdGVyYXRvck1ldGhvZHMpLlxuICAgIHRoaXMuX2ludm9rZSA9IGVucXVldWU7XG4gIH1cblxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoQXN5bmNJdGVyYXRvci5wcm90b3R5cGUpO1xuICBydW50aW1lLkFzeW5jSXRlcmF0b3IgPSBBc3luY0l0ZXJhdG9yO1xuXG4gIC8vIE5vdGUgdGhhdCBzaW1wbGUgYXN5bmMgZnVuY3Rpb25zIGFyZSBpbXBsZW1lbnRlZCBvbiB0b3Agb2ZcbiAgLy8gQXN5bmNJdGVyYXRvciBvYmplY3RzOyB0aGV5IGp1c3QgcmV0dXJuIGEgUHJvbWlzZSBmb3IgdGhlIHZhbHVlIG9mXG4gIC8vIHRoZSBmaW5hbCByZXN1bHQgcHJvZHVjZWQgYnkgdGhlIGl0ZXJhdG9yLlxuICBydW50aW1lLmFzeW5jID0gZnVuY3Rpb24oaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpIHtcbiAgICB2YXIgaXRlciA9IG5ldyBBc3luY0l0ZXJhdG9yKFxuICAgICAgd3JhcChpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdClcbiAgICApO1xuXG4gICAgcmV0dXJuIHJ1bnRpbWUuaXNHZW5lcmF0b3JGdW5jdGlvbihvdXRlckZuKVxuICAgICAgPyBpdGVyIC8vIElmIG91dGVyRm4gaXMgYSBnZW5lcmF0b3IsIHJldHVybiB0aGUgZnVsbCBpdGVyYXRvci5cbiAgICAgIDogaXRlci5uZXh0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0LmRvbmUgPyByZXN1bHQudmFsdWUgOiBpdGVyLm5leHQoKTtcbiAgICAgICAgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KSB7XG4gICAgdmFyIHN0YXRlID0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydDtcblxuICAgIHJldHVybiBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcpIHtcbiAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVFeGVjdXRpbmcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZ1wiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUNvbXBsZXRlZCkge1xuICAgICAgICBpZiAobWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICB0aHJvdyBhcmc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCZSBmb3JnaXZpbmcsIHBlciAyNS4zLjMuMy4zIG9mIHRoZSBzcGVjOlxuICAgICAgICAvLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtZ2VuZXJhdG9ycmVzdW1lXG4gICAgICAgIHJldHVybiBkb25lUmVzdWx0KCk7XG4gICAgICB9XG5cbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHZhciBkZWxlZ2F0ZSA9IGNvbnRleHQuZGVsZWdhdGU7XG4gICAgICAgIGlmIChkZWxlZ2F0ZSkge1xuICAgICAgICAgIGlmIChtZXRob2QgPT09IFwicmV0dXJuXCIgfHxcbiAgICAgICAgICAgICAgKG1ldGhvZCA9PT0gXCJ0aHJvd1wiICYmIGRlbGVnYXRlLml0ZXJhdG9yW21ldGhvZF0gPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgICAgIC8vIEEgcmV0dXJuIG9yIHRocm93ICh3aGVuIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgbm8gdGhyb3dcbiAgICAgICAgICAgIC8vIG1ldGhvZCkgYWx3YXlzIHRlcm1pbmF0ZXMgdGhlIHlpZWxkKiBsb29wLlxuICAgICAgICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgYSByZXR1cm4gbWV0aG9kLCBnaXZlIGl0IGFcbiAgICAgICAgICAgIC8vIGNoYW5jZSB0byBjbGVhbiB1cC5cbiAgICAgICAgICAgIHZhciByZXR1cm5NZXRob2QgPSBkZWxlZ2F0ZS5pdGVyYXRvcltcInJldHVyblwiXTtcbiAgICAgICAgICAgIGlmIChyZXR1cm5NZXRob2QpIHtcbiAgICAgICAgICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKHJldHVybk1ldGhvZCwgZGVsZWdhdGUuaXRlcmF0b3IsIGFyZyk7XG4gICAgICAgICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHJldHVybiBtZXRob2QgdGhyZXcgYW4gZXhjZXB0aW9uLCBsZXQgdGhhdFxuICAgICAgICAgICAgICAgIC8vIGV4Y2VwdGlvbiBwcmV2YWlsIG92ZXIgdGhlIG9yaWdpbmFsIHJldHVybiBvciB0aHJvdy5cbiAgICAgICAgICAgICAgICBtZXRob2QgPSBcInRocm93XCI7XG4gICAgICAgICAgICAgICAgYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobWV0aG9kID09PSBcInJldHVyblwiKSB7XG4gICAgICAgICAgICAgIC8vIENvbnRpbnVlIHdpdGggdGhlIG91dGVyIHJldHVybiwgbm93IHRoYXQgdGhlIGRlbGVnYXRlXG4gICAgICAgICAgICAgIC8vIGl0ZXJhdG9yIGhhcyBiZWVuIHRlcm1pbmF0ZWQuXG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChcbiAgICAgICAgICAgIGRlbGVnYXRlLml0ZXJhdG9yW21ldGhvZF0sXG4gICAgICAgICAgICBkZWxlZ2F0ZS5pdGVyYXRvcixcbiAgICAgICAgICAgIGFyZ1xuICAgICAgICAgICk7XG5cbiAgICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgICAgICAgIC8vIExpa2UgcmV0dXJuaW5nIGdlbmVyYXRvci50aHJvdyh1bmNhdWdodCksIGJ1dCB3aXRob3V0IHRoZVxuICAgICAgICAgICAgLy8gb3ZlcmhlYWQgb2YgYW4gZXh0cmEgZnVuY3Rpb24gY2FsbC5cbiAgICAgICAgICAgIG1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgICAgICAgIGFyZyA9IHJlY29yZC5hcmc7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBEZWxlZ2F0ZSBnZW5lcmF0b3IgcmFuIGFuZCBoYW5kbGVkIGl0cyBvd24gZXhjZXB0aW9ucyBzb1xuICAgICAgICAgIC8vIHJlZ2FyZGxlc3Mgb2Ygd2hhdCB0aGUgbWV0aG9kIHdhcywgd2UgY29udGludWUgYXMgaWYgaXQgaXNcbiAgICAgICAgICAvLyBcIm5leHRcIiB3aXRoIGFuIHVuZGVmaW5lZCBhcmcuXG4gICAgICAgICAgbWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgICAgYXJnID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgdmFyIGluZm8gPSByZWNvcmQuYXJnO1xuICAgICAgICAgIGlmIChpbmZvLmRvbmUpIHtcbiAgICAgICAgICAgIGNvbnRleHRbZGVsZWdhdGUucmVzdWx0TmFtZV0gPSBpbmZvLnZhbHVlO1xuICAgICAgICAgICAgY29udGV4dC5uZXh0ID0gZGVsZWdhdGUubmV4dExvYztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkO1xuICAgICAgICAgICAgcmV0dXJuIGluZm87XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobWV0aG9kID09PSBcIm5leHRcIikge1xuICAgICAgICAgIC8vIFNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwnc1xuICAgICAgICAgIC8vIGZ1bmN0aW9uLnNlbnQgaW1wbGVtZW50YXRpb24uXG4gICAgICAgICAgY29udGV4dC5zZW50ID0gY29udGV4dC5fc2VudCA9IGFyZztcblxuICAgICAgICB9IGVsc2UgaWYgKG1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0KSB7XG4gICAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgICAgdGhyb3cgYXJnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGFyZykpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZSBkaXNwYXRjaGVkIGV4Y2VwdGlvbiB3YXMgY2F1Z2h0IGJ5IGEgY2F0Y2ggYmxvY2ssXG4gICAgICAgICAgICAvLyB0aGVuIGxldCB0aGF0IGNhdGNoIGJsb2NrIGhhbmRsZSB0aGUgZXhjZXB0aW9uIG5vcm1hbGx5LlxuICAgICAgICAgICAgbWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgICAgICBhcmcgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH0gZWxzZSBpZiAobWV0aG9kID09PSBcInJldHVyblwiKSB7XG4gICAgICAgICAgY29udGV4dC5hYnJ1cHQoXCJyZXR1cm5cIiwgYXJnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXRlID0gR2VuU3RhdGVFeGVjdXRpbmc7XG5cbiAgICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIpIHtcbiAgICAgICAgICAvLyBJZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIGZyb20gaW5uZXJGbiwgd2UgbGVhdmUgc3RhdGUgPT09XG4gICAgICAgICAgLy8gR2VuU3RhdGVFeGVjdXRpbmcgYW5kIGxvb3AgYmFjayBmb3IgYW5vdGhlciBpbnZvY2F0aW9uLlxuICAgICAgICAgIHN0YXRlID0gY29udGV4dC5kb25lXG4gICAgICAgICAgICA/IEdlblN0YXRlQ29tcGxldGVkXG4gICAgICAgICAgICA6IEdlblN0YXRlU3VzcGVuZGVkWWllbGQ7XG5cbiAgICAgICAgICB2YXIgaW5mbyA9IHtcbiAgICAgICAgICAgIHZhbHVlOiByZWNvcmQuYXJnLFxuICAgICAgICAgICAgZG9uZTogY29udGV4dC5kb25lXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGlmIChyZWNvcmQuYXJnID09PSBDb250aW51ZVNlbnRpbmVsKSB7XG4gICAgICAgICAgICBpZiAoY29udGV4dC5kZWxlZ2F0ZSAmJiBtZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgICAgICAgIC8vIERlbGliZXJhdGVseSBmb3JnZXQgdGhlIGxhc3Qgc2VudCB2YWx1ZSBzbyB0aGF0IHdlIGRvbid0XG4gICAgICAgICAgICAgIC8vIGFjY2lkZW50YWxseSBwYXNzIGl0IG9uIHRvIHRoZSBkZWxlZ2F0ZS5cbiAgICAgICAgICAgICAgYXJnID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaW5mbztcbiAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUNvbXBsZXRlZDtcbiAgICAgICAgICAvLyBEaXNwYXRjaCB0aGUgZXhjZXB0aW9uIGJ5IGxvb3BpbmcgYmFjayBhcm91bmQgdG8gdGhlXG4gICAgICAgICAgLy8gY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihhcmcpIGNhbGwgYWJvdmUuXG4gICAgICAgICAgbWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICAgIGFyZyA9IHJlY29yZC5hcmc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLy8gRGVmaW5lIEdlbmVyYXRvci5wcm90b3R5cGUue25leHQsdGhyb3cscmV0dXJufSBpbiB0ZXJtcyBvZiB0aGVcbiAgLy8gdW5pZmllZCAuX2ludm9rZSBoZWxwZXIgbWV0aG9kLlxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoR3ApO1xuXG4gIEdwW3RvU3RyaW5nVGFnU3ltYm9sXSA9IFwiR2VuZXJhdG9yXCI7XG5cbiAgR3AudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJbb2JqZWN0IEdlbmVyYXRvcl1cIjtcbiAgfTtcblxuICBmdW5jdGlvbiBwdXNoVHJ5RW50cnkobG9jcykge1xuICAgIHZhciBlbnRyeSA9IHsgdHJ5TG9jOiBsb2NzWzBdIH07XG5cbiAgICBpZiAoMSBpbiBsb2NzKSB7XG4gICAgICBlbnRyeS5jYXRjaExvYyA9IGxvY3NbMV07XG4gICAgfVxuXG4gICAgaWYgKDIgaW4gbG9jcykge1xuICAgICAgZW50cnkuZmluYWxseUxvYyA9IGxvY3NbMl07XG4gICAgICBlbnRyeS5hZnRlckxvYyA9IGxvY3NbM107XG4gICAgfVxuXG4gICAgdGhpcy50cnlFbnRyaWVzLnB1c2goZW50cnkpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVzZXRUcnlFbnRyeShlbnRyeSkge1xuICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uIHx8IHt9O1xuICAgIHJlY29yZC50eXBlID0gXCJub3JtYWxcIjtcbiAgICBkZWxldGUgcmVjb3JkLmFyZztcbiAgICBlbnRyeS5jb21wbGV0aW9uID0gcmVjb3JkO1xuICB9XG5cbiAgZnVuY3Rpb24gQ29udGV4dCh0cnlMb2NzTGlzdCkge1xuICAgIC8vIFRoZSByb290IGVudHJ5IG9iamVjdCAoZWZmZWN0aXZlbHkgYSB0cnkgc3RhdGVtZW50IHdpdGhvdXQgYSBjYXRjaFxuICAgIC8vIG9yIGEgZmluYWxseSBibG9jaykgZ2l2ZXMgdXMgYSBwbGFjZSB0byBzdG9yZSB2YWx1ZXMgdGhyb3duIGZyb21cbiAgICAvLyBsb2NhdGlvbnMgd2hlcmUgdGhlcmUgaXMgbm8gZW5jbG9zaW5nIHRyeSBzdGF0ZW1lbnQuXG4gICAgdGhpcy50cnlFbnRyaWVzID0gW3sgdHJ5TG9jOiBcInJvb3RcIiB9XTtcbiAgICB0cnlMb2NzTGlzdC5mb3JFYWNoKHB1c2hUcnlFbnRyeSwgdGhpcyk7XG4gICAgdGhpcy5yZXNldCh0cnVlKTtcbiAgfVxuXG4gIHJ1bnRpbWUua2V5cyA9IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHZhciBrZXlzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgfVxuICAgIGtleXMucmV2ZXJzZSgpO1xuXG4gICAgLy8gUmF0aGVyIHRoYW4gcmV0dXJuaW5nIGFuIG9iamVjdCB3aXRoIGEgbmV4dCBtZXRob2QsIHdlIGtlZXBcbiAgICAvLyB0aGluZ3Mgc2ltcGxlIGFuZCByZXR1cm4gdGhlIG5leHQgZnVuY3Rpb24gaXRzZWxmLlxuICAgIHJldHVybiBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgd2hpbGUgKGtleXMubGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSBrZXlzLnBvcCgpO1xuICAgICAgICBpZiAoa2V5IGluIG9iamVjdCkge1xuICAgICAgICAgIG5leHQudmFsdWUgPSBrZXk7XG4gICAgICAgICAgbmV4dC5kb25lID0gZmFsc2U7XG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVG8gYXZvaWQgY3JlYXRpbmcgYW4gYWRkaXRpb25hbCBvYmplY3QsIHdlIGp1c3QgaGFuZyB0aGUgLnZhbHVlXG4gICAgICAvLyBhbmQgLmRvbmUgcHJvcGVydGllcyBvZmYgdGhlIG5leHQgZnVuY3Rpb24gb2JqZWN0IGl0c2VsZi4gVGhpc1xuICAgICAgLy8gYWxzbyBlbnN1cmVzIHRoYXQgdGhlIG1pbmlmaWVyIHdpbGwgbm90IGFub255bWl6ZSB0aGUgZnVuY3Rpb24uXG4gICAgICBuZXh0LmRvbmUgPSB0cnVlO1xuICAgICAgcmV0dXJuIG5leHQ7XG4gICAgfTtcbiAgfTtcblxuICBmdW5jdGlvbiB2YWx1ZXMoaXRlcmFibGUpIHtcbiAgICBpZiAoaXRlcmFibGUpIHtcbiAgICAgIHZhciBpdGVyYXRvck1ldGhvZCA9IGl0ZXJhYmxlW2l0ZXJhdG9yU3ltYm9sXTtcbiAgICAgIGlmIChpdGVyYXRvck1ldGhvZCkge1xuICAgICAgICByZXR1cm4gaXRlcmF0b3JNZXRob2QuY2FsbChpdGVyYWJsZSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgaXRlcmFibGUubmV4dCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBpdGVyYWJsZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc05hTihpdGVyYWJsZS5sZW5ndGgpKSB7XG4gICAgICAgIHZhciBpID0gLTEsIG5leHQgPSBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgICAgIHdoaWxlICgrK2kgPCBpdGVyYWJsZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChoYXNPd24uY2FsbChpdGVyYWJsZSwgaSkpIHtcbiAgICAgICAgICAgICAgbmV4dC52YWx1ZSA9IGl0ZXJhYmxlW2ldO1xuICAgICAgICAgICAgICBuZXh0LmRvbmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbmV4dC52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBuZXh0LmRvbmUgPSB0cnVlO1xuXG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIG5leHQubmV4dCA9IG5leHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIGFuIGl0ZXJhdG9yIHdpdGggbm8gdmFsdWVzLlxuICAgIHJldHVybiB7IG5leHQ6IGRvbmVSZXN1bHQgfTtcbiAgfVxuICBydW50aW1lLnZhbHVlcyA9IHZhbHVlcztcblxuICBmdW5jdGlvbiBkb25lUmVzdWx0KCkge1xuICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgfVxuXG4gIENvbnRleHQucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiBDb250ZXh0LFxuXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKHNraXBUZW1wUmVzZXQpIHtcbiAgICAgIHRoaXMucHJldiA9IDA7XG4gICAgICB0aGlzLm5leHQgPSAwO1xuICAgICAgLy8gUmVzZXR0aW5nIGNvbnRleHQuX3NlbnQgZm9yIGxlZ2FjeSBzdXBwb3J0IG9mIEJhYmVsJ3NcbiAgICAgIC8vIGZ1bmN0aW9uLnNlbnQgaW1wbGVtZW50YXRpb24uXG4gICAgICB0aGlzLnNlbnQgPSB0aGlzLl9zZW50ID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgICB0aGlzLmRlbGVnYXRlID0gbnVsbDtcblxuICAgICAgdGhpcy50cnlFbnRyaWVzLmZvckVhY2gocmVzZXRUcnlFbnRyeSk7XG5cbiAgICAgIGlmICghc2tpcFRlbXBSZXNldCkge1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMpIHtcbiAgICAgICAgICAvLyBOb3Qgc3VyZSBhYm91dCB0aGUgb3B0aW1hbCBvcmRlciBvZiB0aGVzZSBjb25kaXRpb25zOlxuICAgICAgICAgIGlmIChuYW1lLmNoYXJBdCgwKSA9PT0gXCJ0XCIgJiZcbiAgICAgICAgICAgICAgaGFzT3duLmNhbGwodGhpcywgbmFtZSkgJiZcbiAgICAgICAgICAgICAgIWlzTmFOKCtuYW1lLnNsaWNlKDEpKSkge1xuICAgICAgICAgICAgdGhpc1tuYW1lXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc3RvcDogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuXG4gICAgICB2YXIgcm9vdEVudHJ5ID0gdGhpcy50cnlFbnRyaWVzWzBdO1xuICAgICAgdmFyIHJvb3RSZWNvcmQgPSByb290RW50cnkuY29tcGxldGlvbjtcbiAgICAgIGlmIChyb290UmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyByb290UmVjb3JkLmFyZztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMucnZhbDtcbiAgICB9LFxuXG4gICAgZGlzcGF0Y2hFeGNlcHRpb246IGZ1bmN0aW9uKGV4Y2VwdGlvbikge1xuICAgICAgaWYgKHRoaXMuZG9uZSkge1xuICAgICAgICB0aHJvdyBleGNlcHRpb247XG4gICAgICB9XG5cbiAgICAgIHZhciBjb250ZXh0ID0gdGhpcztcbiAgICAgIGZ1bmN0aW9uIGhhbmRsZShsb2MsIGNhdWdodCkge1xuICAgICAgICByZWNvcmQudHlwZSA9IFwidGhyb3dcIjtcbiAgICAgICAgcmVjb3JkLmFyZyA9IGV4Y2VwdGlvbjtcbiAgICAgICAgY29udGV4dC5uZXh0ID0gbG9jO1xuICAgICAgICByZXR1cm4gISFjYXVnaHQ7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjtcblxuICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSBcInJvb3RcIikge1xuICAgICAgICAgIC8vIEV4Y2VwdGlvbiB0aHJvd24gb3V0c2lkZSBvZiBhbnkgdHJ5IGJsb2NrIHRoYXQgY291bGQgaGFuZGxlXG4gICAgICAgICAgLy8gaXQsIHNvIHNldCB0aGUgY29tcGxldGlvbiB2YWx1ZSBvZiB0aGUgZW50aXJlIGZ1bmN0aW9uIHRvXG4gICAgICAgICAgLy8gdGhyb3cgdGhlIGV4Y2VwdGlvbi5cbiAgICAgICAgICByZXR1cm4gaGFuZGxlKFwiZW5kXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYpIHtcbiAgICAgICAgICB2YXIgaGFzQ2F0Y2ggPSBoYXNPd24uY2FsbChlbnRyeSwgXCJjYXRjaExvY1wiKTtcbiAgICAgICAgICB2YXIgaGFzRmluYWxseSA9IGhhc093bi5jYWxsKGVudHJ5LCBcImZpbmFsbHlMb2NcIik7XG5cbiAgICAgICAgICBpZiAoaGFzQ2F0Y2ggJiYgaGFzRmluYWxseSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0NhdGNoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0ZpbmFsbHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHlcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIGFicnVwdDogZnVuY3Rpb24odHlwZSwgYXJnKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYgJiZcbiAgICAgICAgICAgIGhhc093bi5jYWxsKGVudHJ5LCBcImZpbmFsbHlMb2NcIikgJiZcbiAgICAgICAgICAgIHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICB2YXIgZmluYWxseUVudHJ5ID0gZW50cnk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGZpbmFsbHlFbnRyeSAmJlxuICAgICAgICAgICh0eXBlID09PSBcImJyZWFrXCIgfHxcbiAgICAgICAgICAgdHlwZSA9PT0gXCJjb250aW51ZVwiKSAmJlxuICAgICAgICAgIGZpbmFsbHlFbnRyeS50cnlMb2MgPD0gYXJnICYmXG4gICAgICAgICAgYXJnIDw9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgIC8vIElnbm9yZSB0aGUgZmluYWxseSBlbnRyeSBpZiBjb250cm9sIGlzIG5vdCBqdW1waW5nIHRvIGFcbiAgICAgICAgLy8gbG9jYXRpb24gb3V0c2lkZSB0aGUgdHJ5L2NhdGNoIGJsb2NrLlxuICAgICAgICBmaW5hbGx5RW50cnkgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmVjb3JkID0gZmluYWxseUVudHJ5ID8gZmluYWxseUVudHJ5LmNvbXBsZXRpb24gOiB7fTtcbiAgICAgIHJlY29yZC50eXBlID0gdHlwZTtcbiAgICAgIHJlY29yZC5hcmcgPSBhcmc7XG5cbiAgICAgIGlmIChmaW5hbGx5RW50cnkpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gZmluYWxseUVudHJ5LmZpbmFsbHlMb2M7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNvbXBsZXRlKHJlY29yZCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH0sXG5cbiAgICBjb21wbGV0ZTogZnVuY3Rpb24ocmVjb3JkLCBhZnRlckxvYykge1xuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgcmVjb3JkLmFyZztcbiAgICAgIH1cblxuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcImJyZWFrXCIgfHxcbiAgICAgICAgICByZWNvcmQudHlwZSA9PT0gXCJjb250aW51ZVwiKSB7XG4gICAgICAgIHRoaXMubmV4dCA9IHJlY29yZC5hcmc7XG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInJldHVyblwiKSB7XG4gICAgICAgIHRoaXMucnZhbCA9IHJlY29yZC5hcmc7XG4gICAgICAgIHRoaXMubmV4dCA9IFwiZW5kXCI7XG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcIm5vcm1hbFwiICYmIGFmdGVyTG9jKSB7XG4gICAgICAgIHRoaXMubmV4dCA9IGFmdGVyTG9jO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBmaW5pc2g6IGZ1bmN0aW9uKGZpbmFsbHlMb2MpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkuZmluYWxseUxvYyA9PT0gZmluYWxseUxvYykge1xuICAgICAgICAgIHRoaXMuY29tcGxldGUoZW50cnkuY29tcGxldGlvbiwgZW50cnkuYWZ0ZXJMb2MpO1xuICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpO1xuICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIFwiY2F0Y2hcIjogZnVuY3Rpb24odHJ5TG9jKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gdHJ5TG9jKSB7XG4gICAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG4gICAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIHZhciB0aHJvd24gPSByZWNvcmQuYXJnO1xuICAgICAgICAgICAgcmVzZXRUcnlFbnRyeShlbnRyeSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0aHJvd247XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVGhlIGNvbnRleHQuY2F0Y2ggbWV0aG9kIG11c3Qgb25seSBiZSBjYWxsZWQgd2l0aCBhIGxvY2F0aW9uXG4gICAgICAvLyBhcmd1bWVudCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEga25vd24gY2F0Y2ggYmxvY2suXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHRcIik7XG4gICAgfSxcblxuICAgIGRlbGVnYXRlWWllbGQ6IGZ1bmN0aW9uKGl0ZXJhYmxlLCByZXN1bHROYW1lLCBuZXh0TG9jKSB7XG4gICAgICB0aGlzLmRlbGVnYXRlID0ge1xuICAgICAgICBpdGVyYXRvcjogdmFsdWVzKGl0ZXJhYmxlKSxcbiAgICAgICAgcmVzdWx0TmFtZTogcmVzdWx0TmFtZSxcbiAgICAgICAgbmV4dExvYzogbmV4dExvY1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuICB9O1xufSkoXG4gIC8vIEFtb25nIHRoZSB2YXJpb3VzIHRyaWNrcyBmb3Igb2J0YWluaW5nIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWxcbiAgLy8gb2JqZWN0LCB0aGlzIHNlZW1zIHRvIGJlIHRoZSBtb3N0IHJlbGlhYmxlIHRlY2huaXF1ZSB0aGF0IGRvZXMgbm90XG4gIC8vIHVzZSBpbmRpcmVjdCBldmFsICh3aGljaCB2aW9sYXRlcyBDb250ZW50IFNlY3VyaXR5IFBvbGljeSkuXG4gIHR5cGVvZiBnbG9iYWwgPT09IFwib2JqZWN0XCIgPyBnbG9iYWwgOlxuICB0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiID8gd2luZG93IDpcbiAgdHlwZW9mIHNlbGYgPT09IFwib2JqZWN0XCIgPyBzZWxmIDogdGhpc1xuKTtcbiIsIi8qXG5BdXRob3I6IEdlcmFpbnQgTHVmZiBhbmQgb3RoZXJzXG5ZZWFyOiAyMDEzXG5cblRoaXMgY29kZSBpcyByZWxlYXNlZCBpbnRvIHRoZSBcInB1YmxpYyBkb21haW5cIiBieSBpdHMgYXV0aG9yKHMpLiAgQW55Ym9keSBtYXkgdXNlLCBhbHRlciBhbmQgZGlzdHJpYnV0ZSB0aGUgY29kZSB3aXRob3V0IHJlc3RyaWN0aW9uLiAgVGhlIGF1dGhvciBtYWtlcyBubyBndWFyYW50ZWVzLCBhbmQgdGFrZXMgbm8gbGlhYmlsaXR5IG9mIGFueSBraW5kIGZvciB1c2Ugb2YgdGhpcyBjb2RlLlxuXG5JZiB5b3UgZmluZCBhIGJ1ZyBvciBtYWtlIGFuIGltcHJvdmVtZW50LCBpdCB3b3VsZCBiZSBjb3VydGVvdXMgdG8gbGV0IHRoZSBhdXRob3Iga25vdywgYnV0IGl0IGlzIG5vdCBjb21wdWxzb3J5LlxuKi9cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG4gICAgZGVmaW5lKFtdLCBmYWN0b3J5KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cyl7XG4gICAgLy8gQ29tbW9uSlMuIERlZmluZSBleHBvcnQuXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gQnJvd3NlciBnbG9iYWxzXG4gICAgZ2xvYmFsLnR2NCA9IGZhY3RvcnkoKTtcbiAgfVxufSh0aGlzLCBmdW5jdGlvbiAoKSB7XG5cbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9rZXlzP3JlZGlyZWN0bG9jYWxlPWVuLVVTJnJlZGlyZWN0c2x1Zz1KYXZhU2NyaXB0JTJGUmVmZXJlbmNlJTJGR2xvYmFsX09iamVjdHMlMkZPYmplY3QlMkZrZXlzXG5pZiAoIU9iamVjdC5rZXlzKSB7XG5cdE9iamVjdC5rZXlzID0gKGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LFxuXHRcdFx0aGFzRG9udEVudW1CdWcgPSAhKHt0b1N0cmluZzogbnVsbH0pLnByb3BlcnR5SXNFbnVtZXJhYmxlKCd0b1N0cmluZycpLFxuXHRcdFx0ZG9udEVudW1zID0gW1xuXHRcdFx0XHQndG9TdHJpbmcnLFxuXHRcdFx0XHQndG9Mb2NhbGVTdHJpbmcnLFxuXHRcdFx0XHQndmFsdWVPZicsXG5cdFx0XHRcdCdoYXNPd25Qcm9wZXJ0eScsXG5cdFx0XHRcdCdpc1Byb3RvdHlwZU9mJyxcblx0XHRcdFx0J3Byb3BlcnR5SXNFbnVtZXJhYmxlJyxcblx0XHRcdFx0J2NvbnN0cnVjdG9yJ1xuXHRcdFx0XSxcblx0XHRcdGRvbnRFbnVtc0xlbmd0aCA9IGRvbnRFbnVtcy5sZW5ndGg7XG5cblx0XHRyZXR1cm4gZnVuY3Rpb24gKG9iaikge1xuXHRcdFx0aWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnICYmIHR5cGVvZiBvYmogIT09ICdmdW5jdGlvbicgfHwgb2JqID09PSBudWxsKSB7XG5cdFx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ09iamVjdC5rZXlzIGNhbGxlZCBvbiBub24tb2JqZWN0Jyk7XG5cdFx0XHR9XG5cblx0XHRcdHZhciByZXN1bHQgPSBbXTtcblxuXHRcdFx0Zm9yICh2YXIgcHJvcCBpbiBvYmopIHtcblx0XHRcdFx0aWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkge1xuXHRcdFx0XHRcdHJlc3VsdC5wdXNoKHByb3ApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmIChoYXNEb250RW51bUJ1Zykge1xuXHRcdFx0XHRmb3IgKHZhciBpPTA7IGkgPCBkb250RW51bXNMZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgZG9udEVudW1zW2ldKSkge1xuXHRcdFx0XHRcdFx0cmVzdWx0LnB1c2goZG9udEVudW1zW2ldKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fTtcblx0fSkoKTtcbn1cbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9jcmVhdGVcbmlmICghT2JqZWN0LmNyZWF0ZSkge1xuXHRPYmplY3QuY3JlYXRlID0gKGZ1bmN0aW9uKCl7XG5cdFx0ZnVuY3Rpb24gRigpe31cblxuXHRcdHJldHVybiBmdW5jdGlvbihvKXtcblx0XHRcdGlmIChhcmd1bWVudHMubGVuZ3RoICE9PSAxKSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignT2JqZWN0LmNyZWF0ZSBpbXBsZW1lbnRhdGlvbiBvbmx5IGFjY2VwdHMgb25lIHBhcmFtZXRlci4nKTtcblx0XHRcdH1cblx0XHRcdEYucHJvdG90eXBlID0gbztcblx0XHRcdHJldHVybiBuZXcgRigpO1xuXHRcdH07XG5cdH0pKCk7XG59XG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9pc0FycmF5P3JlZGlyZWN0bG9jYWxlPWVuLVVTJnJlZGlyZWN0c2x1Zz1KYXZhU2NyaXB0JTJGUmVmZXJlbmNlJTJGR2xvYmFsX09iamVjdHMlMkZBcnJheSUyRmlzQXJyYXlcbmlmKCFBcnJheS5pc0FycmF5KSB7XG5cdEFycmF5LmlzQXJyYXkgPSBmdW5jdGlvbiAodkFyZykge1xuXHRcdHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodkFyZykgPT09IFwiW29iamVjdCBBcnJheV1cIjtcblx0fTtcbn1cbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L2luZGV4T2Y/cmVkaXJlY3Rsb2NhbGU9ZW4tVVMmcmVkaXJlY3RzbHVnPUphdmFTY3JpcHQlMkZSZWZlcmVuY2UlMkZHbG9iYWxfT2JqZWN0cyUyRkFycmF5JTJGaW5kZXhPZlxuaWYgKCFBcnJheS5wcm90b3R5cGUuaW5kZXhPZikge1xuXHRBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIChzZWFyY2hFbGVtZW50IC8qLCBmcm9tSW5kZXggKi8gKSB7XG5cdFx0aWYgKHRoaXMgPT09IG51bGwpIHtcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoKTtcblx0XHR9XG5cdFx0dmFyIHQgPSBPYmplY3QodGhpcyk7XG5cdFx0dmFyIGxlbiA9IHQubGVuZ3RoID4+PiAwO1xuXG5cdFx0aWYgKGxlbiA9PT0gMCkge1xuXHRcdFx0cmV0dXJuIC0xO1xuXHRcdH1cblx0XHR2YXIgbiA9IDA7XG5cdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG5cdFx0XHRuID0gTnVtYmVyKGFyZ3VtZW50c1sxXSk7XG5cdFx0XHRpZiAobiAhPT0gbikgeyAvLyBzaG9ydGN1dCBmb3IgdmVyaWZ5aW5nIGlmIGl0J3MgTmFOXG5cdFx0XHRcdG4gPSAwO1xuXHRcdFx0fSBlbHNlIGlmIChuICE9PSAwICYmIG4gIT09IEluZmluaXR5ICYmIG4gIT09IC1JbmZpbml0eSkge1xuXHRcdFx0XHRuID0gKG4gPiAwIHx8IC0xKSAqIE1hdGguZmxvb3IoTWF0aC5hYnMobikpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAobiA+PSBsZW4pIHtcblx0XHRcdHJldHVybiAtMTtcblx0XHR9XG5cdFx0dmFyIGsgPSBuID49IDAgPyBuIDogTWF0aC5tYXgobGVuIC0gTWF0aC5hYnMobiksIDApO1xuXHRcdGZvciAoOyBrIDwgbGVuOyBrKyspIHtcblx0XHRcdGlmIChrIGluIHQgJiYgdFtrXSA9PT0gc2VhcmNoRWxlbWVudCkge1xuXHRcdFx0XHRyZXR1cm4gaztcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIC0xO1xuXHR9O1xufVxuXG4vLyBHcnVuZ2V5IE9iamVjdC5pc0Zyb3plbiBoYWNrXG5pZiAoIU9iamVjdC5pc0Zyb3plbikge1xuXHRPYmplY3QuaXNGcm96ZW4gPSBmdW5jdGlvbiAob2JqKSB7XG5cdFx0dmFyIGtleSA9IFwidHY0X3Rlc3RfZnJvemVuX2tleVwiO1xuXHRcdHdoaWxlIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHRcdFx0a2V5ICs9IE1hdGgucmFuZG9tKCk7XG5cdFx0fVxuXHRcdHRyeSB7XG5cdFx0XHRvYmpba2V5XSA9IHRydWU7XG5cdFx0XHRkZWxldGUgb2JqW2tleV07XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHR9O1xufVxuLy8gQmFzZWQgb246IGh0dHBzOi8vZ2l0aHViLmNvbS9nZXJhaW50bHVmZi91cmktdGVtcGxhdGVzLCBidXQgd2l0aCBhbGwgdGhlIGRlLXN1YnN0aXR1dGlvbiBzdHVmZiByZW1vdmVkXG5cbnZhciB1cmlUZW1wbGF0ZUdsb2JhbE1vZGlmaWVycyA9IHtcblx0XCIrXCI6IHRydWUsXG5cdFwiI1wiOiB0cnVlLFxuXHRcIi5cIjogdHJ1ZSxcblx0XCIvXCI6IHRydWUsXG5cdFwiO1wiOiB0cnVlLFxuXHRcIj9cIjogdHJ1ZSxcblx0XCImXCI6IHRydWVcbn07XG52YXIgdXJpVGVtcGxhdGVTdWZmaWNlcyA9IHtcblx0XCIqXCI6IHRydWVcbn07XG5cbmZ1bmN0aW9uIG5vdFJlYWxseVBlcmNlbnRFbmNvZGUoc3RyaW5nKSB7XG5cdHJldHVybiBlbmNvZGVVUkkoc3RyaW5nKS5yZXBsYWNlKC8lMjVbMC05XVswLTldL2csIGZ1bmN0aW9uIChkb3VibGVFbmNvZGVkKSB7XG5cdFx0cmV0dXJuIFwiJVwiICsgZG91YmxlRW5jb2RlZC5zdWJzdHJpbmcoMyk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiB1cmlUZW1wbGF0ZVN1YnN0aXR1dGlvbihzcGVjKSB7XG5cdHZhciBtb2RpZmllciA9IFwiXCI7XG5cdGlmICh1cmlUZW1wbGF0ZUdsb2JhbE1vZGlmaWVyc1tzcGVjLmNoYXJBdCgwKV0pIHtcblx0XHRtb2RpZmllciA9IHNwZWMuY2hhckF0KDApO1xuXHRcdHNwZWMgPSBzcGVjLnN1YnN0cmluZygxKTtcblx0fVxuXHR2YXIgc2VwYXJhdG9yID0gXCJcIjtcblx0dmFyIHByZWZpeCA9IFwiXCI7XG5cdHZhciBzaG91bGRFc2NhcGUgPSB0cnVlO1xuXHR2YXIgc2hvd1ZhcmlhYmxlcyA9IGZhbHNlO1xuXHR2YXIgdHJpbUVtcHR5U3RyaW5nID0gZmFsc2U7XG5cdGlmIChtb2RpZmllciA9PT0gJysnKSB7XG5cdFx0c2hvdWxkRXNjYXBlID0gZmFsc2U7XG5cdH0gZWxzZSBpZiAobW9kaWZpZXIgPT09IFwiLlwiKSB7XG5cdFx0cHJlZml4ID0gXCIuXCI7XG5cdFx0c2VwYXJhdG9yID0gXCIuXCI7XG5cdH0gZWxzZSBpZiAobW9kaWZpZXIgPT09IFwiL1wiKSB7XG5cdFx0cHJlZml4ID0gXCIvXCI7XG5cdFx0c2VwYXJhdG9yID0gXCIvXCI7XG5cdH0gZWxzZSBpZiAobW9kaWZpZXIgPT09ICcjJykge1xuXHRcdHByZWZpeCA9IFwiI1wiO1xuXHRcdHNob3VsZEVzY2FwZSA9IGZhbHNlO1xuXHR9IGVsc2UgaWYgKG1vZGlmaWVyID09PSAnOycpIHtcblx0XHRwcmVmaXggPSBcIjtcIjtcblx0XHRzZXBhcmF0b3IgPSBcIjtcIjtcblx0XHRzaG93VmFyaWFibGVzID0gdHJ1ZTtcblx0XHR0cmltRW1wdHlTdHJpbmcgPSB0cnVlO1xuXHR9IGVsc2UgaWYgKG1vZGlmaWVyID09PSAnPycpIHtcblx0XHRwcmVmaXggPSBcIj9cIjtcblx0XHRzZXBhcmF0b3IgPSBcIiZcIjtcblx0XHRzaG93VmFyaWFibGVzID0gdHJ1ZTtcblx0fSBlbHNlIGlmIChtb2RpZmllciA9PT0gJyYnKSB7XG5cdFx0cHJlZml4ID0gXCImXCI7XG5cdFx0c2VwYXJhdG9yID0gXCImXCI7XG5cdFx0c2hvd1ZhcmlhYmxlcyA9IHRydWU7XG5cdH1cblxuXHR2YXIgdmFyTmFtZXMgPSBbXTtcblx0dmFyIHZhckxpc3QgPSBzcGVjLnNwbGl0KFwiLFwiKTtcblx0dmFyIHZhclNwZWNzID0gW107XG5cdHZhciB2YXJTcGVjTWFwID0ge307XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgdmFyTGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciB2YXJOYW1lID0gdmFyTGlzdFtpXTtcblx0XHR2YXIgdHJ1bmNhdGUgPSBudWxsO1xuXHRcdGlmICh2YXJOYW1lLmluZGV4T2YoXCI6XCIpICE9PSAtMSkge1xuXHRcdFx0dmFyIHBhcnRzID0gdmFyTmFtZS5zcGxpdChcIjpcIik7XG5cdFx0XHR2YXJOYW1lID0gcGFydHNbMF07XG5cdFx0XHR0cnVuY2F0ZSA9IHBhcnNlSW50KHBhcnRzWzFdLCAxMCk7XG5cdFx0fVxuXHRcdHZhciBzdWZmaWNlcyA9IHt9O1xuXHRcdHdoaWxlICh1cmlUZW1wbGF0ZVN1ZmZpY2VzW3Zhck5hbWUuY2hhckF0KHZhck5hbWUubGVuZ3RoIC0gMSldKSB7XG5cdFx0XHRzdWZmaWNlc1t2YXJOYW1lLmNoYXJBdCh2YXJOYW1lLmxlbmd0aCAtIDEpXSA9IHRydWU7XG5cdFx0XHR2YXJOYW1lID0gdmFyTmFtZS5zdWJzdHJpbmcoMCwgdmFyTmFtZS5sZW5ndGggLSAxKTtcblx0XHR9XG5cdFx0dmFyIHZhclNwZWMgPSB7XG5cdFx0XHR0cnVuY2F0ZTogdHJ1bmNhdGUsXG5cdFx0XHRuYW1lOiB2YXJOYW1lLFxuXHRcdFx0c3VmZmljZXM6IHN1ZmZpY2VzXG5cdFx0fTtcblx0XHR2YXJTcGVjcy5wdXNoKHZhclNwZWMpO1xuXHRcdHZhclNwZWNNYXBbdmFyTmFtZV0gPSB2YXJTcGVjO1xuXHRcdHZhck5hbWVzLnB1c2godmFyTmFtZSk7XG5cdH1cblx0dmFyIHN1YkZ1bmN0aW9uID0gZnVuY3Rpb24gKHZhbHVlRnVuY3Rpb24pIHtcblx0XHR2YXIgcmVzdWx0ID0gXCJcIjtcblx0XHR2YXIgc3RhcnRJbmRleCA9IDA7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB2YXJTcGVjcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIHZhclNwZWMgPSB2YXJTcGVjc1tpXTtcblx0XHRcdHZhciB2YWx1ZSA9IHZhbHVlRnVuY3Rpb24odmFyU3BlYy5uYW1lKTtcblx0XHRcdGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IChBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPT09IDApIHx8ICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIE9iamVjdC5rZXlzKHZhbHVlKS5sZW5ndGggPT09IDApKSB7XG5cdFx0XHRcdHN0YXJ0SW5kZXgrKztcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cdFx0XHRpZiAoaSA9PT0gc3RhcnRJbmRleCkge1xuXHRcdFx0XHRyZXN1bHQgKz0gcHJlZml4O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVzdWx0ICs9IChzZXBhcmF0b3IgfHwgXCIsXCIpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG5cdFx0XHRcdGlmIChzaG93VmFyaWFibGVzKSB7XG5cdFx0XHRcdFx0cmVzdWx0ICs9IHZhclNwZWMubmFtZSArIFwiPVwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgdmFsdWUubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRpZiAoaiA+IDApIHtcblx0XHRcdFx0XHRcdHJlc3VsdCArPSB2YXJTcGVjLnN1ZmZpY2VzWycqJ10gPyAoc2VwYXJhdG9yIHx8IFwiLFwiKSA6IFwiLFwiO1xuXHRcdFx0XHRcdFx0aWYgKHZhclNwZWMuc3VmZmljZXNbJyonXSAmJiBzaG93VmFyaWFibGVzKSB7XG5cdFx0XHRcdFx0XHRcdHJlc3VsdCArPSB2YXJTcGVjLm5hbWUgKyBcIj1cIjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmVzdWx0ICs9IHNob3VsZEVzY2FwZSA/IGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZVtqXSkucmVwbGFjZSgvIS9nLCBcIiUyMVwiKSA6IG5vdFJlYWxseVBlcmNlbnRFbmNvZGUodmFsdWVbal0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikge1xuXHRcdFx0XHRpZiAoc2hvd1ZhcmlhYmxlcyAmJiAhdmFyU3BlYy5zdWZmaWNlc1snKiddKSB7XG5cdFx0XHRcdFx0cmVzdWx0ICs9IHZhclNwZWMubmFtZSArIFwiPVwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHZhciBmaXJzdCA9IHRydWU7XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiB2YWx1ZSkge1xuXHRcdFx0XHRcdGlmICghZmlyc3QpIHtcblx0XHRcdFx0XHRcdHJlc3VsdCArPSB2YXJTcGVjLnN1ZmZpY2VzWycqJ10gPyAoc2VwYXJhdG9yIHx8IFwiLFwiKSA6IFwiLFwiO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRmaXJzdCA9IGZhbHNlO1xuXHRcdFx0XHRcdHJlc3VsdCArPSBzaG91bGRFc2NhcGUgPyBlbmNvZGVVUklDb21wb25lbnQoa2V5KS5yZXBsYWNlKC8hL2csIFwiJTIxXCIpIDogbm90UmVhbGx5UGVyY2VudEVuY29kZShrZXkpO1xuXHRcdFx0XHRcdHJlc3VsdCArPSB2YXJTcGVjLnN1ZmZpY2VzWycqJ10gPyAnPScgOiBcIixcIjtcblx0XHRcdFx0XHRyZXN1bHQgKz0gc2hvdWxkRXNjYXBlID8gZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlW2tleV0pLnJlcGxhY2UoLyEvZywgXCIlMjFcIikgOiBub3RSZWFsbHlQZXJjZW50RW5jb2RlKHZhbHVlW2tleV0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAoc2hvd1ZhcmlhYmxlcykge1xuXHRcdFx0XHRcdHJlc3VsdCArPSB2YXJTcGVjLm5hbWU7XG5cdFx0XHRcdFx0aWYgKCF0cmltRW1wdHlTdHJpbmcgfHwgdmFsdWUgIT09IFwiXCIpIHtcblx0XHRcdFx0XHRcdHJlc3VsdCArPSBcIj1cIjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHZhclNwZWMudHJ1bmNhdGUgIT0gbnVsbCkge1xuXHRcdFx0XHRcdHZhbHVlID0gdmFsdWUuc3Vic3RyaW5nKDAsIHZhclNwZWMudHJ1bmNhdGUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJlc3VsdCArPSBzaG91bGRFc2NhcGUgPyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpLnJlcGxhY2UoLyEvZywgXCIlMjFcIik6IG5vdFJlYWxseVBlcmNlbnRFbmNvZGUodmFsdWUpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9O1xuXHRzdWJGdW5jdGlvbi52YXJOYW1lcyA9IHZhck5hbWVzO1xuXHRyZXR1cm4ge1xuXHRcdHByZWZpeDogcHJlZml4LFxuXHRcdHN1YnN0aXR1dGlvbjogc3ViRnVuY3Rpb25cblx0fTtcbn1cblxuZnVuY3Rpb24gVXJpVGVtcGxhdGUodGVtcGxhdGUpIHtcblx0aWYgKCEodGhpcyBpbnN0YW5jZW9mIFVyaVRlbXBsYXRlKSkge1xuXHRcdHJldHVybiBuZXcgVXJpVGVtcGxhdGUodGVtcGxhdGUpO1xuXHR9XG5cdHZhciBwYXJ0cyA9IHRlbXBsYXRlLnNwbGl0KFwie1wiKTtcblx0dmFyIHRleHRQYXJ0cyA9IFtwYXJ0cy5zaGlmdCgpXTtcblx0dmFyIHByZWZpeGVzID0gW107XG5cdHZhciBzdWJzdGl0dXRpb25zID0gW107XG5cdHZhciB2YXJOYW1lcyA9IFtdO1xuXHR3aGlsZSAocGFydHMubGVuZ3RoID4gMCkge1xuXHRcdHZhciBwYXJ0ID0gcGFydHMuc2hpZnQoKTtcblx0XHR2YXIgc3BlYyA9IHBhcnQuc3BsaXQoXCJ9XCIpWzBdO1xuXHRcdHZhciByZW1haW5kZXIgPSBwYXJ0LnN1YnN0cmluZyhzcGVjLmxlbmd0aCArIDEpO1xuXHRcdHZhciBmdW5jcyA9IHVyaVRlbXBsYXRlU3Vic3RpdHV0aW9uKHNwZWMpO1xuXHRcdHN1YnN0aXR1dGlvbnMucHVzaChmdW5jcy5zdWJzdGl0dXRpb24pO1xuXHRcdHByZWZpeGVzLnB1c2goZnVuY3MucHJlZml4KTtcblx0XHR0ZXh0UGFydHMucHVzaChyZW1haW5kZXIpO1xuXHRcdHZhck5hbWVzID0gdmFyTmFtZXMuY29uY2F0KGZ1bmNzLnN1YnN0aXR1dGlvbi52YXJOYW1lcyk7XG5cdH1cblx0dGhpcy5maWxsID0gZnVuY3Rpb24gKHZhbHVlRnVuY3Rpb24pIHtcblx0XHR2YXIgcmVzdWx0ID0gdGV4dFBhcnRzWzBdO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc3Vic3RpdHV0aW9ucy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIHN1YnN0aXR1dGlvbiA9IHN1YnN0aXR1dGlvbnNbaV07XG5cdFx0XHRyZXN1bHQgKz0gc3Vic3RpdHV0aW9uKHZhbHVlRnVuY3Rpb24pO1xuXHRcdFx0cmVzdWx0ICs9IHRleHRQYXJ0c1tpICsgMV07XG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH07XG5cdHRoaXMudmFyTmFtZXMgPSB2YXJOYW1lcztcblx0dGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xufVxuVXJpVGVtcGxhdGUucHJvdG90eXBlID0ge1xuXHR0b1N0cmluZzogZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiB0aGlzLnRlbXBsYXRlO1xuXHR9LFxuXHRmaWxsRnJvbU9iamVjdDogZnVuY3Rpb24gKG9iaikge1xuXHRcdHJldHVybiB0aGlzLmZpbGwoZnVuY3Rpb24gKHZhck5hbWUpIHtcblx0XHRcdHJldHVybiBvYmpbdmFyTmFtZV07XG5cdFx0fSk7XG5cdH1cbn07XG52YXIgVmFsaWRhdG9yQ29udGV4dCA9IGZ1bmN0aW9uIFZhbGlkYXRvckNvbnRleHQocGFyZW50LCBjb2xsZWN0TXVsdGlwbGUsIGVycm9yUmVwb3J0ZXIsIGNoZWNrUmVjdXJzaXZlLCB0cmFja1Vua25vd25Qcm9wZXJ0aWVzKSB7XG5cdHRoaXMubWlzc2luZyA9IFtdO1xuXHR0aGlzLm1pc3NpbmdNYXAgPSB7fTtcblx0dGhpcy5mb3JtYXRWYWxpZGF0b3JzID0gcGFyZW50ID8gT2JqZWN0LmNyZWF0ZShwYXJlbnQuZm9ybWF0VmFsaWRhdG9ycykgOiB7fTtcblx0dGhpcy5zY2hlbWFzID0gcGFyZW50ID8gT2JqZWN0LmNyZWF0ZShwYXJlbnQuc2NoZW1hcykgOiB7fTtcblx0dGhpcy5jb2xsZWN0TXVsdGlwbGUgPSBjb2xsZWN0TXVsdGlwbGU7XG5cdHRoaXMuZXJyb3JzID0gW107XG5cdHRoaXMuaGFuZGxlRXJyb3IgPSBjb2xsZWN0TXVsdGlwbGUgPyB0aGlzLmNvbGxlY3RFcnJvciA6IHRoaXMucmV0dXJuRXJyb3I7XG5cdGlmIChjaGVja1JlY3Vyc2l2ZSkge1xuXHRcdHRoaXMuY2hlY2tSZWN1cnNpdmUgPSB0cnVlO1xuXHRcdHRoaXMuc2Nhbm5lZCA9IFtdO1xuXHRcdHRoaXMuc2Nhbm5lZEZyb3plbiA9IFtdO1xuXHRcdHRoaXMuc2Nhbm5lZEZyb3plblNjaGVtYXMgPSBbXTtcblx0XHR0aGlzLnNjYW5uZWRGcm96ZW5WYWxpZGF0aW9uRXJyb3JzID0gW107XG5cdFx0dGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5ID0gJ3R2NF92YWxpZGF0aW9uX2lkJztcblx0XHR0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXkgPSAndHY0X3ZhbGlkYXRpb25fZXJyb3JzX2lkJztcblx0fVxuXHRpZiAodHJhY2tVbmtub3duUHJvcGVydGllcykge1xuXHRcdHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyA9IHRydWU7XG5cdFx0dGhpcy5rbm93blByb3BlcnR5UGF0aHMgPSB7fTtcblx0XHR0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzID0ge307XG5cdH1cblx0dGhpcy5lcnJvclJlcG9ydGVyID0gZXJyb3JSZXBvcnRlciB8fCBkZWZhdWx0RXJyb3JSZXBvcnRlcignZW4nKTtcblx0aWYgKHR5cGVvZiB0aGlzLmVycm9yUmVwb3J0ZXIgPT09ICdzdHJpbmcnKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdkZWJ1ZycpO1xuXHR9XG5cdHRoaXMuZGVmaW5lZEtleXdvcmRzID0ge307XG5cdGlmIChwYXJlbnQpIHtcblx0XHRmb3IgKHZhciBrZXkgaW4gcGFyZW50LmRlZmluZWRLZXl3b3Jkcykge1xuXHRcdFx0dGhpcy5kZWZpbmVkS2V5d29yZHNba2V5XSA9IHBhcmVudC5kZWZpbmVkS2V5d29yZHNba2V5XS5zbGljZSgwKTtcblx0XHR9XG5cdH1cbn07XG5WYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS5kZWZpbmVLZXl3b3JkID0gZnVuY3Rpb24gKGtleXdvcmQsIGtleXdvcmRGdW5jdGlvbikge1xuXHR0aGlzLmRlZmluZWRLZXl3b3Jkc1trZXl3b3JkXSA9IHRoaXMuZGVmaW5lZEtleXdvcmRzW2tleXdvcmRdIHx8IFtdO1xuXHR0aGlzLmRlZmluZWRLZXl3b3Jkc1trZXl3b3JkXS5wdXNoKGtleXdvcmRGdW5jdGlvbik7XG59O1xuVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUuY3JlYXRlRXJyb3IgPSBmdW5jdGlvbiAoY29kZSwgbWVzc2FnZVBhcmFtcywgZGF0YVBhdGgsIHNjaGVtYVBhdGgsIHN1YkVycm9ycywgZGF0YSwgc2NoZW1hKSB7XG5cdHZhciBlcnJvciA9IG5ldyBWYWxpZGF0aW9uRXJyb3IoY29kZSwgbWVzc2FnZVBhcmFtcywgZGF0YVBhdGgsIHNjaGVtYVBhdGgsIHN1YkVycm9ycyk7XG5cdGVycm9yLm1lc3NhZ2UgPSB0aGlzLmVycm9yUmVwb3J0ZXIoZXJyb3IsIGRhdGEsIHNjaGVtYSk7XG5cdHJldHVybiBlcnJvcjtcbn07XG5WYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS5yZXR1cm5FcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuXHRyZXR1cm4gZXJyb3I7XG59O1xuVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUuY29sbGVjdEVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XG5cdGlmIChlcnJvcikge1xuXHRcdHRoaXMuZXJyb3JzLnB1c2goZXJyb3IpO1xuXHR9XG5cdHJldHVybiBudWxsO1xufTtcblZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLnByZWZpeEVycm9ycyA9IGZ1bmN0aW9uIChzdGFydEluZGV4LCBkYXRhUGF0aCwgc2NoZW1hUGF0aCkge1xuXHRmb3IgKHZhciBpID0gc3RhcnRJbmRleDsgaSA8IHRoaXMuZXJyb3JzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dGhpcy5lcnJvcnNbaV0gPSB0aGlzLmVycm9yc1tpXS5wcmVmaXhXaXRoKGRhdGFQYXRoLCBzY2hlbWFQYXRoKTtcblx0fVxuXHRyZXR1cm4gdGhpcztcbn07XG5WYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS5iYW5Vbmtub3duUHJvcGVydGllcyA9IGZ1bmN0aW9uIChkYXRhLCBzY2hlbWEpIHtcblx0Zm9yICh2YXIgdW5rbm93blBhdGggaW4gdGhpcy51bmtub3duUHJvcGVydHlQYXRocykge1xuXHRcdHZhciBlcnJvciA9IHRoaXMuY3JlYXRlRXJyb3IoRXJyb3JDb2Rlcy5VTktOT1dOX1BST1BFUlRZLCB7cGF0aDogdW5rbm93blBhdGh9LCB1bmtub3duUGF0aCwgXCJcIiwgbnVsbCwgZGF0YSwgc2NoZW1hKTtcblx0XHR2YXIgcmVzdWx0ID0gdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG5cdFx0aWYgKHJlc3VsdCkge1xuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9XG5cdH1cblx0cmV0dXJuIG51bGw7XG59O1xuXG5WYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS5hZGRGb3JtYXQgPSBmdW5jdGlvbiAoZm9ybWF0LCB2YWxpZGF0b3IpIHtcblx0aWYgKHR5cGVvZiBmb3JtYXQgPT09ICdvYmplY3QnKSB7XG5cdFx0Zm9yICh2YXIga2V5IGluIGZvcm1hdCkge1xuXHRcdFx0dGhpcy5hZGRGb3JtYXQoa2V5LCBmb3JtYXRba2V5XSk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cdHRoaXMuZm9ybWF0VmFsaWRhdG9yc1tmb3JtYXRdID0gdmFsaWRhdG9yO1xufTtcblZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLnJlc29sdmVSZWZzID0gZnVuY3Rpb24gKHNjaGVtYSwgdXJsSGlzdG9yeSkge1xuXHRpZiAoc2NoZW1hWyckcmVmJ10gIT09IHVuZGVmaW5lZCkge1xuXHRcdHVybEhpc3RvcnkgPSB1cmxIaXN0b3J5IHx8IHt9O1xuXHRcdGlmICh1cmxIaXN0b3J5W3NjaGVtYVsnJHJlZiddXSkge1xuXHRcdFx0cmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoRXJyb3JDb2Rlcy5DSVJDVUxBUl9SRUZFUkVOQ0UsIHt1cmxzOiBPYmplY3Qua2V5cyh1cmxIaXN0b3J5KS5qb2luKCcsICcpfSwgJycsICcnLCBudWxsLCB1bmRlZmluZWQsIHNjaGVtYSk7XG5cdFx0fVxuXHRcdHVybEhpc3Rvcnlbc2NoZW1hWyckcmVmJ11dID0gdHJ1ZTtcblx0XHRzY2hlbWEgPSB0aGlzLmdldFNjaGVtYShzY2hlbWFbJyRyZWYnXSwgdXJsSGlzdG9yeSk7XG5cdH1cblx0cmV0dXJuIHNjaGVtYTtcbn07XG5WYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS5nZXRTY2hlbWEgPSBmdW5jdGlvbiAodXJsLCB1cmxIaXN0b3J5KSB7XG5cdHZhciBzY2hlbWE7XG5cdGlmICh0aGlzLnNjaGVtYXNbdXJsXSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0c2NoZW1hID0gdGhpcy5zY2hlbWFzW3VybF07XG5cdFx0cmV0dXJuIHRoaXMucmVzb2x2ZVJlZnMoc2NoZW1hLCB1cmxIaXN0b3J5KTtcblx0fVxuXHR2YXIgYmFzZVVybCA9IHVybDtcblx0dmFyIGZyYWdtZW50ID0gXCJcIjtcblx0aWYgKHVybC5pbmRleE9mKCcjJykgIT09IC0xKSB7XG5cdFx0ZnJhZ21lbnQgPSB1cmwuc3Vic3RyaW5nKHVybC5pbmRleE9mKFwiI1wiKSArIDEpO1xuXHRcdGJhc2VVcmwgPSB1cmwuc3Vic3RyaW5nKDAsIHVybC5pbmRleE9mKFwiI1wiKSk7XG5cdH1cblx0aWYgKHR5cGVvZiB0aGlzLnNjaGVtYXNbYmFzZVVybF0gPT09ICdvYmplY3QnKSB7XG5cdFx0c2NoZW1hID0gdGhpcy5zY2hlbWFzW2Jhc2VVcmxdO1xuXHRcdHZhciBwb2ludGVyUGF0aCA9IGRlY29kZVVSSUNvbXBvbmVudChmcmFnbWVudCk7XG5cdFx0aWYgKHBvaW50ZXJQYXRoID09PSBcIlwiKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5yZXNvbHZlUmVmcyhzY2hlbWEsIHVybEhpc3RvcnkpO1xuXHRcdH0gZWxzZSBpZiAocG9pbnRlclBhdGguY2hhckF0KDApICE9PSBcIi9cIikge1xuXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0dmFyIHBhcnRzID0gcG9pbnRlclBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDEpO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBjb21wb25lbnQgPSBwYXJ0c1tpXS5yZXBsYWNlKC9+MS9nLCBcIi9cIikucmVwbGFjZSgvfjAvZywgXCJ+XCIpO1xuXHRcdFx0aWYgKHNjaGVtYVtjb21wb25lbnRdID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0c2NoZW1hID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdHNjaGVtYSA9IHNjaGVtYVtjb21wb25lbnRdO1xuXHRcdH1cblx0XHRpZiAoc2NoZW1hICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdHJldHVybiB0aGlzLnJlc29sdmVSZWZzKHNjaGVtYSwgdXJsSGlzdG9yeSk7XG5cdFx0fVxuXHR9XG5cdGlmICh0aGlzLm1pc3NpbmdbYmFzZVVybF0gPT09IHVuZGVmaW5lZCkge1xuXHRcdHRoaXMubWlzc2luZy5wdXNoKGJhc2VVcmwpO1xuXHRcdHRoaXMubWlzc2luZ1tiYXNlVXJsXSA9IGJhc2VVcmw7XG5cdFx0dGhpcy5taXNzaW5nTWFwW2Jhc2VVcmxdID0gYmFzZVVybDtcblx0fVxufTtcblZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLnNlYXJjaFNjaGVtYXMgPSBmdW5jdGlvbiAoc2NoZW1hLCB1cmwpIHtcblx0aWYgKEFycmF5LmlzQXJyYXkoc2NoZW1hKSkge1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc2NoZW1hLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR0aGlzLnNlYXJjaFNjaGVtYXMoc2NoZW1hW2ldLCB1cmwpO1xuXHRcdH1cblx0fSBlbHNlIGlmIChzY2hlbWEgJiYgdHlwZW9mIHNjaGVtYSA9PT0gXCJvYmplY3RcIikge1xuXHRcdGlmICh0eXBlb2Ygc2NoZW1hLmlkID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRpZiAoaXNUcnVzdGVkVXJsKHVybCwgc2NoZW1hLmlkKSkge1xuXHRcdFx0XHRpZiAodGhpcy5zY2hlbWFzW3NjaGVtYS5pZF0gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdHRoaXMuc2NoZW1hc1tzY2hlbWEuaWRdID0gc2NoZW1hO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGZvciAodmFyIGtleSBpbiBzY2hlbWEpIHtcblx0XHRcdGlmIChrZXkgIT09IFwiZW51bVwiKSB7XG5cdFx0XHRcdGlmICh0eXBlb2Ygc2NoZW1hW2tleV0gPT09IFwib2JqZWN0XCIpIHtcblx0XHRcdFx0XHR0aGlzLnNlYXJjaFNjaGVtYXMoc2NoZW1hW2tleV0sIHVybCk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoa2V5ID09PSBcIiRyZWZcIikge1xuXHRcdFx0XHRcdHZhciB1cmkgPSBnZXREb2N1bWVudFVyaShzY2hlbWFba2V5XSk7XG5cdFx0XHRcdFx0aWYgKHVyaSAmJiB0aGlzLnNjaGVtYXNbdXJpXSA9PT0gdW5kZWZpbmVkICYmIHRoaXMubWlzc2luZ01hcFt1cmldID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdHRoaXMubWlzc2luZ01hcFt1cmldID0gdXJpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufTtcblZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLmFkZFNjaGVtYSA9IGZ1bmN0aW9uICh1cmwsIHNjaGVtYSkge1xuXHQvL292ZXJsb2FkXG5cdGlmICh0eXBlb2YgdXJsICE9PSAnc3RyaW5nJyB8fCB0eXBlb2Ygc2NoZW1hID09PSAndW5kZWZpbmVkJykge1xuXHRcdGlmICh0eXBlb2YgdXJsID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdXJsLmlkID09PSAnc3RyaW5nJykge1xuXHRcdFx0c2NoZW1hID0gdXJsO1xuXHRcdFx0dXJsID0gc2NoZW1hLmlkO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdH1cblx0aWYgKHVybCA9PT0gZ2V0RG9jdW1lbnRVcmkodXJsKSArIFwiI1wiKSB7XG5cdFx0Ly8gUmVtb3ZlIGVtcHR5IGZyYWdtZW50XG5cdFx0dXJsID0gZ2V0RG9jdW1lbnRVcmkodXJsKTtcblx0fVxuXHR0aGlzLnNjaGVtYXNbdXJsXSA9IHNjaGVtYTtcblx0ZGVsZXRlIHRoaXMubWlzc2luZ01hcFt1cmxdO1xuXHRub3JtU2NoZW1hKHNjaGVtYSwgdXJsKTtcblx0dGhpcy5zZWFyY2hTY2hlbWFzKHNjaGVtYSwgdXJsKTtcbn07XG5cblZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLmdldFNjaGVtYU1hcCA9IGZ1bmN0aW9uICgpIHtcblx0dmFyIG1hcCA9IHt9O1xuXHRmb3IgKHZhciBrZXkgaW4gdGhpcy5zY2hlbWFzKSB7XG5cdFx0bWFwW2tleV0gPSB0aGlzLnNjaGVtYXNba2V5XTtcblx0fVxuXHRyZXR1cm4gbWFwO1xufTtcblxuVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUuZ2V0U2NoZW1hVXJpcyA9IGZ1bmN0aW9uIChmaWx0ZXJSZWdFeHApIHtcblx0dmFyIGxpc3QgPSBbXTtcblx0Zm9yICh2YXIga2V5IGluIHRoaXMuc2NoZW1hcykge1xuXHRcdGlmICghZmlsdGVyUmVnRXhwIHx8IGZpbHRlclJlZ0V4cC50ZXN0KGtleSkpIHtcblx0XHRcdGxpc3QucHVzaChrZXkpO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gbGlzdDtcbn07XG5cblZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLmdldE1pc3NpbmdVcmlzID0gZnVuY3Rpb24gKGZpbHRlclJlZ0V4cCkge1xuXHR2YXIgbGlzdCA9IFtdO1xuXHRmb3IgKHZhciBrZXkgaW4gdGhpcy5taXNzaW5nTWFwKSB7XG5cdFx0aWYgKCFmaWx0ZXJSZWdFeHAgfHwgZmlsdGVyUmVnRXhwLnRlc3Qoa2V5KSkge1xuXHRcdFx0bGlzdC5wdXNoKGtleSk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBsaXN0O1xufTtcblxuVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUuZHJvcFNjaGVtYXMgPSBmdW5jdGlvbiAoKSB7XG5cdHRoaXMuc2NoZW1hcyA9IHt9O1xuXHR0aGlzLnJlc2V0KCk7XG59O1xuVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG5cdHRoaXMubWlzc2luZyA9IFtdO1xuXHR0aGlzLm1pc3NpbmdNYXAgPSB7fTtcblx0dGhpcy5lcnJvcnMgPSBbXTtcbn07XG5cblZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLnZhbGlkYXRlQWxsID0gZnVuY3Rpb24gKGRhdGEsIHNjaGVtYSwgZGF0YVBhdGhQYXJ0cywgc2NoZW1hUGF0aFBhcnRzLCBkYXRhUG9pbnRlclBhdGgpIHtcblx0dmFyIHRvcExldmVsO1xuXHRzY2hlbWEgPSB0aGlzLnJlc29sdmVSZWZzKHNjaGVtYSk7XG5cdGlmICghc2NoZW1hKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH0gZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgVmFsaWRhdGlvbkVycm9yKSB7XG5cdFx0dGhpcy5lcnJvcnMucHVzaChzY2hlbWEpO1xuXHRcdHJldHVybiBzY2hlbWE7XG5cdH1cblxuXHR2YXIgc3RhcnRFcnJvckNvdW50ID0gdGhpcy5lcnJvcnMubGVuZ3RoO1xuXHR2YXIgZnJvemVuSW5kZXgsIHNjYW5uZWRGcm96ZW5TY2hlbWFJbmRleCA9IG51bGwsIHNjYW5uZWRTY2hlbWFzSW5kZXggPSBudWxsO1xuXHRpZiAodGhpcy5jaGVja1JlY3Vyc2l2ZSAmJiBkYXRhICYmIHR5cGVvZiBkYXRhID09PSAnb2JqZWN0Jykge1xuXHRcdHRvcExldmVsID0gIXRoaXMuc2Nhbm5lZC5sZW5ndGg7XG5cdFx0aWYgKGRhdGFbdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5XSkge1xuXHRcdFx0dmFyIHNjaGVtYUluZGV4ID0gZGF0YVt0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXldLmluZGV4T2Yoc2NoZW1hKTtcblx0XHRcdGlmIChzY2hlbWFJbmRleCAhPT0gLTEpIHtcblx0XHRcdFx0dGhpcy5lcnJvcnMgPSB0aGlzLmVycm9ycy5jb25jYXQoZGF0YVt0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXldW3NjaGVtYUluZGV4XSk7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoT2JqZWN0LmlzRnJvemVuKGRhdGEpKSB7XG5cdFx0XHRmcm96ZW5JbmRleCA9IHRoaXMuc2Nhbm5lZEZyb3plbi5pbmRleE9mKGRhdGEpO1xuXHRcdFx0aWYgKGZyb3plbkluZGV4ICE9PSAtMSkge1xuXHRcdFx0XHR2YXIgZnJvemVuU2NoZW1hSW5kZXggPSB0aGlzLnNjYW5uZWRGcm96ZW5TY2hlbWFzW2Zyb3plbkluZGV4XS5pbmRleE9mKHNjaGVtYSk7XG5cdFx0XHRcdGlmIChmcm96ZW5TY2hlbWFJbmRleCAhPT0gLTEpIHtcblx0XHRcdFx0XHR0aGlzLmVycm9ycyA9IHRoaXMuZXJyb3JzLmNvbmNhdCh0aGlzLnNjYW5uZWRGcm96ZW5WYWxpZGF0aW9uRXJyb3JzW2Zyb3plbkluZGV4XVtmcm96ZW5TY2hlbWFJbmRleF0pO1xuXHRcdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHRoaXMuc2Nhbm5lZC5wdXNoKGRhdGEpO1xuXHRcdGlmIChPYmplY3QuaXNGcm96ZW4oZGF0YSkpIHtcblx0XHRcdGlmIChmcm96ZW5JbmRleCA9PT0gLTEpIHtcblx0XHRcdFx0ZnJvemVuSW5kZXggPSB0aGlzLnNjYW5uZWRGcm96ZW4ubGVuZ3RoO1xuXHRcdFx0XHR0aGlzLnNjYW5uZWRGcm96ZW4ucHVzaChkYXRhKTtcblx0XHRcdFx0dGhpcy5zY2FubmVkRnJvemVuU2NoZW1hcy5wdXNoKFtdKTtcblx0XHRcdH1cblx0XHRcdHNjYW5uZWRGcm96ZW5TY2hlbWFJbmRleCA9IHRoaXMuc2Nhbm5lZEZyb3plblNjaGVtYXNbZnJvemVuSW5kZXhdLmxlbmd0aDtcblx0XHRcdHRoaXMuc2Nhbm5lZEZyb3plblNjaGVtYXNbZnJvemVuSW5kZXhdW3NjYW5uZWRGcm96ZW5TY2hlbWFJbmRleF0gPSBzY2hlbWE7XG5cdFx0XHR0aGlzLnNjYW5uZWRGcm96ZW5WYWxpZGF0aW9uRXJyb3JzW2Zyb3plbkluZGV4XVtzY2FubmVkRnJvemVuU2NoZW1hSW5kZXhdID0gW107XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICghZGF0YVt0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXldKSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGRhdGEsIHRoaXMudmFsaWRhdGVkU2NoZW1hc0tleSwge1xuXHRcdFx0XHRcdFx0dmFsdWU6IFtdLFxuXHRcdFx0XHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGRhdGEsIHRoaXMudmFsaWRhdGlvbkVycm9yc0tleSwge1xuXHRcdFx0XHRcdFx0dmFsdWU6IFtdLFxuXHRcdFx0XHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHQvL0lFIDcvOCB3b3JrYXJvdW5kXG5cdFx0XHRcdFx0ZGF0YVt0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXldID0gW107XG5cdFx0XHRcdFx0ZGF0YVt0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXldID0gW107XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHNjYW5uZWRTY2hlbWFzSW5kZXggPSBkYXRhW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV0ubGVuZ3RoO1xuXHRcdFx0ZGF0YVt0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXldW3NjYW5uZWRTY2hlbWFzSW5kZXhdID0gc2NoZW1hO1xuXHRcdFx0ZGF0YVt0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXldW3NjYW5uZWRTY2hlbWFzSW5kZXhdID0gW107XG5cdFx0fVxuXHR9XG5cblx0dmFyIGVycm9yQ291bnQgPSB0aGlzLmVycm9ycy5sZW5ndGg7XG5cdHZhciBlcnJvciA9IHRoaXMudmFsaWRhdGVCYXNpYyhkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aClcblx0XHR8fCB0aGlzLnZhbGlkYXRlTnVtZXJpYyhkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aClcblx0XHR8fCB0aGlzLnZhbGlkYXRlU3RyaW5nKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKVxuXHRcdHx8IHRoaXMudmFsaWRhdGVBcnJheShkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aClcblx0XHR8fCB0aGlzLnZhbGlkYXRlT2JqZWN0KGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKVxuXHRcdHx8IHRoaXMudmFsaWRhdGVDb21iaW5hdGlvbnMoZGF0YSwgc2NoZW1hLCBkYXRhUG9pbnRlclBhdGgpXG5cdFx0fHwgdGhpcy52YWxpZGF0ZUh5cGVybWVkaWEoZGF0YSwgc2NoZW1hLCBkYXRhUG9pbnRlclBhdGgpXG5cdFx0fHwgdGhpcy52YWxpZGF0ZUZvcm1hdChkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aClcblx0XHR8fCB0aGlzLnZhbGlkYXRlRGVmaW5lZEtleXdvcmRzKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKVxuXHRcdHx8IG51bGw7XG5cblx0aWYgKHRvcExldmVsKSB7XG5cdFx0d2hpbGUgKHRoaXMuc2Nhbm5lZC5sZW5ndGgpIHtcblx0XHRcdHZhciBpdGVtID0gdGhpcy5zY2FubmVkLnBvcCgpO1xuXHRcdFx0ZGVsZXRlIGl0ZW1bdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5XTtcblx0XHR9XG5cdFx0dGhpcy5zY2FubmVkRnJvemVuID0gW107XG5cdFx0dGhpcy5zY2FubmVkRnJvemVuU2NoZW1hcyA9IFtdO1xuXHR9XG5cblx0aWYgKGVycm9yIHx8IGVycm9yQ291bnQgIT09IHRoaXMuZXJyb3JzLmxlbmd0aCkge1xuXHRcdHdoaWxlICgoZGF0YVBhdGhQYXJ0cyAmJiBkYXRhUGF0aFBhcnRzLmxlbmd0aCkgfHwgKHNjaGVtYVBhdGhQYXJ0cyAmJiBzY2hlbWFQYXRoUGFydHMubGVuZ3RoKSkge1xuXHRcdFx0dmFyIGRhdGFQYXJ0ID0gKGRhdGFQYXRoUGFydHMgJiYgZGF0YVBhdGhQYXJ0cy5sZW5ndGgpID8gXCJcIiArIGRhdGFQYXRoUGFydHMucG9wKCkgOiBudWxsO1xuXHRcdFx0dmFyIHNjaGVtYVBhcnQgPSAoc2NoZW1hUGF0aFBhcnRzICYmIHNjaGVtYVBhdGhQYXJ0cy5sZW5ndGgpID8gXCJcIiArIHNjaGVtYVBhdGhQYXJ0cy5wb3AoKSA6IG51bGw7XG5cdFx0XHRpZiAoZXJyb3IpIHtcblx0XHRcdFx0ZXJyb3IgPSBlcnJvci5wcmVmaXhXaXRoKGRhdGFQYXJ0LCBzY2hlbWFQYXJ0KTtcblx0XHRcdH1cblx0XHRcdHRoaXMucHJlZml4RXJyb3JzKGVycm9yQ291bnQsIGRhdGFQYXJ0LCBzY2hlbWFQYXJ0KTtcblx0XHR9XG5cdH1cblxuXHRpZiAoc2Nhbm5lZEZyb3plblNjaGVtYUluZGV4ICE9PSBudWxsKSB7XG5cdFx0dGhpcy5zY2FubmVkRnJvemVuVmFsaWRhdGlvbkVycm9yc1tmcm96ZW5JbmRleF1bc2Nhbm5lZEZyb3plblNjaGVtYUluZGV4XSA9IHRoaXMuZXJyb3JzLnNsaWNlKHN0YXJ0RXJyb3JDb3VudCk7XG5cdH0gZWxzZSBpZiAoc2Nhbm5lZFNjaGVtYXNJbmRleCAhPT0gbnVsbCkge1xuXHRcdGRhdGFbdGhpcy52YWxpZGF0aW9uRXJyb3JzS2V5XVtzY2FubmVkU2NoZW1hc0luZGV4XSA9IHRoaXMuZXJyb3JzLnNsaWNlKHN0YXJ0RXJyb3JDb3VudCk7XG5cdH1cblxuXHRyZXR1cm4gdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG59O1xuVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUudmFsaWRhdGVGb3JtYXQgPSBmdW5jdGlvbiAoZGF0YSwgc2NoZW1hKSB7XG5cdGlmICh0eXBlb2Ygc2NoZW1hLmZvcm1hdCAhPT0gJ3N0cmluZycgfHwgIXRoaXMuZm9ybWF0VmFsaWRhdG9yc1tzY2hlbWEuZm9ybWF0XSkge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cdHZhciBlcnJvck1lc3NhZ2UgPSB0aGlzLmZvcm1hdFZhbGlkYXRvcnNbc2NoZW1hLmZvcm1hdF0uY2FsbChudWxsLCBkYXRhLCBzY2hlbWEpO1xuXHRpZiAodHlwZW9mIGVycm9yTWVzc2FnZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGVycm9yTWVzc2FnZSA9PT0gJ251bWJlcicpIHtcblx0XHRyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihFcnJvckNvZGVzLkZPUk1BVF9DVVNUT00sIHttZXNzYWdlOiBlcnJvck1lc3NhZ2V9LCAnJywgJy9mb3JtYXQnLCBudWxsLCBkYXRhLCBzY2hlbWEpO1xuXHR9IGVsc2UgaWYgKGVycm9yTWVzc2FnZSAmJiB0eXBlb2YgZXJyb3JNZXNzYWdlID09PSAnb2JqZWN0Jykge1xuXHRcdHJldHVybiB0aGlzLmNyZWF0ZUVycm9yKEVycm9yQ29kZXMuRk9STUFUX0NVU1RPTSwge21lc3NhZ2U6IGVycm9yTWVzc2FnZS5tZXNzYWdlIHx8IFwiP1wifSwgZXJyb3JNZXNzYWdlLmRhdGFQYXRoIHx8ICcnLCBlcnJvck1lc3NhZ2Uuc2NoZW1hUGF0aCB8fCBcIi9mb3JtYXRcIiwgbnVsbCwgZGF0YSwgc2NoZW1hKTtcblx0fVxuXHRyZXR1cm4gbnVsbDtcbn07XG5WYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS52YWxpZGF0ZURlZmluZWRLZXl3b3JkcyA9IGZ1bmN0aW9uIChkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aCkge1xuXHRmb3IgKHZhciBrZXkgaW4gdGhpcy5kZWZpbmVkS2V5d29yZHMpIHtcblx0XHRpZiAodHlwZW9mIHNjaGVtYVtrZXldID09PSAndW5kZWZpbmVkJykge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHRcdHZhciB2YWxpZGF0aW9uRnVuY3Rpb25zID0gdGhpcy5kZWZpbmVkS2V5d29yZHNba2V5XTtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHZhbGlkYXRpb25GdW5jdGlvbnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBmdW5jID0gdmFsaWRhdGlvbkZ1bmN0aW9uc1tpXTtcblx0XHRcdHZhciByZXN1bHQgPSBmdW5jKGRhdGEsIHNjaGVtYVtrZXldLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aCk7XG5cdFx0XHRpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHJlc3VsdCA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoRXJyb3JDb2Rlcy5LRVlXT1JEX0NVU1RPTSwge2tleToga2V5LCBtZXNzYWdlOiByZXN1bHR9LCAnJywgJycsIG51bGwsIGRhdGEsIHNjaGVtYSkucHJlZml4V2l0aChudWxsLCBrZXkpO1xuXHRcdFx0fSBlbHNlIGlmIChyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdCA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0dmFyIGNvZGUgPSByZXN1bHQuY29kZTtcblx0XHRcdFx0aWYgKHR5cGVvZiBjb2RlID09PSAnc3RyaW5nJykge1xuXHRcdFx0XHRcdGlmICghRXJyb3JDb2Rlc1tjb2RlXSkge1xuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdVbmRlZmluZWQgZXJyb3IgY29kZSAodXNlIGRlZmluZUVycm9yKTogJyArIGNvZGUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb2RlID0gRXJyb3JDb2Rlc1tjb2RlXTtcblx0XHRcdFx0fSBlbHNlIGlmICh0eXBlb2YgY29kZSAhPT0gJ251bWJlcicpIHtcblx0XHRcdFx0XHRjb2RlID0gRXJyb3JDb2Rlcy5LRVlXT1JEX0NVU1RPTTtcblx0XHRcdFx0fVxuXHRcdFx0XHR2YXIgbWVzc2FnZVBhcmFtcyA9ICh0eXBlb2YgcmVzdWx0Lm1lc3NhZ2UgPT09ICdvYmplY3QnKSA/IHJlc3VsdC5tZXNzYWdlIDoge2tleToga2V5LCBtZXNzYWdlOiByZXN1bHQubWVzc2FnZSB8fCBcIj9cIn07XG5cdFx0XHRcdHZhciBzY2hlbWFQYXRoID0gcmVzdWx0LnNjaGVtYVBhdGggfHwgKFwiL1wiICsga2V5LnJlcGxhY2UoL34vZywgJ34wJykucmVwbGFjZSgvXFwvL2csICd+MScpKTtcblx0XHRcdFx0cmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoY29kZSwgbWVzc2FnZVBhcmFtcywgcmVzdWx0LmRhdGFQYXRoIHx8IG51bGwsIHNjaGVtYVBhdGgsIG51bGwsIGRhdGEsIHNjaGVtYSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiBudWxsO1xufTtcblxuZnVuY3Rpb24gcmVjdXJzaXZlQ29tcGFyZShBLCBCKSB7XG5cdGlmIChBID09PSBCKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblx0aWYgKEEgJiYgQiAmJiB0eXBlb2YgQSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgQiA9PT0gXCJvYmplY3RcIikge1xuXHRcdGlmIChBcnJheS5pc0FycmF5KEEpICE9PSBBcnJheS5pc0FycmF5KEIpKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KEEpKSB7XG5cdFx0XHRpZiAoQS5sZW5ndGggIT09IEIubGVuZ3RoKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgQS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZiAoIXJlY3Vyc2l2ZUNvbXBhcmUoQVtpXSwgQltpXSkpIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFyIGtleTtcblx0XHRcdGZvciAoa2V5IGluIEEpIHtcblx0XHRcdFx0aWYgKEJba2V5XSA9PT0gdW5kZWZpbmVkICYmIEFba2V5XSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRmb3IgKGtleSBpbiBCKSB7XG5cdFx0XHRcdGlmIChBW2tleV0gPT09IHVuZGVmaW5lZCAmJiBCW2tleV0gIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Zm9yIChrZXkgaW4gQSkge1xuXHRcdFx0XHRpZiAoIXJlY3Vyc2l2ZUNvbXBhcmUoQVtrZXldLCBCW2tleV0pKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdHJldHVybiBmYWxzZTtcbn1cblxuVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUudmFsaWRhdGVCYXNpYyA9IGZ1bmN0aW9uIHZhbGlkYXRlQmFzaWMoZGF0YSwgc2NoZW1hLCBkYXRhUG9pbnRlclBhdGgpIHtcblx0dmFyIGVycm9yO1xuXHRpZiAoZXJyb3IgPSB0aGlzLnZhbGlkYXRlVHlwZShkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aCkpIHtcblx0XHRyZXR1cm4gZXJyb3IucHJlZml4V2l0aChudWxsLCBcInR5cGVcIik7XG5cdH1cblx0aWYgKGVycm9yID0gdGhpcy52YWxpZGF0ZUVudW0oZGF0YSwgc2NoZW1hLCBkYXRhUG9pbnRlclBhdGgpKSB7XG5cdFx0cmV0dXJuIGVycm9yLnByZWZpeFdpdGgobnVsbCwgXCJ0eXBlXCIpO1xuXHR9XG5cdHJldHVybiBudWxsO1xufTtcblxuVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUudmFsaWRhdGVUeXBlID0gZnVuY3Rpb24gdmFsaWRhdGVUeXBlKGRhdGEsIHNjaGVtYSkge1xuXHRpZiAoc2NoZW1hLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cdHZhciBkYXRhVHlwZSA9IHR5cGVvZiBkYXRhO1xuXHRpZiAoZGF0YSA9PT0gbnVsbCkge1xuXHRcdGRhdGFUeXBlID0gXCJudWxsXCI7XG5cdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuXHRcdGRhdGFUeXBlID0gXCJhcnJheVwiO1xuXHR9XG5cdHZhciBhbGxvd2VkVHlwZXMgPSBzY2hlbWEudHlwZTtcblx0aWYgKCFBcnJheS5pc0FycmF5KGFsbG93ZWRUeXBlcykpIHtcblx0XHRhbGxvd2VkVHlwZXMgPSBbYWxsb3dlZFR5cGVzXTtcblx0fVxuXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgYWxsb3dlZFR5cGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIHR5cGUgPSBhbGxvd2VkVHlwZXNbaV07XG5cdFx0aWYgKHR5cGUgPT09IGRhdGFUeXBlIHx8ICh0eXBlID09PSBcImludGVnZXJcIiAmJiBkYXRhVHlwZSA9PT0gXCJudW1iZXJcIiAmJiAoZGF0YSAlIDEgPT09IDApKSkge1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHR9XG5cdHJldHVybiB0aGlzLmNyZWF0ZUVycm9yKEVycm9yQ29kZXMuSU5WQUxJRF9UWVBFLCB7dHlwZTogZGF0YVR5cGUsIGV4cGVjdGVkOiBhbGxvd2VkVHlwZXMuam9pbihcIi9cIil9LCAnJywgJycsIG51bGwsIGRhdGEsIHNjaGVtYSk7XG59O1xuXG5WYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS52YWxpZGF0ZUVudW0gPSBmdW5jdGlvbiB2YWxpZGF0ZUVudW0oZGF0YSwgc2NoZW1hKSB7XG5cdGlmIChzY2hlbWFbXCJlbnVtXCJdID09PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXHRmb3IgKHZhciBpID0gMDsgaSA8IHNjaGVtYVtcImVudW1cIl0ubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgZW51bVZhbCA9IHNjaGVtYVtcImVudW1cIl1baV07XG5cdFx0aWYgKHJlY3Vyc2l2ZUNvbXBhcmUoZGF0YSwgZW51bVZhbCkpIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihFcnJvckNvZGVzLkVOVU1fTUlTTUFUQ0gsIHt2YWx1ZTogKHR5cGVvZiBKU09OICE9PSAndW5kZWZpbmVkJykgPyBKU09OLnN0cmluZ2lmeShkYXRhKSA6IGRhdGF9LCAnJywgJycsIG51bGwsIGRhdGEsIHNjaGVtYSk7XG59O1xuXG5WYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS52YWxpZGF0ZU51bWVyaWMgPSBmdW5jdGlvbiB2YWxpZGF0ZU51bWVyaWMoZGF0YSwgc2NoZW1hLCBkYXRhUG9pbnRlclBhdGgpIHtcblx0cmV0dXJuIHRoaXMudmFsaWRhdGVNdWx0aXBsZU9mKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKVxuXHRcdHx8IHRoaXMudmFsaWRhdGVNaW5NYXgoZGF0YSwgc2NoZW1hLCBkYXRhUG9pbnRlclBhdGgpXG5cdFx0fHwgdGhpcy52YWxpZGF0ZU5hTihkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aClcblx0XHR8fCBudWxsO1xufTtcblxudmFyIENMT1NFX0VOT1VHSF9MT1cgPSBNYXRoLnBvdygyLCAtNTEpO1xudmFyIENMT1NFX0VOT1VHSF9ISUdIID0gMSAtIENMT1NFX0VOT1VHSF9MT1c7XG5WYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS52YWxpZGF0ZU11bHRpcGxlT2YgPSBmdW5jdGlvbiB2YWxpZGF0ZU11bHRpcGxlT2YoZGF0YSwgc2NoZW1hKSB7XG5cdHZhciBtdWx0aXBsZU9mID0gc2NoZW1hLm11bHRpcGxlT2YgfHwgc2NoZW1hLmRpdmlzaWJsZUJ5O1xuXHRpZiAobXVsdGlwbGVPZiA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblx0aWYgKHR5cGVvZiBkYXRhID09PSBcIm51bWJlclwiKSB7XG5cdFx0dmFyIHJlbWFpbmRlciA9IChkYXRhL211bHRpcGxlT2YpJTE7XG5cdFx0aWYgKHJlbWFpbmRlciA+PSBDTE9TRV9FTk9VR0hfTE9XICYmIHJlbWFpbmRlciA8IENMT1NFX0VOT1VHSF9ISUdIKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihFcnJvckNvZGVzLk5VTUJFUl9NVUxUSVBMRV9PRiwge3ZhbHVlOiBkYXRhLCBtdWx0aXBsZU9mOiBtdWx0aXBsZU9mfSwgJycsICcnLCBudWxsLCBkYXRhLCBzY2hlbWEpO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gbnVsbDtcbn07XG5cblZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLnZhbGlkYXRlTWluTWF4ID0gZnVuY3Rpb24gdmFsaWRhdGVNaW5NYXgoZGF0YSwgc2NoZW1hKSB7XG5cdGlmICh0eXBlb2YgZGF0YSAhPT0gXCJudW1iZXJcIikge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cdGlmIChzY2hlbWEubWluaW11bSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0aWYgKGRhdGEgPCBzY2hlbWEubWluaW11bSkge1xuXHRcdFx0cmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoRXJyb3JDb2Rlcy5OVU1CRVJfTUlOSU1VTSwge3ZhbHVlOiBkYXRhLCBtaW5pbXVtOiBzY2hlbWEubWluaW11bX0sICcnLCAnL21pbmltdW0nLCBudWxsLCBkYXRhLCBzY2hlbWEpO1xuXHRcdH1cblx0XHRpZiAoc2NoZW1hLmV4Y2x1c2l2ZU1pbmltdW0gJiYgZGF0YSA9PT0gc2NoZW1hLm1pbmltdW0pIHtcblx0XHRcdHJldHVybiB0aGlzLmNyZWF0ZUVycm9yKEVycm9yQ29kZXMuTlVNQkVSX01JTklNVU1fRVhDTFVTSVZFLCB7dmFsdWU6IGRhdGEsIG1pbmltdW06IHNjaGVtYS5taW5pbXVtfSwgJycsICcvZXhjbHVzaXZlTWluaW11bScsIG51bGwsIGRhdGEsIHNjaGVtYSk7XG5cdFx0fVxuXHR9XG5cdGlmIChzY2hlbWEubWF4aW11bSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0aWYgKGRhdGEgPiBzY2hlbWEubWF4aW11bSkge1xuXHRcdFx0cmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoRXJyb3JDb2Rlcy5OVU1CRVJfTUFYSU1VTSwge3ZhbHVlOiBkYXRhLCBtYXhpbXVtOiBzY2hlbWEubWF4aW11bX0sICcnLCAnL21heGltdW0nLCBudWxsLCBkYXRhLCBzY2hlbWEpO1xuXHRcdH1cblx0XHRpZiAoc2NoZW1hLmV4Y2x1c2l2ZU1heGltdW0gJiYgZGF0YSA9PT0gc2NoZW1hLm1heGltdW0pIHtcblx0XHRcdHJldHVybiB0aGlzLmNyZWF0ZUVycm9yKEVycm9yQ29kZXMuTlVNQkVSX01BWElNVU1fRVhDTFVTSVZFLCB7dmFsdWU6IGRhdGEsIG1heGltdW06IHNjaGVtYS5tYXhpbXVtfSwgJycsICcvZXhjbHVzaXZlTWF4aW11bScsIG51bGwsIGRhdGEsIHNjaGVtYSk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBudWxsO1xufTtcblxuVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUudmFsaWRhdGVOYU4gPSBmdW5jdGlvbiB2YWxpZGF0ZU5hTihkYXRhLCBzY2hlbWEpIHtcblx0aWYgKHR5cGVvZiBkYXRhICE9PSBcIm51bWJlclwiKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblx0aWYgKGlzTmFOKGRhdGEpID09PSB0cnVlIHx8IGRhdGEgPT09IEluZmluaXR5IHx8IGRhdGEgPT09IC1JbmZpbml0eSkge1xuXHRcdHJldHVybiB0aGlzLmNyZWF0ZUVycm9yKEVycm9yQ29kZXMuTlVNQkVSX05PVF9BX05VTUJFUiwge3ZhbHVlOiBkYXRhfSwgJycsICcvdHlwZScsIG51bGwsIGRhdGEsIHNjaGVtYSk7XG5cdH1cblx0cmV0dXJuIG51bGw7XG59O1xuXG5WYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS52YWxpZGF0ZVN0cmluZyA9IGZ1bmN0aW9uIHZhbGlkYXRlU3RyaW5nKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKSB7XG5cdHJldHVybiB0aGlzLnZhbGlkYXRlU3RyaW5nTGVuZ3RoKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKVxuXHRcdHx8IHRoaXMudmFsaWRhdGVTdHJpbmdQYXR0ZXJuKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKVxuXHRcdHx8IG51bGw7XG59O1xuXG5WYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS52YWxpZGF0ZVN0cmluZ0xlbmd0aCA9IGZ1bmN0aW9uIHZhbGlkYXRlU3RyaW5nTGVuZ3RoKGRhdGEsIHNjaGVtYSkge1xuXHRpZiAodHlwZW9mIGRhdGEgIT09IFwic3RyaW5nXCIpIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXHRpZiAoc2NoZW1hLm1pbkxlbmd0aCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0aWYgKGRhdGEubGVuZ3RoIDwgc2NoZW1hLm1pbkxlbmd0aCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoRXJyb3JDb2Rlcy5TVFJJTkdfTEVOR1RIX1NIT1JULCB7bGVuZ3RoOiBkYXRhLmxlbmd0aCwgbWluaW11bTogc2NoZW1hLm1pbkxlbmd0aH0sICcnLCAnL21pbkxlbmd0aCcsIG51bGwsIGRhdGEsIHNjaGVtYSk7XG5cdFx0fVxuXHR9XG5cdGlmIChzY2hlbWEubWF4TGVuZ3RoICE9PSB1bmRlZmluZWQpIHtcblx0XHRpZiAoZGF0YS5sZW5ndGggPiBzY2hlbWEubWF4TGVuZ3RoKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihFcnJvckNvZGVzLlNUUklOR19MRU5HVEhfTE9ORywge2xlbmd0aDogZGF0YS5sZW5ndGgsIG1heGltdW06IHNjaGVtYS5tYXhMZW5ndGh9LCAnJywgJy9tYXhMZW5ndGgnLCBudWxsLCBkYXRhLCBzY2hlbWEpO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gbnVsbDtcbn07XG5cblZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLnZhbGlkYXRlU3RyaW5nUGF0dGVybiA9IGZ1bmN0aW9uIHZhbGlkYXRlU3RyaW5nUGF0dGVybihkYXRhLCBzY2hlbWEpIHtcblx0aWYgKHR5cGVvZiBkYXRhICE9PSBcInN0cmluZ1wiIHx8ICh0eXBlb2Ygc2NoZW1hLnBhdHRlcm4gIT09IFwic3RyaW5nXCIgJiYgIShzY2hlbWEucGF0dGVybiBpbnN0YW5jZW9mIFJlZ0V4cCkpKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblx0dmFyIHJlZ2V4cDtcblx0aWYgKHNjaGVtYS5wYXR0ZXJuIGluc3RhbmNlb2YgUmVnRXhwKSB7XG5cdCAgcmVnZXhwID0gc2NoZW1hLnBhdHRlcm47XG5cdH1cblx0ZWxzZSB7XG5cdCAgdmFyIGJvZHksIGZsYWdzID0gJyc7XG5cdCAgLy8gQ2hlY2sgZm9yIHJlZ3VsYXIgZXhwcmVzc2lvbiBsaXRlcmFsc1xuXHQgIC8vIEBzZWUgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzUuMS8jc2VjLTcuOC41XG5cdCAgdmFyIGxpdGVyYWwgPSBzY2hlbWEucGF0dGVybi5tYXRjaCgvXlxcLyguKylcXC8oW2ltZ10qKSQvKTtcblx0ICBpZiAobGl0ZXJhbCkge1xuXHQgICAgYm9keSA9IGxpdGVyYWxbMV07XG5cdCAgICBmbGFncyA9IGxpdGVyYWxbMl07XG5cdCAgfVxuXHQgIGVsc2Uge1xuXHQgICAgYm9keSA9IHNjaGVtYS5wYXR0ZXJuO1xuXHQgIH1cblx0ICByZWdleHAgPSBuZXcgUmVnRXhwKGJvZHksIGZsYWdzKTtcblx0fVxuXHRpZiAoIXJlZ2V4cC50ZXN0KGRhdGEpKSB7XG5cdFx0cmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoRXJyb3JDb2Rlcy5TVFJJTkdfUEFUVEVSTiwge3BhdHRlcm46IHNjaGVtYS5wYXR0ZXJufSwgJycsICcvcGF0dGVybicsIG51bGwsIGRhdGEsIHNjaGVtYSk7XG5cdH1cblx0cmV0dXJuIG51bGw7XG59O1xuXG5WYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS52YWxpZGF0ZUFycmF5ID0gZnVuY3Rpb24gdmFsaWRhdGVBcnJheShkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aCkge1xuXHRpZiAoIUFycmF5LmlzQXJyYXkoZGF0YSkpIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXHRyZXR1cm4gdGhpcy52YWxpZGF0ZUFycmF5TGVuZ3RoKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKVxuXHRcdHx8IHRoaXMudmFsaWRhdGVBcnJheVVuaXF1ZUl0ZW1zKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKVxuXHRcdHx8IHRoaXMudmFsaWRhdGVBcnJheUl0ZW1zKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKVxuXHRcdHx8IG51bGw7XG59O1xuXG5WYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS52YWxpZGF0ZUFycmF5TGVuZ3RoID0gZnVuY3Rpb24gdmFsaWRhdGVBcnJheUxlbmd0aChkYXRhLCBzY2hlbWEpIHtcblx0dmFyIGVycm9yO1xuXHRpZiAoc2NoZW1hLm1pbkl0ZW1zICE9PSB1bmRlZmluZWQpIHtcblx0XHRpZiAoZGF0YS5sZW5ndGggPCBzY2hlbWEubWluSXRlbXMpIHtcblx0XHRcdGVycm9yID0gdGhpcy5jcmVhdGVFcnJvcihFcnJvckNvZGVzLkFSUkFZX0xFTkdUSF9TSE9SVCwge2xlbmd0aDogZGF0YS5sZW5ndGgsIG1pbmltdW06IHNjaGVtYS5taW5JdGVtc30sICcnLCAnL21pbkl0ZW1zJywgbnVsbCwgZGF0YSwgc2NoZW1hKTtcblx0XHRcdGlmICh0aGlzLmhhbmRsZUVycm9yKGVycm9yKSkge1xuXHRcdFx0XHRyZXR1cm4gZXJyb3I7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdGlmIChzY2hlbWEubWF4SXRlbXMgIT09IHVuZGVmaW5lZCkge1xuXHRcdGlmIChkYXRhLmxlbmd0aCA+IHNjaGVtYS5tYXhJdGVtcykge1xuXHRcdFx0ZXJyb3IgPSB0aGlzLmNyZWF0ZUVycm9yKEVycm9yQ29kZXMuQVJSQVlfTEVOR1RIX0xPTkcsIHtsZW5ndGg6IGRhdGEubGVuZ3RoLCBtYXhpbXVtOiBzY2hlbWEubWF4SXRlbXN9LCAnJywgJy9tYXhJdGVtcycsIG51bGwsIGRhdGEsIHNjaGVtYSk7XG5cdFx0XHRpZiAodGhpcy5oYW5kbGVFcnJvcihlcnJvcikpIHtcblx0XHRcdFx0cmV0dXJuIGVycm9yO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRyZXR1cm4gbnVsbDtcbn07XG5cblZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLnZhbGlkYXRlQXJyYXlVbmlxdWVJdGVtcyA9IGZ1bmN0aW9uIHZhbGlkYXRlQXJyYXlVbmlxdWVJdGVtcyhkYXRhLCBzY2hlbWEpIHtcblx0aWYgKHNjaGVtYS51bmlxdWVJdGVtcykge1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuXHRcdFx0Zm9yICh2YXIgaiA9IGkgKyAxOyBqIDwgZGF0YS5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRpZiAocmVjdXJzaXZlQ29tcGFyZShkYXRhW2ldLCBkYXRhW2pdKSkge1xuXHRcdFx0XHRcdHZhciBlcnJvciA9IHRoaXMuY3JlYXRlRXJyb3IoRXJyb3JDb2Rlcy5BUlJBWV9VTklRVUUsIHttYXRjaDE6IGksIG1hdGNoMjogan0sICcnLCAnL3VuaXF1ZUl0ZW1zJywgbnVsbCwgZGF0YSwgc2NoZW1hKTtcblx0XHRcdFx0XHRpZiAodGhpcy5oYW5kbGVFcnJvcihlcnJvcikpIHtcblx0XHRcdFx0XHRcdHJldHVybiBlcnJvcjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblx0cmV0dXJuIG51bGw7XG59O1xuXG5WYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS52YWxpZGF0ZUFycmF5SXRlbXMgPSBmdW5jdGlvbiB2YWxpZGF0ZUFycmF5SXRlbXMoZGF0YSwgc2NoZW1hLCBkYXRhUG9pbnRlclBhdGgpIHtcblx0aWYgKHNjaGVtYS5pdGVtcyA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblx0dmFyIGVycm9yLCBpO1xuXHRpZiAoQXJyYXkuaXNBcnJheShzY2hlbWEuaXRlbXMpKSB7XG5cdFx0Zm9yIChpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmIChpIDwgc2NoZW1hLml0ZW1zLmxlbmd0aCkge1xuXHRcdFx0XHRpZiAoZXJyb3IgPSB0aGlzLnZhbGlkYXRlQWxsKGRhdGFbaV0sIHNjaGVtYS5pdGVtc1tpXSwgW2ldLCBbXCJpdGVtc1wiLCBpXSwgZGF0YVBvaW50ZXJQYXRoICsgXCIvXCIgKyBpKSkge1xuXHRcdFx0XHRcdHJldHVybiBlcnJvcjtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChzY2hlbWEuYWRkaXRpb25hbEl0ZW1zICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0aWYgKHR5cGVvZiBzY2hlbWEuYWRkaXRpb25hbEl0ZW1zID09PSBcImJvb2xlYW5cIikge1xuXHRcdFx0XHRcdGlmICghc2NoZW1hLmFkZGl0aW9uYWxJdGVtcykge1xuXHRcdFx0XHRcdFx0ZXJyb3IgPSAodGhpcy5jcmVhdGVFcnJvcihFcnJvckNvZGVzLkFSUkFZX0FERElUSU9OQUxfSVRFTVMsIHt9LCAnLycgKyBpLCAnL2FkZGl0aW9uYWxJdGVtcycsIG51bGwsIGRhdGEsIHNjaGVtYSkpO1xuXHRcdFx0XHRcdFx0aWYgKHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBlcnJvcjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSBpZiAoZXJyb3IgPSB0aGlzLnZhbGlkYXRlQWxsKGRhdGFbaV0sIHNjaGVtYS5hZGRpdGlvbmFsSXRlbXMsIFtpXSwgW1wiYWRkaXRpb25hbEl0ZW1zXCJdLCBkYXRhUG9pbnRlclBhdGggKyBcIi9cIiArIGkpKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGVycm9yO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdGZvciAoaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAoZXJyb3IgPSB0aGlzLnZhbGlkYXRlQWxsKGRhdGFbaV0sIHNjaGVtYS5pdGVtcywgW2ldLCBbXCJpdGVtc1wiXSwgZGF0YVBvaW50ZXJQYXRoICsgXCIvXCIgKyBpKSkge1xuXHRcdFx0XHRyZXR1cm4gZXJyb3I7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiBudWxsO1xufTtcblxuVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUudmFsaWRhdGVPYmplY3QgPSBmdW5jdGlvbiB2YWxpZGF0ZU9iamVjdChkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aCkge1xuXHRpZiAodHlwZW9mIGRhdGEgIT09IFwib2JqZWN0XCIgfHwgZGF0YSA9PT0gbnVsbCB8fCBBcnJheS5pc0FycmF5KGRhdGEpKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblx0cmV0dXJuIHRoaXMudmFsaWRhdGVPYmplY3RNaW5NYXhQcm9wZXJ0aWVzKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKVxuXHRcdHx8IHRoaXMudmFsaWRhdGVPYmplY3RSZXF1aXJlZFByb3BlcnRpZXMoZGF0YSwgc2NoZW1hLCBkYXRhUG9pbnRlclBhdGgpXG5cdFx0fHwgdGhpcy52YWxpZGF0ZU9iamVjdFByb3BlcnRpZXMoZGF0YSwgc2NoZW1hLCBkYXRhUG9pbnRlclBhdGgpXG5cdFx0fHwgdGhpcy52YWxpZGF0ZU9iamVjdERlcGVuZGVuY2llcyhkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aClcblx0XHR8fCBudWxsO1xufTtcblxuVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUudmFsaWRhdGVPYmplY3RNaW5NYXhQcm9wZXJ0aWVzID0gZnVuY3Rpb24gdmFsaWRhdGVPYmplY3RNaW5NYXhQcm9wZXJ0aWVzKGRhdGEsIHNjaGVtYSkge1xuXHR2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEpO1xuXHR2YXIgZXJyb3I7XG5cdGlmIChzY2hlbWEubWluUHJvcGVydGllcyAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0aWYgKGtleXMubGVuZ3RoIDwgc2NoZW1hLm1pblByb3BlcnRpZXMpIHtcblx0XHRcdGVycm9yID0gdGhpcy5jcmVhdGVFcnJvcihFcnJvckNvZGVzLk9CSkVDVF9QUk9QRVJUSUVTX01JTklNVU0sIHtwcm9wZXJ0eUNvdW50OiBrZXlzLmxlbmd0aCwgbWluaW11bTogc2NoZW1hLm1pblByb3BlcnRpZXN9LCAnJywgJy9taW5Qcm9wZXJ0aWVzJywgbnVsbCwgZGF0YSwgc2NoZW1hKTtcblx0XHRcdGlmICh0aGlzLmhhbmRsZUVycm9yKGVycm9yKSkge1xuXHRcdFx0XHRyZXR1cm4gZXJyb3I7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdGlmIChzY2hlbWEubWF4UHJvcGVydGllcyAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0aWYgKGtleXMubGVuZ3RoID4gc2NoZW1hLm1heFByb3BlcnRpZXMpIHtcblx0XHRcdGVycm9yID0gdGhpcy5jcmVhdGVFcnJvcihFcnJvckNvZGVzLk9CSkVDVF9QUk9QRVJUSUVTX01BWElNVU0sIHtwcm9wZXJ0eUNvdW50OiBrZXlzLmxlbmd0aCwgbWF4aW11bTogc2NoZW1hLm1heFByb3BlcnRpZXN9LCAnJywgJy9tYXhQcm9wZXJ0aWVzJywgbnVsbCwgZGF0YSwgc2NoZW1hKTtcblx0XHRcdGlmICh0aGlzLmhhbmRsZUVycm9yKGVycm9yKSkge1xuXHRcdFx0XHRyZXR1cm4gZXJyb3I7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiBudWxsO1xufTtcblxuVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUudmFsaWRhdGVPYmplY3RSZXF1aXJlZFByb3BlcnRpZXMgPSBmdW5jdGlvbiB2YWxpZGF0ZU9iamVjdFJlcXVpcmVkUHJvcGVydGllcyhkYXRhLCBzY2hlbWEpIHtcblx0aWYgKHNjaGVtYS5yZXF1aXJlZCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzY2hlbWEucmVxdWlyZWQubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBrZXkgPSBzY2hlbWEucmVxdWlyZWRbaV07XG5cdFx0XHRpZiAoZGF0YVtrZXldID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0dmFyIGVycm9yID0gdGhpcy5jcmVhdGVFcnJvcihFcnJvckNvZGVzLk9CSkVDVF9SRVFVSVJFRCwge2tleToga2V5fSwgJycsICcvcmVxdWlyZWQvJyArIGksIG51bGwsIGRhdGEsIHNjaGVtYSk7XG5cdFx0XHRcdGlmICh0aGlzLmhhbmRsZUVycm9yKGVycm9yKSkge1xuXHRcdFx0XHRcdHJldHVybiBlcnJvcjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRyZXR1cm4gbnVsbDtcbn07XG5cblZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLnZhbGlkYXRlT2JqZWN0UHJvcGVydGllcyA9IGZ1bmN0aW9uIHZhbGlkYXRlT2JqZWN0UHJvcGVydGllcyhkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aCkge1xuXHR2YXIgZXJyb3I7XG5cdGZvciAodmFyIGtleSBpbiBkYXRhKSB7XG5cdFx0dmFyIGtleVBvaW50ZXJQYXRoID0gZGF0YVBvaW50ZXJQYXRoICsgXCIvXCIgKyBrZXkucmVwbGFjZSgvfi9nLCAnfjAnKS5yZXBsYWNlKC9cXC8vZywgJ34xJyk7XG5cdFx0dmFyIGZvdW5kTWF0Y2ggPSBmYWxzZTtcblx0XHRpZiAoc2NoZW1hLnByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCAmJiBzY2hlbWEucHJvcGVydGllc1trZXldICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdGZvdW5kTWF0Y2ggPSB0cnVlO1xuXHRcdFx0aWYgKGVycm9yID0gdGhpcy52YWxpZGF0ZUFsbChkYXRhW2tleV0sIHNjaGVtYS5wcm9wZXJ0aWVzW2tleV0sIFtrZXldLCBbXCJwcm9wZXJ0aWVzXCIsIGtleV0sIGtleVBvaW50ZXJQYXRoKSkge1xuXHRcdFx0XHRyZXR1cm4gZXJyb3I7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmIChzY2hlbWEucGF0dGVyblByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0Zm9yICh2YXIgcGF0dGVybktleSBpbiBzY2hlbWEucGF0dGVyblByb3BlcnRpZXMpIHtcblx0XHRcdFx0dmFyIHJlZ2V4cCA9IG5ldyBSZWdFeHAocGF0dGVybktleSk7XG5cdFx0XHRcdGlmIChyZWdleHAudGVzdChrZXkpKSB7XG5cdFx0XHRcdFx0Zm91bmRNYXRjaCA9IHRydWU7XG5cdFx0XHRcdFx0aWYgKGVycm9yID0gdGhpcy52YWxpZGF0ZUFsbChkYXRhW2tleV0sIHNjaGVtYS5wYXR0ZXJuUHJvcGVydGllc1twYXR0ZXJuS2V5XSwgW2tleV0sIFtcInBhdHRlcm5Qcm9wZXJ0aWVzXCIsIHBhdHRlcm5LZXldLCBrZXlQb2ludGVyUGF0aCkpIHtcblx0XHRcdFx0XHRcdHJldHVybiBlcnJvcjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKCFmb3VuZE1hdGNoKSB7XG5cdFx0XHRpZiAoc2NoZW1hLmFkZGl0aW9uYWxQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0aWYgKHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcykge1xuXHRcdFx0XHRcdHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzW2tleVBvaW50ZXJQYXRoXSA9IHRydWU7XG5cdFx0XHRcdFx0ZGVsZXRlIHRoaXMudW5rbm93blByb3BlcnR5UGF0aHNba2V5UG9pbnRlclBhdGhdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh0eXBlb2Ygc2NoZW1hLmFkZGl0aW9uYWxQcm9wZXJ0aWVzID09PSBcImJvb2xlYW5cIikge1xuXHRcdFx0XHRcdGlmICghc2NoZW1hLmFkZGl0aW9uYWxQcm9wZXJ0aWVzKSB7XG5cdFx0XHRcdFx0XHRlcnJvciA9IHRoaXMuY3JlYXRlRXJyb3IoRXJyb3JDb2Rlcy5PQkpFQ1RfQURESVRJT05BTF9QUk9QRVJUSUVTLCB7a2V5OiBrZXl9LCAnJywgJy9hZGRpdGlvbmFsUHJvcGVydGllcycsIG51bGwsIGRhdGEsIHNjaGVtYSkucHJlZml4V2l0aChrZXksIG51bGwpO1xuXHRcdFx0XHRcdFx0aWYgKHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBlcnJvcjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aWYgKGVycm9yID0gdGhpcy52YWxpZGF0ZUFsbChkYXRhW2tleV0sIHNjaGVtYS5hZGRpdGlvbmFsUHJvcGVydGllcywgW2tleV0sIFtcImFkZGl0aW9uYWxQcm9wZXJ0aWVzXCJdLCBrZXlQb2ludGVyUGF0aCkpIHtcblx0XHRcdFx0XHRcdHJldHVybiBlcnJvcjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAodGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzICYmICF0aGlzLmtub3duUHJvcGVydHlQYXRoc1trZXlQb2ludGVyUGF0aF0pIHtcblx0XHRcdFx0dGhpcy51bmtub3duUHJvcGVydHlQYXRoc1trZXlQb2ludGVyUGF0aF0gPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAodGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzKSB7XG5cdFx0XHR0aGlzLmtub3duUHJvcGVydHlQYXRoc1trZXlQb2ludGVyUGF0aF0gPSB0cnVlO1xuXHRcdFx0ZGVsZXRlIHRoaXMudW5rbm93blByb3BlcnR5UGF0aHNba2V5UG9pbnRlclBhdGhdO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gbnVsbDtcbn07XG5cblZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLnZhbGlkYXRlT2JqZWN0RGVwZW5kZW5jaWVzID0gZnVuY3Rpb24gdmFsaWRhdGVPYmplY3REZXBlbmRlbmNpZXMoZGF0YSwgc2NoZW1hLCBkYXRhUG9pbnRlclBhdGgpIHtcblx0dmFyIGVycm9yO1xuXHRpZiAoc2NoZW1hLmRlcGVuZGVuY2llcyAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0Zm9yICh2YXIgZGVwS2V5IGluIHNjaGVtYS5kZXBlbmRlbmNpZXMpIHtcblx0XHRcdGlmIChkYXRhW2RlcEtleV0gIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHR2YXIgZGVwID0gc2NoZW1hLmRlcGVuZGVuY2llc1tkZXBLZXldO1xuXHRcdFx0XHRpZiAodHlwZW9mIGRlcCA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0XHRcdGlmIChkYXRhW2RlcF0gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0ZXJyb3IgPSB0aGlzLmNyZWF0ZUVycm9yKEVycm9yQ29kZXMuT0JKRUNUX0RFUEVOREVOQ1lfS0VZLCB7a2V5OiBkZXBLZXksIG1pc3Npbmc6IGRlcH0sICcnLCAnJywgbnVsbCwgZGF0YSwgc2NoZW1hKS5wcmVmaXhXaXRoKG51bGwsIGRlcEtleSkucHJlZml4V2l0aChudWxsLCBcImRlcGVuZGVuY2llc1wiKTtcblx0XHRcdFx0XHRcdGlmICh0aGlzLmhhbmRsZUVycm9yKGVycm9yKSkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZXJyb3I7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZGVwKSkge1xuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZGVwLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHR2YXIgcmVxdWlyZWRLZXkgPSBkZXBbaV07XG5cdFx0XHRcdFx0XHRpZiAoZGF0YVtyZXF1aXJlZEtleV0gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0XHRlcnJvciA9IHRoaXMuY3JlYXRlRXJyb3IoRXJyb3JDb2Rlcy5PQkpFQ1RfREVQRU5ERU5DWV9LRVksIHtrZXk6IGRlcEtleSwgbWlzc2luZzogcmVxdWlyZWRLZXl9LCAnJywgJy8nICsgaSwgbnVsbCwgZGF0YSwgc2NoZW1hKS5wcmVmaXhXaXRoKG51bGwsIGRlcEtleSkucHJlZml4V2l0aChudWxsLCBcImRlcGVuZGVuY2llc1wiKTtcblx0XHRcdFx0XHRcdFx0aWYgKHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGVycm9yO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmIChlcnJvciA9IHRoaXMudmFsaWRhdGVBbGwoZGF0YSwgZGVwLCBbXSwgW1wiZGVwZW5kZW5jaWVzXCIsIGRlcEtleV0sIGRhdGFQb2ludGVyUGF0aCkpIHtcblx0XHRcdFx0XHRcdHJldHVybiBlcnJvcjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblx0cmV0dXJuIG51bGw7XG59O1xuXG5WYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS52YWxpZGF0ZUNvbWJpbmF0aW9ucyA9IGZ1bmN0aW9uIHZhbGlkYXRlQ29tYmluYXRpb25zKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKSB7XG5cdHJldHVybiB0aGlzLnZhbGlkYXRlQWxsT2YoZGF0YSwgc2NoZW1hLCBkYXRhUG9pbnRlclBhdGgpXG5cdFx0fHwgdGhpcy52YWxpZGF0ZUFueU9mKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKVxuXHRcdHx8IHRoaXMudmFsaWRhdGVPbmVPZihkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aClcblx0XHR8fCB0aGlzLnZhbGlkYXRlTm90KGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKVxuXHRcdHx8IG51bGw7XG59O1xuXG5WYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS52YWxpZGF0ZUFsbE9mID0gZnVuY3Rpb24gdmFsaWRhdGVBbGxPZihkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aCkge1xuXHRpZiAoc2NoZW1hLmFsbE9mID09PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXHR2YXIgZXJyb3I7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgc2NoZW1hLmFsbE9mLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIHN1YlNjaGVtYSA9IHNjaGVtYS5hbGxPZltpXTtcblx0XHRpZiAoZXJyb3IgPSB0aGlzLnZhbGlkYXRlQWxsKGRhdGEsIHN1YlNjaGVtYSwgW10sIFtcImFsbE9mXCIsIGldLCBkYXRhUG9pbnRlclBhdGgpKSB7XG5cdFx0XHRyZXR1cm4gZXJyb3I7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBudWxsO1xufTtcblxuVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUudmFsaWRhdGVBbnlPZiA9IGZ1bmN0aW9uIHZhbGlkYXRlQW55T2YoZGF0YSwgc2NoZW1hLCBkYXRhUG9pbnRlclBhdGgpIHtcblx0aWYgKHNjaGVtYS5hbnlPZiA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblx0dmFyIGVycm9ycyA9IFtdO1xuXHR2YXIgc3RhcnRFcnJvckNvdW50ID0gdGhpcy5lcnJvcnMubGVuZ3RoO1xuXHR2YXIgb2xkVW5rbm93blByb3BlcnR5UGF0aHMsIG9sZEtub3duUHJvcGVydHlQYXRocztcblx0aWYgKHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcykge1xuXHRcdG9sZFVua25vd25Qcm9wZXJ0eVBhdGhzID0gdGhpcy51bmtub3duUHJvcGVydHlQYXRocztcblx0XHRvbGRLbm93blByb3BlcnR5UGF0aHMgPSB0aGlzLmtub3duUHJvcGVydHlQYXRocztcblx0fVxuXHR2YXIgZXJyb3JBdEVuZCA9IHRydWU7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgc2NoZW1hLmFueU9mLmxlbmd0aDsgaSsrKSB7XG5cdFx0aWYgKHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcykge1xuXHRcdFx0dGhpcy51bmtub3duUHJvcGVydHlQYXRocyA9IHt9O1xuXHRcdFx0dGhpcy5rbm93blByb3BlcnR5UGF0aHMgPSB7fTtcblx0XHR9XG5cdFx0dmFyIHN1YlNjaGVtYSA9IHNjaGVtYS5hbnlPZltpXTtcblxuXHRcdHZhciBlcnJvckNvdW50ID0gdGhpcy5lcnJvcnMubGVuZ3RoO1xuXHRcdHZhciBlcnJvciA9IHRoaXMudmFsaWRhdGVBbGwoZGF0YSwgc3ViU2NoZW1hLCBbXSwgW1wiYW55T2ZcIiwgaV0sIGRhdGFQb2ludGVyUGF0aCk7XG5cblx0XHRpZiAoZXJyb3IgPT09IG51bGwgJiYgZXJyb3JDb3VudCA9PT0gdGhpcy5lcnJvcnMubGVuZ3RoKSB7XG5cdFx0XHR0aGlzLmVycm9ycyA9IHRoaXMuZXJyb3JzLnNsaWNlKDAsIHN0YXJ0RXJyb3JDb3VudCk7XG5cblx0XHRcdGlmICh0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMpIHtcblx0XHRcdFx0Zm9yICh2YXIga25vd25LZXkgaW4gdGhpcy5rbm93blByb3BlcnR5UGF0aHMpIHtcblx0XHRcdFx0XHRvbGRLbm93blByb3BlcnR5UGF0aHNba25vd25LZXldID0gdHJ1ZTtcblx0XHRcdFx0XHRkZWxldGUgb2xkVW5rbm93blByb3BlcnR5UGF0aHNba25vd25LZXldO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGZvciAodmFyIHVua25vd25LZXkgaW4gdGhpcy51bmtub3duUHJvcGVydHlQYXRocykge1xuXHRcdFx0XHRcdGlmICghb2xkS25vd25Qcm9wZXJ0eVBhdGhzW3Vua25vd25LZXldKSB7XG5cdFx0XHRcdFx0XHRvbGRVbmtub3duUHJvcGVydHlQYXRoc1t1bmtub3duS2V5XSA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIFdlIG5lZWQgdG8gY29udGludWUgbG9vcGluZyBzbyB3ZSBjYXRjaCBhbGwgdGhlIHByb3BlcnR5IGRlZmluaXRpb25zLCBidXQgd2UgZG9uJ3Qgd2FudCB0byByZXR1cm4gYW4gZXJyb3Jcblx0XHRcdFx0ZXJyb3JBdEVuZCA9IGZhbHNlO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHRcdGlmIChlcnJvcikge1xuXHRcdFx0ZXJyb3JzLnB1c2goZXJyb3IucHJlZml4V2l0aChudWxsLCBcIlwiICsgaSkucHJlZml4V2l0aChudWxsLCBcImFueU9mXCIpKTtcblx0XHR9XG5cdH1cblx0aWYgKHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcykge1xuXHRcdHRoaXMudW5rbm93blByb3BlcnR5UGF0aHMgPSBvbGRVbmtub3duUHJvcGVydHlQYXRocztcblx0XHR0aGlzLmtub3duUHJvcGVydHlQYXRocyA9IG9sZEtub3duUHJvcGVydHlQYXRocztcblx0fVxuXHRpZiAoZXJyb3JBdEVuZCkge1xuXHRcdGVycm9ycyA9IGVycm9ycy5jb25jYXQodGhpcy5lcnJvcnMuc2xpY2Uoc3RhcnRFcnJvckNvdW50KSk7XG5cdFx0dGhpcy5lcnJvcnMgPSB0aGlzLmVycm9ycy5zbGljZSgwLCBzdGFydEVycm9yQ291bnQpO1xuXHRcdHJldHVybiB0aGlzLmNyZWF0ZUVycm9yKEVycm9yQ29kZXMuQU5ZX09GX01JU1NJTkcsIHt9LCBcIlwiLCBcIi9hbnlPZlwiLCBlcnJvcnMsIGRhdGEsIHNjaGVtYSk7XG5cdH1cbn07XG5cblZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLnZhbGlkYXRlT25lT2YgPSBmdW5jdGlvbiB2YWxpZGF0ZU9uZU9mKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKSB7XG5cdGlmIChzY2hlbWEub25lT2YgPT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cdHZhciB2YWxpZEluZGV4ID0gbnVsbDtcblx0dmFyIGVycm9ycyA9IFtdO1xuXHR2YXIgc3RhcnRFcnJvckNvdW50ID0gdGhpcy5lcnJvcnMubGVuZ3RoO1xuXHR2YXIgb2xkVW5rbm93blByb3BlcnR5UGF0aHMsIG9sZEtub3duUHJvcGVydHlQYXRocztcblx0aWYgKHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcykge1xuXHRcdG9sZFVua25vd25Qcm9wZXJ0eVBhdGhzID0gdGhpcy51bmtub3duUHJvcGVydHlQYXRocztcblx0XHRvbGRLbm93blByb3BlcnR5UGF0aHMgPSB0aGlzLmtub3duUHJvcGVydHlQYXRocztcblx0fVxuXHRmb3IgKHZhciBpID0gMDsgaSA8IHNjaGVtYS5vbmVPZi5sZW5ndGg7IGkrKykge1xuXHRcdGlmICh0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMpIHtcblx0XHRcdHRoaXMudW5rbm93blByb3BlcnR5UGF0aHMgPSB7fTtcblx0XHRcdHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzID0ge307XG5cdFx0fVxuXHRcdHZhciBzdWJTY2hlbWEgPSBzY2hlbWEub25lT2ZbaV07XG5cblx0XHR2YXIgZXJyb3JDb3VudCA9IHRoaXMuZXJyb3JzLmxlbmd0aDtcblx0XHR2YXIgZXJyb3IgPSB0aGlzLnZhbGlkYXRlQWxsKGRhdGEsIHN1YlNjaGVtYSwgW10sIFtcIm9uZU9mXCIsIGldLCBkYXRhUG9pbnRlclBhdGgpO1xuXG5cdFx0aWYgKGVycm9yID09PSBudWxsICYmIGVycm9yQ291bnQgPT09IHRoaXMuZXJyb3JzLmxlbmd0aCkge1xuXHRcdFx0aWYgKHZhbGlkSW5kZXggPT09IG51bGwpIHtcblx0XHRcdFx0dmFsaWRJbmRleCA9IGk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLmVycm9ycyA9IHRoaXMuZXJyb3JzLnNsaWNlKDAsIHN0YXJ0RXJyb3JDb3VudCk7XG5cdFx0XHRcdHJldHVybiB0aGlzLmNyZWF0ZUVycm9yKEVycm9yQ29kZXMuT05FX09GX01VTFRJUExFLCB7aW5kZXgxOiB2YWxpZEluZGV4LCBpbmRleDI6IGl9LCBcIlwiLCBcIi9vbmVPZlwiLCBudWxsLCBkYXRhLCBzY2hlbWEpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcykge1xuXHRcdFx0XHRmb3IgKHZhciBrbm93bktleSBpbiB0aGlzLmtub3duUHJvcGVydHlQYXRocykge1xuXHRcdFx0XHRcdG9sZEtub3duUHJvcGVydHlQYXRoc1trbm93bktleV0gPSB0cnVlO1xuXHRcdFx0XHRcdGRlbGV0ZSBvbGRVbmtub3duUHJvcGVydHlQYXRoc1trbm93bktleV07XG5cdFx0XHRcdH1cblx0XHRcdFx0Zm9yICh2YXIgdW5rbm93bktleSBpbiB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzKSB7XG5cdFx0XHRcdFx0aWYgKCFvbGRLbm93blByb3BlcnR5UGF0aHNbdW5rbm93bktleV0pIHtcblx0XHRcdFx0XHRcdG9sZFVua25vd25Qcm9wZXJ0eVBhdGhzW3Vua25vd25LZXldID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGVycm9yKSB7XG5cdFx0XHRlcnJvcnMucHVzaChlcnJvcik7XG5cdFx0fVxuXHR9XG5cdGlmICh0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMpIHtcblx0XHR0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzID0gb2xkVW5rbm93blByb3BlcnR5UGF0aHM7XG5cdFx0dGhpcy5rbm93blByb3BlcnR5UGF0aHMgPSBvbGRLbm93blByb3BlcnR5UGF0aHM7XG5cdH1cblx0aWYgKHZhbGlkSW5kZXggPT09IG51bGwpIHtcblx0XHRlcnJvcnMgPSBlcnJvcnMuY29uY2F0KHRoaXMuZXJyb3JzLnNsaWNlKHN0YXJ0RXJyb3JDb3VudCkpO1xuXHRcdHRoaXMuZXJyb3JzID0gdGhpcy5lcnJvcnMuc2xpY2UoMCwgc3RhcnRFcnJvckNvdW50KTtcblx0XHRyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihFcnJvckNvZGVzLk9ORV9PRl9NSVNTSU5HLCB7fSwgXCJcIiwgXCIvb25lT2ZcIiwgZXJyb3JzLCBkYXRhLCBzY2hlbWEpO1xuXHR9IGVsc2Uge1xuXHRcdHRoaXMuZXJyb3JzID0gdGhpcy5lcnJvcnMuc2xpY2UoMCwgc3RhcnRFcnJvckNvdW50KTtcblx0fVxuXHRyZXR1cm4gbnVsbDtcbn07XG5cblZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLnZhbGlkYXRlTm90ID0gZnVuY3Rpb24gdmFsaWRhdGVOb3QoZGF0YSwgc2NoZW1hLCBkYXRhUG9pbnRlclBhdGgpIHtcblx0aWYgKHNjaGVtYS5ub3QgPT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cdHZhciBvbGRFcnJvckNvdW50ID0gdGhpcy5lcnJvcnMubGVuZ3RoO1xuXHR2YXIgb2xkVW5rbm93blByb3BlcnR5UGF0aHMsIG9sZEtub3duUHJvcGVydHlQYXRocztcblx0aWYgKHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcykge1xuXHRcdG9sZFVua25vd25Qcm9wZXJ0eVBhdGhzID0gdGhpcy51bmtub3duUHJvcGVydHlQYXRocztcblx0XHRvbGRLbm93blByb3BlcnR5UGF0aHMgPSB0aGlzLmtub3duUHJvcGVydHlQYXRocztcblx0XHR0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzID0ge307XG5cdFx0dGhpcy5rbm93blByb3BlcnR5UGF0aHMgPSB7fTtcblx0fVxuXHR2YXIgZXJyb3IgPSB0aGlzLnZhbGlkYXRlQWxsKGRhdGEsIHNjaGVtYS5ub3QsIG51bGwsIG51bGwsIGRhdGFQb2ludGVyUGF0aCk7XG5cdHZhciBub3RFcnJvcnMgPSB0aGlzLmVycm9ycy5zbGljZShvbGRFcnJvckNvdW50KTtcblx0dGhpcy5lcnJvcnMgPSB0aGlzLmVycm9ycy5zbGljZSgwLCBvbGRFcnJvckNvdW50KTtcblx0aWYgKHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcykge1xuXHRcdHRoaXMudW5rbm93blByb3BlcnR5UGF0aHMgPSBvbGRVbmtub3duUHJvcGVydHlQYXRocztcblx0XHR0aGlzLmtub3duUHJvcGVydHlQYXRocyA9IG9sZEtub3duUHJvcGVydHlQYXRocztcblx0fVxuXHRpZiAoZXJyb3IgPT09IG51bGwgJiYgbm90RXJyb3JzLmxlbmd0aCA9PT0gMCkge1xuXHRcdHJldHVybiB0aGlzLmNyZWF0ZUVycm9yKEVycm9yQ29kZXMuTk9UX1BBU1NFRCwge30sIFwiXCIsIFwiL25vdFwiLCBudWxsLCBkYXRhLCBzY2hlbWEpO1xuXHR9XG5cdHJldHVybiBudWxsO1xufTtcblxuVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUudmFsaWRhdGVIeXBlcm1lZGlhID0gZnVuY3Rpb24gdmFsaWRhdGVDb21iaW5hdGlvbnMoZGF0YSwgc2NoZW1hLCBkYXRhUG9pbnRlclBhdGgpIHtcblx0aWYgKCFzY2hlbWEubGlua3MpIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXHR2YXIgZXJyb3I7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgc2NoZW1hLmxpbmtzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGxkbyA9IHNjaGVtYS5saW5rc1tpXTtcblx0XHRpZiAobGRvLnJlbCA9PT0gXCJkZXNjcmliZWRieVwiKSB7XG5cdFx0XHR2YXIgdGVtcGxhdGUgPSBuZXcgVXJpVGVtcGxhdGUobGRvLmhyZWYpO1xuXHRcdFx0dmFyIGFsbFByZXNlbnQgPSB0cnVlO1xuXHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCB0ZW1wbGF0ZS52YXJOYW1lcy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRpZiAoISh0ZW1wbGF0ZS52YXJOYW1lc1tqXSBpbiBkYXRhKSkge1xuXHRcdFx0XHRcdGFsbFByZXNlbnQgPSBmYWxzZTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYgKGFsbFByZXNlbnQpIHtcblx0XHRcdFx0dmFyIHNjaGVtYVVybCA9IHRlbXBsYXRlLmZpbGxGcm9tT2JqZWN0KGRhdGEpO1xuXHRcdFx0XHR2YXIgc3ViU2NoZW1hID0ge1wiJHJlZlwiOiBzY2hlbWFVcmx9O1xuXHRcdFx0XHRpZiAoZXJyb3IgPSB0aGlzLnZhbGlkYXRlQWxsKGRhdGEsIHN1YlNjaGVtYSwgW10sIFtcImxpbmtzXCIsIGldLCBkYXRhUG9pbnRlclBhdGgpKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGVycm9yO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59O1xuXG4vLyBwYXJzZVVSSSgpIGFuZCByZXNvbHZlVXJsKCkgYXJlIGZyb20gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vMTA4ODg1MFxuLy8gICAtICByZWxlYXNlZCBhcyBwdWJsaWMgZG9tYWluIGJ5IGF1dGhvciAoXCJZYWZmbGVcIikgLSBzZWUgY29tbWVudHMgb24gZ2lzdFxuXG5mdW5jdGlvbiBwYXJzZVVSSSh1cmwpIHtcblx0dmFyIG0gPSBTdHJpbmcodXJsKS5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJykubWF0Y2goL14oW146XFwvPyNdKzopPyhcXC9cXC8oPzpbXjpAXSooPzo6W146QF0qKT9AKT8oKFteOlxcLz8jXSopKD86OihcXGQqKSk/KSk/KFtePyNdKikoXFw/W14jXSopPygjW1xcc1xcU10qKT8vKTtcblx0Ly8gYXV0aG9yaXR5ID0gJy8vJyArIHVzZXIgKyAnOicgKyBwYXNzICdAJyArIGhvc3RuYW1lICsgJzonIHBvcnRcblx0cmV0dXJuIChtID8ge1xuXHRcdGhyZWYgICAgIDogbVswXSB8fCAnJyxcblx0XHRwcm90b2NvbCA6IG1bMV0gfHwgJycsXG5cdFx0YXV0aG9yaXR5OiBtWzJdIHx8ICcnLFxuXHRcdGhvc3QgICAgIDogbVszXSB8fCAnJyxcblx0XHRob3N0bmFtZSA6IG1bNF0gfHwgJycsXG5cdFx0cG9ydCAgICAgOiBtWzVdIHx8ICcnLFxuXHRcdHBhdGhuYW1lIDogbVs2XSB8fCAnJyxcblx0XHRzZWFyY2ggICA6IG1bN10gfHwgJycsXG5cdFx0aGFzaCAgICAgOiBtWzhdIHx8ICcnXG5cdH0gOiBudWxsKTtcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZVVybChiYXNlLCBocmVmKSB7Ly8gUkZDIDM5ODZcblxuXHRmdW5jdGlvbiByZW1vdmVEb3RTZWdtZW50cyhpbnB1dCkge1xuXHRcdHZhciBvdXRwdXQgPSBbXTtcblx0XHRpbnB1dC5yZXBsYWNlKC9eKFxcLlxcLj8oXFwvfCQpKSsvLCAnJylcblx0XHRcdC5yZXBsYWNlKC9cXC8oXFwuKFxcL3wkKSkrL2csICcvJylcblx0XHRcdC5yZXBsYWNlKC9cXC9cXC5cXC4kLywgJy8uLi8nKVxuXHRcdFx0LnJlcGxhY2UoL1xcLz9bXlxcL10qL2csIGZ1bmN0aW9uIChwKSB7XG5cdFx0XHRcdGlmIChwID09PSAnLy4uJykge1xuXHRcdFx0XHRcdG91dHB1dC5wb3AoKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRvdXRwdXQucHVzaChwKTtcblx0XHRcdFx0fVxuXHRcdH0pO1xuXHRcdHJldHVybiBvdXRwdXQuam9pbignJykucmVwbGFjZSgvXlxcLy8sIGlucHV0LmNoYXJBdCgwKSA9PT0gJy8nID8gJy8nIDogJycpO1xuXHR9XG5cblx0aHJlZiA9IHBhcnNlVVJJKGhyZWYgfHwgJycpO1xuXHRiYXNlID0gcGFyc2VVUkkoYmFzZSB8fCAnJyk7XG5cblx0cmV0dXJuICFocmVmIHx8ICFiYXNlID8gbnVsbCA6IChocmVmLnByb3RvY29sIHx8IGJhc2UucHJvdG9jb2wpICtcblx0XHQoaHJlZi5wcm90b2NvbCB8fCBocmVmLmF1dGhvcml0eSA/IGhyZWYuYXV0aG9yaXR5IDogYmFzZS5hdXRob3JpdHkpICtcblx0XHRyZW1vdmVEb3RTZWdtZW50cyhocmVmLnByb3RvY29sIHx8IGhyZWYuYXV0aG9yaXR5IHx8IGhyZWYucGF0aG5hbWUuY2hhckF0KDApID09PSAnLycgPyBocmVmLnBhdGhuYW1lIDogKGhyZWYucGF0aG5hbWUgPyAoKGJhc2UuYXV0aG9yaXR5ICYmICFiYXNlLnBhdGhuYW1lID8gJy8nIDogJycpICsgYmFzZS5wYXRobmFtZS5zbGljZSgwLCBiYXNlLnBhdGhuYW1lLmxhc3RJbmRleE9mKCcvJykgKyAxKSArIGhyZWYucGF0aG5hbWUpIDogYmFzZS5wYXRobmFtZSkpICtcblx0XHQoaHJlZi5wcm90b2NvbCB8fCBocmVmLmF1dGhvcml0eSB8fCBocmVmLnBhdGhuYW1lID8gaHJlZi5zZWFyY2ggOiAoaHJlZi5zZWFyY2ggfHwgYmFzZS5zZWFyY2gpKSArXG5cdFx0aHJlZi5oYXNoO1xufVxuXG5mdW5jdGlvbiBnZXREb2N1bWVudFVyaSh1cmkpIHtcblx0cmV0dXJuIHVyaS5zcGxpdCgnIycpWzBdO1xufVxuZnVuY3Rpb24gbm9ybVNjaGVtYShzY2hlbWEsIGJhc2VVcmkpIHtcblx0aWYgKHNjaGVtYSAmJiB0eXBlb2Ygc2NoZW1hID09PSBcIm9iamVjdFwiKSB7XG5cdFx0aWYgKGJhc2VVcmkgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0YmFzZVVyaSA9IHNjaGVtYS5pZDtcblx0XHR9IGVsc2UgaWYgKHR5cGVvZiBzY2hlbWEuaWQgPT09IFwic3RyaW5nXCIpIHtcblx0XHRcdGJhc2VVcmkgPSByZXNvbHZlVXJsKGJhc2VVcmksIHNjaGVtYS5pZCk7XG5cdFx0XHRzY2hlbWEuaWQgPSBiYXNlVXJpO1xuXHRcdH1cblx0XHRpZiAoQXJyYXkuaXNBcnJheShzY2hlbWEpKSB7XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHNjaGVtYS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRub3JtU2NoZW1hKHNjaGVtYVtpXSwgYmFzZVVyaSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICh0eXBlb2Ygc2NoZW1hWyckcmVmJ10gPT09IFwic3RyaW5nXCIpIHtcblx0XHRcdFx0c2NoZW1hWyckcmVmJ10gPSByZXNvbHZlVXJsKGJhc2VVcmksIHNjaGVtYVsnJHJlZiddKTtcblx0XHRcdH1cblx0XHRcdGZvciAodmFyIGtleSBpbiBzY2hlbWEpIHtcblx0XHRcdFx0aWYgKGtleSAhPT0gXCJlbnVtXCIpIHtcblx0XHRcdFx0XHRub3JtU2NoZW1hKHNjaGVtYVtrZXldLCBiYXNlVXJpKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBkZWZhdWx0RXJyb3JSZXBvcnRlcihsYW5ndWFnZSkge1xuXHRsYW5ndWFnZSA9IGxhbmd1YWdlIHx8ICdlbic7XG5cblx0dmFyIGVycm9yTWVzc2FnZXMgPSBsYW5ndWFnZXNbbGFuZ3VhZ2VdO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoZXJyb3IpIHtcblx0XHR2YXIgbWVzc2FnZVRlbXBsYXRlID0gZXJyb3JNZXNzYWdlc1tlcnJvci5jb2RlXSB8fCBFcnJvck1lc3NhZ2VzRGVmYXVsdFtlcnJvci5jb2RlXTtcblx0XHRpZiAodHlwZW9mIG1lc3NhZ2VUZW1wbGF0ZSAhPT0gJ3N0cmluZycpIHtcblx0XHRcdHJldHVybiBcIlVua25vd24gZXJyb3IgY29kZSBcIiArIGVycm9yLmNvZGUgKyBcIjogXCIgKyBKU09OLnN0cmluZ2lmeShlcnJvci5tZXNzYWdlUGFyYW1zKTtcblx0XHR9XG5cdFx0dmFyIG1lc3NhZ2VQYXJhbXMgPSBlcnJvci5wYXJhbXM7XG5cdFx0Ly8gQWRhcHRlZCBmcm9tIENyb2NrZm9yZCdzIHN1cHBsYW50KClcblx0XHRyZXR1cm4gbWVzc2FnZVRlbXBsYXRlLnJlcGxhY2UoL1xceyhbXnt9XSopXFx9L2csIGZ1bmN0aW9uICh3aG9sZSwgdmFyTmFtZSkge1xuXHRcdFx0dmFyIHN1YlZhbHVlID0gbWVzc2FnZVBhcmFtc1t2YXJOYW1lXTtcblx0XHRcdHJldHVybiB0eXBlb2Ygc3ViVmFsdWUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBzdWJWYWx1ZSA9PT0gJ251bWJlcicgPyBzdWJWYWx1ZSA6IHdob2xlO1xuXHRcdH0pO1xuXHR9O1xufVxuXG52YXIgRXJyb3JDb2RlcyA9IHtcblx0SU5WQUxJRF9UWVBFOiAwLFxuXHRFTlVNX01JU01BVENIOiAxLFxuXHRBTllfT0ZfTUlTU0lORzogMTAsXG5cdE9ORV9PRl9NSVNTSU5HOiAxMSxcblx0T05FX09GX01VTFRJUExFOiAxMixcblx0Tk9UX1BBU1NFRDogMTMsXG5cdC8vIE51bWVyaWMgZXJyb3JzXG5cdE5VTUJFUl9NVUxUSVBMRV9PRjogMTAwLFxuXHROVU1CRVJfTUlOSU1VTTogMTAxLFxuXHROVU1CRVJfTUlOSU1VTV9FWENMVVNJVkU6IDEwMixcblx0TlVNQkVSX01BWElNVU06IDEwMyxcblx0TlVNQkVSX01BWElNVU1fRVhDTFVTSVZFOiAxMDQsXG5cdE5VTUJFUl9OT1RfQV9OVU1CRVI6IDEwNSxcblx0Ly8gU3RyaW5nIGVycm9yc1xuXHRTVFJJTkdfTEVOR1RIX1NIT1JUOiAyMDAsXG5cdFNUUklOR19MRU5HVEhfTE9ORzogMjAxLFxuXHRTVFJJTkdfUEFUVEVSTjogMjAyLFxuXHQvLyBPYmplY3QgZXJyb3JzXG5cdE9CSkVDVF9QUk9QRVJUSUVTX01JTklNVU06IDMwMCxcblx0T0JKRUNUX1BST1BFUlRJRVNfTUFYSU1VTTogMzAxLFxuXHRPQkpFQ1RfUkVRVUlSRUQ6IDMwMixcblx0T0JKRUNUX0FERElUSU9OQUxfUFJPUEVSVElFUzogMzAzLFxuXHRPQkpFQ1RfREVQRU5ERU5DWV9LRVk6IDMwNCxcblx0Ly8gQXJyYXkgZXJyb3JzXG5cdEFSUkFZX0xFTkdUSF9TSE9SVDogNDAwLFxuXHRBUlJBWV9MRU5HVEhfTE9ORzogNDAxLFxuXHRBUlJBWV9VTklRVUU6IDQwMixcblx0QVJSQVlfQURESVRJT05BTF9JVEVNUzogNDAzLFxuXHQvLyBDdXN0b20vdXNlci1kZWZpbmVkIGVycm9yc1xuXHRGT1JNQVRfQ1VTVE9NOiA1MDAsXG5cdEtFWVdPUkRfQ1VTVE9NOiA1MDEsXG5cdC8vIFNjaGVtYSBzdHJ1Y3R1cmVcblx0Q0lSQ1VMQVJfUkVGRVJFTkNFOiA2MDAsXG5cdC8vIE5vbi1zdGFuZGFyZCB2YWxpZGF0aW9uIG9wdGlvbnNcblx0VU5LTk9XTl9QUk9QRVJUWTogMTAwMFxufTtcbnZhciBFcnJvckNvZGVMb29rdXAgPSB7fTtcbmZvciAodmFyIGtleSBpbiBFcnJvckNvZGVzKSB7XG5cdEVycm9yQ29kZUxvb2t1cFtFcnJvckNvZGVzW2tleV1dID0ga2V5O1xufVxudmFyIEVycm9yTWVzc2FnZXNEZWZhdWx0ID0ge1xuXHRJTlZBTElEX1RZUEU6IFwiSW52YWxpZCB0eXBlOiB7dHlwZX0gKGV4cGVjdGVkIHtleHBlY3RlZH0pXCIsXG5cdEVOVU1fTUlTTUFUQ0g6IFwiTm8gZW51bSBtYXRjaCBmb3I6IHt2YWx1ZX1cIixcblx0QU5ZX09GX01JU1NJTkc6IFwiRGF0YSBkb2VzIG5vdCBtYXRjaCBhbnkgc2NoZW1hcyBmcm9tIFxcXCJhbnlPZlxcXCJcIixcblx0T05FX09GX01JU1NJTkc6IFwiRGF0YSBkb2VzIG5vdCBtYXRjaCBhbnkgc2NoZW1hcyBmcm9tIFxcXCJvbmVPZlxcXCJcIixcblx0T05FX09GX01VTFRJUExFOiBcIkRhdGEgaXMgdmFsaWQgYWdhaW5zdCBtb3JlIHRoYW4gb25lIHNjaGVtYSBmcm9tIFxcXCJvbmVPZlxcXCI6IGluZGljZXMge2luZGV4MX0gYW5kIHtpbmRleDJ9XCIsXG5cdE5PVF9QQVNTRUQ6IFwiRGF0YSBtYXRjaGVzIHNjaGVtYSBmcm9tIFxcXCJub3RcXFwiXCIsXG5cdC8vIE51bWVyaWMgZXJyb3JzXG5cdE5VTUJFUl9NVUxUSVBMRV9PRjogXCJWYWx1ZSB7dmFsdWV9IGlzIG5vdCBhIG11bHRpcGxlIG9mIHttdWx0aXBsZU9mfVwiLFxuXHROVU1CRVJfTUlOSU1VTTogXCJWYWx1ZSB7dmFsdWV9IGlzIGxlc3MgdGhhbiBtaW5pbXVtIHttaW5pbXVtfVwiLFxuXHROVU1CRVJfTUlOSU1VTV9FWENMVVNJVkU6IFwiVmFsdWUge3ZhbHVlfSBpcyBlcXVhbCB0byBleGNsdXNpdmUgbWluaW11bSB7bWluaW11bX1cIixcblx0TlVNQkVSX01BWElNVU06IFwiVmFsdWUge3ZhbHVlfSBpcyBncmVhdGVyIHRoYW4gbWF4aW11bSB7bWF4aW11bX1cIixcblx0TlVNQkVSX01BWElNVU1fRVhDTFVTSVZFOiBcIlZhbHVlIHt2YWx1ZX0gaXMgZXF1YWwgdG8gZXhjbHVzaXZlIG1heGltdW0ge21heGltdW19XCIsXG5cdE5VTUJFUl9OT1RfQV9OVU1CRVI6IFwiVmFsdWUge3ZhbHVlfSBpcyBub3QgYSB2YWxpZCBudW1iZXJcIixcblx0Ly8gU3RyaW5nIGVycm9yc1xuXHRTVFJJTkdfTEVOR1RIX1NIT1JUOiBcIlN0cmluZyBpcyB0b28gc2hvcnQgKHtsZW5ndGh9IGNoYXJzKSwgbWluaW11bSB7bWluaW11bX1cIixcblx0U1RSSU5HX0xFTkdUSF9MT05HOiBcIlN0cmluZyBpcyB0b28gbG9uZyAoe2xlbmd0aH0gY2hhcnMpLCBtYXhpbXVtIHttYXhpbXVtfVwiLFxuXHRTVFJJTkdfUEFUVEVSTjogXCJTdHJpbmcgZG9lcyBub3QgbWF0Y2ggcGF0dGVybjoge3BhdHRlcm59XCIsXG5cdC8vIE9iamVjdCBlcnJvcnNcblx0T0JKRUNUX1BST1BFUlRJRVNfTUlOSU1VTTogXCJUb28gZmV3IHByb3BlcnRpZXMgZGVmaW5lZCAoe3Byb3BlcnR5Q291bnR9KSwgbWluaW11bSB7bWluaW11bX1cIixcblx0T0JKRUNUX1BST1BFUlRJRVNfTUFYSU1VTTogXCJUb28gbWFueSBwcm9wZXJ0aWVzIGRlZmluZWQgKHtwcm9wZXJ0eUNvdW50fSksIG1heGltdW0ge21heGltdW19XCIsXG5cdE9CSkVDVF9SRVFVSVJFRDogXCJNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5OiB7a2V5fVwiLFxuXHRPQkpFQ1RfQURESVRJT05BTF9QUk9QRVJUSUVTOiBcIkFkZGl0aW9uYWwgcHJvcGVydGllcyBub3QgYWxsb3dlZFwiLFxuXHRPQkpFQ1RfREVQRU5ERU5DWV9LRVk6IFwiRGVwZW5kZW5jeSBmYWlsZWQgLSBrZXkgbXVzdCBleGlzdDoge21pc3Npbmd9IChkdWUgdG8ga2V5OiB7a2V5fSlcIixcblx0Ly8gQXJyYXkgZXJyb3JzXG5cdEFSUkFZX0xFTkdUSF9TSE9SVDogXCJBcnJheSBpcyB0b28gc2hvcnQgKHtsZW5ndGh9KSwgbWluaW11bSB7bWluaW11bX1cIixcblx0QVJSQVlfTEVOR1RIX0xPTkc6IFwiQXJyYXkgaXMgdG9vIGxvbmcgKHtsZW5ndGh9KSwgbWF4aW11bSB7bWF4aW11bX1cIixcblx0QVJSQVlfVU5JUVVFOiBcIkFycmF5IGl0ZW1zIGFyZSBub3QgdW5pcXVlIChpbmRpY2VzIHttYXRjaDF9IGFuZCB7bWF0Y2gyfSlcIixcblx0QVJSQVlfQURESVRJT05BTF9JVEVNUzogXCJBZGRpdGlvbmFsIGl0ZW1zIG5vdCBhbGxvd2VkXCIsXG5cdC8vIEZvcm1hdCBlcnJvcnNcblx0Rk9STUFUX0NVU1RPTTogXCJGb3JtYXQgdmFsaWRhdGlvbiBmYWlsZWQgKHttZXNzYWdlfSlcIixcblx0S0VZV09SRF9DVVNUT006IFwiS2V5d29yZCBmYWlsZWQ6IHtrZXl9ICh7bWVzc2FnZX0pXCIsXG5cdC8vIFNjaGVtYSBzdHJ1Y3R1cmVcblx0Q0lSQ1VMQVJfUkVGRVJFTkNFOiBcIkNpcmN1bGFyICRyZWZzOiB7dXJsc31cIixcblx0Ly8gTm9uLXN0YW5kYXJkIHZhbGlkYXRpb24gb3B0aW9uc1xuXHRVTktOT1dOX1BST1BFUlRZOiBcIlVua25vd24gcHJvcGVydHkgKG5vdCBpbiBzY2hlbWEpXCJcbn07XG5cbmZ1bmN0aW9uIFZhbGlkYXRpb25FcnJvcihjb2RlLCBwYXJhbXMsIGRhdGFQYXRoLCBzY2hlbWFQYXRoLCBzdWJFcnJvcnMpIHtcblx0RXJyb3IuY2FsbCh0aGlzKTtcblx0aWYgKGNvZGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdHRocm93IG5ldyBFcnJvciAoXCJObyBlcnJvciBjb2RlIHN1cHBsaWVkOiBcIiArIHNjaGVtYVBhdGgpO1xuXHR9XG5cdHRoaXMubWVzc2FnZSA9ICcnO1xuXHR0aGlzLnBhcmFtcyA9IHBhcmFtcztcblx0dGhpcy5jb2RlID0gY29kZTtcblx0dGhpcy5kYXRhUGF0aCA9IGRhdGFQYXRoIHx8IFwiXCI7XG5cdHRoaXMuc2NoZW1hUGF0aCA9IHNjaGVtYVBhdGggfHwgXCJcIjtcblx0dGhpcy5zdWJFcnJvcnMgPSBzdWJFcnJvcnMgfHwgbnVsbDtcblxuXHR2YXIgZXJyID0gbmV3IEVycm9yKHRoaXMubWVzc2FnZSk7XG5cdHRoaXMuc3RhY2sgPSBlcnIuc3RhY2sgfHwgZXJyLnN0YWNrdHJhY2U7XG5cdGlmICghdGhpcy5zdGFjaykge1xuXHRcdHRyeSB7XG5cdFx0XHR0aHJvdyBlcnI7XG5cdFx0fVxuXHRcdGNhdGNoKGVycikge1xuXHRcdFx0dGhpcy5zdGFjayA9IGVyci5zdGFjayB8fCBlcnIuc3RhY2t0cmFjZTtcblx0XHR9XG5cdH1cbn1cblZhbGlkYXRpb25FcnJvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG5WYWxpZGF0aW9uRXJyb3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVmFsaWRhdGlvbkVycm9yO1xuVmFsaWRhdGlvbkVycm9yLnByb3RvdHlwZS5uYW1lID0gJ1ZhbGlkYXRpb25FcnJvcic7XG5cblZhbGlkYXRpb25FcnJvci5wcm90b3R5cGUucHJlZml4V2l0aCA9IGZ1bmN0aW9uIChkYXRhUHJlZml4LCBzY2hlbWFQcmVmaXgpIHtcblx0aWYgKGRhdGFQcmVmaXggIT09IG51bGwpIHtcblx0XHRkYXRhUHJlZml4ID0gZGF0YVByZWZpeC5yZXBsYWNlKC9+L2csIFwifjBcIikucmVwbGFjZSgvXFwvL2csIFwifjFcIik7XG5cdFx0dGhpcy5kYXRhUGF0aCA9IFwiL1wiICsgZGF0YVByZWZpeCArIHRoaXMuZGF0YVBhdGg7XG5cdH1cblx0aWYgKHNjaGVtYVByZWZpeCAhPT0gbnVsbCkge1xuXHRcdHNjaGVtYVByZWZpeCA9IHNjaGVtYVByZWZpeC5yZXBsYWNlKC9+L2csIFwifjBcIikucmVwbGFjZSgvXFwvL2csIFwifjFcIik7XG5cdFx0dGhpcy5zY2hlbWFQYXRoID0gXCIvXCIgKyBzY2hlbWFQcmVmaXggKyB0aGlzLnNjaGVtYVBhdGg7XG5cdH1cblx0aWYgKHRoaXMuc3ViRXJyb3JzICE9PSBudWxsKSB7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YkVycm9ycy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dGhpcy5zdWJFcnJvcnNbaV0ucHJlZml4V2l0aChkYXRhUHJlZml4LCBzY2hlbWFQcmVmaXgpO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gdGhpcztcbn07XG5cbmZ1bmN0aW9uIGlzVHJ1c3RlZFVybChiYXNlVXJsLCB0ZXN0VXJsKSB7XG5cdGlmKHRlc3RVcmwuc3Vic3RyaW5nKDAsIGJhc2VVcmwubGVuZ3RoKSA9PT0gYmFzZVVybCl7XG5cdFx0dmFyIHJlbWFpbmRlciA9IHRlc3RVcmwuc3Vic3RyaW5nKGJhc2VVcmwubGVuZ3RoKTtcblx0XHRpZiAoKHRlc3RVcmwubGVuZ3RoID4gMCAmJiB0ZXN0VXJsLmNoYXJBdChiYXNlVXJsLmxlbmd0aCAtIDEpID09PSBcIi9cIilcblx0XHRcdHx8IHJlbWFpbmRlci5jaGFyQXQoMCkgPT09IFwiI1wiXG5cdFx0XHR8fCByZW1haW5kZXIuY2hhckF0KDApID09PSBcIj9cIikge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBmYWxzZTtcbn1cblxudmFyIGxhbmd1YWdlcyA9IHt9O1xuZnVuY3Rpb24gY3JlYXRlQXBpKGxhbmd1YWdlKSB7XG5cdHZhciBnbG9iYWxDb250ZXh0ID0gbmV3IFZhbGlkYXRvckNvbnRleHQoKTtcblx0dmFyIGN1cnJlbnRMYW5ndWFnZTtcblx0dmFyIGN1c3RvbUVycm9yUmVwb3J0ZXI7XG5cdHZhciBhcGkgPSB7XG5cdFx0c2V0RXJyb3JSZXBvcnRlcjogZnVuY3Rpb24gKHJlcG9ydGVyKSB7XG5cdFx0XHRpZiAodHlwZW9mIHJlcG9ydGVyID09PSAnc3RyaW5nJykge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5sYW5ndWFnZShyZXBvcnRlcik7XG5cdFx0XHR9XG5cdFx0XHRjdXN0b21FcnJvclJlcG9ydGVyID0gcmVwb3J0ZXI7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9LFxuXHRcdGFkZEZvcm1hdDogZnVuY3Rpb24gKCkge1xuXHRcdFx0Z2xvYmFsQ29udGV4dC5hZGRGb3JtYXQuYXBwbHkoZ2xvYmFsQ29udGV4dCwgYXJndW1lbnRzKTtcblx0XHR9LFxuXHRcdGxhbmd1YWdlOiBmdW5jdGlvbiAoY29kZSkge1xuXHRcdFx0aWYgKCFjb2RlKSB7XG5cdFx0XHRcdHJldHVybiBjdXJyZW50TGFuZ3VhZ2U7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIWxhbmd1YWdlc1tjb2RlXSkge1xuXHRcdFx0XHRjb2RlID0gY29kZS5zcGxpdCgnLScpWzBdOyAvLyBmYWxsIGJhY2sgdG8gYmFzZSBsYW5ndWFnZVxuXHRcdFx0fVxuXHRcdFx0aWYgKGxhbmd1YWdlc1tjb2RlXSkge1xuXHRcdFx0XHRjdXJyZW50TGFuZ3VhZ2UgPSBjb2RlO1xuXHRcdFx0XHRyZXR1cm4gY29kZTsgLy8gc28geW91IGNhbiB0ZWxsIGlmIGZhbGwtYmFjayBoYXMgaGFwcGVuZWRcblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9LFxuXHRcdGFkZExhbmd1YWdlOiBmdW5jdGlvbiAoY29kZSwgbWVzc2FnZU1hcCkge1xuXHRcdFx0dmFyIGtleTtcblx0XHRcdGZvciAoa2V5IGluIEVycm9yQ29kZXMpIHtcblx0XHRcdFx0aWYgKG1lc3NhZ2VNYXBba2V5XSAmJiAhbWVzc2FnZU1hcFtFcnJvckNvZGVzW2tleV1dKSB7XG5cdFx0XHRcdFx0bWVzc2FnZU1hcFtFcnJvckNvZGVzW2tleV1dID0gbWVzc2FnZU1hcFtrZXldO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHR2YXIgcm9vdENvZGUgPSBjb2RlLnNwbGl0KCctJylbMF07XG5cdFx0XHRpZiAoIWxhbmd1YWdlc1tyb290Q29kZV0pIHsgLy8gdXNlIGZvciBiYXNlIGxhbmd1YWdlIGlmIG5vdCB5ZXQgZGVmaW5lZFxuXHRcdFx0XHRsYW5ndWFnZXNbY29kZV0gPSBtZXNzYWdlTWFwO1xuXHRcdFx0XHRsYW5ndWFnZXNbcm9vdENvZGVdID0gbWVzc2FnZU1hcDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGxhbmd1YWdlc1tjb2RlXSA9IE9iamVjdC5jcmVhdGUobGFuZ3VhZ2VzW3Jvb3RDb2RlXSk7XG5cdFx0XHRcdGZvciAoa2V5IGluIG1lc3NhZ2VNYXApIHtcblx0XHRcdFx0XHRpZiAodHlwZW9mIGxhbmd1YWdlc1tyb290Q29kZV1ba2V5XSA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0XHRcdGxhbmd1YWdlc1tyb290Q29kZV1ba2V5XSA9IG1lc3NhZ2VNYXBba2V5XTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0bGFuZ3VhZ2VzW2NvZGVdW2tleV0gPSBtZXNzYWdlTWFwW2tleV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0ZnJlc2hBcGk6IGZ1bmN0aW9uIChsYW5ndWFnZSkge1xuXHRcdFx0dmFyIHJlc3VsdCA9IGNyZWF0ZUFwaSgpO1xuXHRcdFx0aWYgKGxhbmd1YWdlKSB7XG5cdFx0XHRcdHJlc3VsdC5sYW5ndWFnZShsYW5ndWFnZSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH0sXG5cdFx0dmFsaWRhdGU6IGZ1bmN0aW9uIChkYXRhLCBzY2hlbWEsIGNoZWNrUmVjdXJzaXZlLCBiYW5Vbmtub3duUHJvcGVydGllcykge1xuXHRcdFx0dmFyIGRlZiA9IGRlZmF1bHRFcnJvclJlcG9ydGVyKGN1cnJlbnRMYW5ndWFnZSk7XG5cdFx0XHR2YXIgZXJyb3JSZXBvcnRlciA9IGN1c3RvbUVycm9yUmVwb3J0ZXIgPyBmdW5jdGlvbiAoZXJyb3IsIGRhdGEsIHNjaGVtYSkge1xuXHRcdFx0XHRyZXR1cm4gY3VzdG9tRXJyb3JSZXBvcnRlcihlcnJvciwgZGF0YSwgc2NoZW1hKSB8fCBkZWYoZXJyb3IsIGRhdGEsIHNjaGVtYSk7XG5cdFx0XHR9IDogZGVmO1xuXHRcdFx0dmFyIGNvbnRleHQgPSBuZXcgVmFsaWRhdG9yQ29udGV4dChnbG9iYWxDb250ZXh0LCBmYWxzZSwgZXJyb3JSZXBvcnRlciwgY2hlY2tSZWN1cnNpdmUsIGJhblVua25vd25Qcm9wZXJ0aWVzKTtcblx0XHRcdGlmICh0eXBlb2Ygc2NoZW1hID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRcdHNjaGVtYSA9IHtcIiRyZWZcIjogc2NoZW1hfTtcblx0XHRcdH1cblx0XHRcdGNvbnRleHQuYWRkU2NoZW1hKFwiXCIsIHNjaGVtYSk7XG5cdFx0XHR2YXIgZXJyb3IgPSBjb250ZXh0LnZhbGlkYXRlQWxsKGRhdGEsIHNjaGVtYSwgbnVsbCwgbnVsbCwgXCJcIik7XG5cdFx0XHRpZiAoIWVycm9yICYmIGJhblVua25vd25Qcm9wZXJ0aWVzKSB7XG5cdFx0XHRcdGVycm9yID0gY29udGV4dC5iYW5Vbmtub3duUHJvcGVydGllcyhkYXRhLCBzY2hlbWEpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5lcnJvciA9IGVycm9yO1xuXHRcdFx0dGhpcy5taXNzaW5nID0gY29udGV4dC5taXNzaW5nO1xuXHRcdFx0dGhpcy52YWxpZCA9IChlcnJvciA9PT0gbnVsbCk7XG5cdFx0XHRyZXR1cm4gdGhpcy52YWxpZDtcblx0XHR9LFxuXHRcdHZhbGlkYXRlUmVzdWx0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgcmVzdWx0ID0ge307XG5cdFx0XHR0aGlzLnZhbGlkYXRlLmFwcGx5KHJlc3VsdCwgYXJndW1lbnRzKTtcblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fSxcblx0XHR2YWxpZGF0ZU11bHRpcGxlOiBmdW5jdGlvbiAoZGF0YSwgc2NoZW1hLCBjaGVja1JlY3Vyc2l2ZSwgYmFuVW5rbm93blByb3BlcnRpZXMpIHtcblx0XHRcdHZhciBkZWYgPSBkZWZhdWx0RXJyb3JSZXBvcnRlcihjdXJyZW50TGFuZ3VhZ2UpO1xuXHRcdFx0dmFyIGVycm9yUmVwb3J0ZXIgPSBjdXN0b21FcnJvclJlcG9ydGVyID8gZnVuY3Rpb24gKGVycm9yLCBkYXRhLCBzY2hlbWEpIHtcblx0XHRcdFx0cmV0dXJuIGN1c3RvbUVycm9yUmVwb3J0ZXIoZXJyb3IsIGRhdGEsIHNjaGVtYSkgfHwgZGVmKGVycm9yLCBkYXRhLCBzY2hlbWEpO1xuXHRcdFx0fSA6IGRlZjtcblx0XHRcdHZhciBjb250ZXh0ID0gbmV3IFZhbGlkYXRvckNvbnRleHQoZ2xvYmFsQ29udGV4dCwgdHJ1ZSwgZXJyb3JSZXBvcnRlciwgY2hlY2tSZWN1cnNpdmUsIGJhblVua25vd25Qcm9wZXJ0aWVzKTtcblx0XHRcdGlmICh0eXBlb2Ygc2NoZW1hID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRcdHNjaGVtYSA9IHtcIiRyZWZcIjogc2NoZW1hfTtcblx0XHRcdH1cblx0XHRcdGNvbnRleHQuYWRkU2NoZW1hKFwiXCIsIHNjaGVtYSk7XG5cdFx0XHRjb250ZXh0LnZhbGlkYXRlQWxsKGRhdGEsIHNjaGVtYSwgbnVsbCwgbnVsbCwgXCJcIik7XG5cdFx0XHRpZiAoYmFuVW5rbm93blByb3BlcnRpZXMpIHtcblx0XHRcdFx0Y29udGV4dC5iYW5Vbmtub3duUHJvcGVydGllcyhkYXRhLCBzY2hlbWEpO1xuXHRcdFx0fVxuXHRcdFx0dmFyIHJlc3VsdCA9IHt9O1xuXHRcdFx0cmVzdWx0LmVycm9ycyA9IGNvbnRleHQuZXJyb3JzO1xuXHRcdFx0cmVzdWx0Lm1pc3NpbmcgPSBjb250ZXh0Lm1pc3Npbmc7XG5cdFx0XHRyZXN1bHQudmFsaWQgPSAocmVzdWx0LmVycm9ycy5sZW5ndGggPT09IDApO1xuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9LFxuXHRcdGFkZFNjaGVtYTogZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGdsb2JhbENvbnRleHQuYWRkU2NoZW1hLmFwcGx5KGdsb2JhbENvbnRleHQsIGFyZ3VtZW50cyk7XG5cdFx0fSxcblx0XHRnZXRTY2hlbWE6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBnbG9iYWxDb250ZXh0LmdldFNjaGVtYS5hcHBseShnbG9iYWxDb250ZXh0LCBhcmd1bWVudHMpO1xuXHRcdH0sXG5cdFx0Z2V0U2NoZW1hTWFwOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gZ2xvYmFsQ29udGV4dC5nZXRTY2hlbWFNYXAuYXBwbHkoZ2xvYmFsQ29udGV4dCwgYXJndW1lbnRzKTtcblx0XHR9LFxuXHRcdGdldFNjaGVtYVVyaXM6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBnbG9iYWxDb250ZXh0LmdldFNjaGVtYVVyaXMuYXBwbHkoZ2xvYmFsQ29udGV4dCwgYXJndW1lbnRzKTtcblx0XHR9LFxuXHRcdGdldE1pc3NpbmdVcmlzOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gZ2xvYmFsQ29udGV4dC5nZXRNaXNzaW5nVXJpcy5hcHBseShnbG9iYWxDb250ZXh0LCBhcmd1bWVudHMpO1xuXHRcdH0sXG5cdFx0ZHJvcFNjaGVtYXM6IGZ1bmN0aW9uICgpIHtcblx0XHRcdGdsb2JhbENvbnRleHQuZHJvcFNjaGVtYXMuYXBwbHkoZ2xvYmFsQ29udGV4dCwgYXJndW1lbnRzKTtcblx0XHR9LFxuXHRcdGRlZmluZUtleXdvcmQ6IGZ1bmN0aW9uICgpIHtcblx0XHRcdGdsb2JhbENvbnRleHQuZGVmaW5lS2V5d29yZC5hcHBseShnbG9iYWxDb250ZXh0LCBhcmd1bWVudHMpO1xuXHRcdH0sXG5cdFx0ZGVmaW5lRXJyb3I6IGZ1bmN0aW9uIChjb2RlTmFtZSwgY29kZU51bWJlciwgZGVmYXVsdE1lc3NhZ2UpIHtcblx0XHRcdGlmICh0eXBlb2YgY29kZU5hbWUgIT09ICdzdHJpbmcnIHx8ICEvXltBLVpdKyhfW0EtWl0rKSokLy50ZXN0KGNvZGVOYW1lKSkge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0NvZGUgbmFtZSBtdXN0IGJlIGEgc3RyaW5nIGluIFVQUEVSX0NBU0VfV0lUSF9VTkRFUlNDT1JFUycpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHR5cGVvZiBjb2RlTnVtYmVyICE9PSAnbnVtYmVyJyB8fCBjb2RlTnVtYmVyJTEgIT09IDAgfHwgY29kZU51bWJlciA8IDEwMDAwKSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignQ29kZSBudW1iZXIgbXVzdCBiZSBhbiBpbnRlZ2VyID4gMTAwMDAnKTtcblx0XHRcdH1cblx0XHRcdGlmICh0eXBlb2YgRXJyb3JDb2Rlc1tjb2RlTmFtZV0gIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignRXJyb3IgYWxyZWFkeSBkZWZpbmVkOiAnICsgY29kZU5hbWUgKyAnIGFzICcgKyBFcnJvckNvZGVzW2NvZGVOYW1lXSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAodHlwZW9mIEVycm9yQ29kZUxvb2t1cFtjb2RlTnVtYmVyXSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdFcnJvciBjb2RlIGFscmVhZHkgdXNlZDogJyArIEVycm9yQ29kZUxvb2t1cFtjb2RlTnVtYmVyXSArICcgYXMgJyArIGNvZGVOdW1iZXIpO1xuXHRcdFx0fVxuXHRcdFx0RXJyb3JDb2Rlc1tjb2RlTmFtZV0gPSBjb2RlTnVtYmVyO1xuXHRcdFx0RXJyb3JDb2RlTG9va3VwW2NvZGVOdW1iZXJdID0gY29kZU5hbWU7XG5cdFx0XHRFcnJvck1lc3NhZ2VzRGVmYXVsdFtjb2RlTmFtZV0gPSBFcnJvck1lc3NhZ2VzRGVmYXVsdFtjb2RlTnVtYmVyXSA9IGRlZmF1bHRNZXNzYWdlO1xuXHRcdFx0Zm9yICh2YXIgbGFuZ0NvZGUgaW4gbGFuZ3VhZ2VzKSB7XG5cdFx0XHRcdHZhciBsYW5ndWFnZSA9IGxhbmd1YWdlc1tsYW5nQ29kZV07XG5cdFx0XHRcdGlmIChsYW5ndWFnZVtjb2RlTmFtZV0pIHtcblx0XHRcdFx0XHRsYW5ndWFnZVtjb2RlTnVtYmVyXSA9IGxhbmd1YWdlW2NvZGVOdW1iZXJdIHx8IGxhbmd1YWdlW2NvZGVOYW1lXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0cmVzZXQ6IGZ1bmN0aW9uICgpIHtcblx0XHRcdGdsb2JhbENvbnRleHQucmVzZXQoKTtcblx0XHRcdHRoaXMuZXJyb3IgPSBudWxsO1xuXHRcdFx0dGhpcy5taXNzaW5nID0gW107XG5cdFx0XHR0aGlzLnZhbGlkID0gdHJ1ZTtcblx0XHR9LFxuXHRcdG1pc3Npbmc6IFtdLFxuXHRcdGVycm9yOiBudWxsLFxuXHRcdHZhbGlkOiB0cnVlLFxuXHRcdG5vcm1TY2hlbWE6IG5vcm1TY2hlbWEsXG5cdFx0cmVzb2x2ZVVybDogcmVzb2x2ZVVybCxcblx0XHRnZXREb2N1bWVudFVyaTogZ2V0RG9jdW1lbnRVcmksXG5cdFx0ZXJyb3JDb2RlczogRXJyb3JDb2Rlc1xuXHR9O1xuXHRhcGkubGFuZ3VhZ2UobGFuZ3VhZ2UgfHwgJ2VuJyk7XG5cdHJldHVybiBhcGk7XG59XG5cbnZhciB0djQgPSBjcmVhdGVBcGkoKTtcbnR2NC5hZGRMYW5ndWFnZSgnZW4tZ2InLCBFcnJvck1lc3NhZ2VzRGVmYXVsdCk7XG5cbi8vbGVnYWN5IHByb3BlcnR5XG50djQudHY0ID0gdHY0O1xuXG5yZXR1cm4gdHY0OyAvLyB1c2VkIGJ5IF9oZWFkZXIuanMgdG8gZ2xvYmFsaXNlLlxuXG59KSk7IiwiaW1wb3J0IE1lc3NhZ2VGYWN0b3J5IGZyb20gJy4vbWVzc2FnZS1mYWN0b3J5L01lc3NhZ2VGYWN0b3J5JztcclxuZXhwb3J0IHtNZXNzYWdlRmFjdG9yeX07XHJcbiIsIi8qKlxyXG4gKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0FcclxuICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSURcclxuICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMXHJcbiAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WXHJcbiAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQVxyXG4gKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHXHJcbiAqIENvcHlyaWdodCAyMDE2IEFwaXplZVxyXG4gKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqKi9cclxuaW1wb3J0IFJldGhpbmtPYmplY3QgZnJvbSBcIi4uL3JlVEhJTktPYmplY3QvUmV0aGlua09iamVjdC5qc1wiO1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEBhdXRob3IgYWxpY2UuY2hlYW1iZVthdF1mb2t1cy5mcmF1bmhvZmVyLmRlXHJcbiAqIFRoZSBNZXNzYWdlIGNsYXNzIGlzIHRoZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgcmVUSElOSyBNZXNzYWdlIERhdGEgTW9kZWxcclxuICpcclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZXNzYWdlIGV4dGVuZHMgUmV0aGlua09iamVjdCB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZW5lcmF0ZXMgYSBtZXNzYWdlIGRhdGEgb2JqZWN0XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGlkIC0gVG8gYmUgdXNlZCB0byBhc3NvY2lhdGUgUmVzcG9uc2UgbWVzc2FnZXMgdG8gdGhlIGluaXRpYWwgcmVxdWVzdCBtZXNzYWdlLlxyXG4gICAgICogQHBhcmFtIHtVUkwuVVJMfSBmcm9tIC0gVVJMIG9mIEh5cGVydHkgaW5zdGFuY2Ugb3IgVXNlciBhc3NvY2lhdGVkIHdpdGggaXRcclxuICAgICAqIEBwYXJhbSB7VVJMLlVSTExpc3R9IHRvTGlzdCAtIE9uZSBvciBtb3JlIFVSTHMgb2YgTWVzc2FnZSByZWNpcGllbnRzLiBBY2NvcmRpbmcgdG8gdGhlIFVSTCBzY2hlbWUgaXQgbWF5IGJlXHJcbiAgICAgKiBoYW5kbGVkIGluIGRpZmZlcmVudCB3YXlzXHJcbiAgICAgKiBAcGFyYW0ge01lc3NhZ2VUeXBlfSB0eXBlIC0gVGhlIFVSTCBvZiB0aGUgcmVUSElOSyBEYXRhIE9iamVjdCBSZXNvdXJjZSBhc3NvY2lhdGVkIHdpdGggdGhlIG1lc3NhZ2UgdGhhdCBjYW4gYmVcclxuICAgICAqIHVzZWQgZm9yIHJvdXRpbmcgcHVycG9zZXNcclxuICAgICAqIEBwYXJhbSB7TWVzc2FnZUJvZHl9IGJvZHkgLSBPcHRpb25hbGx5LCBhbGwgbWVzc2FnZSBib2RpZXMgZXhjaGFuZ2VkIGJldHdlZW4gZGlmZmVyZW50IFJ1bnRpbWUgTWVzc2dlIEJVUyBjYW5cclxuICAgICAqIGNvbnRhaW4gSldUIHRva2VucyBmb3IgQWNjZXNzIENvbnRyb2wgZm9yIElkZW50aXR5IEFzc2VydGlvbiBwdXJwb3NlcyB0aGF0IGFyZSBpbnNlcnRlZCBieSB0aGUgSWRlbnRpdHkgTW9kdWxlXHJcbiAgICAgKiBiZWZvcmUgdGhlIG1lc3NhZ2UgaXMgcm91dGVkIHRvIHByb3RvIHN0dWJzXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGlkLCBmcm9tLCB0b0xpc3QsIHR5cGUsIGJvZHkpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcclxuICAgICAgICB0aGlzLnRvID0gdG9MaXN0O1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5ib2R5ID0gYm9keTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIHRoZSBhc3NlcnRlZCBpZGVudGl0eSB0byB0aGUgbWVzc2FnZSBib2R5IGFuZCByZW1vdmVzIHRoZSBnaXZlbiB0b2tlbiBmcm9tIHRoZSBtZXNzYWdlXHJcbiAgICAgKiBAcGFyYW0ge0lkZW50aXR5LkpXVH0gdG9rZW4gLSBpZFRva2VuIHRvIHJlbW92ZSBmcm9tIG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB7SWRlbnRpdHkuSWRlbnRpdHl9IGlkZW50aXR5IC0gYXNzZXJ0ZWQgaWRlbnRpdHkgdG8gaW5jbHVkZVxyXG4gICAgICogQHJldHVybiB7TWVzc2FnZS5NZXNzYWdlfSBtZXNzYWdlIC0gdXBkYXRlZCBtZXNzYWdlXHJcbiAgICAgKi9cclxuICAgIGFzc2VydElkZW50aXR5KHRva2VuLCBpZGVudGl0eSkge1xyXG4gICAgICAgIGlmICghdG9rZW4gfHwgIWlkZW50aXR5KVxyXG4gICAgICAgICAgICB0aHJvdyAgbmV3IEVycm9yKFwibWVzc2FnZSwgdG9rZW4gdG8gYmUgcmVtb3ZlZCwgYW5kIGFzc2VydGVkSWRlbnRpdHkgbXVzdCBiZSBwcm92aWRlZFwiKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdnaXZlbiBtZXNzYWdlJywgbWVzc2FnZSk7XHJcbiAgICAgICAgbGV0IG5ld0JvZHkgPSB0aGlzLmJvZHk7XHJcblxyXG4gICAgICAgIG5ld0JvZHkuaWRUb2tlbiA9IG51bGw7XHJcblxyXG4gICAgICAgIG5ld0JvZHkuYXNzZXJ0ZWRJZGVudGl0eSA9IGlkZW50aXR5O1xyXG4gICAgICAgIHRoaXMuYm9keSA9IG5ld0JvZHk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGFuIElkIHRva2VuIHRvIHRoZSBnaXZlbiBtZXNzYWdlXHJcbiAgICAgKiBAcGFyYW0ge0lkZW50aXR5LkpXVH0gdG9rZW4gLSBpZGVudGl0eSB0b2tlbiB0byBpbmNsdWRlIGluIHRoZSBtZXNzYWdlXHJcbiAgICAgKiBAcmV0dXJuIHtNZXNzYWdlLk1lc3NhZ2V9IC0gdGhlIHVwZGF0ZWQgbWVzc2FnZVxyXG4gICAgICovXHJcbiAgICBhZGRJZFRva2VuKHRva2VuKSB7XHJcbiAgICAgICAgaWYgKCF0b2tlbilcclxuICAgICAgICAgICAgdGhyb3cgIG5ldyBFcnJvcihcIm1lc3NhZ2UsIHRva2VuIHRvIGJlIGFkZGVkLCBtdXN0IGJlIHByb3ZpZGVkXCIpO1xyXG4gICAgICAgIGxldCBuZXdCb2R5ID0gdGhpcy5ib2R5O1xyXG4gICAgICAgIG5ld0JvZHkuaWRUb2tlbiA9IHRva2VuO1xyXG4gICAgICAgIHRoaXMuYm9keSA9IG5ld0JvZHk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYW4gYWNjZXNzIHRva2VuIHRvIHRoZSBnaXZlbiBtZXNzYWdlXHJcbiAgICAgKiBAcGFyYW0ge0lkZW50aXR5LkpXVH0gdG9rZW4gLSB0b2tlbiB0byBiZSBhZGRlZCB0byB0aGUgZ2l2ZW4gbWVzc2FnZVxyXG4gICAgICogQHJldHVybiB7TWVzc2FnZS5NZXNzYWdlfSAtICB0aGUgdXBkYXRlZCBNZXNzYWdlXHJcbiAgICAgKi9cclxuICAgIGFkZEFjY2Vzc1Rva2VuKHRva2VuKSB7XHJcbiAgICAgICAgaWYgKCF0b2tlbilcclxuICAgICAgICAgICAgdGhyb3cgIG5ldyBFcnJvcihcIm1lc3NhZ2UsIHRva2VuIHRvIGJlIGFkZGVkLCBtdXN0IGJlIHByb3ZpZGVkXCIpO1xyXG4gICAgICAgIGxldCBuZXdCb2R5ID0gdGhpcy5ib2R5O1xyXG4gICAgICAgIG5ld0JvZHkuYWNjZXNzVG9rZW4gPSB0b2tlbjtcclxuICAgICAgICB0aGlzLmJvZHkgPSBuZXdCb2R5O1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogTWVzc2FnZVR5cGUgcmVwcmVzZW50aW5nIHRoZSB0eXBlIG9mIG1lc3NhZ2VcclxuICogQHR5cGUge3tDUkVBVEU6IHN0cmluZywgUkVBRDogc3RyaW5nLCBVUERBVEU6IHN0cmluZywgREVMRVRFOiBzdHJpbmcsIFNVQlNDUklCRTogc3RyaW5nLCBVTlNVQlNDUklCRTogc3RyaW5nLCBSRVNQT05TRTogc3RyaW5nLCBGT1JXQVJEOiBzdHJpbmd9fVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IE1lc3NhZ2VUeXBlID0ge1xyXG4gICAgQ1JFQVRFOiAnY3JlYXRlJywgUkVBRDogJ3JlYWQnLCBVUERBVEU6ICd1cGRhdGUnLCBERUxFVEU6ICdkZWxldGUnLCBTVUJTQ1JJQkU6ICdzdWJzY3JpYmUnLFxyXG4gICAgVU5TVUJTQ1JJQkU6ICd1bnN1YnNjcmliZScsIFJFU1BPTlNFOiAncmVzcG9uc2UnLCBGT1JXQVJEOiAnZm9yd2FyZCcsIEVYRUNVVEU6ICdleGVjdXRlJ1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgTWVzc2FnZTtcclxuIiwiLyoqXHJcbiAqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQVxyXG4gKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRFxyXG4gKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0xcclxuICogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlZcclxuICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBXHJcbiAqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUdcclxuICogQ29weXJpZ2h0IDIwMTYgQXBpemVlXHJcbiAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICoqL1xyXG5pbXBvcnQgUmV0aGlua09iamVjdCBmcm9tICcuLi9yZVRISU5LT2JqZWN0L1JldGhpbmtPYmplY3QuanMnO1xyXG5cclxuLyoqXHJcbiAqIEBhdXRob3IgYWxpY2UuY2hlYW1iZVthdF1mb2t1cy5mcmF1bmhvZmVyLmRlXHJcbiAqIFRoZSBNZXNzYWdlQm9keSBjbGFzcyBpcyB0aGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgTWVzc2FnZSBCb2R5IERhdGEgTW9kZWwgZnJvbSB3aGljaCB0aGUgb3RoZXIgYm9keSB0eXBlcyBleHRlbmQuXHJcbiAqXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVzc2FnZUJvZHkgZXh0ZW5kcyBSZXRoaW5rT2JqZWN0IHtcclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0lkZW50aXR5LkpXVH0gaWRUb2tlbiAtIHRva2VuIGZvciBJZGVudGl0eSBhc3NlcnRpb24gcHVycG9zZVxyXG4gICAgICogQHBhcmFtIHtJZGVudGl0eS5KV1R9IGFjY2Vzc1Rva2VuIC0gdG9rZW4gZm9yIGFjY2VzcyBjb250cm9sXHJcbiAgICAgKiBAcGFyYW0ge1VSTC5VUkx9IHJlc291cmNlIC0gVVJMIG9mIHRoZSBvYmplY3RcclxuICAgICAqIEBwYXJhbSB7VVJMLkh5cGVydHlDYXRhbG9ndWVVUkx9IHNjaGVtYSAtIFVSTCBvZiB0aGUgRGF0YSBvYmplY3Qgc2NoZW1hIHN0b3JlZCBpbiB0aGUgQ2F0YWxvZ3VlXHJcbiAgICAgKiBAcGFyYW0ge0lkZW50aXR5LklkZW50aXR5fSBhc3NlcnRlZElkZW50aXR5IC0gQXNzZXJ0ZWRJZGVudGl0eSBpcyBjb21wbGlhbnQgd2l0aCBVc2VyIElkZW50aXR5IERhdGEgTW9kZWxcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGlkVG9rZW4sIGFjY2Vzc1Rva2VuLCByZXNvdXJjZSwgc2NoZW1hLCBhc3NlcnRlZElkZW50aXR5KSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmlkVG9rZW4gPSBpZFRva2VuO1xyXG4gICAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSBhY2Nlc3NUb2tlbjtcclxuICAgICAgICB0aGlzLnJlc291cmNlID0gcmVzb3VyY2U7XHJcbiAgICAgICAgdGhpcy5zY2hlbWEgPSBzY2hlbWE7XHJcbiAgICAgICAgdGhpcy5hc3NlcnRlZElkZW50aXR5ID0gYXNzZXJ0ZWRJZGVudGl0eTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYSB2aWEgVVJMIHRvIHRoZSBnaXZlbiBtZXNzYWdlIGJvZHkuIFRoZSBcIk1lc3NhZ2VCb2R5LnZpYVwiIGF0dHJpYnV0ZSBjb250YWlucyBhIGxpc3Qgb2YgYWxsIFByb3Rvc3R1YlxyXG4gICAgICogYWRkcmVzc2VzIChQcm90b3N0dWIpIHRoYXQgdGhlIG1lc3NhZ2UgaGFzIGJlZW4gcGFzc2VkIHRocm91Z2guIEl0IGlzIHVzZWQgdG8gcHJldmVudCBpbmZpbml0ZSBjeWNsZXMgaW4gdGhlXHJcbiAgICAgKiBIeXBlcnR5IE1lc3NhZ2luZyBGcmFtZXdvcmsuXHJcbiAgICAgKiBAcGFyYW0ge0lkZW50aXR5LkpXVH0gdG9rZW4gLSBpZGVudGl0eSB0b2tlbiB0byBpbmNsdWRlIGluIHRoZSBtZXNzYWdlXHJcbiAgICAgKiBAcmV0dXJuIHtNZXNzYWdlQm9keX0gLSB0aGUgdXBkYXRlZCBtZXNzYWdlIGJvZHlcclxuICAgICAqL1xyXG4gICAgYWRkVmlhKHZpYVVSTCkge1xyXG4gICAgICAgIGlmICghdmlhVVJMKVxyXG4gICAgICAgICAgICB0aHJvdyAgbmV3IEVycm9yKFwidmlhIFVSTCB0byBiZSBhZGRlZCwgbXVzdCBiZSBwcm92aWRlZFwiKTtcclxuICAgICAgICB0aGlzLnZpYSA9IHZpYVVSTDtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDbGFzcyByZXByZXNlbnRhdGlvbiBvZiB0aGUgQ3JlYXRlTWVzc2FnZUJvZHkgb2JqZWN0XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ3JlYXRlTWVzc2FnZUJvZHkgZXh0ZW5kcyBNZXNzYWdlQm9keSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlIC0gQ29udGFpbnMgdGhlIGNyZWF0ZWQgb2JqZWN0IGluIEpTT04gZm9ybWF0LlxyXG4gICAgICogQHBhcmFtIHtVUkwuVVJMfSBwb2xpY3kgLSBVUkwgZnJvbSB3aGVyZSBhY2Nlc3MgcG9saWN5IGNvbnRyb2wgY2FuIGJlIGRvd25sb2FkZWRcclxuICAgICAqIEBwYXJhbSB7SWRlbnRpdHkuSldUfSBpZFRva2VuIC1cclxuICAgICAqIEBwYXJhbSB7SWRlbnRpdHkuSldUfSBhY2Nlc3NUb2tlblxyXG4gICAgICogQHBhcmFtIHtVUkwuVVJMfSByZXNvdXJjZSAtIFVSTCBvZiB0aGUgb2JqZWN0XHJcbiAgICAgKiBAcGFyYW0ge1VSTC5IeXBlcnR5Q2F0YWxvZ3VlVVJMfSBzY2hlbWEgLSBVUkwgb2YgdGhlIERhdGEgb2JqZWN0IHNjaGVtYSBzdG9yZWQgaW4gdGhlIENhdGFsb2d1ZVxyXG4gICAgICogQHBhcmFtIHtJZGVudGl0eS5JZGVudGl0eX0gYXNzZXJ0ZWRJZGVudGl0eSAtIEFzc2VydGVkSWRlbnRpdHkgaXMgY29tcGxpYW50IHdpdGggVXNlciBJZGVudGl0eSBEYXRhIE1vZGVsXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHZhbHVlLCBwb2xpY3ksIGlkVG9rZW4sIGFjY2Vzc1Rva2VuLCByZXNvdXJjZSwgc2NoZW1hLCBhc3NlcnRlZElkZW50aXR5KSB7XHJcbiAgICAgICAgaWYgKCF2YWx1ZSlcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHZhbHVlIHBhcmFtZXRlciBpcyBudWxsXCIpO1xyXG4gICAgICAgIHN1cGVyKGlkVG9rZW4sIGFjY2Vzc1Rva2VuLCByZXNvdXJjZSwgc2NoZW1hLCBhc3NlcnRlZElkZW50aXR5LCBzY2hlbWEsIGFzc2VydGVkSWRlbnRpdHkpO1xyXG5cclxuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgaWYgKHBvbGljeSlcclxuICAgICAgICAgICAgdGhpcy5wb2xpY3kgPSBwb2xpY3k7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDbGFzcyByZXByZXNlbnRhdGlvbiBvZiB0aGUgUmVhZE1lc3NhZ2VCb2R5IGRhdGEgb2JqZWN0XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUmVhZE1lc3NhZ2VCb2R5IGV4dGVuZHMgTWVzc2FnZUJvZHkge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtJZGVudGl0eS5KV1R9IGlkVG9rZW4gLVxyXG4gICAgICogQHBhcmFtIHtJZGVudGl0eS5KV1R9IGFjY2Vzc1Rva2VuXHJcbiAgICAgKiBAcGFyYW0ge1VSTC5VUkx9IHJlc291cmNlIC0gVVJMIG9mIHRoZSBvYmplY1xyXG4gICAgICogQHBhcmFtIHtVUkwuSHlwZXJ0eUNhdGFsb2d1ZVVSTH0gc2NoZW1hIC0gVVJMIG9mIHRoZSBEYXRhIG9iamVjdCBzY2hlbWEgc3RvcmVkIGluIHRoZSBDYXRhbG9ndWVcclxuICAgICAqIEBwYXJhbSB7SWRlbnRpdHkuSWRlbnRpdHl9IGFzc2VydGVkSWRlbnRpdHkgLSBBc3NlcnRlZElkZW50aXR5IGlzIGNvbXBsaWFudCB3aXRoIFVzZXIgSWRlbnRpdHkgRGF0YSBNb2RlbFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGF0dHJpYnV0ZSAtIElkZW50aWZpZXMgdGhlIGF0dHJpYnV0ZSBpbiB0aGUgT2JqZWN0IHRvIGJlIHJlYWQgKG9wdGlvbmFsKVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGNyaXRlcmlhU3ludGF4IC0gRGVmaW5lcyB0aGUgY3JpdGVyaWEgc3ludGF4IHVzZWQgaW4gY3JpdGVyaWEgZmllbGQuIFRvIGJlIHVzZWQgZm9yIHNlYXJjaCBwdXJwb3Nlcy5cclxuICAgICAqIFZhbGlkIGNyaXRlcmlhIFN5bnRheCBhcmU6IFwia2V5LXZhbHVlXCIsIFwibW9uZ29kYlwiLCBcInNxbFwiKD8pLCAuLi5cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjcml0ZXJpYSAtRGVmaW5lcyB0aGUgY3JpdGVyaWEgdG8gYmUgdXNlZCBmb3Igc2VhcmNoIHB1cnBvc2VzLiBTeW50YXggdXNlZCB0byBkZWZpbmUgdGhlIGNyaXRlcmlhXHJcbiAgICAgKiBpcyBzZXQgaW4gdGhlIGNyaXRlcmlhU3ludGF4LlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihpZFRva2VuLCBhY2Nlc3NUb2tlbiwgcmVzb3VyY2UsIHNjaGVtYSwgYXNzZXJ0ZWRJZGVudGl0eSwgYXR0cmlidXRlLCBjcml0ZXJpYVN5bnRheCwgY3JpdGVyaWEpIHtcclxuXHJcbiAgICAgICAgc3VwZXIoaWRUb2tlbiwgYWNjZXNzVG9rZW4sIHJlc291cmNlLCBzY2hlbWEsIGFzc2VydGVkSWRlbnRpdHkpO1xyXG5cclxuICAgICAgICBpZiAoYXR0cmlidXRlKVxyXG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZSA9IGF0dHJpYnV0ZTtcclxuXHJcbiAgICAgICAgaWYgKGNyaXRlcmlhU3ludGF4KVxyXG4gICAgICAgICAgICB0aGlzLmNyaXRlcmlhU3ludGF4ID0gY3JpdGVyaWFTeW50YXg7XHJcblxyXG4gICAgICAgIGlmIChjcml0ZXJpYSlcclxuICAgICAgICAgICAgdGhpcy5jcml0ZXJpYSA9IGNyaXRlcmlhO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIENsYXNzIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBEZWxldGVNZXNzYWdlQm9keSBkYXRhIG9iamVjdFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIERlbGV0ZU1lc3NhZ2VCb2R5IGV4dGVuZHMgTWVzc2FnZUJvZHkge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtJZGVudGl0eS5KV1R9IGlkVG9rZW4gLVxyXG4gICAgICogQHBhcmFtIHtJZGVudGl0eS5KV1R9IGFjY2Vzc1Rva2VuXHJcbiAgICAgKiBAcGFyYW0ge1VSTC5VUkxMaXN0fSByZXNvdXJjZSAtIE9uZSBvciBtb3JlIFVSTHMgb2Ygb2JqZWN0cyB0byBiZSBkZWxldGVkXHJcbiAgICAgKiBAcGFyYW0ge1VSTC5IeXBlcnR5Q2F0YWxvZ3VlVVJMfSBzY2hlbWEgLSBVUkwgb2YgdGhlIERhdGEgb2JqZWN0IHNjaGVtYSBzdG9yZWQgaW4gdGhlIENhdGFsb2d1ZVxyXG4gICAgICogQHBhcmFtIHtJZGVudGl0eS5JZGVudGl0eX0gYXNzZXJ0ZWRJZGVudGl0eSAtIEFzc2VydGVkSWRlbnRpdHkgaXMgY29tcGxpYW50IHdpdGggVXNlciBJZGVudGl0eSBEYXRhIE1vZGVsXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gYXR0cmlidXRlIC0gSWRlbnRpZmllcyB0aGUgYXR0cmlidXRlIGluIHRoZSBPYmplY3QgdG8gYmUgZGVsZXRlZCAob3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGlkVG9rZW4sIGFjY2Vzc1Rva2VuLCByZXNvdXJjZSwgc2NoZW1hLCBhc3NlcnRlZElkZW50aXR5LCBhdHRyaWJ1dGUpIHtcclxuXHJcbiAgICAgICAgaWYgKHJlc291cmNlIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgc3VwZXIoaWRUb2tlbiwgYWNjZXNzVG9rZW4sIG51bGwsIHNjaGVtYSwgYXNzZXJ0ZWRJZGVudGl0eSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW5SZXNvdXJjZXMgPSByZXNvdXJjZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzdXBlcihpZFRva2VuLCBhY2Nlc3NUb2tlbiwgcmVzb3VyY2UsIHNjaGVtYSwgYXNzZXJ0ZWRJZGVudGl0eSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoYXR0cmlidXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlID0gYXR0cmlidXRlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDbGFzcyByZXByZXNlbnRhdGlvbiBvZiB0aGUgVXBkYXRlTWVzc2FnZUJvZHkgZGF0YSBvYmplY3RcclxuICovXHJcbmV4cG9ydCBjbGFzcyBVcGRhdGVNZXNzYWdlQm9keSBleHRlbmRzIE1lc3NhZ2VCb2R5IHtcclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0b3IgdG8gY3JlYXRlIHRoZSBvYmplY3RcclxuICAgICAqIEBwYXJhbSB7SWRlbnRpdHkuSldUfSBpZFRva2VuIC1cclxuICAgICAqIEBwYXJhbSB7SWRlbnRpdHkuSldUfSBhY2Nlc3NUb2tlblxyXG4gICAgICogQHBhcmFtIHtVUkwuVVJMfSByZXNvdXJjZSAtIFVSTCBvZiB0aGUgb2JqZWN0XHJcbiAgICAgKiBAcGFyYW0ge1VSTC5IeXBlcnR5Q2F0YWxvZ3VlVVJMfSBzY2hlbWEgLSBVUkwgb2YgdGhlIERhdGEgb2JqZWN0IHNjaGVtYSBzdG9yZWQgaW4gdGhlIENhdGFsb2d1ZVxyXG4gICAgICogQHBhcmFtIHtJZGVudGl0eS5JZGVudGl0eX0gYXNzZXJ0ZWRJZGVudGl0eSAtIEFzc2VydGVkSWRlbnRpdHkgaXMgY29tcGxpYW50IHdpdGggVXNlciBJZGVudGl0eSBEYXRhIE1vZGVsXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gYXR0cmlidXRlIC0gSWRlbnRpZmllcyB0aGUgYXR0cmlidXRlIGluIHRoZSBPYmplY3QgdG8gYmUgdXBkYXRlZCAob3B0aW9uYWwpXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWUgLSBDb250YWlucyB0aGUgdXBkYXRlZCB2YWx1ZSBvYmplY3QgaW4gSlNPTiBmb3JtYXQuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGlkVG9rZW4sIGFjY2Vzc1Rva2VuLCByZXNvdXJjZSwgc2NoZW1hLCBhc3NlcnRlZElkZW50aXR5LCBhdHRyaWJ1dGUsIHZhbHVlKSB7XHJcblxyXG4gICAgICAgIHN1cGVyKGlkVG9rZW4sIGFjY2Vzc1Rva2VuLCByZXNvdXJjZSwgc2NoZW1hLCBhc3NlcnRlZElkZW50aXR5KTtcclxuICAgICAgICB0aGlzLmF0dHJpYnV0ZSA9IGF0dHJpYnV0ZTtcclxuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkQXR0cmlidXRlVHlwZShhdHRyaWJ1dGVUeXBlKSB7XHJcbiAgICAgICAgaWYgKGF0dHJpYnV0ZVR5cGUpXHJcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlVHlwZSA9IGF0dHJpYnV0ZVR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkT3BlcmF0aW9uKG9wZXJhdGlvbikge1xyXG4gICAgICAgIGlmIChvcGVyYXRpb24pXHJcbiAgICAgICAgICAgIHRoaXMub3BlcmF0aW9uID0gb3BlcmF0aW9uO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ2xhc3MgcmVwcmVzZW50YXRpb24gb2YgdGhlIEZvcndhcmRNZXNzYWdlQm9keSBkYXRhIG9iamVjdFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEZvcndhcmRNZXNzYWdlQm9keSBleHRlbmRzIE1lc3NhZ2VCb2R5IHtcclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0b3IgdG8gY3JlYXRlIHRoZSBvYmplY3RcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0lkZW50aXR5LkpXVH0gaWRUb2tlbiAtXHJcbiAgICAgKiBAcGFyYW0ge0lkZW50aXR5LkpXVH0gYWNjZXNzVG9rZW5cclxuICAgICAqIEBwYXJhbSB7VVJMLlVSTH0gcmVzb3VyY2UgLSBVUkwgb2YgdGhlIG9iamVjdFxyXG4gICAgICogQHBhcmFtIHtVUkwuSHlwZXJ0eUNhdGFsb2d1ZVVSTH0gc2NoZW1hIC0gVVJMIG9mIHRoZSBEYXRhIG9iamVjdCBzY2hlbWEgc3RvcmVkIGluIHRoZSBDYXRhbG9ndWVcclxuICAgICAqIEBwYXJhbSB7SWRlbnRpdHkuSWRlbnRpdHl9IGFzc2VydGVkSWRlbnRpdHkgLSBBc3NlcnRlZElkZW50aXR5IGlzIGNvbXBsaWFudCB3aXRoIFVzZXIgSWRlbnRpdHkgRGF0YSBNb2RlbFxyXG4gICAgICogQHBhcmFtIHtNZXNzYWdlfSBtZXNzYWdlIC0gTWVzc2FnZSB0byBiZSBmb3J3YXJkZWRcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoaWRUb2tlbiwgYWNjZXNzVG9rZW4sIHJlc291cmNlLCBzY2hlbWEsIGFzc2VydGVkSWRlbnRpdHksIG1lc3NhZ2UpIHtcclxuXHJcblxyXG4gICAgICAgIHN1cGVyKGlkVG9rZW4sIGFjY2Vzc1Rva2VuLCByZXNvdXJjZSwgc2NoZW1hLCBhc3NlcnRlZElkZW50aXR5KTtcclxuXHJcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENsYXNzIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBSZXNwb25zZU1lc3NhZ2VCb2R5IGRhdGEgb2JqZWN0XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUmVzcG9uc2VNZXNzYWdlQm9keSBleHRlbmRzIE1lc3NhZ2VCb2R5IHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdG9yIHRvIGNyZWF0ZSB0aGUgb2JqZWN0XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtJZGVudGl0eS5KV1R9IGlkVG9rZW4gLVxyXG4gICAgICogQHBhcmFtIHtJZGVudGl0eS5KV1R9IGFjY2Vzc1Rva2VuXHJcbiAgICAgKiBAcGFyYW0ge1VSTC5VUkx9IHJlc291cmNlIC0gVVJMIG9mIHRoZSBvYmplY3RcclxuICAgICAqIEBwYXJhbSBjb2RlIC0gQSByZXNwb25zZSBjb2RlIGNvbXBsaWFudCB3aXRoIEhUVFAgcmVzcG9uc2UgY29kZXMgKFJGQzcyMzEpXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBDb250YWlucyBhIGRhdGEgdmFsdWUgaW4gSlNPTiBmb3JtYXQuIEFwcGxpY2FibGUgdG8gUmVzcG9uc2VzIHRvIFJFQUQgTWVzc2FnZVR5cGUuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGlkVG9rZW4sIGFjY2Vzc1Rva2VuLCByZXNvdXJjZSwgY29kZSwgdmFsdWUpIHtcclxuXHJcbiAgICAgICAgc3VwZXIoaWRUb2tlbiwgYWNjZXNzVG9rZW4sIHJlc291cmNlKTtcclxuXHJcbiAgICAgICAgaWYgKGNvZGUpIHtcclxuICAgICAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcclxuICAgICAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IFJFQVNPTl9QSFJBU0VbY29kZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2YWx1ZSlcclxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG5cclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENsYXNzIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBFeGVjdXRlTWVzc2FnZUJvZGF5IGRhdGEgT2JqZWN0LiBDb250YWlucyB0aGUgbmFtZSBvZiBtZXRob2QgdG8gYmUgaW52b2tlZCBhbmQgYW4gYXJyYXlcclxuICogYW5kIGFuIEFycmF5IG9mIG9iamVjdHMgdG8gYmUgcGFzc2VkIGFzIHBhcmFtZXRlcnMgdG8gdGhlIGRlZmluZWQgbWV0aG9kLiBUaGlzIGlzIGNvbXBsaWFudCB3aXRoIEpTT04tUlBDIFNwZWMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRXhlY3V0ZU1lc3NhZ2VCb2R5IGV4dGVuZHMgTWVzc2FnZUJvZHkge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0b3IgdG8gY3JlYXRlIHRoZSBvYmplY3RcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0lkZW50aXR5LkpXVH0gaWRUb2tlbiAtXHJcbiAgICAgKiBAcGFyYW0ge0lkZW50aXR5LkpXVH0gYWNjZXNzVG9rZW5cclxuICAgICAqIEBwYXJhbSB7VVJMLlVSTH0gcmVzb3VyY2UgLSBVUkwgb2YgdGhlIG9iamVjdFxyXG4gICAgICogQHBhcmFtIHtVUkwuSHlwZXJ0eUNhdGFsb2d1ZVVSTH0gc2NoZW1hIC0gVVJMIG9mIHRoZSBEYXRhIG9iamVjdCBzY2hlbWEgc3RvcmVkIGluIHRoZSBDYXRhbG9ndWVcclxuICAgICAqIEBwYXJhbSB7SWRlbnRpdHkuSWRlbnRpdHl9IGFzc2VydGVkSWRlbnRpdHkgLSBBc3NlcnRlZElkZW50aXR5IGlzIGNvbXBsaWFudCB3aXRoIFVzZXIgSWRlbnRpdHkgRGF0YSBNb2RlbFxyXG4gICAgICogQHBhcmFtIHtNZXNzYWdlfSBtZXNzYWdlIC0gTWVzc2FnZSB0byBiZSBmb3J3YXJkZWRcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoaWRUb2tlbiwgYWNjZXNzVG9rZW4sIHJlc291cmNlLCBzY2hlbWEsIGFzc2VydGVkSWRlbnRpdHksIG1ldGhvZCwgcGFyYW1zKSB7XHJcblxyXG4gICAgICAgIHN1cGVyKGlkVG9rZW4sIGFjY2Vzc1Rva2VuLCByZXNvdXJjZSwgc2NoZW1hLCBhc3NlcnRlZElkZW50aXR5KTtcclxuXHJcbiAgICAgICAgdGhpcy5tZXRob2QgPSBtZXRob2Q7XHJcbiAgICAgICAgaWYgKHBhcmFtcykge1xyXG4gICAgICAgICAgICBpZiAocGFyYW1zIGluc3RhbmNlb2YgQXJyYXkpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJhbXMgPSBbcGFyYW1zXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gRW51bShhKSB7XHJcbiAgICBsZXQgaSA9IE9iamVjdFxyXG4gICAgICAgIC5rZXlzKGEpXHJcbiAgICAgICAgLnJlZHVjZSgobywgayk9PihvW2Fba11dID0gaywgbyksIHt9KTtcclxuXHJcbiAgICByZXR1cm4gT2JqZWN0LmZyZWV6ZShcclxuICAgICAgICBPYmplY3Qua2V5cyhhKS5yZWR1Y2UoXHJcbiAgICAgICAgICAgIChvLCBrKT0+KG9ba10gPSBhW2tdLCBvKSwgdj0+aVt2XVxyXG4gICAgICAgIClcclxuICAgICk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIHJlc3BvbnNlIGNvZGUgY29tcGxpYW50IHdpdGggSFRUUCByZXNwb25zZSBjb2RlcyAoUkZDNzIzMSkuXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgUkVTUE9OU0VfQ09ERSA9IEVudW0oe1xyXG4gICAgMTAwOiAnMTAwJyxcclxuICAgIDEwMTogJzEwMScsXHJcbiAgICAyMDA6ICcyMDAnLFxyXG4gICAgMjAxOiAnMjAxJyxcclxuICAgIDIwMjogJzIwMicsXHJcbiAgICAyMDM6ICcyMDMnLFxyXG4gICAgMjA0OiAnMjA0JyxcclxuICAgIDIwNTogJzIwNScsXHJcbiAgICAyMDY6ICcyMDYnLFxyXG4gICAgMzAwOiAnMzAwJyxcclxuICAgIDMwMTogJzMwMScsXHJcbiAgICAzMDI6ICczMDInLFxyXG4gICAgMzAzOiAnMzAzJyxcclxuICAgIDMwNDogJzMwNCcsXHJcbiAgICAzMDU6ICczMDUnLFxyXG4gICAgMzA3OiAnMzA3JyxcclxuICAgIDQwMDogJzQwMCcsXHJcbiAgICA0MDE6ICc0MDEnLFxyXG4gICAgNDAyOiAnNDAyJyxcclxuICAgIDQwMzogJzQwMycsXHJcbiAgICA0MDQ6ICc0MDQnLFxyXG4gICAgNDA1OiAnNDA1JyxcclxuICAgIDQwNjogJzQwNicsXHJcbiAgICA0MDc6ICc0MDcnLFxyXG4gICAgNDA4OiAnNDA4JyxcclxuICAgIDQwOTogJzQwOScsXHJcbiAgICA0MTA6ICc0MTAnLFxyXG4gICAgNDExOiAnNDExJyxcclxuICAgIDQxMjogJzQxMicsXHJcbiAgICA0MTM6ICc0MTMnLFxyXG4gICAgNDE0OiAnNDE0JyxcclxuICAgIDQxNTogJzQxNScsXHJcbiAgICA0MTY6ICc0MTYnLFxyXG4gICAgNDE3OiAnNDE3JyxcclxuICAgIDQyNjogJzQyNicsXHJcbiAgICA1MDA6ICc1MDAnLFxyXG4gICAgNTAxOiAnNTAxJyxcclxuICAgIDUwMjogJzUwMicsXHJcbiAgICA1MDM6ICc1MDMnLFxyXG4gICAgNTA0OiAnNTA0JyxcclxuICAgIDUwNTogJzUwNSdcclxufSk7XHJcblxyXG4vKipcclxuICogUmVwcmVzZW50cyByZXNwb25zZSBwaHJhc2VzIHRvIHJlc3BvbnNlIGNvZGUgY29tcGxpYW50IHdpdGggSFRUUCByZXNwb25zZSBjb2RlcyAoUkZDNzIzMSkuXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgUkVBU09OX1BIUkFTRSA9IEVudW0oe1xyXG4gICAgMTAwOiAnQ29udGludWUnLFxyXG4gICAgMTAxOiAnU3dpdGNoaW5nIFByb3RvY29scycsXHJcbiAgICAyMDA6ICdPSycsXHJcbiAgICAyMDE6ICdDcmVhdGVkJyxcclxuICAgIDIwMjogJ0FjY2VwdGVkJyxcclxuICAgIDIwMzogJ05vbi1BdXRob3JpdGF0aXZlIEluZm9ybWF0aW9uJyxcclxuICAgIDIwNDogJ05vIENvbnRlbnQnLFxyXG4gICAgMjA1OiAnUmVzZXQgQ29udGVudCcsXHJcbiAgICAyMDY6ICdQYXJ0aWFsIENvbnRlbnQnLFxyXG4gICAgMzAwOiAnTXVsdGlwbGUgQ2hvaWNlcycsXHJcbiAgICAzMDE6ICdNb3ZlZCBQZXJtYW5lbnRseScsXHJcbiAgICAzMDI6ICdGb3VuZCcsXHJcbiAgICAzMDM6ICdTZWUgT3RoZXInLFxyXG4gICAgMzA0OiAnTm90IE1vZGlmaWVkJyxcclxuICAgIDMwNTogJ1VzZSBQcm94eScsXHJcbiAgICAzMDc6ICdUZW1wb3JhcnkgUmVkaXJlY3QnLFxyXG4gICAgNDAwOiAnQmFkIFJlcXVlc3QnLFxyXG4gICAgNDAxOiAnVW5hdXRob3JpemVkJyxcclxuICAgIDQwMjogJ1BheW1lbnQgUmVxdWlyZWQnLFxyXG4gICAgNDAzOiAnRm9yYmlkZGVuJyxcclxuICAgIDQwNDogJ05vdCBGb3VuZCcsXHJcbiAgICA0MDU6ICdNZXRob2QgTm90IEFsbG93ZWQnLFxyXG4gICAgNDA2OiAnTm90IEFjY2VwdGFibGUnLFxyXG4gICAgNDA3OiAnUHJveHkgQXV0aGVudGljYXRpb24gUmVxdWlyZWQnLFxyXG4gICAgNDA4OiAnUmVxdWVzdCBUaW1lb3V0JyxcclxuICAgIDQwOTogJ0NvbmZsaWN0JyxcclxuICAgIDQxMDogJ0dvbmUnLFxyXG4gICAgNDExOiAnTGVuZ3RoIFJlcXVpcmVkJyxcclxuICAgIDQxMjogJ1ByZWNvbmRpdGlvbiBGYWlsZWQnLFxyXG4gICAgNDEzOiAnUGF5bG9hZCBUb28gTGFyZ2UnLFxyXG4gICAgNDE0OiAnUmVxdWVzdC1VUkkgVG9vIExvbmcnLFxyXG4gICAgNDE1OiAnVW5zdXBwb3J0ZWQgTWVkaWEgVHlwZScsXHJcbiAgICA0MTY6ICdSYW5nZSBOb3QgU2F0aXNmaWFibGUnLFxyXG4gICAgNDE3OiAnRXhwZWN0YXRpb24gRmFpbGVkJyxcclxuICAgIDQyNjogJ1VwZ3JhZGUgUmVxdWlyZWQnLFxyXG4gICAgNTAwOiAnSW50ZXJuYWwgU2VydmVyIEVycm9yJyxcclxuICAgIDUwMTogJ05vdCBJbXBsZW1lbnRlZCcsXHJcbiAgICA1MDI6ICdCYWQgR2F0ZXdheScsXHJcbiAgICA1MDM6ICdTZXJ2aWNlIFVuYXZhaWxhYmxlJyxcclxuICAgIDUwNDogJ0dhdGV3YXkgVGltZS1vdXQnLFxyXG4gICAgNTA1OiAnSFRUUCBWZXJzaW9uIE5vdCBTdXBwb3J0ZWQnXHJcbn0pO1xyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBBVFRSSUJVVEVfVFlQRSA9IEVudW0oe1xyXG4gICAgT0JKRUNUOiAnT0JKRUNUJyxcclxuICAgIEFSUkFZOiAnQVJSQVknXHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IFVQREFURV9PUEVSQVRJT04gPSBFbnVtKHtcclxuICAgIEFERDogJ0FERCcsXHJcbiAgICBSRU1PVkU6ICdSRU1PVkUnXHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgTWVzc2FnZUJvZHk7XHJcbiIsIi8qKlxyXG4gKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0FcclxuICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSURcclxuICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMXHJcbiAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WXHJcbiAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQVxyXG4gKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHXHJcbiAqIENvcHlyaWdodCAyMDE2IEFwaXplZVxyXG4gKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqKi9cclxuaW1wb3J0IE1lc3NhZ2UsIHtNZXNzYWdlVHlwZX0gZnJvbSBcIi4vTWVzc2FnZS5qc1wiO1xyXG5pbXBvcnQge1xyXG4gICAgTWVzc2FnZUJvZHksXHJcbiAgICBDcmVhdGVNZXNzYWdlQm9keSxcclxuICAgIERlbGV0ZU1lc3NhZ2VCb2R5LFxyXG4gICAgVXBkYXRlTWVzc2FnZUJvZHksXHJcbiAgICBSZWFkTWVzc2FnZUJvZHksXHJcbiAgICBSZXNwb25zZU1lc3NhZ2VCb2R5LFxyXG4gICAgRm9yd2FyZE1lc3NhZ2VCb2R5LFxyXG4gICAgRXhlY3V0ZU1lc3NhZ2VCb2R5XHJcbn0gZnJvbSBcIi4vTWVzc2FnZUJvZHkuanNcIjtcclxuXHJcbi8qKlxyXG4gKiBAYXV0aG9yIGFsaWNlLmNoZWFtYmVbYXRdZm9rdXMuZnJhdW5ob2Zlci5kZVxyXG4gKiBUaGUgTWVzc2FnZUZhY3RvcnkgY3JlYXRlcyBtZXNzYWdlcyBhY2NvcmRpbmcgdG8gdGhlIHJlVEhJTksgTWVzc2FnZSBEYXRhIE1vZGVsIHRvIGJlIHNlbnQgdGhyb3VnaCB0aGUgUnVudGltZVxyXG4gKiBNZXNzYWdlIEJ1cy5cclxuICovXHJcbmNsYXNzIE1lc3NhZ2VGYWN0b3J5IHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdG9yIHRvIGJlIHVzZWQgdG8gaW5zdGFudGlhdGUgYW4gb2JqZWN0IG9mIHRoZSBNZXNzYWdlIEZhY3RvcnlcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5teUdlbmVyYXRvciA9IG5ldyBJZEdlbmVyYXRvcigpLmlkTWFrZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBNZXNzYWdlIG9mIFRZUEUgQ1JFQVRFIGFuZCBDcmVhdGUgTWVzc2FnZSBCb2R5XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtVUkwuVVJMfSBmcm9tIC0gdGhlIHNlbmRlciBvZiB0aGlzIG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB7VVJMLlVSTExpc3R9IHRvLSAgT25lIG9yIG1vcmUgVVJMcyBvZiBNZXNzYWdlIHJlY2lwaWVudHMuIEFjY29yZGluZyB0byB0aGUgVVJMIHNjaGVtZSBpdCBtYXkgYmUgaGFuZGxlZFxyXG4gICAgICogaW4gZGlmZmVyZW50IHdheXNcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSAtIENvbnRhaW5zIHRoZSBjcmVhdGVkIG9iamVjdCBpbiBKU09OIGZvcm1hdFxyXG4gICAgICogQHBhcmFtIHtVUkwuVVJMfSBwb2xpY3kgLSB0aGUgc2VuZGVyIG9mIHRoaXMgbWVzc2FnZVxyXG4gICAgICovXHJcbiAgICBjcmVhdGVDcmVhdGVNZXNzYWdlUmVxdWVzdChmcm9tLCB0bywgdmFsdWUsIHBvbGljeSkge1xyXG4gICAgICAgIGlmICghZnJvbSB8fCAhdG8gfHwgIXZhbHVlKVxyXG4gICAgICAgICAgICB0aHJvdyAgbmV3IEVycm9yKFwiZnJvbSwgdG8sIGFuZCB2YWx1ZSBvZiBvYmplY3QgdG8gYmUgY3JlYXRlZCBNVVNUIGJlIHNwZWNpZmllZFwiKTtcclxuXHJcbiAgICAgICAgbGV0IGlkID0gdGhpcy5teUdlbmVyYXRvci5uZXh0KCkudmFsdWU7XHJcbiAgICAgICAgbGV0IG1lc3NhZ2VCb2R5ID0gbmV3IENyZWF0ZU1lc3NhZ2VCb2R5KHZhbHVlLCBwb2xpY3ksIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcclxuICAgICAgICBsZXQgbWVzc2FnZSA9IG5ldyBNZXNzYWdlKGlkLCBmcm9tLCB0bywgTWVzc2FnZVR5cGUuQ1JFQVRFLCBtZXNzYWdlQm9keSk7XHJcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgTWVzc2FnZSBvZiBUWVBFIEZPUldBUkQgYW5kIEZvcndhcmQgTWVzc2FnZSBCb2R5LCB3aGljaCBjb250YWlucyB0aGUgbWVzc2FnZSB0byBiZSBmb3J3YXJkZWRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1VSTC5VUkx9IGZyb20gLSB0aGUgc2VuZGVyIG9mIHRoaXMgbWVzc2FnZVxyXG4gICAgICogQHBhcmFtIHtVUkwuVVJMTGlzdH0gdG8tICBPbmUgb3IgbW9yZSBVUkxzIG9mIE1lc3NhZ2UgcmVjaXBpZW50cy4gQWNjb3JkaW5nIHRvIHRoZSBVUkwgc2NoZW1lIGl0IG1heSBiZSBoYW5kbGVkXHJcbiAgICAgKiBpbiBkaWZmZXJlbnQgd2F5c1xyXG4gICAgICogQHBhcmFtIG1lc3NhZ2Uge01lc3NhZ2UuTWVzc2FnZX0gbWVzc2FnZSAtIHRoZSBtZXNzYWdlIHRvIGJlIGZvcndhcmRlZFxyXG4gICAgICogQHJldHVybiB7TWVzc2FnZS5NZXNzYWdlfSBNZXNzYWdlIC0gdGhlIEZvcndhcmQgTWVzc2FnZSBSZXF1ZXN0XHJcbiAgICAgKi9cclxuICAgIGNyZWF0ZUZvcndhcmRNZXNzYWdlUmVxdWVzdChmcm9tLCB0bywgbWVzc2FnZSkge1xyXG4gICAgICAgIGlmICghZnJvbSB8fCAhdG8gfHwgIW1lc3NhZ2UpXHJcbiAgICAgICAgICAgIHRocm93ICBuZXcgRXJyb3IoXCJmcm9tLCB0bywgYW5kIG1lc3NhZ2UgdG8gZm9yd2FyZCBNVVNUIGJlIHNwZWNpZmllZFwiKTtcclxuXHJcbiAgICAgICAgbGV0IGlkID0gdGhpcy5teUdlbmVyYXRvci5uZXh0KCkudmFsdWU7XHJcbiAgICAgICAgbGV0IG1lc3NhZ2VCb2R5ID0gbmV3IEZvcndhcmRNZXNzYWdlQm9keSh1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgbWVzc2FnZSk7XHJcbiAgICAgICAgbGV0IGZvcndhcmRNZXNzYWdlID0gbmV3IE1lc3NhZ2UoaWQsIGZyb20sIHRvLCBNZXNzYWdlVHlwZS5GT1JXQVJELCBtZXNzYWdlQm9keSk7XHJcbiAgICAgICAgcmV0dXJuIGZvcndhcmRNZXNzYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogIENyZWF0ZSBEZWxldGUgTWVzc2FnZSBvZiBUeXBlIERFTEVURSBhbmQgZGVsZXRlIG1lc3NhZ2UgYm9keVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7VVJMLlVSTH0gZnJvbSAtIHRoZSBzZW5kZXIgb2YgdGhpcyBtZXNzYWdlXHJcbiAgICAgKiBAcGFyYW0ge1VSTC5VUkxMaXN0fSB0byAtIE9uZSBvciBtb3JlIFVSTHMgb2YgTWVzc2FnZSByZWNpcGllbnRzLiBBY2NvcmRpbmcgdG8gdGhlIFVSTCBzY2hlbWUgaXQgbWF5IGJlIGhhbmRsZWRcclxuICAgICAqIGluIGRpZmZlcmVudCB3YXlzXHJcbiAgICAgKiBAcGFyYW0ge1VSTC5VUmx9IHJlc291cmNlIC0gVVJMIG9mIERhdGEgT2JqZWN0IFJlc291cmNlIGFzc29jaWF0ZWQgd2l0aCB0aGUgbWVzc2FnZVxyXG4gICAgICogQHBhcmFtIGF0dHJpYnV0ZSAtIElkZW50aWZpZXMgdGhlIGF0dHJpYnV0ZSBpbiB0aGUgT2JqZWN0IHRvIGJlIGRlbGV0ZWRcclxuICAgICAqIEByZXR1cm4ge01lc3NhZ2UuTWVzc2FnZX0gTWVzc2FnZSAtIHRoZSBEZWxldGUgTWVzc2FnZSBSZXF1ZXN0XHJcbiAgICAgKi9cclxuICAgIGNyZWF0ZURlbGV0ZU1lc3NhZ2VSZXF1ZXN0KGZyb20sIHRvLCByZXNvdXJjZSwgYXR0cmlidXRlKSB7XHJcbiAgICAgICAgaWYgKCFmcm9tIHx8ICF0bylcclxuICAgICAgICAgICAgdGhyb3cgIG5ldyBFcnJvcihcImZyb20gYW5kIHRvIHBhcmFtZXRlcnMgTVVTVCBiZSBzcGVjaWZpZWRcIik7XHJcblxyXG4gICAgICAgIGxldCBpZCA9IHRoaXMubXlHZW5lcmF0b3IubmV4dCgpLnZhbHVlO1xyXG4gICAgICAgIGxldCBtZXNzYWdlQm9keSA9IG5ldyBEZWxldGVNZXNzYWdlQm9keSh1bmRlZmluZWQsIHVuZGVmaW5lZCwgcmVzb3VyY2UsIGF0dHJpYnV0ZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQpO1xyXG4gICAgICAgIGxldCBtZXNzYWdlID0gbmV3IE1lc3NhZ2UoaWQsIGZyb20sIHRvLCBNZXNzYWdlVHlwZS5ERUxFVEUsIG1lc3NhZ2VCb2R5KTtcclxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuIFVwZGF0ZSBNZXNzYWdlIFJlcXVlc3RcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1VSTC5VUkx9IGZyb20gLSB0aGUgc2VuZGVyIG9mIHRoaXMgbWVzc2FnZVxyXG4gICAgICogQHBhcmFtIHtVUkwuVVJMTGlzdH10byAtIE9uZSBvciBtb3JlIFVSTHMgb2YgTWVzc2FnZSByZWNpcGllbnRzLiBBY2NvcmRpbmcgdG8gdGhlIFVSTCBzY2hlbWUgaXQgbWF5IGJlIGhhbmRsZWQgaW5cclxuICAgICAqIGRpZmZlcmVudCB3YXlzXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgbmV3IHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGUgdG8gYmUgdXBkYXRlZFxyXG4gICAgICogQHBhcmFtIHtVUkwuVVJMfSByZXNvdXJjZSAtIFVSTCBvZiBEYXRhIE9iamVjdCBSZXNvdXJjZSBhc3NvY2lhdGVkIHdpdGggdGhlIG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSBhdHRyaWJ1dGUgLSBJZGVudGlmaWVzIHRoZSBhdHRyaWJ1dGUgaW4gdGhlIE9iamVjdCB0byBiZSB1cGRhdGVkXHJcbiAgICAgKiBAcmV0dXJuIHtNZXNzYWdlLk1lc3NhZ2V9IE1lc3NhZ2UgLSB0aGUgVXBkYXRlIG1lc3NhZ2UgcmVxdWVzdFxyXG4gICAgICovXHJcbiAgICBjcmVhdGVVcGRhdGVNZXNzYWdlUmVxdWVzdChmcm9tLCB0bywgdmFsdWUsIHJlc291cmNlLCBhdHRyaWJ1dGUpIHtcclxuICAgICAgICBpZiAoIWZyb20gfHwgIXRvIHx8ICF2YWx1ZSlcclxuICAgICAgICAgICAgdGhyb3cgIG5ldyBFcnJvcihcImZyb20sIGFuZCB0byBhbmQgdmFsdWUgTVVTVCBiZSBzcGVjaWZpZWRcIik7XHJcblxyXG4gICAgICAgIGxldCBpZCA9IHRoaXMubXlHZW5lcmF0b3IubmV4dCgpLnZhbHVlO1xyXG4gICAgICAgIGxldCBtZXNzYWdlQm9keSA9IG5ldyBVcGRhdGVNZXNzYWdlQm9keSh1bmRlZmluZWQsIHVuZGVmaW5lZCwgcmVzb3VyY2UsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBhdHRyaWJ1dGUsIHZhbHVlKTtcclxuICAgICAgICBsZXQgbWVzc2FnZSA9IG5ldyBNZXNzYWdlKGlkLCBmcm9tLCB0bywgTWVzc2FnZVR5cGUuVVBEQVRFLCBtZXNzYWdlQm9keSk7XHJcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgTWVzc2FnZSBvZiB0eXBlIFJFQURcclxuICAgICAqIEBwYXJhbSB7VVJMLlVSTH0gZnJvbSAtIHRoZSBzZW5kZXIgb2YgdGhpcyBtZXNzYWdlXHJcbiAgICAgKiBAcGFyYW0ge1VSTC5VUkxMaXN0fSB0by0gT25lIG9yIG1vcmUgVVJMcyBvZiBNZXNzYWdlIHJlY2lwaWVudHMuIEFjY29yZGluZyB0byB0aGUgVVJMIHNjaGVtZSBpdCBtYXkgYmUgaGFuZGxlZCBpblxyXG4gICAgICogZGlmZmVyZW50IHdheXNcclxuICAgICAqIEBwYXJhbSB7VVJMLlVSbH0gcmVzb3VyY2UgLSBVUkwgb2YgRGF0YSBPYmplY3QgUmVzb3VyY2UgYXNzb2NpYXRlZCB3aXRoIHRoZSBtZXNzYWdlXHJcbiAgICAgKiBAcGFyYW0gYXR0cmlidXRlIC0gSWRlbnRpZmllcyB0aGUgYXR0cmlidXRlIGluIHRoZSBPYmplY3QgdG8gYmUgcmVhZFxyXG4gICAgICogQHJldHVybiB7TWVzc2FnZS5NZXNzYWdlfSBNZXNzYWdlIC0gdGhlIFJlYWQgbWVzc2FnZSByZXF1ZXN0XHJcbiAgICAgKi9cclxuICAgIGNyZWF0ZVJlYWRNZXNzYWdlUmVxdWVzdChmcm9tLCB0bywgcmVzb3VyY2UsIGF0dHJpYnV0ZSkge1xyXG4gICAgICAgIGlmICghZnJvbSB8fCAhdG8gfHwgIXJlc291cmNlKVxyXG4gICAgICAgICAgICB0aHJvdyAgbmV3IEVycm9yKFwiZnJvbSwgdG8gYW5kIHRoZSByZXNvdXJjZSB0byByZWFkIGZyb20gTVVTVCBiZSBzcGVjaWZpZWRcIik7XHJcblxyXG4gICAgICAgIGxldCBpZCA9IHRoaXMubXlHZW5lcmF0b3IubmV4dCgpLnZhbHVlO1xyXG4gICAgICAgIGxldCBtZXNzYWdlQm9keSA9IG5ldyBSZWFkTWVzc2FnZUJvZHkodW5kZWZpbmVkLCB1bmRlZmluZWQsIHJlc291cmNlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgYXR0cmlidXRlLFxyXG4gICAgICAgICAgICB1bmRlZmluZWQsIHVuZGVmaW5lZCk7XHJcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSBuZXcgTWVzc2FnZShpZCwgZnJvbSwgdG8sIE1lc3NhZ2VUeXBlLlJFQUQsIG1lc3NhZ2VCb2R5KTtcclxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBNZXNzYWdlIG9mIHR5cGUgU1VCU0NSSUJFXHJcbiAgICAgKiBAcGFyYW0ge1VSTC5VUkx9IGZyb20gLSB0aGUgc2VuZGVyIG9mIHRoaXMgbWVzc2FnZVxyXG4gICAgICogQHBhcmFtIHtVUkwuVVJMTGlzdH0gdG8tIE9uZSBvciBtb3JlIFVSTHMgb2YgTWVzc2FnZSByZWNpcGllbnRzLiBBY2NvcmRpbmcgdG8gdGhlIFVSTCBzY2hlbWUgaXQgbWF5IGJlIGhhbmRsZWQgaW5cclxuICAgICAqIGRpZmZlcmVudCB3YXlzXHJcbiAgICAgKiBAcGFyYW0ge1VSTC5VUkx9IHJlc291cmNlIC0gVVJMIG9mIHRoZSBvYmplY3RcclxuICAgICAqL1xyXG4gICAgY3JlYXRlU3Vic2NyaWJlTWVzc2FnZVJlcXVlc3QoZnJvbSwgdG8sIHJlc291cmNlKSB7XHJcbiAgICAgICAgaWYgKCFmcm9tIHx8ICF0byB8fCAhcmVzb3VyY2UpXHJcbiAgICAgICAgICAgIHRocm93ICBuZXcgRXJyb3IoXCJmcm9tLCB0byBhbmQgdGhlIHJlc291cmNlIHRvIHN1YnNjcmliZSB0byBNVVNUIGJlIHNwZWNpZmllZFwiKTtcclxuXHJcbiAgICAgICAgbGV0IGlkID0gdGhpcy5teUdlbmVyYXRvci5uZXh0KCkudmFsdWU7XHJcbiAgICAgICAgbGV0IG1lc3NhZ2VCb2R5ID0gbmV3IE1lc3NhZ2VCb2R5KHVuZGVmaW5lZCwgdW5kZWZpbmVkLCByZXNvdXJjZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQpO1xyXG4gICAgICAgIGxldCBtZXNzYWdlID0gbmV3IE1lc3NhZ2UoaWQsIGZyb20sIHRvLCBNZXNzYWdlVHlwZS5TVUJTQ1JJQkUsIG1lc3NhZ2VCb2R5KTtcclxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBNZXNzYWdlIG9mIHR5cGUgVU5TVUJTQ1JJQkVcclxuICAgICAqIEBwYXJhbSB7VVJMLlVSTH0gZnJvbSAtIHRoZSBzZW5kZXIgb2YgdGhpcyBtZXNzYWdlXHJcbiAgICAgKiBAcGFyYW0ge1VSTC5VUkxMaXN0fSB0by0gT25lIG9yIG1vcmUgVVJMcyBvZiBNZXNzYWdlIHJlY2lwaWVudHMuIEFjY29yZGluZyB0byB0aGUgVVJMIHNjaGVtZSBpdCBtYXkgYmUgaGFuZGxlZCBpblxyXG4gICAgICogZGlmZmVyZW50IHdheXNcclxuICAgICAqIEBwYXJhbSB7VVJMLlVSTH0gcmVzb3VyY2UgLSBVUkwgb2YgdGhlIG9iamVjdFxyXG4gICAgICovXHJcbiAgICBjcmVhdGVVbnN1YnNjcmliZU1lc3NhZ2VSZXF1ZXN0KGZyb20sIHRvLCByZXNvdXJjZSkge1xyXG4gICAgICAgIGlmICghZnJvbSB8fCAhdG8gfHwgIXJlc291cmNlKVxyXG4gICAgICAgICAgICB0aHJvdyAgbmV3IEVycm9yKFwiZnJvbSwgdG8gYW5kIHRoZSByZXNvdXJjZSB0byBzdWJzY3JpYmUgdG8gTVVTVCBiZSBzcGVjaWZpZWRcIik7XHJcblxyXG4gICAgICAgIGxldCBpZCA9IHRoaXMubXlHZW5lcmF0b3IubmV4dCgpLnZhbHVlO1xyXG4gICAgICAgIGxldCBtZXNzYWdlQm9keSA9IG5ldyBNZXNzYWdlQm9keSh1bmRlZmluZWQsIHVuZGVmaW5lZCwgcmVzb3VyY2UsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcclxuICAgICAgICBsZXQgbWVzc2FnZSA9IG5ldyBNZXNzYWdlKGlkLCBmcm9tLCB0bywgTWVzc2FnZVR5cGUuVU5TVUJTQ1JJQkUsIG1lc3NhZ2VCb2R5KTtcclxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBNZXNzYWdlIG9mIHR5cGUgRVhFQ1VURVxyXG4gICAgICogQHBhcmFtIHtVUkwuVVJMfSBmcm9tIC0gdGhlIHNlbmRlciBvZiB0aGlzIG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB7VVJMLlVSTExpc3R9IHRvLSBPbmUgb3IgbW9yZSBVUkxzIG9mIE1lc3NhZ2UgcmVjaXBpZW50cy4gQWNjb3JkaW5nIHRvIHRoZSBVUkwgc2NoZW1lIGl0IG1heSBiZSBoYW5kbGVkIGluXHJcbiAgICAgKiBkaWZmZXJlbnQgd2F5c1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZCAtXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBwYXJhbXMgLVxyXG4gICAgICovXHJcbiAgICBjcmVhdGVFeGVjdXRlTWVzc2FnZVJlcXVlc3QoZnJvbSwgdG8sIG1ldGhvZCwgcGFyYW1zKSB7XHJcbiAgICAgICAgaWYgKCFmcm9tIHx8ICF0byB8fCAhbWV0aG9kKVxyXG4gICAgICAgICAgICB0aHJvdyAgbmV3IEVycm9yKFwiZnJvbSwgdG8gYW5kIHRoZSBtZXRob2QgdG8gZXhlY3V0ZSBNVVNUIGJlIHNwZWNpZmllZFwiKTtcclxuXHJcbiAgICAgICAgbGV0IGlkID0gdGhpcy5teUdlbmVyYXRvci5uZXh0KCkudmFsdWU7XHJcbiAgICAgICAgbGV0IG1lc3NhZ2VCb2R5ID0gbmV3IEV4ZWN1dGVNZXNzYWdlQm9keSh1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgbWV0aG9kLCBwYXJhbXMpXHJcbiAgICAgICAgbGV0IGV4ZWN1dGVNZXNzYWdlID0gbmV3IE1lc3NhZ2UoaWQsIGZyb20sIHRvLCBNZXNzYWdlVHlwZS5FWEVDVVRFLCBtZXNzYWdlQm9keSk7XHJcbiAgICAgICAgcmV0dXJuIGV4ZWN1dGVNZXNzYWdlO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgdGhlIHJlc3BvbnNlIHRvIHRoZSBNZXNzYWdlXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIHRoZSBtZXNzYWdlIHJlcXVlc3QgZnJvbSB3aGljaCB0aGUgcmVzcG9uc2Ugc2hvdWxkIGJlIGdlbmVyYXRlZFxyXG4gICAgICogQHBhcmFtIGNvZGUgLSB0aGUgcmVzcG9uc2UgY29kZSBjb21wbGlhbnQgd2l0aCBIVFRQIHJlc3BvbnNlIGNvZGVzIChSRkM3MjMxKS5cclxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIGNvbnRhaW5zIGEgZGF0YSB2YWx1ZSBpbiBKU09OIGZvcm1hdC4gQXBwbGljYWJsZSB0byBSZXNwb25zZXMgdG8gUkVBRCBNZXNzYWdlVHlwZS5cclxuICAgICAqIEBwYXJhbSBzb3VyY2UgLSBDb250YWlucyB0aGUgb3JpZ2luYWwgY3JlYXRvciBvZiB0aGUgcmVzcG9uc2UuIFVzZWZ1bCB0byBpZGVudGlmeSB0aGUgcmVhbCBzb3VyY2Ugb2YgdGhlXHJcbiAgICAgKiByZXNwb25zZSB0byBhIG9uZS10by1tYW55IG1lc3NhZ2UgZGVsaXZlcnkgaWUgbXVsdGlwbGUgcmVzcG9uc2VzIGNvbWluZyBjb21pbmcgZnJvbSBkaWZmZXJlbnQgc291cmNlcy5cclxuICAgICAqL1xyXG4gICAgY3JlYXRlTWVzc2FnZVJlc3BvbnNlKG1lc3NhZ2UsIGNvZGUsIHZhbHVlLCBzb3VyY2UpIHtcclxuICAgICAgICBpZiAoIWNvZGUpXHJcbiAgICAgICAgICAgIHRocm93ICBuZXcgRXJyb3IoXCJyZXNwb25zZSBDb2RlIE1VU1QgYmUgc3BlY2lmaWVkXCIpO1xyXG4gICAgICAgIGxldCByZXNwb25zZSA9IG5ldyBSZXNwb25zZU1lc3NhZ2VCb2R5KHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvZGUsIHZhbHVlLCBzb3VyY2UpO1xyXG4gICAgICAgIHJldHVybiBuZXcgTWVzc2FnZShtZXNzYWdlLmlkLCBtZXNzYWdlLnRvLCBtZXNzYWdlLmZyb20sIE1lc3NhZ2VUeXBlLlJFU1BPTlNFLCByZXNwb25zZSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdGUgYSByZXNwb25zZSB0byB0aGUgZ2l2ZW4gTWVzc2FnZVxyXG4gICAgICogUmVxdWVzdCAtIFJlc3BvbnNlIHRyYW5zYWN0aW9uc1xyXG4gICAgICogQSBSZXNwb25zZSB0byBhIFJlcXVlc3QgbWVzc2FnZSBzaG91bGQgZm9sbG93IHRoaXMgcnVsZTpcclxuICAgICAqIFJlc3BvbnNlLmZyb20gPSBSZXF1ZXN0LnRvXHJcbiAgICAgKiBSZXNwb25zZS50byA9IFJlcXVlc3QuZnJvbVxyXG4gICAgICogUmVzcG9uc2UuaWQgPSBSZXF1ZXN0LmlkXHJcbiAgICAgKiBJdCBzaG91bGQgYmUgbm90ZSwgdGhlIFJlcXVlc3QuaWQgTVVTVCBiZSBpbmNyZW1lbnRlZCBldmVyeSB0aW1lIGEgbmV3IFJlcXVlc3QgbWVzc2FnZSBpcyBjcmVhdGVkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7TWVzc2FnZX0gZGF0YSAtIE1lc3NhZ2UgdG8gYmUgdXBkYXRlZFxyXG4gICAgICogQHBhcmFtIHtSZXNwb25zZUNvZGV9IGNvZGUgLSByZXNwb25zZSBjb2RlIGNvbXBsaWFudCB3aXRoIEhUVFAgcmVzcG9uc2UgY29kZXMgKFJGQzcyMzEpLlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlIC0gQ29udGFpbnMgYSBkYXRhIHZhbHVlIGluIEpTT04gZm9ybWF0LlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgZ2VuZXJhdGVNZXNzYWdlUmVzcG9uc2UoZGF0YSwgY29kZSwgdmFsdWUpIHtcclxuICAgICAgICBpZiAoIWRhdGEgfHwgIWNvZGUpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm1lc3NhZ2UgYW5kIHJlc3BvbnNlIGNvZGUgTVVTVCBiZSBzcGVjaWZpZWRcIik7XHJcblxyXG4gICAgICAgIGxldCBwcmV2aW91c0JvZHkgPSBkYXRhLmJvZHk7XHJcbiAgICAgICAgbGV0IGlkVG9rZW4gPSBwcmV2aW91c0JvZHkuaWRUb2tlbjtcclxuICAgICAgICBsZXQgYWNjZXNzVG9rZW4gPSBwcmV2aW91c0JvZHkuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgbGV0IHJlc291cmNlID0gcHJldmlvdXNCb2R5LnJlc291cmNlO1xyXG5cclxuICAgICAgICBsZXQgcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2VNZXNzYWdlQm9keShpZFRva2VuLCBhY2Nlc3NUb2tlbiwgcmVzb3VyY2UsIGNvZGUsIHZhbHVlKTtcclxuICAgICAgICBsZXQgaWQgPSB0aGlzLm15R2VuZXJhdG9yLm5leHQoKS52YWx1ZTtcclxuICAgICAgICByZXR1cm4gbmV3IE1lc3NhZ2UoaWQsIGRhdGEudG8sIGRhdGEuZnJvbSwgTWVzc2FnZVR5cGUuUkVTUE9OU0UsIHJlc3BvbnNlKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNZXNzYWdlIElkZW50aWZpZXIgR2VuZXJhdG9yIHRoYXQgZ2VuZXJhdGVzIHRoZSBpZCB1c2VkIHRvIGlkZW50aWZpZXIgbWVzc2FnZSB0cmFuc2FjdGlvbnNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBJZEdlbmVyYXRvciB7XHJcbiAgICAqaWRNYWtlcigpIHtcclxuICAgICAgICBsZXQgaW5kZXggPSAxO1xyXG4gICAgICAgIHdoaWxlIChpbmRleCA8IDEwMDAwMDApXHJcbiAgICAgICAgICAgIHlpZWxkIGluZGV4Kys7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IE1lc3NhZ2VGYWN0b3J5O1xyXG4iLCIvKipcclxuICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBXHJcbiAqIENvcHlyaWdodCAyMDE2IElORVNDLUlEXHJcbiAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTFxyXG4gKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVlxyXG4gKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0FcclxuICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBR1xyXG4gKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWVcclxuICogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKiovXHJcbmltcG9ydCB0djQgZnJvbSBcInR2NFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJldGhpbmtPYmplY3Qge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVmFsaWRhdGVzIHRoaXMgUmV0aGlua09iamVjdCBhZ2FpbnN0IHRoZSBwcm92aWRlZCBzY2hlbWEuXHJcbiAgICAgKlxyXG4gICAgICogTElNSVRBVElPTlM6IFRoZSBwcm92aWRlZCBzY2hlbWEgY2Fubm90IGNvbnRhaW4gcmVmZXJlbmNlcyB0byBvdGhlciBzY2hlbWFzLCBzaW5jZSB0aGV5IGNhbid0IGJlIHJlc29sdmVkLlxyXG4gICAgICogQHBhcmFtIHNjaGVtYSAtIHNjaGVtYSB0byB2YWxpZGF0ZSBhZ2FpbnN0XHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB2YWxpZCwgZmFsc2Ugb3RoZXJ3aXNlXHJcbiAgICAgKi9cclxuICAgIHZhbGlkYXRlKHNjaGVtYSkge1xyXG4gICAgICAgIC8vIGFkZCBzY2hlbWEgaXRzZWxmIHNvIGxvY2FsIHJlZmVyZW5jZXMgd29ya1xyXG4gICAgICAgIHR2NC5hZGRTY2hlbWEoc2NoZW1hLmlkLCBzY2hlbWEpO1xyXG5cclxuICAgICAgICAvLyBKU09OIHN0cmluZ2lmeSAtPiBwYXJzZSBuZWVkZWQgdG8gaGF2ZSBwcm9wZXIgdmFsaWRhdGlvblxyXG4gICAgICAgIGxldCByZXN1bHQgPSB0djQudmFsaWRhdGVNdWx0aXBsZShKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMpKSwgc2NoZW1hKTtcclxuXHJcbiAgICAgICAgLy8gZGVsZXRlIGVycm9yIHN0YWNrcyB0byBpbXByb3ZlIGxvZ2dpbmdcclxuICAgICAgICByZXN1bHQuZXJyb3JzLmZvckVhY2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSBlcnJvci5zdGFjaztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gcHJpbnQgbW9yZSBkZXRhaWxzIGFib3V0IHZhbGlkYXRpb24gaWYgaXQgZmFpbHMgb3Igc2NoZW1hIGNvbnRhaW5zICRyZWZzXHJcbiAgICAgICAgaWYgKCFyZXN1bHQudmFsaWQgfHwgKHJlc3VsdC5taXNzaW5nLmxlbmd0aCA+IDApKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIk9iamVjdCB2YWxpZGF0aW9uIFwiICsgKHJlc3VsdC52YWxpZCA/IFwic3VjY2VlZGVkLCBidXQgc2NoZW1hIGNvbnRhaW5lZCByZWZlcmVuY2VzOlwiIDogXCJmYWlsZWQ6XCIpLCBKU09OLnN0cmluZ2lmeShyZXN1bHQsIG51bGwsIDIpKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJPYmplY3Q6XCIsIEpTT04uc3RyaW5naWZ5KHRoaXMsIG51bGwsIDIpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC52YWxpZDtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFJldGhpbmtPYmplY3Q7XHJcblxyXG4iXX0=\n"]}