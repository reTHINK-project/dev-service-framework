{
  "type": "File",
  "start": 0,
  "end": 8584,
  "loc": {
    "start": {
      "line": 1,
      "column": 0
    },
    "end": {
      "line": 254,
      "column": 2
    }
  },
  "program": {
    "type": "Program",
    "start": 0,
    "end": 8584,
    "loc": {
      "start": {
        "line": 1,
        "column": 0
      },
      "end": {
        "line": 254,
        "column": 2
      }
    },
    "sourceType": "module",
    "body": [],
    "directives": [
      {
        "type": "Directive",
        "start": 0,
        "end": 13,
        "loc": {
          "start": {
            "line": 1,
            "column": 0
          },
          "end": {
            "line": 1,
            "column": 13
          }
        },
        "value": {
          "type": "DirectiveLiteral",
          "start": 0,
          "end": 12,
          "loc": {
            "start": {
              "line": 1,
              "column": 0
            },
            "end": {
              "line": 1,
              "column": 12
            }
          },
          "value": "use strict",
          "extra": {
            "raw": "\"use strict\"",
            "rawValue": "use strict"
          },
          "trailingComments": null
        },
        "trailingComments": [
          {
            "type": "CommentBlock",
            "value": "global describe ",
            "start": 14,
            "end": 34,
            "loc": {
              "start": {
                "line": 2,
                "column": 0
              },
              "end": {
                "line": 2,
                "column": 20
              }
            }
          },
          {
            "type": "CommentBlock",
            "value": "global it ",
            "start": 35,
            "end": 49,
            "loc": {
              "start": {
                "line": 3,
                "column": 0
              },
              "end": {
                "line": 3,
                "column": 14
              }
            }
          },
          {
            "type": "CommentBlock",
            "value": "\nconst assert = require(\"assert\");\nconst fs = require(\"fs\");\nconst URL = require(\"../lib/url\").createURLConstructor();\n\nfunction testAll(testurl) {\n    return function () {\n\tlet url;\n\n\ttry {\n\t    url = new URL(testurl.input, testurl.base);\n\t    assert.equal(url.protocol , testurl.output.protocol, \"\\n\\tGiven: *\" + url.protocol  +\"* \\n\\tTesturl.output.protocol: *\"+testurl.output.protocol+\"*\");\n\t    assert.equal(url.origin , testurl.output.origin, \"\\n\\tGiven: \" + url.origin  +   \" \\n\\tTesturl.Output.origin: \"+testurl.output.origin);\n\t    assert.equal(url.hostname , testurl.output.hostname, \"\\n\\tGiven: \" + url.hostname  +   \" \\n\\tTesturl.Output.hostname: \"+testurl.output.hostname);\n\t    assert.equal(url.host , testurl.output.host, \"\\n\\tGiven: \" + url.host  +   \" \\n\\tTesturl.Output.host: \"+testurl.output.host);\n\t    assert.equal(url.port , testurl.output.port, \"\\n\\tGiven: \" + url.port  +   \" \\n\\tTesturl.Output.port: \"+testurl.output.port);\n\t    assert.equal(url.path , testurl.output.path, \"\\n\\tGiven: \" + url.path  +   \" \\n\\tTesturl.Output.path: \"+testurl.output.path);\n\t    assert.equal(url.search , testurl.output.search, \"\\n\\tGiven: \" + url.search  +   \" \\n\\tTesturl.Output.search: \"+testurl.output.search);\n\t    assert.equal(url.hash , testurl.output.hash, \"\\n\\tGiven: \" + url.hash  +   \" \\n\\tTesturl.Output.hash: \"+testurl.output.hash);\n\t    assert.equal(url.href , testurl.output.href, \"\\n\\tGiven: \" + url.href  +   \" \\n\\tTesturl.Output.href: \"+testurl.output.href);\n\n\n\t} catch (e) {\n\t    if (e instanceof TypeError && expected.error === TypeError) {\n\t    } else {\n\t\tthrow e;\n\t    }\n\t}\n\t\n    }\n}\n\nfunction testOrigin(expected) {\n    return function () {\n\tlet url;\n\n\ttry {\n\t    url = new URL(expected.input, expected.base);\n\n\t    assert.equal(url.origin, expected.origin, \"\\n\\tGiven: \" + url.origin  +   \" \\n\\tExpected: \"+expected.origin);\n\t} catch (e) {\n\t    if (e instanceof TypeError && expected.error === TypeError) {\n\t    } else {\n\t\tthrow e;\n\t    }\n\t}\n\n    };\n}\n\n\nfunction testURL(expected) {\n  return function () {\n      let url;\n      try {\n\t  url = new URL(expected.input, expected.base);\n\t  console.warn(\"Protocol: \" + url.protocol)\n\t  console.warn(\"Origin: \" + url.origin)\n\t  console.warn(\"Hostname: \" + url.hostname)\n\t  console.warn(\"Host: \" + url.host)\n\t  console.warn(\"Port: \" + url.port)\n\t  console.warn(\"Path: \" + url.path)\n\t  console.warn(\"Search: \" + url.search)\n\t  console.warn(\"Hash: \" + url.hash)\n\t  console.warn(\"Href: \" + url.href)\t  \n\n      } catch (e) {\n\t  if (e instanceof TypeError && expected.protocol === \":\") {\n\t      console.error(\"TypeError...\");\n              return;\n\t  }\n\t  throw e;\n      }\n\n      console.warn(\"parsing...\");\n      if (expected.protocol === \":\" && url.protocol !== \":\") {\n\t  assert.fail(url.href, \"\", \"Expected URL to fail parsing, got \" + url.href);\n      }\n  };\n}\n\ndescribe(\"Full tests:\", function () {\n    let urls = []\n    let url = {}\n\n    url={\n\tinput:\"hyperty-runtime-esn://domain.com/12345\",\n\toutput: {\n\t    protocol: \"hyperty-runtime-esn:\",\n\t    origin: \"hyperty-runtime-esn://domain.com\",\n\t    hostname: \"domain.com\",\n\t    host: \"domain.com\",\n\t    port: \"\",\n\t    path: undefined,\n\t    search: \"\", \n\t    hash:\"\", \n\t    href: \"hyperty-runtime-esn://domain.com/12345\"\n\t}\n    }\n\n    urls.push(url)\n\n    url={\n    \tinput:\"hyperty-runtime-esn://domain.com/12345#textafterhash\",\n    \toutput: {\n\t    protocol: \"hyperty-runtime-esn:\",\n\t    origin: \"hyperty-runtime-esn://domain.com\",\n\t    hostname: \"domain.com\",\n\t    host: \"domain.com\",\n\t    port: \"\",\n\t    path: undefined,\n\t    search: \"\", \n\t    hash:\"#textafterhash\", \n\t    href: \"hyperty-runtime-esn://domain.com/12345#textafterhash\"\n    \t}\n    }\n    urls.push(url)\n\n    url={\n    \tinput:\"hyperty-runtime-esn://domain.com/12345?a=1&b=2&c=3\",\n    \toutput: {\n\t    protocol: \"hyperty-runtime-esn:\",\n\t    origin: \"hyperty-runtime-esn://domain.com\",\n\t    hostname: \"domain.com\",\n\t    host: \"domain.com\",\n\t    port: \"\",\n\t    path: undefined,\n\t    search: \"?a=1&b=2&c=3\", \n\t    hash:\"\", \n\t    href: \"hyperty-runtime-esn://domain.com/12345?a=1&b=2&c=3\"\n    \t}\n    }\n    urls.push(url)\n\n    // url={\n    // \tinput:\"hyperty-runtime-esn://domain.com/12345#hash?a=1&b=2&c=3\",\n    // \toutput: {\n    // \t    protocol: \"hyperty-runtime-esn:\",\n    // \t    origin: \"hyperty-runtime-esn://domain.com\",\n    // \t    hostname: \"domain.com\",\n    // \t    host: \"domain.com\",\n    // \t    port: \"\",\n    // \t    path: undefined,\n    // \t    search: \"?a=1&b=2&c=3\", \n    // \t    hash:\"\", \n    // \t    href: \"hyperty-runtime-esn://domain.com/12345\"\n    // \t}\n    // }\n    // urls.push(url)\n\n\n    for (let i=0; i<urls.length; i++) {\n\tit(urls[i].input+\": \", testAll(urls[i]))\n    }\n\n})\n\n\n\ndescribe(\"Tests to check 'origin':\", function () {\n    let urls = []\n    urls.push({input:\"blob:https://whatwg.org/d0360e2f-caee-469f-9a2f-87d5b0456f6f\", origin:\"https://whatwg.org:443\"})\n\n    // special scheme without port\n    urls.push({input:\"wss://rethink.org/\", origin:\"wss://rethink.org\"})\n\n    // special scheme with default port\n    urls.push({input:\"wss://rethink.org:443/\", origin:\"wss://rethink.org\"})\n\n    // special scheme without port\n    urls.push({input:\"ws://rethink.org/\", origin:\"ws://rethink.org\"})\n\n    // special scheme with different port\n    urls.push({input:\"wss://rethink.org:2345\", origin:\"wss://rethink.org:2345\"})\n\n    // special scheme with different port\n    urls.push({input:\"ws://rethink.org:1000\", origin:\"ws://rethink.org:1000\"})\n\n    // special scheme with same port as default one\n    urls.push({input:\"wss://rethink.org:443\", origin:\"wss://rethink.org\"})\n\n    urls.push({input:\"newschema://rethink.org\", origin:\"null\"})\n\n    urls.push({input:\"wss://rethink.org#section\", origin:\"wss://rethink.org\"})\n\n    urls.push({input:\"wss://rethink.org/section1/section2\", origin:\"wss://rethink.org\"})\n\n    urls.push({input:\"wss://something\", origin:\"wss://something\"})\n    urls.push({input:\"wss://a.b.c.d.e\", origin:\"wss://a.b.c.d.e\"})\n\n    // Invalid URLs\n    urls.push({input:\"wss://\", error:TypeError})\n    urls.push({input:\"://rethink.org\", error:TypeError})\n    urls.push({input:\"<some garbage>\", error:TypeError})\n\n    // Valid URLs with IPv4\n    urls.push({input:\"wss://127.0.0.1\", origin:\"wss://127.0.0.1\"})\n\n    // Invalid URLs with IPs v4\n    urls.push({input:\"wss://127.0.0.300\", error:TypeError})\n    urls.push({input:\"wss://127.0.0\", error:TypeError})\n    urls.push({input:\"wss://127.0.0.1.2\", error:TypeError})\n    urls.push({input:\"wss://ABCD:EF01:2345:6789:ABCD:EF01:2345:6789\", error:TypeError})\n\n    // reThink URLs\n    urls.push({input:\"user://twitter.com/pchainho\", origin:\"user://twitter.com\"})\n    urls.push({input:\"user://cm-lisboa.pt/campo-grande-28-building\", origin:\"user://cm-lisboa.pt\"})\n    urls.push({input:\"ctxt://myhouse/energy\", origin:\"ctxt://myhouse\"})\n    urls.push({input:\"comm://telekom.de/sdruesdow-20150802006\", origin:\"comm://telekom.de\"})\n\n    // reThink URls: hypertity runtime\n    urls.push({input:\"hyperty-runtime://domain.com/12345\", origin:\"hyperty-runtime://domain.com\"})\n    urls.push({input:\"hyperty-runtime-uuid://domain.com/12345\", origin:\"hyperty-runtime-uuid://domain.com\"})\n    urls.push({input:\"hyperty-runtime-dev-os://domain.com/12345\", origin:\"hyperty-runtime-dev-os://domain.com\"})\n    urls.push({input:\"hyperty-runtime-imei://domain.com/12345\", origin:\"hyperty-runtime-imei://domain.com\"})\n    urls.push({input:\"hyperty-runtime-esn://domain.com/12345\", origin:\"hyperty-runtime-esn://domain.com\"})\n    urls.push({input:\"hyperty-runtime-meid://domain.com/12345\", origin:\"hyperty-runtime-meid://domain.com\"})\n    urls.push({input:\"hyperty-runtime-doesnotexist://domain.com/12345\", origin:\"\"})\n    urls.push({input:\"hyperty://meo.pt/123456\", origin:\"hyperty://meo.pt/123456\"})\n\n    for (let i=0; i<urls.length; i++) {\n\tit(urls[i].input+\": \", testOrigin(urls[i]))\n    }\n}\n\n)\n\n// describe(\"Hosts\", function () {\n//     let url = {}\n//     url.input=\"newprotocol://www.google.es\";\n//     url.expected={}\n//     url.expected.protocol=\"newprotocol:\"\n//     it(\"Testing: \", testURL(url))\n\n//     url.input=\"newprotocol://www.google.es#section\";\n//     url.expected={}\n//     url.expected.protocol=\"newprotocol:\"\n//     it(\"Testing: \", testURL(url))\n\n//     url.input=\"newprotocol://google.es#section\";\n//     url.expected={}\n//     url.expected.protocol=\"newprotocol:\"\n//     it(\"Testing: \", testURL(url))\n\n//     url.input=\"newprotocol://google#section\";\n//     url.expected={}\n//     url.expected.protocol=\"newprotocol:\"\n//     it(\"Testing: \", testURL(url))\n    \n// });\n",
            "start": 50,
            "end": 8584,
            "loc": {
              "start": {
                "line": 4,
                "column": 0
              },
              "end": {
                "line": 254,
                "column": 2
              }
            }
          }
        ]
      }
    ]
  },
  "comments": [
    {
      "type": "CommentBlock",
      "value": "global describe ",
      "start": 14,
      "end": 34,
      "loc": {
        "start": {
          "line": 2,
          "column": 0
        },
        "end": {
          "line": 2,
          "column": 20
        }
      }
    },
    {
      "type": "CommentBlock",
      "value": "global it ",
      "start": 35,
      "end": 49,
      "loc": {
        "start": {
          "line": 3,
          "column": 0
        },
        "end": {
          "line": 3,
          "column": 14
        }
      }
    },
    {
      "type": "CommentBlock",
      "value": "\nconst assert = require(\"assert\");\nconst fs = require(\"fs\");\nconst URL = require(\"../lib/url\").createURLConstructor();\n\nfunction testAll(testurl) {\n    return function () {\n\tlet url;\n\n\ttry {\n\t    url = new URL(testurl.input, testurl.base);\n\t    assert.equal(url.protocol , testurl.output.protocol, \"\\n\\tGiven: *\" + url.protocol  +\"* \\n\\tTesturl.output.protocol: *\"+testurl.output.protocol+\"*\");\n\t    assert.equal(url.origin , testurl.output.origin, \"\\n\\tGiven: \" + url.origin  +   \" \\n\\tTesturl.Output.origin: \"+testurl.output.origin);\n\t    assert.equal(url.hostname , testurl.output.hostname, \"\\n\\tGiven: \" + url.hostname  +   \" \\n\\tTesturl.Output.hostname: \"+testurl.output.hostname);\n\t    assert.equal(url.host , testurl.output.host, \"\\n\\tGiven: \" + url.host  +   \" \\n\\tTesturl.Output.host: \"+testurl.output.host);\n\t    assert.equal(url.port , testurl.output.port, \"\\n\\tGiven: \" + url.port  +   \" \\n\\tTesturl.Output.port: \"+testurl.output.port);\n\t    assert.equal(url.path , testurl.output.path, \"\\n\\tGiven: \" + url.path  +   \" \\n\\tTesturl.Output.path: \"+testurl.output.path);\n\t    assert.equal(url.search , testurl.output.search, \"\\n\\tGiven: \" + url.search  +   \" \\n\\tTesturl.Output.search: \"+testurl.output.search);\n\t    assert.equal(url.hash , testurl.output.hash, \"\\n\\tGiven: \" + url.hash  +   \" \\n\\tTesturl.Output.hash: \"+testurl.output.hash);\n\t    assert.equal(url.href , testurl.output.href, \"\\n\\tGiven: \" + url.href  +   \" \\n\\tTesturl.Output.href: \"+testurl.output.href);\n\n\n\t} catch (e) {\n\t    if (e instanceof TypeError && expected.error === TypeError) {\n\t    } else {\n\t\tthrow e;\n\t    }\n\t}\n\t\n    }\n}\n\nfunction testOrigin(expected) {\n    return function () {\n\tlet url;\n\n\ttry {\n\t    url = new URL(expected.input, expected.base);\n\n\t    assert.equal(url.origin, expected.origin, \"\\n\\tGiven: \" + url.origin  +   \" \\n\\tExpected: \"+expected.origin);\n\t} catch (e) {\n\t    if (e instanceof TypeError && expected.error === TypeError) {\n\t    } else {\n\t\tthrow e;\n\t    }\n\t}\n\n    };\n}\n\n\nfunction testURL(expected) {\n  return function () {\n      let url;\n      try {\n\t  url = new URL(expected.input, expected.base);\n\t  console.warn(\"Protocol: \" + url.protocol)\n\t  console.warn(\"Origin: \" + url.origin)\n\t  console.warn(\"Hostname: \" + url.hostname)\n\t  console.warn(\"Host: \" + url.host)\n\t  console.warn(\"Port: \" + url.port)\n\t  console.warn(\"Path: \" + url.path)\n\t  console.warn(\"Search: \" + url.search)\n\t  console.warn(\"Hash: \" + url.hash)\n\t  console.warn(\"Href: \" + url.href)\t  \n\n      } catch (e) {\n\t  if (e instanceof TypeError && expected.protocol === \":\") {\n\t      console.error(\"TypeError...\");\n              return;\n\t  }\n\t  throw e;\n      }\n\n      console.warn(\"parsing...\");\n      if (expected.protocol === \":\" && url.protocol !== \":\") {\n\t  assert.fail(url.href, \"\", \"Expected URL to fail parsing, got \" + url.href);\n      }\n  };\n}\n\ndescribe(\"Full tests:\", function () {\n    let urls = []\n    let url = {}\n\n    url={\n\tinput:\"hyperty-runtime-esn://domain.com/12345\",\n\toutput: {\n\t    protocol: \"hyperty-runtime-esn:\",\n\t    origin: \"hyperty-runtime-esn://domain.com\",\n\t    hostname: \"domain.com\",\n\t    host: \"domain.com\",\n\t    port: \"\",\n\t    path: undefined,\n\t    search: \"\", \n\t    hash:\"\", \n\t    href: \"hyperty-runtime-esn://domain.com/12345\"\n\t}\n    }\n\n    urls.push(url)\n\n    url={\n    \tinput:\"hyperty-runtime-esn://domain.com/12345#textafterhash\",\n    \toutput: {\n\t    protocol: \"hyperty-runtime-esn:\",\n\t    origin: \"hyperty-runtime-esn://domain.com\",\n\t    hostname: \"domain.com\",\n\t    host: \"domain.com\",\n\t    port: \"\",\n\t    path: undefined,\n\t    search: \"\", \n\t    hash:\"#textafterhash\", \n\t    href: \"hyperty-runtime-esn://domain.com/12345#textafterhash\"\n    \t}\n    }\n    urls.push(url)\n\n    url={\n    \tinput:\"hyperty-runtime-esn://domain.com/12345?a=1&b=2&c=3\",\n    \toutput: {\n\t    protocol: \"hyperty-runtime-esn:\",\n\t    origin: \"hyperty-runtime-esn://domain.com\",\n\t    hostname: \"domain.com\",\n\t    host: \"domain.com\",\n\t    port: \"\",\n\t    path: undefined,\n\t    search: \"?a=1&b=2&c=3\", \n\t    hash:\"\", \n\t    href: \"hyperty-runtime-esn://domain.com/12345?a=1&b=2&c=3\"\n    \t}\n    }\n    urls.push(url)\n\n    // url={\n    // \tinput:\"hyperty-runtime-esn://domain.com/12345#hash?a=1&b=2&c=3\",\n    // \toutput: {\n    // \t    protocol: \"hyperty-runtime-esn:\",\n    // \t    origin: \"hyperty-runtime-esn://domain.com\",\n    // \t    hostname: \"domain.com\",\n    // \t    host: \"domain.com\",\n    // \t    port: \"\",\n    // \t    path: undefined,\n    // \t    search: \"?a=1&b=2&c=3\", \n    // \t    hash:\"\", \n    // \t    href: \"hyperty-runtime-esn://domain.com/12345\"\n    // \t}\n    // }\n    // urls.push(url)\n\n\n    for (let i=0; i<urls.length; i++) {\n\tit(urls[i].input+\": \", testAll(urls[i]))\n    }\n\n})\n\n\n\ndescribe(\"Tests to check 'origin':\", function () {\n    let urls = []\n    urls.push({input:\"blob:https://whatwg.org/d0360e2f-caee-469f-9a2f-87d5b0456f6f\", origin:\"https://whatwg.org:443\"})\n\n    // special scheme without port\n    urls.push({input:\"wss://rethink.org/\", origin:\"wss://rethink.org\"})\n\n    // special scheme with default port\n    urls.push({input:\"wss://rethink.org:443/\", origin:\"wss://rethink.org\"})\n\n    // special scheme without port\n    urls.push({input:\"ws://rethink.org/\", origin:\"ws://rethink.org\"})\n\n    // special scheme with different port\n    urls.push({input:\"wss://rethink.org:2345\", origin:\"wss://rethink.org:2345\"})\n\n    // special scheme with different port\n    urls.push({input:\"ws://rethink.org:1000\", origin:\"ws://rethink.org:1000\"})\n\n    // special scheme with same port as default one\n    urls.push({input:\"wss://rethink.org:443\", origin:\"wss://rethink.org\"})\n\n    urls.push({input:\"newschema://rethink.org\", origin:\"null\"})\n\n    urls.push({input:\"wss://rethink.org#section\", origin:\"wss://rethink.org\"})\n\n    urls.push({input:\"wss://rethink.org/section1/section2\", origin:\"wss://rethink.org\"})\n\n    urls.push({input:\"wss://something\", origin:\"wss://something\"})\n    urls.push({input:\"wss://a.b.c.d.e\", origin:\"wss://a.b.c.d.e\"})\n\n    // Invalid URLs\n    urls.push({input:\"wss://\", error:TypeError})\n    urls.push({input:\"://rethink.org\", error:TypeError})\n    urls.push({input:\"<some garbage>\", error:TypeError})\n\n    // Valid URLs with IPv4\n    urls.push({input:\"wss://127.0.0.1\", origin:\"wss://127.0.0.1\"})\n\n    // Invalid URLs with IPs v4\n    urls.push({input:\"wss://127.0.0.300\", error:TypeError})\n    urls.push({input:\"wss://127.0.0\", error:TypeError})\n    urls.push({input:\"wss://127.0.0.1.2\", error:TypeError})\n    urls.push({input:\"wss://ABCD:EF01:2345:6789:ABCD:EF01:2345:6789\", error:TypeError})\n\n    // reThink URLs\n    urls.push({input:\"user://twitter.com/pchainho\", origin:\"user://twitter.com\"})\n    urls.push({input:\"user://cm-lisboa.pt/campo-grande-28-building\", origin:\"user://cm-lisboa.pt\"})\n    urls.push({input:\"ctxt://myhouse/energy\", origin:\"ctxt://myhouse\"})\n    urls.push({input:\"comm://telekom.de/sdruesdow-20150802006\", origin:\"comm://telekom.de\"})\n\n    // reThink URls: hypertity runtime\n    urls.push({input:\"hyperty-runtime://domain.com/12345\", origin:\"hyperty-runtime://domain.com\"})\n    urls.push({input:\"hyperty-runtime-uuid://domain.com/12345\", origin:\"hyperty-runtime-uuid://domain.com\"})\n    urls.push({input:\"hyperty-runtime-dev-os://domain.com/12345\", origin:\"hyperty-runtime-dev-os://domain.com\"})\n    urls.push({input:\"hyperty-runtime-imei://domain.com/12345\", origin:\"hyperty-runtime-imei://domain.com\"})\n    urls.push({input:\"hyperty-runtime-esn://domain.com/12345\", origin:\"hyperty-runtime-esn://domain.com\"})\n    urls.push({input:\"hyperty-runtime-meid://domain.com/12345\", origin:\"hyperty-runtime-meid://domain.com\"})\n    urls.push({input:\"hyperty-runtime-doesnotexist://domain.com/12345\", origin:\"\"})\n    urls.push({input:\"hyperty://meo.pt/123456\", origin:\"hyperty://meo.pt/123456\"})\n\n    for (let i=0; i<urls.length; i++) {\n\tit(urls[i].input+\": \", testOrigin(urls[i]))\n    }\n}\n\n)\n\n// describe(\"Hosts\", function () {\n//     let url = {}\n//     url.input=\"newprotocol://www.google.es\";\n//     url.expected={}\n//     url.expected.protocol=\"newprotocol:\"\n//     it(\"Testing: \", testURL(url))\n\n//     url.input=\"newprotocol://www.google.es#section\";\n//     url.expected={}\n//     url.expected.protocol=\"newprotocol:\"\n//     it(\"Testing: \", testURL(url))\n\n//     url.input=\"newprotocol://google.es#section\";\n//     url.expected={}\n//     url.expected.protocol=\"newprotocol:\"\n//     it(\"Testing: \", testURL(url))\n\n//     url.input=\"newprotocol://google#section\";\n//     url.expected={}\n//     url.expected.protocol=\"newprotocol:\"\n//     it(\"Testing: \", testURL(url))\n    \n// });\n",
      "start": 50,
      "end": 8584,
      "loc": {
        "start": {
          "line": 4,
          "column": 0
        },
        "end": {
          "line": 254,
          "column": 2
        }
      }
    }
  ],
  "tokens": [
    {
      "type": {
        "label": "string",
        "beforeExpr": false,
        "startsExpr": true,
        "rightAssociative": false,
        "isLoop": false,
        "isAssign": false,
        "prefix": false,
        "postfix": false,
        "binop": null,
        "updateContext": null
      },
      "value": "use strict",
      "start": 0,
      "end": 12,
      "loc": {
        "start": {
          "line": 1,
          "column": 0
        },
        "end": {
          "line": 1,
          "column": 12
        }
      }
    },
    {
      "type": {
        "label": ";",
        "beforeExpr": true,
        "startsExpr": false,
        "rightAssociative": false,
        "isLoop": false,
        "isAssign": false,
        "prefix": false,
        "postfix": false,
        "binop": null,
        "updateContext": null
      },
      "start": 12,
      "end": 13,
      "loc": {
        "start": {
          "line": 1,
          "column": 12
        },
        "end": {
          "line": 1,
          "column": 13
        }
      }
    },
    {
      "type": "CommentBlock",
      "value": "global describe ",
      "start": 14,
      "end": 34,
      "loc": {
        "start": {
          "line": 2,
          "column": 0
        },
        "end": {
          "line": 2,
          "column": 20
        }
      }
    },
    {
      "type": "CommentBlock",
      "value": "global it ",
      "start": 35,
      "end": 49,
      "loc": {
        "start": {
          "line": 3,
          "column": 0
        },
        "end": {
          "line": 3,
          "column": 14
        }
      }
    },
    {
      "type": "CommentBlock",
      "value": "\nconst assert = require(\"assert\");\nconst fs = require(\"fs\");\nconst URL = require(\"../lib/url\").createURLConstructor();\n\nfunction testAll(testurl) {\n    return function () {\n\tlet url;\n\n\ttry {\n\t    url = new URL(testurl.input, testurl.base);\n\t    assert.equal(url.protocol , testurl.output.protocol, \"\\n\\tGiven: *\" + url.protocol  +\"* \\n\\tTesturl.output.protocol: *\"+testurl.output.protocol+\"*\");\n\t    assert.equal(url.origin , testurl.output.origin, \"\\n\\tGiven: \" + url.origin  +   \" \\n\\tTesturl.Output.origin: \"+testurl.output.origin);\n\t    assert.equal(url.hostname , testurl.output.hostname, \"\\n\\tGiven: \" + url.hostname  +   \" \\n\\tTesturl.Output.hostname: \"+testurl.output.hostname);\n\t    assert.equal(url.host , testurl.output.host, \"\\n\\tGiven: \" + url.host  +   \" \\n\\tTesturl.Output.host: \"+testurl.output.host);\n\t    assert.equal(url.port , testurl.output.port, \"\\n\\tGiven: \" + url.port  +   \" \\n\\tTesturl.Output.port: \"+testurl.output.port);\n\t    assert.equal(url.path , testurl.output.path, \"\\n\\tGiven: \" + url.path  +   \" \\n\\tTesturl.Output.path: \"+testurl.output.path);\n\t    assert.equal(url.search , testurl.output.search, \"\\n\\tGiven: \" + url.search  +   \" \\n\\tTesturl.Output.search: \"+testurl.output.search);\n\t    assert.equal(url.hash , testurl.output.hash, \"\\n\\tGiven: \" + url.hash  +   \" \\n\\tTesturl.Output.hash: \"+testurl.output.hash);\n\t    assert.equal(url.href , testurl.output.href, \"\\n\\tGiven: \" + url.href  +   \" \\n\\tTesturl.Output.href: \"+testurl.output.href);\n\n\n\t} catch (e) {\n\t    if (e instanceof TypeError && expected.error === TypeError) {\n\t    } else {\n\t\tthrow e;\n\t    }\n\t}\n\t\n    }\n}\n\nfunction testOrigin(expected) {\n    return function () {\n\tlet url;\n\n\ttry {\n\t    url = new URL(expected.input, expected.base);\n\n\t    assert.equal(url.origin, expected.origin, \"\\n\\tGiven: \" + url.origin  +   \" \\n\\tExpected: \"+expected.origin);\n\t} catch (e) {\n\t    if (e instanceof TypeError && expected.error === TypeError) {\n\t    } else {\n\t\tthrow e;\n\t    }\n\t}\n\n    };\n}\n\n\nfunction testURL(expected) {\n  return function () {\n      let url;\n      try {\n\t  url = new URL(expected.input, expected.base);\n\t  console.warn(\"Protocol: \" + url.protocol)\n\t  console.warn(\"Origin: \" + url.origin)\n\t  console.warn(\"Hostname: \" + url.hostname)\n\t  console.warn(\"Host: \" + url.host)\n\t  console.warn(\"Port: \" + url.port)\n\t  console.warn(\"Path: \" + url.path)\n\t  console.warn(\"Search: \" + url.search)\n\t  console.warn(\"Hash: \" + url.hash)\n\t  console.warn(\"Href: \" + url.href)\t  \n\n      } catch (e) {\n\t  if (e instanceof TypeError && expected.protocol === \":\") {\n\t      console.error(\"TypeError...\");\n              return;\n\t  }\n\t  throw e;\n      }\n\n      console.warn(\"parsing...\");\n      if (expected.protocol === \":\" && url.protocol !== \":\") {\n\t  assert.fail(url.href, \"\", \"Expected URL to fail parsing, got \" + url.href);\n      }\n  };\n}\n\ndescribe(\"Full tests:\", function () {\n    let urls = []\n    let url = {}\n\n    url={\n\tinput:\"hyperty-runtime-esn://domain.com/12345\",\n\toutput: {\n\t    protocol: \"hyperty-runtime-esn:\",\n\t    origin: \"hyperty-runtime-esn://domain.com\",\n\t    hostname: \"domain.com\",\n\t    host: \"domain.com\",\n\t    port: \"\",\n\t    path: undefined,\n\t    search: \"\", \n\t    hash:\"\", \n\t    href: \"hyperty-runtime-esn://domain.com/12345\"\n\t}\n    }\n\n    urls.push(url)\n\n    url={\n    \tinput:\"hyperty-runtime-esn://domain.com/12345#textafterhash\",\n    \toutput: {\n\t    protocol: \"hyperty-runtime-esn:\",\n\t    origin: \"hyperty-runtime-esn://domain.com\",\n\t    hostname: \"domain.com\",\n\t    host: \"domain.com\",\n\t    port: \"\",\n\t    path: undefined,\n\t    search: \"\", \n\t    hash:\"#textafterhash\", \n\t    href: \"hyperty-runtime-esn://domain.com/12345#textafterhash\"\n    \t}\n    }\n    urls.push(url)\n\n    url={\n    \tinput:\"hyperty-runtime-esn://domain.com/12345?a=1&b=2&c=3\",\n    \toutput: {\n\t    protocol: \"hyperty-runtime-esn:\",\n\t    origin: \"hyperty-runtime-esn://domain.com\",\n\t    hostname: \"domain.com\",\n\t    host: \"domain.com\",\n\t    port: \"\",\n\t    path: undefined,\n\t    search: \"?a=1&b=2&c=3\", \n\t    hash:\"\", \n\t    href: \"hyperty-runtime-esn://domain.com/12345?a=1&b=2&c=3\"\n    \t}\n    }\n    urls.push(url)\n\n    // url={\n    // \tinput:\"hyperty-runtime-esn://domain.com/12345#hash?a=1&b=2&c=3\",\n    // \toutput: {\n    // \t    protocol: \"hyperty-runtime-esn:\",\n    // \t    origin: \"hyperty-runtime-esn://domain.com\",\n    // \t    hostname: \"domain.com\",\n    // \t    host: \"domain.com\",\n    // \t    port: \"\",\n    // \t    path: undefined,\n    // \t    search: \"?a=1&b=2&c=3\", \n    // \t    hash:\"\", \n    // \t    href: \"hyperty-runtime-esn://domain.com/12345\"\n    // \t}\n    // }\n    // urls.push(url)\n\n\n    for (let i=0; i<urls.length; i++) {\n\tit(urls[i].input+\": \", testAll(urls[i]))\n    }\n\n})\n\n\n\ndescribe(\"Tests to check 'origin':\", function () {\n    let urls = []\n    urls.push({input:\"blob:https://whatwg.org/d0360e2f-caee-469f-9a2f-87d5b0456f6f\", origin:\"https://whatwg.org:443\"})\n\n    // special scheme without port\n    urls.push({input:\"wss://rethink.org/\", origin:\"wss://rethink.org\"})\n\n    // special scheme with default port\n    urls.push({input:\"wss://rethink.org:443/\", origin:\"wss://rethink.org\"})\n\n    // special scheme without port\n    urls.push({input:\"ws://rethink.org/\", origin:\"ws://rethink.org\"})\n\n    // special scheme with different port\n    urls.push({input:\"wss://rethink.org:2345\", origin:\"wss://rethink.org:2345\"})\n\n    // special scheme with different port\n    urls.push({input:\"ws://rethink.org:1000\", origin:\"ws://rethink.org:1000\"})\n\n    // special scheme with same port as default one\n    urls.push({input:\"wss://rethink.org:443\", origin:\"wss://rethink.org\"})\n\n    urls.push({input:\"newschema://rethink.org\", origin:\"null\"})\n\n    urls.push({input:\"wss://rethink.org#section\", origin:\"wss://rethink.org\"})\n\n    urls.push({input:\"wss://rethink.org/section1/section2\", origin:\"wss://rethink.org\"})\n\n    urls.push({input:\"wss://something\", origin:\"wss://something\"})\n    urls.push({input:\"wss://a.b.c.d.e\", origin:\"wss://a.b.c.d.e\"})\n\n    // Invalid URLs\n    urls.push({input:\"wss://\", error:TypeError})\n    urls.push({input:\"://rethink.org\", error:TypeError})\n    urls.push({input:\"<some garbage>\", error:TypeError})\n\n    // Valid URLs with IPv4\n    urls.push({input:\"wss://127.0.0.1\", origin:\"wss://127.0.0.1\"})\n\n    // Invalid URLs with IPs v4\n    urls.push({input:\"wss://127.0.0.300\", error:TypeError})\n    urls.push({input:\"wss://127.0.0\", error:TypeError})\n    urls.push({input:\"wss://127.0.0.1.2\", error:TypeError})\n    urls.push({input:\"wss://ABCD:EF01:2345:6789:ABCD:EF01:2345:6789\", error:TypeError})\n\n    // reThink URLs\n    urls.push({input:\"user://twitter.com/pchainho\", origin:\"user://twitter.com\"})\n    urls.push({input:\"user://cm-lisboa.pt/campo-grande-28-building\", origin:\"user://cm-lisboa.pt\"})\n    urls.push({input:\"ctxt://myhouse/energy\", origin:\"ctxt://myhouse\"})\n    urls.push({input:\"comm://telekom.de/sdruesdow-20150802006\", origin:\"comm://telekom.de\"})\n\n    // reThink URls: hypertity runtime\n    urls.push({input:\"hyperty-runtime://domain.com/12345\", origin:\"hyperty-runtime://domain.com\"})\n    urls.push({input:\"hyperty-runtime-uuid://domain.com/12345\", origin:\"hyperty-runtime-uuid://domain.com\"})\n    urls.push({input:\"hyperty-runtime-dev-os://domain.com/12345\", origin:\"hyperty-runtime-dev-os://domain.com\"})\n    urls.push({input:\"hyperty-runtime-imei://domain.com/12345\", origin:\"hyperty-runtime-imei://domain.com\"})\n    urls.push({input:\"hyperty-runtime-esn://domain.com/12345\", origin:\"hyperty-runtime-esn://domain.com\"})\n    urls.push({input:\"hyperty-runtime-meid://domain.com/12345\", origin:\"hyperty-runtime-meid://domain.com\"})\n    urls.push({input:\"hyperty-runtime-doesnotexist://domain.com/12345\", origin:\"\"})\n    urls.push({input:\"hyperty://meo.pt/123456\", origin:\"hyperty://meo.pt/123456\"})\n\n    for (let i=0; i<urls.length; i++) {\n\tit(urls[i].input+\": \", testOrigin(urls[i]))\n    }\n}\n\n)\n\n// describe(\"Hosts\", function () {\n//     let url = {}\n//     url.input=\"newprotocol://www.google.es\";\n//     url.expected={}\n//     url.expected.protocol=\"newprotocol:\"\n//     it(\"Testing: \", testURL(url))\n\n//     url.input=\"newprotocol://www.google.es#section\";\n//     url.expected={}\n//     url.expected.protocol=\"newprotocol:\"\n//     it(\"Testing: \", testURL(url))\n\n//     url.input=\"newprotocol://google.es#section\";\n//     url.expected={}\n//     url.expected.protocol=\"newprotocol:\"\n//     it(\"Testing: \", testURL(url))\n\n//     url.input=\"newprotocol://google#section\";\n//     url.expected={}\n//     url.expected.protocol=\"newprotocol:\"\n//     it(\"Testing: \", testURL(url))\n    \n// });\n",
      "start": 50,
      "end": 8584,
      "loc": {
        "start": {
          "line": 4,
          "column": 0
        },
        "end": {
          "line": 254,
          "column": 2
        }
      }
    },
    {
      "type": {
        "label": "eof",
        "beforeExpr": false,
        "startsExpr": false,
        "rightAssociative": false,
        "isLoop": false,
        "isAssign": false,
        "prefix": false,
        "postfix": false,
        "binop": null,
        "updateContext": null
      },
      "start": 8584,
      "end": 8584,
      "loc": {
        "start": {
          "line": 254,
          "column": 2
        },
        "end": {
          "line": 254,
          "column": 2
        }
      }
    }
  ]
}